var Nc=Object.defineProperty;var o=(_o,Ja)=>Nc(_o,"name",{value:Ja,configurable:!0});(()=>{var _o={850:(at,l,C)=>{"use strict";C.r(l),C.d(l,{AppInsightsCore:()=>Ft,BaseCore:()=>Sn,BaseTelemetryPlugin:()=>Br.i,CoreUtils:()=>j.Tr,DiagnosticLogger:()=>be.AQ,ESPromise:()=>gr,ESPromiseScheduler:()=>ar,EventHelper:()=>_r.zB,EventLatency:()=>N,EventPersistence:()=>y,EventPropertyType:()=>m,EventsDiscardedReason:()=>Zn.h,FullVersionString:()=>j.vs,InternalAppInsightsCore:()=>Re.F,InternalBaseCore:()=>Gt.A,LoggingSeverity:()=>w.X,MinChannelPriorty:()=>Gn,NotificationManager:()=>pr.f,PerfEvent:()=>Ne.zn,PerfManager:()=>Ne.Jk,ProcessTelemetryContext:()=>On.Vi,TraceLevel:()=>U,Undefined:()=>Tr.jA,Utils:()=>j.cQ,ValueKind:()=>B,ValueSanitizer:()=>vr,Version:()=>j.Gf,_ExtendedInternalMessageId:()=>W,_InternalLogMessage:()=>be.lQ,_InternalMessageId:()=>w.v,__getRegisteredEvents:()=>Cn.um,_logInternalMessage:()=>be.L4,_throwInternal:()=>be.kP,_warnToConsole:()=>be.jV,addEventHandler:()=>Cn.Ib,addEventListeners:()=>Cn.yw,addPageHideEventListener:()=>Cn.TJ,addPageShowEventListener:()=>Cn.nD,addPageUnloadEventListener:()=>Cn.c9,areCookiesSupported:()=>Hr.p7,arrForEach:()=>P.tO,arrIndexOf:()=>P.UA,arrMap:()=>P.Mr,arrReduce:()=>P.Xz,attachEvent:()=>Cn.pZ,cookieAvailable:()=>Hr.p7,createCookieMgr:()=>Hr.Nz,createEnumStyle:()=>v.By,createGuid:()=>j.cm,createProcessTelemetryContext:()=>On.CD,createTraceParent:()=>lr.SU,createUniqueNamespace:()=>wi.J,createUnloadHandlerContainer:()=>ui.Y,dateNow:()=>P.m6,deleteCookie:()=>j.kT,detachEvent:()=>Cn.pD,disableCookies:()=>j.oF,disallowsSameSiteNone:()=>Hr.UY,doPerf:()=>Ne.Lm,dumpObj:()=>q.eU,eventOff:()=>Cn.QY,eventOn:()=>Cn.XO,extend:()=>j.l7,findW3cTraceParent:()=>lr.lq,formatTraceParent:()=>lr.aR,generateW3CId:()=>_r.DO,getCommonSchemaMetaData:()=>j.Vv,getConsole:()=>q.dr,getCookie:()=>j.ej,getCookieValue:()=>j.Do,getCrypto:()=>q.MX,getDocument:()=>q.Me,getExceptionName:()=>P.jj,getFieldValueType:()=>j.Sy,getGlobal:()=>Lr.Rd,getGlobalInst:()=>q.a8,getHistory:()=>q.s1,getIEVersion:()=>q.sA,getISOString:()=>P.Y6,getJSON:()=>q.xA,getLocation:()=>q.k$,getMsCrypto:()=>q.gz,getNavigator:()=>q.jW,getPerformance:()=>q.r,getSetValue:()=>P.qK,getTenantId:()=>j.jM,getTime:()=>j.hK,getWindow:()=>q.Jj,hasDocument:()=>q.Nv,hasHistory:()=>q.fE,hasJSON:()=>q.nS,hasNavigator:()=>q.d6,hasOwnProperty:()=>P.nr,hasWindow:()=>q.Ym,isArray:()=>P.kJ,isArrayValid:()=>j.JT,isBeaconsSupported:()=>q.MF,isBoolean:()=>P.jn,isChromium:()=>j.mJ,isDate:()=>P.J_,isDocumentObjectAvailable:()=>j.x9,isError:()=>P.VZ,isFetchSupported:()=>q.JO,isFunction:()=>P.mf,isIE:()=>q.w1,isLatency:()=>j.r7,isNotTruthy:()=>P.F,isNullOrUndefined:()=>P.le,isNumber:()=>P.hj,isObject:()=>P.Kn,isReactNative:()=>q.b$,isSampledFlag:()=>lr.Pn,isString:()=>P.HD,isTruthy:()=>P.fQ,isTypeof:()=>P.Ym,isUint8ArrayAvailable:()=>j.IZ,isUndefined:()=>P.o8,isValidSpanId:()=>lr.Lc,isValidTraceId:()=>lr.jN,isValidTraceParent:()=>lr.J6,isValueAssigned:()=>j.Sn,isValueKind:()=>j.oS,isWindowObjectAvailable:()=>j.dH,isXhrSupported:()=>q.Z3,mergeEvtNamespace:()=>Cn.jU,newGuid:()=>_r.GW,newId:()=>Qr.pZ,normalizeJsName:()=>P.Gf,objCreate:()=>Lr.pu,objDefineAccessors:()=>P.l_,objForEachKey:()=>P.rW,objFreeze:()=>P.FL,objKeys:()=>P.FY,objSeal:()=>P.Xi,openXhr:()=>j.ot,optimizeObject:()=>P.Ax,parseTraceParent:()=>lr.j_,perfNow:()=>_r.Jj,proxyAssign:()=>P.cf,proxyFunctionAs:()=>P.Oi,proxyFunctions:()=>P.Vb,random32:()=>Qr._l,randomValue:()=>Qr.az,removeEventHandler:()=>Cn.C1,removeEventListeners:()=>Cn.nJ,removePageHideEventListener:()=>Cn.C9,removePageShowEventListener:()=>Cn.Yl,removePageUnloadEventListener:()=>Cn.JA,safeGetCookieMgr:()=>Hr.JP,safeGetLogger:()=>be.vH,sanitizeProperty:()=>j.yj,setCookie:()=>j.d8,setEnableEnvMocks:()=>q.dI,setProcessTelemetryTimings:()=>j.if,setValue:()=>P.sO,strContains:()=>P._Q,strEndsWith:()=>P.Id,strFunction:()=>Tr.cb,strObject:()=>Tr.fK,strPrototype:()=>Tr.hB,strStartsWith:()=>P.xe,strTrim:()=>P.nd,strUndefined:()=>Tr.jA,throwError:()=>P._y,toISOString:()=>P.Y6,useXDomainRequest:()=>q.cp});var R=C(1088),v=C(4873),P=C(6708),w=C(7310),B=(0,v.By)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),N=(0,v.By)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),m=(0,v.By)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),y=(0,v.By)({Normal:1,Critical:2}),U=(0,v.By)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),W=(0,P.FL)((0,R.uc)((0,R.uc)({},w.v),(0,v.By)({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520})));/*!
 * Microsoft Dynamic Proto Utility, 1.1.7
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var _,O="undefined",x="constructor",J="prototype",se="function",Ae="_dynInstFuncs",$="_isDynProxy",Q="_dynClass",X="_dynCls$",L="_dynInstChk",Y=L,k="_dfOpts",le="_unknown_",G="__proto__",ve="_dyn"+G,_e="__dynProto$Gbl",Ie="_dynInstProto",ie="useBaseInst",Se="setInstFuncs",D=Object,He=D.getPrototypeOf,fe=D.getOwnPropertyNames;function ue(){var T;return typeof globalThis!==O&&(T=globalThis),!T&&typeof self!==O&&(T=self),!T&&typeof window!==O&&(T=window),!T&&typeof C.g!==O&&(T=C.g),T||{}}o(ue,"_getGlobal");var z=ue(),he=z[_e]||(z[_e]={o:(_={},_[Se]=!0,_[ie]=!0,_),n:1e3});function xe(T,ce){return T&&D[J].hasOwnProperty.call(T,ce)}o(xe,"_hasOwnProperty");function Ve(T){return T&&(T===D[J]||T===Array[J])}o(Ve,"_isObjectOrArrayPrototype");function oe(T){return Ve(T)||T===Function[J]}o(oe,"_isObjectArrayOrFunctionPrototype");function nt(T){var ce;if(T){if(He)return He(T);var Ee=T[G]||T[J]||(T[x]?T[x][J]:null);ce=T[ve]||Ee,xe(T,ve)||(delete T[Ie],ce=T[ve]=T[Ie]||T[ve],T[Ie]=Ee)}return ce}o(nt,"_getObjProto");function dt(T,ce){var Ee=[];if(fe)Ee=fe(T);else for(var Ue in T)typeof Ue=="string"&&xe(T,Ue)&&Ee.push(Ue);if(Ee&&Ee.length>0)for(var et=0;et<Ee.length;et++)ce(Ee[et])}o(dt,"_forEachProp");function ht(T,ce,Ee){return ce!==x&&typeof T[ce]===se&&(Ee||xe(T,ce))}o(ht,"_isDynamicCandidate");function I(T){throw new TypeError("DynamicProto: "+T)}o(I,"_throwTypeError");function H(T){var ce={};return dt(T,function(Ee){!ce[Ee]&&ht(T,Ee,!1)&&(ce[Ee]=T[Ee])}),ce}o(H,"_getInstanceFuncs");function ne(T,ce){for(var Ee=T.length-1;Ee>=0;Ee--)if(T[Ee]===ce)return!0;return!1}o(ne,"_hasVisited");function ge(T,ce,Ee,Ue){function et(Tt,on,St){var Jt=on[St];if(Jt[$]&&Ue){var Ot=Tt[Ae]||{};Ot[Y]!==!1&&(Jt=(Ot[on[Q]]||{})[St]||Jt)}return function(){return Jt.apply(Tt,arguments)}}o(et,"_instFuncProxy");var Be={};dt(Ee,function(Tt){Be[Tt]=et(ce,Ee,Tt)});for(var lt=nt(T),_t=[];lt&&!oe(lt)&&!ne(_t,lt);)dt(lt,function(Tt){!Be[Tt]&&ht(lt,Tt,!He)&&(Be[Tt]=et(ce,lt,Tt))}),_t.push(lt),lt=nt(lt);return Be}o(ge,"_getBaseFuncs");function Ke(T,ce,Ee,Ue){var et=null;if(T&&xe(Ee,Q)){var Be=T[Ae]||{};if(et=(Be[Ee[Q]]||{})[ce],et||I("Missing ["+ce+"] "+se),!et[L]&&Be[Y]!==!1){for(var lt=!xe(T,ce),_t=nt(T),Tt=[];lt&&_t&&!oe(_t)&&!ne(Tt,_t);){var on=_t[ce];if(on){lt=on===Ue;break}Tt.push(_t),_t=nt(_t)}try{lt&&(T[ce]=et),et[L]=1}catch(St){Be[Y]=!1}}}return et}o(Ke,"_getInstFunc");function Fe(T,ce,Ee){var Ue=ce[T];return Ue===Ee&&(Ue=nt(ce)[T]),typeof Ue!==se&&I("["+T+"] is not a "+se),Ue}o(Fe,"_getProtoFunc");function de(T,ce,Ee,Ue,et){function Be(Tt,on){var St=o(function(){var Jt=Ke(this,on,Tt,St)||Fe(on,Tt,St);return Jt.apply(this,arguments)},"dynProtoProxy");return St[$]=1,St}if(o(Be,"_createDynamicPrototype"),!Ve(T)){var lt=Ee[Ae]=Ee[Ae]||{},_t=lt[ce]=lt[ce]||{};lt[Y]!==!1&&(lt[Y]=!!et),dt(Ee,function(Tt){ht(Ee,Tt,!1)&&Ee[Tt]!==Ue[Tt]&&(_t[Tt]=Ee[Tt],delete Ee[Tt],(!xe(T,Tt)||T[Tt]&&!T[Tt][$])&&(T[Tt]=Be(T,Tt)))})}}o(de,"_populatePrototype");function Ce(T,ce){if(He){for(var Ee=[],Ue=nt(ce);Ue&&!oe(Ue)&&!ne(Ee,Ue);){if(Ue===T)return!0;Ee.push(Ue),Ue=nt(Ue)}return!1}return!0}o(Ce,"_checkPrototype");function Me(T,ce){return xe(T,J)?T.name||ce||le:((T||{})[x]||{}).name||ce||le}o(Me,"_getObjName");function Qe(T,ce,Ee,Ue){xe(T,J)||I("theClass is an invalid class definition.");var et=T[J];Ce(et,ce)||I("["+Me(T)+"] not in hierarchy of ["+Me(ce)+"]");var Be=null;xe(et,Q)?Be=et[Q]:(Be=X+Me(T,"_")+"$"+he.n,he.n++,et[Q]=Be);var lt=Qe[k],_t=!!lt[ie];_t&&Ue&&Ue[ie]!==void 0&&(_t=!!Ue[ie]);var Tt=H(ce),on=ge(et,ce,Tt,_t);Ee(ce,on);var St=!!He&&!!lt[Se];St&&Ue&&(St=!!Ue[Se]),de(et,Be,ce,Tt,St!==!1)}o(Qe,"dynamicProto"),Qe[k]=he.o;var be=C(5018),Ne=C(9288),q=C(7630),Re=C(5121),ae=C(7984),j=C(3599),Ye=function(T){(0,R.ne)(ce,T);function ce(){var Ee=T.call(this)||this;return Ee.pluginVersionStringArr=[],Qe(ce,Ee,function(Ue,et){(!Ue.logger||!Ue.logger.queue)&&(Ue.logger=new be.AQ({loggingLevelConsole:1})),Ue.initialize=function(Be,lt,_t,Tt){(0,Ne.Lm)(Ue,function(){return"AppInsightsCore.initialize"},function(){var on=Ue.pluginVersionStringArr;if(Be){Be.endpointUrl||(Be.endpointUrl=ae.YT);var St=Be.propertyStorageOverride;St&&(!St.getProperty||!St.setProperty)&&(0,P._y)("Invalid property storage override passed."),Be.channels&&(0,P.tO)(Be.channels,function(Ut){Ut&&(0,P.tO)(Ut,function(Mt){if(Mt.identifier&&Mt.version){var zn=Mt.identifier+"="+Mt.version;on.push(zn)}})})}Ue.getWParam=function(){return typeof document!="undefined"||!!Be.enableWParam?0:-1},lt&&(0,P.tO)(lt,function(Ut){if(Ut&&Ut.identifier&&Ut.version){var Mt=Ut.identifier+"="+Ut.version;on.push(Mt)}}),Ue.pluginVersionString=on.join(";"),Ue.pluginVersionStringArr=on;try{et.initialize(Be,lt,_t,Tt),Ue.pollInternalLogs("InternalLog")}catch(Ut){var Jt=Ue.logger,Ot=(0,q.eU)(Ut);Ot.indexOf("channels")!==-1&&(Ot+=`
 - Channels must be provided through config.channels only!`),(0,be.kP)(Jt,1,514,"SDK Initialization Failed - no telemetry will be sent: "+Ot)}},function(){return{config:Be,extensions:lt,logger:_t,notificationManager:Tt}})},Ue.track=function(Be){(0,Ne.Lm)(Ue,function(){return"AppInsightsCore.track"},function(){var lt=Be;if(lt){lt.timings=lt.timings||{},lt.timings.trackStart=(0,j.hK)(),(0,j.r7)(lt.latency)||(lt.latency=1);var _t=lt.ext=lt.ext||{};_t.sdk=_t.sdk||{},_t.sdk.ver=j.vs;var Tt=lt.baseData=lt.baseData||{};Tt[ae.o6]=Tt[ae.o6]||{};var on=Tt[ae.o6];on[ae.p8]=on[ae.p8]||Ue.pluginVersionString||ae.qS}et.track(lt)},function(){return{item:Be}},!Be.sync)}}),Ee}return o(ce,"AppInsightsCore"),ce.__ieDyn=1,ce}(Re.F);const Ft=Ye;var Gt=C(6900),xn=function(T){(0,R.ne)(ce,T);function ce(){var Ee=T.call(this)||this;return Qe(ce,Ee,function(Ue,et){Ue.initialize=function(Be,lt,_t,Tt){Be&&!Be.endpointUrl&&(Be.endpointUrl=ae.YT),Ue.getWParam=function(){return j.x9||!!Be.enableWParam?0:-1};try{et.initialize(Be,lt,_t,Tt)}catch(on){(0,be.kP)(Ue.logger,1,514,"Initialization Failed: "+(0,q.eU)(on)+`
 - Note: Channels must be provided through config.channels only`)}},Ue.track=function(Be){var lt=Be;if(lt){var _t=lt.ext=lt.ext||{};_t.sdk=_t.sdk||{},_t.sdk.ver=j.vs}et.track(lt)}}),Ee}return o(ce,"BaseCore"),ce.__ieDyn=1,ce}(Gt.A);const Sn=xn;var jn=P.mf;function Xn(T,ce,Ee){return function(Ue){T[ce]=Ue,Ee()}}o(Xn,"_createPromiseAllOnResolvedFunction");var Kn=function(){function T(ce){var Ee=0,Ue=null,et=[];Qe(T,this,function(on){on.then=function(St,Jt){return new T(function(Ot,Ut){Be(St,Jt,Ot,Ut)})},on.catch=function(St){return on.then(null,St)}});function Be(on,St,Jt,Ot){et.push(function(){var Ut;try{Ee===1?Ut=jn(on)?on(Ue):Ue:Ut=jn(St)?St(Ue):Ue,Ut instanceof T?Ut.then(Jt,Ot):Ee===2&&!jn(St)?Ot(Ut):Jt(Ut)}catch(Mt){Ot(Mt);return}}),Ee!==0&&lt()}o(Be,"_enqueue");function lt(){if(et.length>0){var on=et.slice();et=[],setTimeout(function(){for(var St=0,Jt=on.length;St<Jt;++St)try{on[St]()}catch(Ot){}},0)}}o(lt,"_processQueue");function _t(on){Ee===0&&(Ue=on,Ee=1,lt())}o(_t,"_resolve");function Tt(on){Ee===0&&(Ue=on,Ee=2,lt())}o(Tt,"_reject"),o(function(){if(!jn(ce))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{ce(_t,Tt)}catch(St){Tt(St)}},"_initialize")()}return o(T,"ESPromise"),T.resolve=function(ce){return ce instanceof T?ce:ce&&jn(ce.then)?new T(function(Ee,Ue){try{ce.then(Ee,Ue)}catch(et){Ue(et)}}):new T(function(Ee){Ee(ce)})},T.reject=function(ce){return new T(function(Ee,Ue){Ue(ce)})},T.all=function(ce){if(!(!ce||!ce.length))return new T(function(Ee,Ue){try{for(var et=[],Be=0,lt=0;lt<ce.length;lt++){var _t=ce[lt];_t&&jn(_t.then)?(Be++,_t.then(Xn(et,lt,function(){--Be==0&&Ee(et)}),Ue)):et[lt]=_t}Be===0&&setTimeout(function(){Ee(et)},0)}catch(Tt){Ue(Tt)}})},T.race=function(ce){return new T(function(Ee,Ue){if(!(!ce||!ce.length))try{for(var et=o(function(lt){var _t=ce[lt];_t&&jn(_t.then)?_t.then(Ee,Ue):setTimeout(function(){Ee(_t)},0)},"_loop_1"),Be=0;Be<ce.length;Be++)et(Be)}catch(lt){Ue(lt)}})},T}();const gr=Kn;var Lr=C(2091),kr=6e5,ct=0,$t=[],en=[],Zt=[];function nn(){return new Date().getTime()}o(nn,"_getTime");var Dn=function(){function T(ce,Ee){var Ue=0,et=(ce||"<unnamed>")+"."+ct;ct++,Qe(T,this,function(_t){var Tt=null,on=0;_t.scheduleEvent=function(Jt,Ot,Ut){var Mt=et+"."+on;on++,Ot&&(Mt+="-("+Ot+")");var zn=Mt+"{"+Ue+"}";Ue++;var bn={evt:null,tm:nn(),id:zn,isRunning:!1,isAborted:!1};return Tt?bn.evt=xr(bn,Tt):bn.evt=er(bn),Tt=bn,Tt.evt._schId=zn,bn.evt;function cr(Dt){for(var Vn=nn(),_n=Vn-kr,Rn=Dt.length,Wn=0;Wn<Rn;){var or=Dt[Wn];if(or&&or.tm<_n){var Sr=null;or.abort?(Sr="Aborting ["+or.id+"] due to Excessive runtime ("+(Vn-or.tm)+" ms)",or.abort(Sr)):Sr="Removing ["+or.id+"] due to Excessive runtime ("+(Vn-or.tm)+" ms)",lt(Sr),Dt.splice(Wn,1),Rn--}else Wn++}}o(cr,"_abortAndRemoveOldEvents");function Hn(Dt,Vn){var _n=!1,Rn=St($t,Dt);if(Rn||(Rn=St(Zt,Dt),_n=!0),Rn){Rn.to&&(clearTimeout(Rn.to),Rn.to=null);var Wn=nn()-Rn.tm;Vn?_n?lt("Timed out event ["+Dt+"] finally complete -- "+Wn+" ms"):Be("Promise ["+Dt+"] Complete -- "+Wn+" ms"):(Zt.push(Rn),lt("Event ["+Dt+"] Timed out and removed -- "+Wn+" ms"))}else Be("Failed to remove ["+Dt+"] from running queue");Tt&&Tt.id===Dt&&(Tt=null),cr($t),cr(en),cr(Zt)}o(Hn,"_cleanup");function ur(Dt,Vn){return function(_n){return Hn(Dt,!0),Vn&&Vn(_n),_n}}o(ur,"_removeScheduledEvent");function Xr(Dt,Vn,_n,Rn){Vn.then(function(Wn){return Wn instanceof gr?(Be("Event ["+Dt+"] returned a promise -- waiting"),Xr(Dt,Wn,_n,Rn),Wn):ur(Dt,_n)(Wn)},ur(Dt,Rn))}o(Xr,"_waitForFinalResult");function Gr(Dt,Vn){var _n=Dt.id;return new gr(function(Rn,Wn){Be("Event ["+_n+"] Starting -- waited for "+(Dt.wTm||"--")+" ms"),Dt.isRunning=!0,Dt.abort=function(Sr){Dt.abort=null,Dt.isAborted=!0,Hn(_n,!1),Wn(new Error(Sr))};var or=Vn(_n);or instanceof gr?(Ut&&(Dt.to=setTimeout(function(){Hn(_n,!1),Wn(new Error("Timed out after ["+Ut+"] ms"))},Ut)),Xr(_n,or,function(Sr){Be("Event ["+_n+"] Resolving after "+(nn()-Dt.tm)+" ms"),Rn(Sr)},Wn)):(Be("Promise ["+_n+"] Auto completed as the start action did not return a promise"),Rn())})}o(Gr,"_createScheduledEvent");function er(Dt){var Vn=nn();return Dt.wTm=Vn-Dt.tm,Dt.tm=Vn,Dt.isAborted?gr.reject(new Error("["+Mt+"] was aborted")):($t.push(Dt),Gr(Dt,Jt))}o(er,"_startWaitingEvent");function xr(Dt,Vn){var _n=new gr(function(Rn,Wn){var or=nn()-Vn.tm,Sr=Vn.id;Be("["+Mt+"] is waiting for ["+Sr+":"+or+" ms] to complete before starting -- ["+en.length+"] waiting and ["+$t.length+"] running"),Dt.abort=function(Fr){Dt.abort=null,St(en,Mt),Dt.isAborted=!0,Wn(new Error(Fr))},Vn.evt.then(function(Fr){St(en,Mt),er(Dt).then(Rn,Wn)},function(Fr){St(en,Mt),er(Dt).then(Rn,Wn)})});return en.push(Dt),_n}o(xr,"_waitForPreviousEvent")};function St(Jt,Ot){for(var Ut=0;Ut<Jt.length;Ut++)if(Jt[Ut].id===Ot)return Jt.splice(Ut,1)[0];return null}o(St,"_removeQueuedEvent")});function Be(_t){var Tt=(0,Lr.Rd)();Tt&&Tt.QUnit&&console&&console.log("ESPromiseScheduler["+et+"] "+_t)}o(Be,"_debugLog");function lt(_t){(0,be.jV)(Ee,"ESPromiseScheduler["+et+"] "+_t)}o(lt,"_warnLog")}return o(T,"ESPromiseScheduler"),T.incomplete=function(){return $t},T.waitingToStart=function(){return en},T}();const ar=Dn;var vr=function(){function T(ce){var Ee=this,Ue={},et=[],Be=[];ce&&Be.push(ce);function lt(St,Jt){var Ot,Ut=Ue[St];if(Ut&&(Ot=Ut[Jt]),!Ot&&Ot!==null){if((0,P.HD)(St)&&(0,P.HD)(Jt))if(Be.length>0){for(var Mt=0;Mt<Be.length;Mt++)if(Be[Mt].handleField(St,Jt)){Ot={canHandle:!0,fieldHandler:Be[Mt]};break}}else et.length===0&&(Ot={canHandle:!0});if(!Ot&&Ot!==null){Ot=null;for(var Mt=0;Mt<et.length;Mt++)if(et[Mt].handleField(St,Jt)){Ot={canHandle:!0,handler:et[Mt],fieldHandler:null};break}}Ut||(Ut=Ue[St]={}),Ut[Jt]=Ot}return Ot}o(lt,"_getFieldSanitizer"),Ee.addSanitizer=function(St){St&&(et.push(St),Ue={})},Ee.addFieldSanitizer=function(St){St&&(Be.push(St),Ue={})},Ee.handleField=function(St,Jt){var Ot=lt(St,Jt);return Ot?Ot.canHandle:!1},Ee.value=function(St,Jt,Ot,Ut){var Mt=lt(St,Jt);if(Mt&&Mt.canHandle){if(!Mt||!Mt.canHandle)return null;if(Mt.handler)return Mt.handler.value(St,Jt,Ot,Ut);if(!(0,P.HD)(Jt)||(0,P.le)(Ot)||Ot===ae.qS)return null;var zn=null,bn=(0,j.Sy)(Ot);if((bn&8192)==8192){var cr=bn&~8192;if(zn=Ot,!(0,j.Sn)(zn.value)||cr!==1&&cr!==2&&cr!==3&&(cr&4096)!=4096)return null}else bn===1||bn===2||bn===3||(bn&4096)==4096?zn=Tt(St,Jt,Ot):bn===4&&(zn=Tt(St,Jt,Ut?JSON.stringify(Ot):Ot));if(zn)return _t(Mt,St,Jt,bn,zn,Ut)}return null},Ee.property=function(St,Jt,Ot,Ut){var Mt=lt(St,Jt);if(!Mt||!Mt.canHandle||!(0,P.HD)(Jt)||(0,P.le)(Ot)||!(0,j.Sn)(Ot.value))return null;var zn=(0,j.Sy)(Ot.value);return zn===0?null:_t(Mt,St,Jt,zn,Ot,Ut)};function _t(St,Jt,Ot,Ut,Mt,zn){if(St.handler)return St.handler.property(Jt,Ot,Mt,zn);if(!(0,P.le)(Mt.kind)){if((Ut&4096)==4096||!(0,j.oS)(Mt.kind))return null;Mt.value=Mt.value.toString()}return on(St.fieldHandler,Jt,Ot,Ut,Mt)}o(_t,"_handleProperty");function Tt(St,Jt,Ot){return(0,j.Sn)(Ot)?{value:Ot}:null}o(Tt,"_convertToProperty");function on(St,Jt,Ot,Ut,Mt){if(Mt&&St){var zn=St.getSanitizer(Jt,Ot,Ut,Mt.kind,Mt.propertyType);if(zn)if(Ut===4){var bn={},cr=Mt.value;(0,P.rW)(cr,function(ur,Xr){var Gr=Jt+"."+Ot;if((0,j.Sn)(Xr)){var er=Tt(Gr,ur,Xr);er=on(St,Gr,ur,(0,j.Sy)(Xr),er),er&&(bn[ur]=er.value)}}),Mt.value=bn}else{var Hn={path:Jt,name:Ot,type:Ut,prop:Mt,sanitizer:Ee};Mt=zn.call(Ee,Hn)}}return Mt}o(on,"_callFieldSanitizer")}return o(T,"ValueSanitizer"),T.getFieldType=j.Sy,T}(),Gn=100,pr=C(1880),Br=C(4063),On=C(1589),Zn=C(5928),_r=C(5843),Cn=C(4869),Qr=C(4878),Tr=C(4392),Hr=C(3242),wi=C(5883),ui=C(310),lr=C(4206)},7984:(at,l,C)=>{"use strict";C.d(l,{YT:()=>v,o6:()=>N,p8:()=>B,qS:()=>R});var R="",v="https://browser.events.data.microsoft.com/OneCollector/1.0/",P="pluginVersionString",w=P+"Arr",B="version",N="properties"},3599:(at,l,C)=>{"use strict";C.d(l,{Do:()=>D,Gf:()=>_,IZ:()=>k,JT:()=>Ve,Sn:()=>L,Sy:()=>nt,Tr:()=>ht,Vv:()=>ve,cQ:()=>dt,cm:()=>He,d8:()=>Ie,dH:()=>X,ej:()=>Se,hK:()=>ue,if:()=>oe,jM:()=>Y,kT:()=>ie,l7:()=>fe,mJ:()=>I,oF:()=>_e,oS:()=>z,ot:()=>H,r7:()=>le,vs:()=>O,x9:()=>Q,yj:()=>G});var R=C(7630),v=C(6708),P=C(3242),w=C(5843),B=C(4392),N=C(4869),m=C(4878),y=C(2091),U=C(7984),W,_="3.2.10",O="1DS-Web-JS-"+_,x="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",J="withCredentials",se="timeout",Ae=(W={},W[0]=0,W[2]=6,W[1]=1,W[3]=7,W[4096|2]=6,W[4096|1]=1,W[4096|3]=7,W),$=null,Q=Boolean((0,R.Me)()),X=Boolean((0,R.Jj)());function L(ne){return!(ne===U.qS||(0,v.le)(ne))}o(L,"isValueAssigned");function Y(ne){if(ne){var ge=ne.indexOf("-");if(ge>-1)return ne.substring(0,ge)}return U.qS}o(Y,"getTenantId");function k(){return $===null&&($=!(0,v.o8)(Uint8Array)&&!xe()&&!(0,R.b$)()),$}o(k,"isUint8ArrayAvailable");function le(ne){return!!(ne&&(0,v.hj)(ne)&&ne>=1&&ne<=4)}o(le,"isLatency");function G(ne,ge,Ke){if(!ge&&!L(ge)||typeof ne!="string")return null;var Fe=typeof ge;if(Fe==="string"||Fe==="number"||Fe==="boolean"||(0,v.kJ)(ge))ge={value:ge};else if(Fe==="object"&&!B.CY.call(ge,"value"))ge={value:Ke?JSON.stringify(ge):ge};else if((0,v.le)(ge.value)||ge.value===U.qS||!(0,v.HD)(ge.value)&&!(0,v.hj)(ge.value)&&!(0,v.jn)(ge.value)&&!(0,v.kJ)(ge.value))return null;if((0,v.kJ)(ge.value)&&!Ve(ge.value))return null;if(!(0,v.le)(ge.kind)){if((0,v.kJ)(ge.value)||!z(ge.kind))return null;ge.value=ge.value.toString()}return ge}o(G,"sanitizeProperty");function ve(ne,ge,Ke){var Fe=-1;if(!(0,v.o8)(ne))if(ge>0&&(ge===32?Fe=1<<13:ge<=13&&(Fe=ge<<5)),he(Ke))Fe===-1&&(Fe=0),Fe|=Ke;else{var de=Ae[nt(ne)]||-1;Fe!==-1&&de!==-1?Fe|=de:de===6&&(Fe=de)}return Fe}o(ve,"getCommonSchemaMetaData");function _e(){(0,P.JP)(null).setEnabled(!1)}o(_e,"disableCookies");function Ie(ne,ge,Ke){(0,P.p7)(null)&&(0,P.JP)(null).set(ne,ge,Ke*86400,null,"/")}o(Ie,"setCookie");function ie(ne){(0,P.p7)(null)&&(0,P.JP)(null).del(ne)}o(ie,"deleteCookie");function Se(ne){return(0,P.p7)(null)?D((0,P.JP)(null),ne):U.qS}o(Se,"getCookie");function D(ne,ge,Ke){Ke===void 0&&(Ke=!0);var Fe;return ne&&(Fe=ne.get(ge),Ke&&Fe&&decodeURIComponent&&(Fe=decodeURIComponent(Fe))),Fe||U.qS}o(D,"getCookieValue");function He(ne){ne===void 0&&(ne="D");var ge=(0,w.GW)();return ne==="B"?ge="{"+ge+"}":ne==="P"?ge="("+ge+")":ne==="N"&&(ge=ge.replace(/-/g,U.qS)),ge}o(He,"createGuid");function fe(ne,ge,Ke,Fe,de){var Ce={},Me=!1,Qe=0,be=arguments.length,Ne=Object[B.hB],q=arguments;for(Ne.toString.call(q[0])==="[object Boolean]"&&(Me=q[0],Qe++);Qe<be;Qe++){var ne=q[Qe];(0,v.rW)(ne,function(ae,j){Me&&j&&(0,v.Kn)(j)?(0,v.kJ)(j)?(Ce[ae]=Ce[ae]||[],(0,v.tO)(j,function(Ye,Ft){Ye&&(0,v.Kn)(Ye)?Ce[ae][Ft]=fe(!0,Ce[ae][Ft],Ye):Ce[ae][Ft]=Ye})):Ce[ae]=fe(!0,Ce[ae],j):Ce[ae]=j})}return Ce}o(fe,"extend");var ue=w.Jj;function z(ne){return ne===0||ne>0&&ne<=13||ne===32}o(z,"isValueKind");function he(ne){return ne>=0&&ne<=9}o(he,"isDataType");function xe(){var ne=(0,R.jW)();if(!(0,v.o8)(ne)&&ne.userAgent){var ge=ne.userAgent.toLowerCase();if((ge.indexOf("safari")>=0||ge.indexOf("firefox")>=0)&&ge.indexOf("chrome")<0)return!0}return!1}o(xe,"isSafariOrFirefox");function Ve(ne){return ne.length>0}o(Ve,"isArrayValid");function oe(ne,ge){var Ke=ne;Ke.timings=Ke.timings||{},Ke.timings.processTelemetryStart=Ke.timings.processTelemetryStart||{},Ke.timings.processTelemetryStart[ge]=ue()}o(oe,"setProcessTelemetryTimings");function nt(ne){var ge=0;if(ne!=null){var Ke=typeof ne;Ke==="string"?ge=1:Ke==="number"?ge=2:Ke==="boolean"?ge=3:Ke===B.fK&&(ge=4,(0,v.kJ)(ne)?(ge=4096,ne.length>0&&(ge|=nt(ne[0]))):B.CY.call(ne,"value")&&(ge=8192|nt(ne.value)))}return ge}o(nt,"getFieldValueType");var dt={Version:_,FullVersionString:O,strUndefined:B.jA,strObject:B.fK,Undefined:B.jA,arrForEach:v.tO,arrIndexOf:v.UA,arrMap:v.Mr,arrReduce:v.Xz,objKeys:v.FY,toISOString:v.Y6,isReactNative:R.b$,isString:v.HD,isNumber:v.hj,isBoolean:v.jn,isFunction:v.mf,isArray:v.kJ,isObject:v.Kn,strTrim:v.nd,isDocumentObjectAvailable:Q,isWindowObjectAvailable:X,isValueAssigned:L,getTenantId:Y,isBeaconsSupported:R.MF,isUint8ArrayAvailable:k,isLatency:le,sanitizeProperty:G,getISOString:v.Y6,useXDomainRequest:R.cp,getCommonSchemaMetaData:ve,cookieAvailable:P.p7,disallowsSameSiteNone:P.UY,setCookie:Ie,deleteCookie:ie,getCookie:Se,createGuid:He,extend:fe,getTime:ue,isValueKind:z,isArrayValid:Ve,objDefineAccessors:v.l_,addPageUnloadEventListener:N.c9,setProcessTelemetryTimings:oe,addEventHandler:N.Ib,getFieldValueType:nt,strEndsWith:v.Id,objForEachKey:v.rW},ht={_canUseCookies:void 0,isTypeof:v.Ym,isUndefined:v.o8,isNullOrUndefined:v.le,hasOwnProperty:v.nr,isFunction:v.mf,isObject:v.Kn,isDate:v.J_,isArray:v.kJ,isError:v.VZ,isString:v.HD,isNumber:v.hj,isBoolean:v.jn,toISOString:v.Y6,arrForEach:v.tO,arrIndexOf:v.UA,arrMap:v.Mr,arrReduce:v.Xz,strTrim:v.nd,objCreate:y.pu,objKeys:v.FY,objDefineAccessors:v.l_,addEventHandler:N.Ib,dateNow:v.m6,isIE:R.w1,disableCookies:_e,newGuid:w.GW,perfNow:w.Jj,newId:m.pZ,randomValue:m.az,random32:m._l,mwcRandomSeed:m.CN,mwcRandom32:m.F6,generateW3CId:w.DO};function I(){return!!(0,R.a8)("chrome")}o(I,"isChromium");function H(ne,ge,Ke,Fe,de,Ce){Fe===void 0&&(Fe=!1),de===void 0&&(de=!1);function Me(be,Ne,q){try{be[Ne]=q}catch(Re){}}o(Me,"_wrapSetXhrProp");var Qe=new XMLHttpRequest;return Fe&&Me(Qe,x,Fe),Ke&&Me(Qe,J,Ke),Qe.open(ne,ge,!de),Ke&&Me(Qe,J,Ke),!de&&Ce&&Me(Qe,se,Ce),Qe}o(H,"openXhr")},5229:(at,l,C)=>{"use strict";C.r(l),C.d(l,{BE_PROFILE:()=>q,NRT_PROFILE:()=>Ne,PostChannel:()=>Ji,RT_PROFILE:()=>be});var R=C(1088);/*!
 * Microsoft Dynamic Proto Utility, 1.1.7
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var v,P="undefined",w="constructor",B="prototype",N="function",m="_dynInstFuncs",y="_isDynProxy",U="_dynClass",W="_dynCls$",_="_dynInstChk",O=_,x="_dfOpts",J="_unknown_",se="__proto__",Ae="_dyn"+se,$="__dynProto$Gbl",Q="_dynInstProto",X="useBaseInst",L="setInstFuncs",Y=Object,k=Y.getPrototypeOf,le=Y.getOwnPropertyNames;function G(){var Oe;return typeof globalThis!==P&&(Oe=globalThis),!Oe&&typeof self!==P&&(Oe=self),!Oe&&typeof window!==P&&(Oe=window),!Oe&&typeof C.g!==P&&(Oe=C.g),Oe||{}}o(G,"_getGlobal");var ve=G(),_e=ve[$]||(ve[$]={o:(v={},v[L]=!0,v[X]=!0,v),n:1e3});function Ie(Oe,tt){return Oe&&Y[B].hasOwnProperty.call(Oe,tt)}o(Ie,"_hasOwnProperty");function ie(Oe){return Oe&&(Oe===Y[B]||Oe===Array[B])}o(ie,"_isObjectOrArrayPrototype");function Se(Oe){return ie(Oe)||Oe===Function[B]}o(Se,"_isObjectArrayOrFunctionPrototype");function D(Oe){var tt;if(Oe){if(k)return k(Oe);var vt=Oe[se]||Oe[B]||(Oe[w]?Oe[w][B]:null);tt=Oe[Ae]||vt,Ie(Oe,Ae)||(delete Oe[Q],tt=Oe[Ae]=Oe[Q]||Oe[Ae],Oe[Q]=vt)}return tt}o(D,"_getObjProto");function He(Oe,tt){var vt=[];if(le)vt=le(Oe);else for(var rt in Oe)typeof rt=="string"&&Ie(Oe,rt)&&vt.push(rt);if(vt&&vt.length>0)for(var Bt=0;Bt<vt.length;Bt++)tt(vt[Bt])}o(He,"_forEachProp");function fe(Oe,tt,vt){return tt!==w&&typeof Oe[tt]===N&&(vt||Ie(Oe,tt))}o(fe,"_isDynamicCandidate");function ue(Oe){throw new TypeError("DynamicProto: "+Oe)}o(ue,"_throwTypeError");function z(Oe){var tt={};return He(Oe,function(vt){!tt[vt]&&fe(Oe,vt,!1)&&(tt[vt]=Oe[vt])}),tt}o(z,"_getInstanceFuncs");function he(Oe,tt){for(var vt=Oe.length-1;vt>=0;vt--)if(Oe[vt]===tt)return!0;return!1}o(he,"_hasVisited");function xe(Oe,tt,vt,rt){function Bt(Ht,yn,En){var nr=yn[En];if(nr[y]&&rt){var Jn=Ht[m]||{};Jn[O]!==!1&&(nr=(Jn[yn[U]]||{})[En]||nr)}return function(){return nr.apply(Ht,arguments)}}o(Bt,"_instFuncProxy");var jt={};He(vt,function(Ht){jt[Ht]=Bt(tt,vt,Ht)});for(var pt=D(Oe),tn=[];pt&&!Se(pt)&&!he(tn,pt);)He(pt,function(Ht){!jt[Ht]&&fe(pt,Ht,!k)&&(jt[Ht]=Bt(tt,pt,Ht))}),tn.push(pt),pt=D(pt);return jt}o(xe,"_getBaseFuncs");function Ve(Oe,tt,vt,rt){var Bt=null;if(Oe&&Ie(vt,U)){var jt=Oe[m]||{};if(Bt=(jt[vt[U]]||{})[tt],Bt||ue("Missing ["+tt+"] "+N),!Bt[_]&&jt[O]!==!1){for(var pt=!Ie(Oe,tt),tn=D(Oe),Ht=[];pt&&tn&&!Se(tn)&&!he(Ht,tn);){var yn=tn[tt];if(yn){pt=yn===rt;break}Ht.push(tn),tn=D(tn)}try{pt&&(Oe[tt]=Bt),Bt[_]=1}catch(En){jt[O]=!1}}}return Bt}o(Ve,"_getInstFunc");function oe(Oe,tt,vt){var rt=tt[Oe];return rt===vt&&(rt=D(tt)[Oe]),typeof rt!==N&&ue("["+Oe+"] is not a "+N),rt}o(oe,"_getProtoFunc");function nt(Oe,tt,vt,rt,Bt){function jt(Ht,yn){var En=o(function(){var nr=Ve(this,yn,Ht,En)||oe(yn,Ht,En);return nr.apply(this,arguments)},"dynProtoProxy");return En[y]=1,En}if(o(jt,"_createDynamicPrototype"),!ie(Oe)){var pt=vt[m]=vt[m]||{},tn=pt[tt]=pt[tt]||{};pt[O]!==!1&&(pt[O]=!!Bt),He(vt,function(Ht){fe(vt,Ht,!1)&&vt[Ht]!==rt[Ht]&&(tn[Ht]=vt[Ht],delete vt[Ht],(!Ie(Oe,Ht)||Oe[Ht]&&!Oe[Ht][y])&&(Oe[Ht]=jt(Oe,Ht)))})}}o(nt,"_populatePrototype");function dt(Oe,tt){if(k){for(var vt=[],rt=D(tt);rt&&!Se(rt)&&!he(vt,rt);){if(rt===Oe)return!0;vt.push(rt),rt=D(rt)}return!1}return!0}o(dt,"_checkPrototype");function ht(Oe,tt){return Ie(Oe,B)?Oe.name||tt||J:((Oe||{})[w]||{}).name||tt||J}o(ht,"_getObjName");function I(Oe,tt,vt,rt){Ie(Oe,B)||ue("theClass is an invalid class definition.");var Bt=Oe[B];dt(Bt,tt)||ue("["+ht(Oe)+"] not in hierarchy of ["+ht(tt)+"]");var jt=null;Ie(Bt,U)?jt=Bt[U]:(jt=W+ht(Oe,"_")+"$"+_e.n,_e.n++,Bt[U]=jt);var pt=I[x],tn=!!pt[X];tn&&rt&&rt[X]!==void 0&&(tn=!!rt[X]);var Ht=z(tt),yn=xe(Bt,tt,Ht,tn);vt(tt,yn);var En=!!k&&!!pt[L];En&&rt&&(En=!!rt[L]),nt(Bt,jt,tt,Ht,En!==!1)}o(I,"dynamicProto"),I[x]=_e.o;var H=C(9288),ne=C(4869),ge=C(5883),Ke=C(3599),Fe=C(6708),de=C(7630),Ce=C(5928),Me=C(5018),Qe=C(4063),be="REAL_TIME",Ne="NEAR_REAL_TIME",q="BEST_EFFORT",Re="",ae="POST",j="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Ye="drop",Ft="send",Gt="requeue",xn="rspFail",Sn="oth",jn="no-cache, no-store",Xn="application/x-json-stream",Kn="cache-control",gr="content-type",Lr="kill-tokens",kr="kill-duration",ct="kill-duration-seconds",$t="time-delta-millis",en="client-version",Zt="client-id",nn="time-delta-to-apply-millis",Dn="upload-time",ar="apikey",vr="AuthMsaDeviceTicket",Gn="AuthXToken",pr="sdk-version",Br="NoResponseBody",On="msfpc",Zn="trace",_r="user";function Cn(Oe){var tt=(Oe.ext||{}).intweb;return tt&&(0,Ke.Sn)(tt[On])?tt[On]:null}o(Cn,"_getEventMsfpc");function Qr(Oe){for(var tt=null,vt=0;tt===null&&vt<Oe.length;vt++)tt=Cn(Oe[vt]);return tt}o(Qr,"_getMsfpc");var Tr=function(){function Oe(tt,vt){var rt=vt?[].concat(vt):[],Bt=this,jt=Qr(rt);Bt.iKey=function(){return tt},Bt.Msfpc=function(){return jt||Re},Bt.count=function(){return rt.length},Bt.events=function(){return rt},Bt.addEvent=function(pt){return pt?(rt.push(pt),jt||(jt=Cn(pt)),!0):!1},Bt.split=function(pt,tn){var Ht;if(pt<rt.length){var yn=rt.length-pt;(0,Fe.le)(tn)||(yn=tn<yn?tn:yn),Ht=rt.splice(pt,yn),jt=Qr(rt)}return new Oe(tt,Ht)}}return o(Oe,"EventBatch"),Oe.create=function(tt,vt){return new Oe(tt,vt)},Oe}(),Hr=function(){function Oe(){var tt=!0,vt=!0,rt=!0,Bt="use-collector-delta",jt=!1;I(Oe,this,function(pt){pt.allowRequestSending=function(){return tt},pt.firstRequestSent=function(){rt&&(rt=!1,jt||(tt=!1))},pt.shouldAddClockSkewHeaders=function(){return vt},pt.getClockSkewHeaderValue=function(){return Bt},pt.setClockSkew=function(tn){jt||(tn?(Bt=tn,vt=!0,jt=!0):vt=!1,tt=!0)}})}return o(Oe,"ClockSkewManager"),Oe.__ieDyn=1,Oe}();const wi=Hr;var ui=1e3,lr=function(){function Oe(){var tt={};function vt(rt){var Bt=[];return rt&&(0,Fe.tO)(rt,function(jt){Bt.push((0,Fe.nd)(jt))}),Bt}o(vt,"_normalizeTenants"),I(Oe,this,function(rt){rt.setKillSwitchTenants=function(Bt,jt){if(Bt&&jt)try{var pt=vt(Bt.split(","));if(jt==="this-request-only")return pt;for(var tn=parseInt(jt,10)*ui,Ht=0;Ht<pt.length;++Ht)tt[pt[Ht]]=(0,Fe.m6)()+tn}catch(yn){return[]}return[]},rt.isTenantKilled=function(Bt){var jt=tt,pt=(0,Fe.nd)(Bt);return jt[pt]!==void 0&&jt[pt]>(0,Fe.m6)()?!0:(delete jt[pt],!1)}})}return o(Oe,"KillSwitch"),Oe.__ieDyn=1,Oe}();const T=lr;var ce=C(4392),Ee=.8,Ue=1.2,et=3e3,Be=6e5;function lt(Oe){return!(Oe>=300&&Oe<500&&Oe!=408&&Oe!=429||Oe==501||Oe==505)}o(lt,"retryPolicyShouldRetryForStatus");function _t(Oe){var tt=0,vt=et*Ee,rt=et*Ue,Bt=Math.floor(Math.random()*(rt-vt))+vt;return tt=Math.pow(2,Oe)*Bt,Math.min(tt,Be)}o(_t,"retryPolicyGetMillisToBackoffForRetry");var Tt=20,on=3984588,St=65e3,Jt=2e6,Ot=Math.min(Jt,St),Ut="metadata",Mt="f",zn=/\./,bn=function(){function Oe(tt,vt,rt,Bt){var jt="data",pt="baseData",tn="ext",Ht=!!Bt,yn=!0,En=vt,nr={};I(Oe,this,function(Jn){Jn.createPayload=function(qt,zt,Nt,gn,M,te){return{apiKeys:[],payloadBlob:Re,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:qt,isTeardown:zt,isSync:Nt,isBeacon:gn,sendType:te,sendReason:M}},Jn.appendPayload=function(qt,zt,Nt){var gn=qt&&zt&&!qt.overflow;return gn&&(0,H.Lm)(tt,function(){return"Serializer:appendPayload"},function(){for(var M=zt.events(),te=qt.payloadBlob,ze=qt.numEvents,ot=!1,Wt=[],Et=[],vn=qt.isBeacon,pn=vn?St:on,Qt=vn?Ot:Jt,sn=0,mn=0;sn<M.length;){var Kt=M[sn];if(Kt){if(ze>=Nt){qt.overflow=zt.split(sn);break}var ut=Jn.getEventBlob(Kt);if(ut&&ut.length<=Qt){var Fn=ut.length,In=te.length;if(In+Fn>pn){qt.overflow=zt.split(sn);break}te&&(te+=`
`),te+=ut,mn++,mn>Tt&&(te.substr(0,1),mn=0),ot=!0,ze++}else ut?Wt.push(Kt):Et.push(Kt),M.splice(sn,1),sn--}sn++}if(Wt&&Wt.length>0&&qt.sizeExceed.push(Tr.create(zt.iKey(),Wt)),Et&&Et.length>0&&qt.failedEvts.push(Tr.create(zt.iKey(),Et)),ot){qt.batches.push(zt),qt.payloadBlob=te,qt.numEvents=ze;var Un=zt.iKey();(0,Fe.UA)(qt.apiKeys,Un)===-1&&qt.apiKeys.push(Un)}},function(){return{payload:qt,theBatch:{iKey:zt.iKey(),evts:zt.events()},max:Nt}}),gn},Jn.getEventBlob=function(qt){try{return(0,H.Lm)(tt,function(){return"Serializer.getEventBlob"},function(){var zt={};zt.name=qt.name,zt.time=qt.time,zt.ver=qt.ver,zt.iKey="o:"+(0,Ke.jM)(qt.iKey);var Nt={},gn=qt[tn];gn&&(zt[tn]=Nt,(0,Fe.rW)(gn,function(ze,ot){var Wt=Nt[ze]={};fn(ot,Wt,"ext."+ze,!0,null,null,!0)}));var M=zt[jt]={};M.baseType=qt.baseType;var te=M[pt]={};return fn(qt.baseData,te,pt,!1,[pt],function(ze,ot,Wt){cr(Nt,ze,ot,Wt)},yn),fn(qt.data,M,jt,!1,[],function(ze,ot,Wt){cr(Nt,ze,ot,Wt)},yn),JSON.stringify(zt)},function(){return{item:qt}})}catch(zt){return null}};function dr(qt,zt){var Nt=nr[qt];return Nt===void 0&&(qt.length>=7&&(Nt=(0,Fe.xe)(qt,"ext.metadata")||(0,Fe.xe)(qt,"ext.web")),nr[qt]=Nt),Nt}o(dr,"_isReservedField");function fn(qt,zt,Nt,gn,M,te,ze){(0,Fe.rW)(qt,function(ot,Wt){var Et=null;if(Wt||(0,Ke.Sn)(Wt)){var vn=Nt,pn=ot,Qt=M,sn=zt;if(Ht&&!gn&&zn.test(ot)){var mn=ot.split("."),Kt=mn.length;if(Kt>1){Qt&&(Qt=Qt.slice());for(var ut=0;ut<Kt-1;ut++){var Fn=mn[ut];sn=sn[Fn]=sn[Fn]||{},vn+="."+Fn,Qt&&Qt.push(Fn)}pn=mn[Kt-1]}}var In=gn&&dr(vn,pn);if(!In&&En&&En.handleField(vn,pn)?Et=En.value(vn,pn,Wt,rt):Et=(0,Ke.yj)(pn,Wt,rt),Et){var Un=Et.value;if(sn[pn]=Un,te&&te(Qt,pn,Et),ze&&typeof Un=="object"&&!(0,Fe.kJ)(Un)){var rr=Qt;rr&&(rr=rr.slice(),rr.push(pn)),fn(Wt,Un,vn+"."+pn,gn,rr,te,ze)}}}})}o(fn,"_processPathKeys")})}return o(Oe,"Serializer"),Oe.__ieDyn=1,Oe}();function cr(Oe,tt,vt,rt){if(rt&&Oe){var Bt=(0,Ke.Vv)(rt.value,rt.kind,rt.propertyType);if(Bt>-1){var jt=Oe[Ut];jt||(jt=Oe[Ut]={f:{}});var pt=jt[Mt];if(pt||(pt=jt[Mt]={}),tt)for(var tn=0;tn<tt.length;tn++){var Ht=tt[tn];pt[Ht]||(pt[Ht]={f:{}});var yn=pt[Ht][Mt];yn||(yn=pt[Ht][Mt]={}),pt=yn}pt=pt[vt]={},(0,Fe.kJ)(rt.value)?pt.a={t:Bt}:pt.t=Bt}}}o(cr,"_addJSONPropertyMetaData");var Hn,ur="sendAttempt",Xr="&"+Br+"=true",Gr=(Hn={},Hn[1]=Gt,Hn[100]=Gt,Hn[200]="sent",Hn[8004]=Ye,Hn[8003]=Ye,Hn),er={},xr={};function Dt(Oe,tt,vt){er[Oe]=tt,vt!==!1&&(xr[tt]=Oe)}o(Dt,"_addCollectorHeaderQsMapping"),Dt(vr,vr,!1),Dt(en,en),Dt(Zt,"Client-Id"),Dt(ar,ar),Dt(nn,nn),Dt(Dn,Dn),Dt(Gn,Gn);function Vn(Oe){try{return Oe.responseText}catch(tt){}return Re}o(Vn,"_getResponseText");function _n(Oe,tt){var vt=!1;if(Oe&&tt){var rt=(0,Fe.FY)(Oe);if(rt&&rt.length>0)for(var Bt=tt.toLowerCase(),jt=0;jt<rt.length;jt++){var pt=rt[jt];if(pt&&(0,Fe.nr)(tt,pt)&&pt.toLowerCase()===Bt){vt=!0;break}}}return vt}o(_n,"_hasHeader");function Rn(Oe,tt,vt,rt){tt&&vt&&vt.length>0&&(rt&&er[tt]?(Oe.hdrs[er[tt]]=vt,Oe.useHdrs=!0):Oe.url+="&"+tt+"="+vt)}o(Rn,"_addRequestDetails");function Wn(Oe,tt){return tt&&((0,Fe.hj)(tt)?Oe=[tt].concat(Oe):(0,Fe.kJ)(tt)&&(Oe=tt.concat(Oe))),Oe}o(Wn,"_prependTransports");var or=function(){function Oe(tt,vt,rt,Bt,jt){this._responseHandlers=[];var pt="?cors=true&"+gr.toLowerCase()+"="+Xn,tn=new T,Ht=!1,yn=new wi,En=!1,nr=0,Jn,dr,fn,qt,zt=!0,Nt=[],gn={},M=[],te=null,ze=!1,ot,Wt=!1,Et=!1,vn,pn,Qt,sn,mn;I(Oe,this,function(Kt){var ut=!0;Kt.initialize=function(ye,Ze,st,yt,Rt){var Pt;Rt||(Rt={}),pt=ye+pt,Et=(0,Fe.o8)(Rt.avoidOptions)?!0:!Rt.avoidOptions,qt=Ze,ot=Ze.getCookieMgr(),ze=!qt.config.disableEventTimings;var ln=!!qt.config.enableCompoundKey;Jn=st,dr=Jn.diagLog();var pe=Rt.valueSanitizer,$e=Rt.stringifyObjects;(0,Fe.o8)(Rt.enableCompoundKey)||(ln=!!Rt.enableCompoundKey),vn=Rt.xhrTimeout,pn=!!Rt.disableXhrSync,Qt=!!Rt.disableFetchKeepAlive,mn=Rt.addNoResponse!==!1,En=!(0,de.b$)(),te=new bn(qt,pe,$e,ln),(0,Fe.le)(Rt.useSendBeacon)||(En=!!Rt.useSendBeacon);var ke=yt,ft=Rt.alwaysUseXhrOverride?yt:null,xt=Rt.alwaysUseXhrOverride?yt:null,Yt=[3,2];if(!yt){zt=!1;var An=(0,de.k$)();An&&An.protocol&&An.protocol.toLowerCase()==="file:"&&(ut=!1);var Tn=[];(0,de.b$)()?(Tn=[2,1],Yt=[2,1,3]):Tn=[1,2,3],Tn=Wn(Tn,Rt.transports),yt=Fn(Tn,!1),yt||(0,Me.jV)(dr,"No available transport to send events"),ke=Fn(Tn,!0)}ft||(Yt=Wn(Yt,Rt.unloadTransports),ft=Fn(Yt,!0)),sn=!zt&&(En&&(0,de.MF)()||!Qt&&(0,de.JO)(!0)),fn=(Pt={},Pt[0]=yt,Pt[1]=ke||Fn([1,2,3],!0),Pt[2]=ft||ke||Fn([1],!0),Pt[3]=xt||Fn([2,3],!0)||ke||Fn([1],!0),Pt)};function Fn(ye,Ze){for(var st=0,yt=null,Rt=0;yt==null&&Rt<ye.length;)st=ye[Rt],st===1?(0,de.cp)()?yt=In:(0,de.Z3)()&&(yt=rr):st===2&&(0,de.JO)(Ze)&&(!Ze||Ze&&!Qt)?yt=Un:En&&st===3&&(0,de.MF)()&&(yt=$n),Rt++;return yt?{_transport:st,_isSync:Ze,sendPOST:yt}:null}o(Fn,"_getSenderInterface"),Kt._getDbgPlgTargets=function(){return[fn[0],tn,te,fn]};function In(ye,Ze,st){var yt=new XDomainRequest;yt.open(ae,ye.urlString),ye.timeout&&(yt.timeout=ye.timeout),yt.onload=function(){var Rt=Vn(yt);kt(Ze,200,{},Rt),si(Rt)},yt.onerror=function(){kt(Ze,400,{})},yt.ontimeout=function(){kt(Ze,500,{})},yt.onprogress=function(){},st?yt.send(ye.data):jt.set(function(){yt.send(ye.data)},0)}o(In,"_xdrSendPost");function Un(ye,Ze,st){var yt,Rt=ye.urlString,Pt=!1,ln=!1,pe=(yt={body:ye.data,method:ae},yt[j]=!0,yt);st&&(pe.keepalive=!0,ye._sendReason===2&&(Pt=!0,mn&&(Rt+=Xr))),ut&&(pe.credentials="include"),ye.headers&&(0,Fe.FY)(ye.headers).length>0&&(pe.headers=ye.headers),fetch(Rt,pe).then(function($e){var ke={},ft=Re,xt=$e.headers;xt&&xt.forEach(function(Yt,An){ke[An]=Yt}),$e.body&&$e.text().then(function(Yt){ft=Yt}),ln||(ln=!0,kt(Ze,$e.status,ke,ft),si(ft))}).catch(function($e){ln||(ln=!0,kt(Ze,0,{}))}),Pt&&!ln&&(ln=!0,kt(Ze,200,{})),!ln&&ye.timeout>0&&jt.set(function(){ln||(ln=!0,kt(Ze,500,{}))},ye.timeout)}o(Un,"_fetchSendPost");function rr(ye,Ze,st){var yt=ye.urlString;function Rt($e,ke,ft){if(!$e[ft]&&ke&&ke.getResponseHeader){var xt=ke.getResponseHeader(ft);xt&&($e[ft]=(0,Fe.nd)(xt))}return $e}o(Rt,"_appendHeader");function Pt($e){var ke={};return $e.getAllResponseHeaders?ke=zr($e.getAllResponseHeaders()):(ke=Rt(ke,$e,$t),ke=Rt(ke,$e,kr),ke=Rt(ke,$e,ct)),ke}o(Pt,"_getAllResponseHeaders");function ln($e,ke){kt(Ze,$e.status,Pt($e),ke)}o(ln,"xhrComplete"),st&&ye.disableXhrSync&&(st=!1);var pe=(0,Ke.ot)(ae,yt,ut,!0,st,ye.timeout);(0,Fe.rW)(ye.headers,function($e,ke){pe.setRequestHeader($e,ke)}),pe.onload=function(){var $e=Vn(pe);ln(pe,$e),si($e)},pe.onerror=function(){ln(pe)},pe.ontimeout=function(){ln(pe)},pe.send(ye.data)}o(rr,"_xhrSendPost");function kt(ye,Ze,st,yt){try{ye(Ze,st,yt)}catch(Rt){(0,Me.kP)(dr,2,518,(0,de.eU)(Rt))}}o(kt,"_doOnComplete");function $n(ye,Ze,st){var yt=ye,Rt=200,Pt=yt._thePayload,ln=ye.urlString+(mn?Xr:Re);try{var pe=(0,de.jW)();if(!pe.sendBeacon(ln,ye.data))if(Pt){var $e=[];(0,Fe.tO)(Pt.batches,function(ke){if($e&&ke&&ke.count()>0){for(var ft=ke.events(),xt=0;xt<ft.length;xt++)if(!pe.sendBeacon(ln,te.getEventBlob(ft[xt]))){$e.push(ke.split(xt));break}}else $e.push(ke.split(0))}),hr($e,8003,Pt.sendType,!0)}else Rt=0}catch(ke){(0,Me.jV)(dr,"Failed to send telemetry using sendBeacon API. Ex:"+(0,de.eU)(ke)),Rt=0}finally{kt(Ze,Rt,{},Re)}}o($n,"_beaconSendPost");function mr(ye){return ye===2||ye===3}o(mr,"_isBeaconPayload");function kn(ye){return Wt&&mr(ye)&&(ye=2),ye}o(kn,"_adjustSendType"),Kt.addQueryStringParameter=function(ye,Ze){for(var st=0;st<Nt.length;st++)if(Nt[st].name===ye){Nt[st].value=Ze;return}Nt.push({name:ye,value:Ze})},Kt.addHeader=function(ye,Ze){gn[ye]=Ze},Kt.canSendRequest=function(){return ei()&&yn.allowRequestSending()},Kt.sendQueuedRequests=function(ye,Ze){(0,Fe.o8)(ye)&&(ye=0),Wt&&(ye=kn(ye),Ze=2),Cr(M,ye,0)&&fr(Nr(),0,!1,ye,Ze||0)},Kt.isCompletelyIdle=function(){return!Ht&&nr===0&&M.length===0},Kt.setUnloading=function(ye){Wt=ye},Kt.addBatch=function(ye){if(ye&&ye.count()>0){if(tn.isTenantKilled(ye.iKey()))return!1;M.push(ye)}return!0},Kt.teardown=function(){M.length>0&&fr(Nr(),0,!0,2,2)},Kt.pause=function(){Ht=!0},Kt.resume=function(){Ht=!1,Kt.sendQueuedRequests(0,4)},Kt.sendSynchronousBatch=function(ye,Ze,st){ye&&ye.count()>0&&((0,Fe.le)(Ze)&&(Ze=1),Wt&&(Ze=kn(Ze),st=2),fr([ye],0,!1,Ze,st||0))};function ei(){return!Ht&&nr<vt}o(ei,"_hasIdleConnection");function Nr(){var ye=M;return M=[],ye}o(Nr,"_clearQueue");function Cr(ye,Ze,st){var yt=!1;return ye&&ye.length>0&&!Ht&&fn[Ze]&&te&&(yt=Ze!==0||ei()&&(st>0||yn.allowRequestSending())),yt}o(Cr,"_canSendPayload");function hi(ye){var Ze={};return ye&&(0,Fe.tO)(ye,function(st,yt){Ze[yt]={iKey:st.iKey(),evts:st.events()}}),Ze}o(hi,"_createDebugBatches");function fr(ye,Ze,st,yt,Rt){if(!(!ye||ye.length===0)){if(Ht){hr(ye,1,yt);return}yt=kn(yt);try{var Pt=ye,ln=yt!==0;(0,H.Lm)(qt,function(){return"HttpManager:_sendBatches"},function(pe){pe&&(ye=ye.slice(0));for(var $e=[],ke=null,ft=(0,Ke.hK)(),xt=fn[yt]||(ln?fn[1]:fn[0]),Yt=xt&&xt._transport,An=sn&&(Wt||mr(yt)||Yt===3||xt._isSync&&Yt===2);Cr(ye,yt,Ze);){var Tn=ye.shift();Tn&&Tn.count()>0&&(tn.isTenantKilled(Tn.iKey())?$e.push(Tn):(ke=ke||te.createPayload(Ze,st,ln,An,Rt,yt),te.appendPayload(ke,Tn,tt)?ke.overflow!==null&&(ye=[ke.overflow].concat(ye),ke.overflow=null,Si(ke,ft,(0,Ke.hK)(),Rt),ft=(0,Ke.hK)(),ke=null):(Si(ke,ft,(0,Ke.hK)(),Rt),ft=(0,Ke.hK)(),ye=[Tn].concat(ye),ke=null)))}ke&&Si(ke,ft,(0,Ke.hK)(),Rt),ye.length>0&&(M=ye.concat(M)),hr($e,8004,yt)},function(){return{batches:hi(Pt),retryCount:Ze,isTeardown:st,isSynchronous:ln,sendReason:Rt,useSendBeacon:mr(yt),sendType:yt}},!ln)}catch(pe){(0,Me.kP)(dr,2,48,"Unexpected Exception sending batch: "+(0,de.eU)(pe))}}}o(fr,"_sendBatches");function oi(ye,Ze){var st={url:pt,hdrs:{},useHdrs:!1};Ze?(st.hdrs=(0,Ke.l7)(st.hdrs,gn),st.useHdrs=(0,Fe.FY)(st.hdrs).length>0):(0,Fe.rW)(gn,function(pe,$e){xr[pe]?Rn(st,xr[pe],$e,!1):(st.hdrs[pe]=$e,st.useHdrs=!0)}),Rn(st,Zt,"NO_AUTH",Ze),Rn(st,en,Ke.vs,Ze);var yt=Re;(0,Fe.tO)(ye.apiKeys,function(pe){yt.length>0&&(yt+=","),yt+=pe}),Rn(st,ar,yt,Ze),Rn(st,Dn,(0,Fe.m6)().toString(),Ze);var Rt=Pr(ye);if((0,Ke.Sn)(Rt)&&(st.url+="&ext.intweb.msfpc="+Rt),yn.shouldAddClockSkewHeaders()&&Rn(st,nn,yn.getClockSkewHeaderValue(),Ze),qt.getWParam){var Pt=qt.getWParam();Pt>=0&&(st.url+="&w="+Pt)}for(var ln=0;ln<Nt.length;ln++)st.url+="&"+Nt[ln].name+"="+Nt[ln].value;return st}o(oi,"_buildRequestDetails");function Wr(ye,Ze,st){ye[Ze]=ye[Ze]||{},ye[Ze][Jn.identifier]=st}o(Wr,"_setTimingValue");function Si(ye,Ze,st,yt){if(ye&&ye.payloadBlob&&ye.payloadBlob.length>0){var Rt=!!Kt.sendHook,Pt=fn[ye.sendType];!mr(ye.sendType)&&ye.isBeacon&&ye.sendReason===2&&(Pt=fn[2]||fn[3]||Pt);var ln=Et;(ye.isBeacon||Pt._transport===3)&&(ln=!1);var pe=oi(ye,ln);ln=ln||pe.useHdrs;var $e=(0,Ke.hK)();(0,H.Lm)(qt,function(){return"HttpManager:_doPayloadSend"},function(){for(var ke=0;ke<ye.batches.length;ke++)for(var ft=ye.batches[ke],xt=ft.events(),Yt=0;Yt<xt.length;Yt++){var An=xt[Yt];if(ze){var Tn=An.timings=An.timings||{};Wr(Tn,"sendEventStart",$e),Wr(Tn,"serializationStart",Ze),Wr(Tn,"serializationCompleted",st)}An[ur]>0?An[ur]++:An[ur]=1}hr(ye.batches,1e3+(yt||0),ye.sendType,!0);var Nn={data:ye.payloadBlob,urlString:pe.url,headers:pe.hdrs,_thePayload:ye,_sendReason:yt,timeout:vn,disableXhrSync:pn,disableFetchKeepAlive:Qt};ln&&(_n(Nn.headers,Kn)||(Nn.headers[Kn]=jn),_n(Nn.headers,gr)||(Nn.headers[gr]=Xn));var pi=null;Pt&&(pi=o(function(Ii){yn.firstRequestSent();var li=o(function(Li,ki){gi(Li,ki,ye,yt)},"onComplete"),ir=ye.isTeardown||ye.isSync;try{Pt.sendPOST(Ii,li,ir),Kt.sendListener&&Kt.sendListener(Nn,Ii,ir,ye.isBeacon)}catch(Li){(0,Me.jV)(dr,"Unexpected exception sending payload. Ex:"+(0,de.eU)(Li)),kt(li,0,{})}},"sender")),(0,H.Lm)(qt,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(pi)if(ye.sendType===0&&nr++,Rt&&!ye.isBeacon&&Pt._transport!==3){var Ii={data:Nn.data,urlString:Nn.urlString,headers:(0,Ke.l7)({},Nn.headers),timeout:Nn.timeout,disableXhrSync:Nn.disableXhrSync,disableFetchKeepAlive:Nn.disableFetchKeepAlive},li=!1;(0,H.Lm)(qt,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{Kt.sendHook(Ii,function(ir){li=!0,!zt&&!ir._thePayload&&(ir._thePayload=ir._thePayload||Nn._thePayload,ir._sendReason=ir._sendReason||Nn._sendReason),pi(ir)},ye.isSync||ye.isTeardown)}catch(ir){li||pi(Nn)}})}else pi(Nn)})},function(){return{thePayload:ye,serializationStart:Ze,serializationCompleted:st,sendReason:yt}},ye.isSync)}ye.sizeExceed&&ye.sizeExceed.length>0&&hr(ye.sizeExceed,8003,ye.sendType),ye.failedEvts&&ye.failedEvts.length>0&&hr(ye.failedEvts,8002,ye.sendType)}o(Si,"_doPayloadSend");function Mr(ye,Ze){ze&&(0,Fe.tO)(ye,function(st){var yt=st.timings=st.timings||{};Wr(yt,"sendEventCompleted",Ze)})}o(Mr,"_addEventCompletedTimings");function gi(ye,Ze,st,yt){var Rt=9e3,Pt=null,ln=!1,pe=!1;try{var $e=!0;if(typeof ye!==ce.jA){if(Ze){yn.setClockSkew(Ze[$t]);var ke=Ze[kr]||Ze["kill-duration-seconds"];(0,Fe.tO)(tn.setKillSwitchTenants(Ze[Lr],ke),function(xt){(0,Fe.tO)(st.batches,function(Yt){if(Yt.iKey()===xt){Pt=Pt||[];var An=Yt.split(0);st.numEvents-=An.count(),Pt.push(An)}})})}if(ye==200||ye==204){Rt=200;return}(!lt(ye)||st.numEvents<=0)&&($e=!1),Rt=9e3+ye%1e3}if($e){Rt=100;var ft=st.retryCnt;st.sendType===0&&(ft<rt?(ln=!0,vi(function(){st.sendType===0&&nr--,fr(st.batches,ft+1,st.isTeardown,Wt?2:st.sendType,5)},Wt,_t(ft))):(pe=!0,Wt&&(Rt=8001)))}}finally{ln||(yn.setClockSkew(),ti(st,Rt,yt,pe)),hr(Pt,8004,st.sendType)}}o(gi,"_retryRequestIfNeeded");function ti(ye,Ze,st,yt){try{yt&&Jn._backOffTransmission(),Ze===200&&(!yt&&!ye.isSync&&Jn._clearBackOff(),Ci(ye.batches)),hr(ye.batches,Ze,ye.sendType,!0)}finally{ye.sendType===0&&(nr--,st!==5&&Kt.sendQueuedRequests(ye.sendType,st))}}o(ti,"_handleRequestFinished");function Ci(ye){if(ze){var Ze=(0,Ke.hK)();(0,Fe.tO)(ye,function(st){st&&st.count()>0&&Mr(st.events(),Ze)})}}o(Ci,"_addCompleteTimings");function vi(ye,Ze,st){Ze?ye():jt.set(ye,st)}o(vi,"_doAction");function zr(ye){var Ze={};if((0,Fe.HD)(ye)){var st=(0,Fe.nd)(ye).split(/[\r\n]+/);(0,Fe.tO)(st,function(yt){if(yt){var Rt=yt.indexOf(": ");if(Rt!==-1){var Pt=(0,Fe.nd)(yt.substring(0,Rt)).toLowerCase(),ln=(0,Fe.nd)(yt.substring(Rt+1));Ze[Pt]=ln}else Ze[(0,Fe.nd)(yt)]=1}})}return Ze}o(zr,"_convertAllHeadersToMap");function Pr(ye){for(var Ze=0;Ze<ye.batches.length;Ze++){var st=ye.batches[Ze].Msfpc();if(st)return encodeURIComponent(st)}return Re}o(Pr,"_getMsfpc");function si(ye){var Ze=Kt._responseHandlers;try{for(var st=0;st<Ze.length;st++)try{Ze[st](ye)}catch(Rt){(0,Me.kP)(dr,1,519,"Response handler failed: "+Rt)}if(ye){var yt=JSON.parse(ye);(0,Ke.Sn)(yt.webResult)&&(0,Ke.Sn)(yt.webResult[On])&&ot.set("MSFPC",yt.webResult[On],365*86400)}}catch(Rt){}}o(si,"_handleCollectorResponse");function hr(ye,Ze,st,yt){if(ye&&ye.length>0&&Bt){var Rt=Bt[$r(Ze)];if(Rt){var Pt=st!==0;(0,H.Lm)(qt,function(){return"HttpManager:_sendBatchesNotification"},function(){vi(function(){try{Rt.call(Bt,ye,Ze,Pt,st)}catch(ln){(0,Me.kP)(dr,1,74,"send request notification failed: "+ln)}},yt||Pt,0)},function(){return{batches:hi(ye),reason:Ze,isSync:Pt,sendSync:yt,sendType:st}},!Pt)}}}o(hr,"_sendBatchesNotification");function $r(ye){var Ze=Gr[ye];return(0,Ke.Sn)(Ze)||(Ze=Sn,ye>=9e3&&ye<=9999?Ze=xn:ye>=8e3&&ye<=8999?Ze=Ye:ye>=1e3&&ye<=1999&&(Ze=Ft)),Ze}o($r,"_getNotificationAction")})}return o(Oe,"HttpManager"),Oe.__ieDyn=1,Oe}();function Sr(Oe,tt){for(var vt=[],rt=2;rt<arguments.length;rt++)vt[rt-2]=arguments[rt];return setTimeout(Oe,tt,vt)}o(Sr,"defaultSetTimeout");function Fr(Oe){clearTimeout(Oe)}o(Fr,"defaultClearTimeout");function Er(Oe,tt){return{set:Oe||Sr,clear:tt||Fr}}o(Er,"createTimeoutWrapper");var Zi=.25,Mi=500,oa=20,Pi=6,zi=2,ea=4,Vi=2,ta=1,di="eventsDiscarded",Zr="overrideInstrumentationKey",fi="maxEventRetryAttempts",Oi="maxUnloadEventRetryAttempts",va="addUnloadCb",ai=function(Oe){(0,R.ne)(tt,Oe);function tt(){var vt=Oe.call(this)||this;vt.identifier="PostChannel",vt.priority=1011,vt.version="3.2.10";var rt,Bt=!1,jt=[],pt=null,tn=!1,Ht=0,yn=500,En=0,nr=1e4,Jn={},dr=be,fn=null,qt=null,zt=0,Nt=0,gn,M,te={},ze,ot,Wt=-1,Et,vn=!0,pn=!1,Qt=Pi,sn=zi,mn,Kt;return I(tt,vt,function(ut,Fn){ei(),ut._getDbgPlgTargets=function(){return[M]},ut.initialize=function(pe,$e,ke){(0,H.Lm)($e,function(){return"PostChannel:initialize"},function(){var ft=$e;Fn.initialize(pe,$e,ke);try{var xt=!!$e[va];mn=(0,ne.jU)((0,ge.J)(ut.identifier),$e.evtNamespace&&$e.evtNamespace());var Yt=ut._getTelCtx();pe.extensionConfig[ut.identifier]=pe.extensionConfig[ut.identifier]||{},rt=Yt.getExtCfg(ut.identifier),Kt=Er(rt.setTimeoutOverride,rt.clearTimeoutOverride),vn=!rt.disableOptimizeObj&&(0,Ke.mJ)(),In(ft),rt.eventsLimitInMem>0&&(nr=rt.eventsLimitInMem),rt.immediateEventLimit>0&&(yn=rt.immediateEventLimit),rt.autoFlushEventsLimit>0&&(ze=rt.autoFlushEventsLimit),(0,Fe.hj)(rt[fi])&&(Qt=rt[fi]),(0,Fe.hj)(rt[Oi])&&(sn=rt[Oi]),ln(),rt.httpXHROverride&&rt.httpXHROverride.sendPOST&&(gn=rt.httpXHROverride),(0,Ke.Sn)(pe.anonCookieName)&&M.addQueryStringParameter("anoncknm",pe.anonCookieName),M.sendHook=rt.payloadPreprocessor,M.sendListener=rt.payloadListener;var An=rt.overrideEndpointUrl?rt.overrideEndpointUrl:pe.endpointUrl;ut._notificationManager=$e.getNotifyMgr(),M.initialize(An,ut.core,ut,gn,rt);var Tn=pe.disablePageUnloadEvents||[];(0,ne.c9)(Un,Tn,mn),(0,ne.TJ)(Un,Tn,mn),(0,ne.nD)(rr,pe.disablePageShowEvents,mn)}catch(Nn){throw ut.setInitialized(!1),Nn}},function(){return{coreConfig:pe,core:$e,extensions:ke}})},ut.processTelemetry=function(pe,$e){(0,Ke.if)(pe,ut.identifier),$e=ut._getTelCtx($e);var ke=$e.getExtCfg(ut.identifier),ft=!!rt.disableTelemetry;ke&&(ft=ft||!!ke.disableTelemetry);var xt=pe;!ft&&!Bt&&(rt[Zr]&&(xt.iKey=rt[Zr]),ke&&ke[Zr]&&(xt.iKey=ke[Zr]),kt(xt,!0),pn?hi(2,2):kn()),ut.processNext(xt,$e)},ut._doTeardown=function(pe,$e){hi(2,2),Bt=!0,M.teardown(),(0,ne.JA)(null,mn),(0,ne.C9)(null,mn),(0,ne.Yl)(null,mn),ei()};function In(pe){var $e=pe.getWParam;pe.getWParam=function(){var ke=0;return rt.ignoreMc1Ms0CookieProcessing&&(ke=ke|2),ke|$e()}}o(In,"_hookWParam");function Un(pe){var $e=pe||(0,de.Jj)().event;$e.type!=="beforeunload"&&(pn=!0,M.setUnloading(pn)),hi(2,2)}o(Un,"_handleUnloadEvents");function rr(pe){pn=!1,M.setUnloading(pn)}o(rr,"_handleShowEvents");function kt(pe,$e){if(pe.sendAttempt||(pe.sendAttempt=0),pe.latency||(pe.latency=1),pe.ext&&pe.ext[Zn]&&delete pe.ext[Zn],pe.ext&&pe.ext[_r]&&pe.ext[_r].id&&delete pe.ext[_r].id,vn&&(Ke.if,pe.ext=(0,Fe.Ax)(pe.ext),pe.baseData&&(pe.baseData=(0,Fe.Ax)(pe.baseData)),pe.data&&(pe.data=(0,Fe.Ax)(pe.data))),pe.sync){if(zt||tn)pe.latency=3,pe.sync=!1;else if(M){vn&&(pe=(0,Fe.Ax)(pe)),M.sendSynchronousBatch(Tr.create(pe.iKey,[pe]),pe.sync===!0?1:pe.sync,3);return}}var ke=pe.latency,ft=En,xt=nr;ke===4&&(ft=Ht,xt=yn);var Yt=!1;if(ft<xt)Yt=!Si(pe,$e);else{var An=1,Tn=oa;ke===4&&(An=4,Tn=1),Yt=!0,Mr(pe.iKey,pe.latency,An,Tn)&&(Yt=!Si(pe,$e))}Yt&&$r(di,[pe],Ce.h.QueueFull)}o(kt,"_addEventToQueues"),ut.setEventQueueLimits=function(pe,$e){nr=pe>0?pe:1e4,ze=$e>0?$e:0,ln();var ke=En>pe;if(!ke&&ot>0)for(var ft=1;!ke&&ft<=3;ft++){var xt=te[ft];xt&&xt.batches&&(0,Fe.tO)(xt.batches,function(Yt){Yt&&Yt.count()>=ot&&(ke=!0)})}Wr(!0,ke)},ut.pause=function(){Cr(),tn=!0,M.pause()},ut.resume=function(){tn=!1,M.resume(),kn()},ut.addResponseHandler=function(pe){M._responseHandlers.push(pe)},ut._loadTransmitProfiles=function(pe){zr(),(0,Fe.rW)(pe,function($e,ke){var ft=ke.length;if(ft>=2){var xt=ft>2?ke[2]:0;if(ke.splice(0,ft-2),ke[1]<0&&(ke[0]=-1),ke[1]>0&&ke[0]>0){var Yt=ke[0]/ke[1];ke[0]=Math.ceil(Yt)*ke[1]}xt>=0&&ke[1]>=0&&xt>ke[1]&&(xt=ke[1]),ke.push(xt),Jn[$e]=ke}})},ut.flush=function(pe,$e,ke){if(pe===void 0&&(pe=!0),!tn)if(ke=ke||1,pe)pt==null?(Cr(),ti(1,0,ke),pt=Nr(function(){pt=null,Ci($e,ke)},0)):jt.push($e);else{var ft=Cr();$n(1,1,ke),$e!=null&&$e(),ft&&kn()}},ut.setMsaAuthTicket=function(pe){M.addHeader(vr,pe)},ut.hasEvents=mr,ut._setTransmitProfile=function(pe){dr!==pe&&Jn[pe]!==void 0&&(Cr(),dr=pe,kn())};function $n(pe,$e,ke){var ft=ti(pe,$e,ke);return M.sendQueuedRequests($e,ke),ft}o($n,"_sendEventsForLatencyAndAbove");function mr(){return En>0}o(mr,"_hasEvents");function kn(){if(Wt>=0&&ti(Wt,0,Et)&&M.sendQueuedRequests(0,Et),Ht>0&&!qt&&!tn){var pe=Jn[dr][2];pe>=0&&(qt=Nr(function(){qt=null,$n(4,0,1),kn()},pe))}var $e=Jn[dr][1];!fn&&!pt&&$e>=0&&!tn&&(mr()?fn=Nr(function(){fn=null,$n(Nt===0?3:1,0,1),Nt++,Nt%=2,kn()},$e):Nt=0)}o(kn,"_scheduleTimer"),ut._backOffTransmission=function(){zt<ea&&(zt++,Cr(),kn())},ut._clearBackOff=function(){zt&&(zt=0,Cr(),kn())};function ei(){rt=null,Bt=!1,jt=[],pt=null,tn=!1,Ht=0,yn=500,En=0,nr=1e4,Jn={},dr=be,fn=null,qt=null,zt=0,Nt=0,gn=null,te={},ze=void 0,ot=0,Wt=-1,Et=null,vn=!0,pn=!1,Qt=Pi,sn=zi,mn=null,Kt=Er(),M=new or(Mi,Vi,ta,{requeue:si,send:Ze,sent:st,drop:yt,rspFail:Rt,oth:Pt},Kt),Pr(),fr(),ln()}o(ei,"_initDefaults");function Nr(pe,$e){$e===0&&zt&&($e=1);var ke=1e3;return zt&&(ke=_t(zt-1)),Kt.set(pe,$e*ke)}o(Nr,"_createTimer");function Cr(){return fn!==null?(Kt.clear(fn),fn=null,Nt=0,!0):!1}o(Cr,"_clearScheduledTimer");function hi(pe,$e){Cr(),pt&&(Kt.clear(pt),pt=null),tn||$n(1,pe,$e)}o(hi,"_releaseAllQueues");function fr(){te[4]={batches:[],iKeyMap:{}},te[3]={batches:[],iKeyMap:{}},te[2]={batches:[],iKeyMap:{}},te[1]={batches:[],iKeyMap:{}}}o(fr,"_clearQueues");function oi(pe,$e,ke){var ft=te[$e];ft||($e=1,ft=te[$e]);var xt=ft.iKeyMap[pe];return!xt&&ke&&(xt=Tr.create(pe),ft.batches.push(xt),ft.iKeyMap[pe]=xt),xt}o(oi,"_getEventBatch");function Wr(pe,$e){M.canSendRequest()&&!zt&&(ze>0&&En>ze&&($e=!0),$e&&pt==null&&ut.flush(pe,null,20))}o(Wr,"_performAutoFlush");function Si(pe,$e){vn&&(pe=(0,Fe.Ax)(pe));var ke=pe.latency,ft=oi(pe.iKey,ke,!0);return ft.addEvent(pe)?(ke!==4?(En++,$e&&pe.sendAttempt===0&&Wr(!pe.sync,ot>0&&ft.count()>=ot)):Ht++,!0):!1}o(Si,"_addEventToProperQueue");function Mr(pe,$e,ke,ft){for(;ke<=$e;){var xt=oi(pe,$e,!0);if(xt&&xt.count()>0){var Yt=xt.split(0,ft),An=Yt.count();if(An>0)return ke===4?Ht-=An:En-=An,ye(di,[Yt],Ce.h.QueueFull),!0}ke++}return gi(),!1}o(Mr,"_dropEventWithLatencyOrLess");function gi(){for(var pe=0,$e=0,ke=o(function(xt){var Yt=te[xt];Yt&&Yt.batches&&(0,Fe.tO)(Yt.batches,function(An){xt===4?pe+=An.count():$e+=An.count()})},"_loop_1"),ft=1;ft<=4;ft++)ke(ft);En=$e,Ht=pe}o(gi,"_resetQueueCounts");function ti(pe,$e,ke){var ft=!1,xt=$e===0;return!xt||M.canSendRequest()?(0,H.Lm)(ut.core,function(){return"PostChannel._queueBatches"},function(){for(var Yt=[],An=4;An>=pe;){var Tn=te[An];Tn&&Tn.batches&&Tn.batches.length>0&&((0,Fe.tO)(Tn.batches,function(Nn){M.addBatch(Nn)?ft=ft||Nn&&Nn.count()>0:Yt=Yt.concat(Nn.events()),An===4?Ht-=Nn.count():En-=Nn.count()}),Tn.batches=[],Tn.iKeyMap={}),An--}Yt.length>0&&$r(di,Yt,Ce.h.KillSwitch),ft&&Wt>=pe&&(Wt=-1,Et=0)},function(){return{latency:pe,sendType:$e,sendReason:ke}},!xt):(Wt=Wt>=0?Math.min(Wt,pe):pe,Et=Math.max(Et,ke)),ft}o(ti,"_queueBatches");function Ci(pe,$e){$n(1,0,$e),gi(),vi(function(){pe&&pe(),jt.length>0?pt=Nr(function(){pt=null,Ci(jt.shift(),$e)},0):(pt=null,kn())})}o(Ci,"_flushImpl");function vi(pe){M.isCompletelyIdle()?pe():pt=Nr(function(){pt=null,vi(pe)},Zi)}o(vi,"_waitForIdleManager");function zr(){Cr(),Pr(),dr=be,kn()}o(zr,"_resetTransmitProfiles");function Pr(){Jn={},Jn[be]=[2,1,0],Jn[Ne]=[6,3,0],Jn[q]=[18,9,0]}o(Pr,"_initializeProfiles");function si(pe,$e){var ke=[],ft=Qt;pn&&(ft=sn),(0,Fe.tO)(pe,function(xt){xt&&xt.count()>0&&(0,Fe.tO)(xt.events(),function(Yt){Yt&&(Yt.sync&&(Yt.latency=4,Yt.sync=!1),Yt.sendAttempt<ft?((0,Ke.if)(Yt,ut.identifier),kt(Yt,!1)):ke.push(Yt))})}),ke.length>0&&$r(di,ke,Ce.h.NonRetryableStatus),pn&&hi(2,2)}o(si,"_requeueEvents");function hr(pe,$e){var ke=ut._notificationManager||{},ft=ke[pe];if(ft)try{ft.apply(ke,$e)}catch(xt){(0,Me.kP)(ut.diagLog(),1,74,pe+" notification failed: "+xt)}}o(hr,"_callNotification");function $r(pe,$e){for(var ke=[],ft=2;ft<arguments.length;ft++)ke[ft-2]=arguments[ft];$e&&$e.length>0&&hr(pe,[$e].concat(ke))}o($r,"_notifyEvents");function ye(pe,$e){for(var ke=[],ft=2;ft<arguments.length;ft++)ke[ft-2]=arguments[ft];$e&&$e.length>0&&(0,Fe.tO)($e,function(xt){xt&&xt.count()>0&&hr(pe,[xt.events()].concat(ke))})}o(ye,"_notifyBatchEvents");function Ze(pe,$e,ke){pe&&pe.length>0&&hr("eventsSendRequest",[$e>=1e3&&$e<=1999?$e-1e3:0,ke!==!0])}o(Ze,"_sendingEvent");function st(pe,$e){ye("eventsSent",pe,$e),kn()}o(st,"_eventsSentEvent");function yt(pe,$e){ye(di,pe,$e>=8e3&&$e<=8999?$e-8e3:Ce.h.Unknown)}o(yt,"_eventsDropped");function Rt(pe){ye(di,pe,Ce.h.NonRetryableStatus),kn()}o(Rt,"_eventsResponseFail");function Pt(pe,$e){ye(di,pe,Ce.h.Unknown),kn()}o(Pt,"_otherEvent");function ln(){!rt||!rt.disableAutoBatchFlushLimit?ot=Math.max(Mi*(Vi+1),nr/6):ot=0}o(ln,"_setAutoLimits"),(0,Fe.l_)(ut,"_setTimeoutOverride",function(){return Kt.set},function(pe){Kt=Er(pe,Kt.clear)}),(0,Fe.l_)(ut,"_clearTimeoutOverride",function(){return Kt.clear},function(pe){Kt=Er(Kt.set,pe)})}),vt}return o(tt,"PostChannel"),tt.__ieDyn=1,tt}(Qe.i);const Ji=ai},4873:(at,l,C)=>{"use strict";C.d(l,{By:()=>v,cc:()=>w});var R=C(6708);function v(B){var N={};return(0,R.rW)(B,function(m,y){N[m]=y,N[y]=m}),(0,R._A)(N)}o(v,"createEnumStyle");function P(B){var N={};return objForEachKey(B,function(m,y){N[m]=m,N[y]=m}),deepFreeze(N)}o(P,"createEnumMap");function w(B){var N={};return(0,R.rW)(B,function(m,y){N[m]=y[1],N[y[0]]=y[1]}),(0,R._A)(N)}o(w,"createValueMap")},5928:(at,l,C)=>{"use strict";C.d(l,{h:()=>v});var R=C(4873),v=(0,R.By)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})},7310:(at,l,C)=>{"use strict";C.d(l,{X:()=>Q,v:()=>X});var R=C(4873),v,P="Failed",w=P+"MonitorAjax",B="Track",N="Start",m="Stop",y="Event",U="AuthContext",W="Exception",_="Local",O="Session",x="Storage",J="Browser",se="Cannot",Ae="Buffer",$="InstrumentationKey",Q=(0,R.By)({CRITICAL:1,WARNING:2}),X=(0,R.By)((v={},v[J+"DoesNotSupport"+_+x]=0,v[J+se+"Read"+_+x]=1,v[J+se+"Read"+O+x]=2,v[J+se+"Write"+_+x]=3,v[J+se+"Write"+O+x]=4,v[J+P+"RemovalFrom"+_+x]=5,v[J+P+"RemovalFrom"+O+x]=6,v[se+"SendEmptyTelemetry"]=7,v.ClientPerformanceMathError=8,v["ErrorParsingAI"+O+"Cookie"]=9,v.ErrorPVCalc=10,v[W+"WhileLoggingError"]=11,v[P+"AddingTelemetryTo"+Ae]=12,v[w+"Abort"]=13,v[w+"Dur"]=14,v[w+"Open"]=15,v[w+"RSC"]=16,v[w+"Send"]=17,v[w+"GetCorrelationHeader"]=18,v[P+"ToAddHandlerForOnBeforeUnload"]=19,v[P+"ToSendQueuedTelemetry"]=20,v[P+"ToReportDataLoss"]=21,v["Flush"+P]=22,v.MessageLimitPerPVExceeded=23,v.MissingRequiredFieldSpecification=24,v.NavigationTimingNotSupported=25,v.OnError=26,v[O+"RenewalDateIsZero"]=27,v.SenderNotInitialized=28,v[N+B+y+P]=29,v[m+B+y+P]=30,v[N+B+P]=31,v[m+B+P]=32,v.TelemetrySampledAndNotSent=33,v[B+y+P]=34,v[B+W+P]=35,v[B+"Metric"+P]=36,v[B+"PV"+P]=37,v[B+"PV"+P+"Calc"]=38,v[B+"Trace"+P]=39,v["Transmission"+P]=40,v[P+"ToSet"+x+Ae]=41,v[P+"ToRestore"+x+Ae]=42,v.InvalidBackendResponse=43,v[P+"ToFixDepricatedValues"]=44,v.InvalidDurationValue=45,v.TelemetryEnvelopeInvalid=46,v.CreateEnvelopeError=47,v[se+"SerializeObject"]=48,v[se+"SerializeObjectNonSerializable"]=49,v.CircularReferenceDetected=50,v["Clear"+U+P]=51,v[W+"Truncated"]=52,v.IllegalCharsInName=53,v.ItemNotInArray=54,v.MaxAjaxPerPVExceeded=55,v.MessageTruncated=56,v.NameTooLong=57,v.SampleRateOutOfRange=58,v["Set"+U+P]=59,v["Set"+U+P+"AccountName"]=60,v.StringValueTooLong=61,v.StartCalledMoreThanOnce=62,v.StopCalledWithoutStart=63,v["TelemetryInitializer"+P]=64,v.TrackArgumentsNotSpecified=65,v.UrlTooLong=66,v[O+x+Ae+"Full"]=67,v[se+"AccessCookie"]=68,v.IdTooLong=69,v.InvalidEvent=70,v[w+"SetRequestHeader"]=71,v["Send"+J+"InfoOnUserInit"]=72,v["Plugin"+W]=73,v["Notification"+W]=74,v.SnippetScriptLoadFailure=99,v["Invalid"+$]=100,v[se+"ParseAiBlobValue"]=101,v.InvalidContentBlob=102,v[B+"PageAction"+y+P]=103,v[P+"AddingCustomDefinedRequestContext"]=104,v["InMemory"+x+Ae+"Full"]=105,v[$+"Deprecation"]=106,v))},5121:(at,l,C)=>{"use strict";C.d(l,{F:()=>W});var R=C(1088),v=C(1679),P=C(8096),w=C(6900),B=C(5018),N=C(6708),m=C(6041),y=C(1880),U=C(9288),W=function(_){(0,R.ne)(O,_);function O(){var x=_.call(this)||this;return(0,v.Z)(O,x,function(J,se){J[P.VL]=function(Q,X,L,Y){se[P.VL](Q,X,L||new B.AQ(Q),Y||new y.f(Q))},J.track=function(Q){(0,U.Lm)(J[m.kl](),function(){return"AppInsightsCore:track"},function(){Q===null&&($(Q),(0,N._y)("Invalid telemetry item")),Ae(Q),se.track(Q)},function(){return{item:Q}},!Q.sync)};function Ae(Q){(0,N.le)(Q[P.I])&&($(Q),(0,N._y)("telemetry name required"))}o(Ae,"_validateTelemetryItem");function $(Q){var X=J[P.tb]();X&&X[m.$F]([Q],2)}o($,"_notifyInvalidEvent")}),x}return o(O,"AppInsightsCore"),O.__ieDyn=1,O}(w.A)},6900:(at,l,C)=>{"use strict";C.d(l,{A:()=>fe});var R=C(1088),v=C(1679),P=C(2091),w=C(8096),B=C(6708),N=C(6041),m=C(1589),y=C(3833),U=500,W="Channel has invalid priority - ";function _(ue,z,he){z&&(0,B.kJ)(z)&&z[w.R5]>0&&(z=z.sort(function(xe,Ve){return xe[N.yi]-Ve[N.yi]}),(0,B.tO)(z,function(xe){xe[N.yi]<U&&(0,B._y)(W+xe[w.pZ])}),ue[w.MW]({queue:(0,B.FL)(z),chain:(0,m.jV)(z,he[w.TC],he)}))}o(_,"_addChannelQueue");function O(ue,z){function he(){return(0,m.CD)(null,z[w.TC],z,null)}o(he,"_getTelCtx");function xe(I,H,ne,ge){var Ke=I?I[w.R5]+1:1;function Fe(){Ke--,Ke===0&&(ge&&ge(),ge=null)}o(Fe,"_runChainOnComplete"),Ke>0&&(0,B.tO)(I,function(de){if(de&&de.queue[w.R5]>0){var Ce=de.chain,Me=H[w.zV](Ce);Me[w.Fc](Fe),ne(Me)}else Ke--}),Fe()}o(xe,"_processChannelQueue");function Ve(I,H){var ne=H||{reason:0};return xe(ue,I,function(ge){ge[w.uL](ne)},function(){I[w.uL](ne)}),!0}o(Ve,"_doUpdate");function oe(I,H){var ne=H||{reason:0,isAsync:!1};return xe(ue,I,function(ge){ge[w.uL](ne)},function(){I[w.uL](ne),dt=!1}),!0}o(oe,"_doTeardown");function nt(I){var H=null;return ue&&ue[w.R5]>0&&(0,B.tO)(ue,function(ne){if(ne&&ne.queue[w.R5]>0&&((0,B.tO)(ne.queue,function(ge){if(ge[w.pZ]===I)return H=ge,-1}),H))return-1}),H}o(nt,"_getChannel");var dt=!1,ht={identifier:"ChannelControllerPlugin",priority:U,initialize:function(I,H,ne,ge){dt=!0,(0,B.tO)(ue,function(Ke){Ke&&Ke.queue[w.R5]>0&&(0,y.bP)((0,m.CD)(Ke.chain,I,H),ne)})},isInitialized:function(){return dt},processTelemetry:function(I,H){xe(ue,H||he(),function(ne){ne[w.uL](I)},function(){H[w.uL](I)})},update:Ve,pause:function(){xe(ue,he(),function(I){I.iterate(function(H){H.pause&&H.pause()})},null)},resume:function(){xe(ue,he(),function(I){I.iterate(function(H){H.resume&&H.resume()})},null)},teardown:oe,getChannel:nt,flush:function(I,H,ne,ge){var Ke=1,Fe=!1,de=null;ge=ge||5e3;function Ce(){Ke--,Fe&&Ke===0&&(de&&(clearTimeout(de),de=null),H&&H(Fe),H=null)}return o(Ce,"doCallback"),xe(ue,he(),function(Me){Me.iterate(function(Qe){if(Qe[w.kL]){Ke++;var be=!1;Qe[w.kL](I,function(){be=!0,Ce()},ne)||be||(I&&de==null?de=setTimeout(function(){de=null,Ce()},ge):Ce())}})},function(){Fe=!0,Ce()}),!0},_setQueue:function(I){ue=I}};return ht}o(O,"createChannelControllerPlugin");function x(ue,z,he){var xe=[];if(ue&&(0,B.tO)(ue,function(oe){return _(xe,oe,he)}),z){var Ve=[];(0,B.tO)(z,function(oe){oe[N.yi]>U&&Ve[w.MW](oe)}),_(xe,Ve,he)}return xe}o(x,"createChannelQueues");var J=C(3242),se=C(5883),Ae=C(7158),$=C(5018),Q=C(9288),X=C(4063),L=C(7630),Y=function(ue){(0,R.ne)(z,ue);function z(){var he=ue.call(this)||this;he.identifier="TelemetryInitializerPlugin",he.priority=199;var xe,Ve;oe(),(0,v.Z)(z,he,function(nt,dt){nt.addTelemetryInitializer=function(ht){var I={id:xe++,fn:ht};Ve[w.MW](I);var H={remove:function(){(0,B.tO)(Ve,function(ne,ge){if(ne.id===I.id)return Ve[w.cb](ge,1),-1})}};return H},nt[N.hL]=function(ht,I){for(var H=!1,ne=Ve[w.R5],ge=0;ge<ne;++ge){var Ke=Ve[ge];if(Ke)try{if(Ke.fn[w.ZV](null,[ht])===!1){H=!0;break}}catch(Fe){(0,$.kP)(I[w.mc](),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,B.jj)(Fe),{exception:(0,L.eU)(Fe)},!0)}}H||nt[w.uL](ht,I)},nt[w.F3]=function(){oe()}});function oe(){xe=0,Ve=[]}return o(oe,"_initDefaults"),he}return o(z,"TelemetryInitializerPlugin"),z.__ieDyn=1,z}(X.i),k=C(310),le="Plugins must provide initialize method",G="_notificationManager",ve="SDK is still unloading...",_e="SDK is not initialized",Ie={loggingLevelConsole:1};function ie(ue,z){return new Q.Jk(z)}o(ie,"_createPerfManager");function Se(ue,z,he){var xe,Ve=[],oe={};return(0,B.tO)(he,function(nt){((0,B.le)(nt)||(0,B.le)(nt[w.VL]))&&(0,B._y)(le);var dt=nt[N.yi],ht=nt[w.pZ];nt&&dt&&((0,B.le)(oe[dt])?oe[dt]=ht:(0,$.jV)(ue,"Two extensions have same priority #"+dt+" - "+oe[dt]+", "+ht)),(!dt||dt<z)&&Ve[w.MW](nt)}),xe={all:he},xe[N.oV]=Ve,xe}o(Se,"_validateExtensions");function D(ue,z){var he=!1;return(0,B.tO)(z,function(xe){if(xe===ue)return he=!0,-1}),he}o(D,"_isPluginPresent");function He(){var ue;return(0,P.pu)((ue={},ue[w.g]=function(z){},ue[w.n7]=function(z){},ue[N.uC]=function(z){},ue[N.$F]=function(z,he){},ue[N.f_]=function(z,he){},ue))}o(He,"_createDummyNotificationManager");var fe=function(){function ue(){var z,he,xe,Ve,oe,nt,dt,ht,I,H,ne,ge,Ke,Fe,de,Ce,Me,Qe,be,Ne,q=0;(0,v.Z)(ue,this,function(Re){ae(),Re[w.yl]=function(){return he},Re[w.VL]=function(ct,$t,en,Zt){Fe&&(0,B._y)(ve),Re[w.yl]()&&(0,B._y)("Core should not be initialized more than once"),z=ct||{},Re[w.TC]=z,(0,B.le)(ct[w.p$])&&(0,B._y)("Please provide instrumentation key"),Ve=Zt,Re[G]=Zt,Xn(),Kn(),gr(),en&&(Re[w.eZ]=en);var nn=(0,B.qK)(z,N.js,[]);I=[],I[w.MW].apply(I,(0,R.$h)((0,R.$h)([],$t,!1),nn,!1)),ge=(0,B.qK)(z,N.Z,[]),Ye(null),(!Ke||Ke[w.R5]===0)&&(0,B._y)("No "+N.Z+" available"),he=!0,Re.releaseQueue()},Re.getTransmissionControls=function(){var ct=[];return Ke&&(0,B.tO)(Ke,function($t){ct[w.MW]($t.queue)}),(0,B.FL)(ct)},Re.track=function(ct){ct.iKey=ct.iKey||z[w.p$],ct[w.Z_]=ct[w.Z_]||(0,B.Y6)(new Date),ct.ver=ct.ver||"4.0",!Fe&&Re[w.yl]()?j()[w.uL](ct):xe[w.MW](ct)},Re[w.SD]=j,Re[w.tb]=function(){return Ve||(Ve=He(),Re[G]=Ve),Ve},Re[w.g]=function(ct){Ve&&Ve[w.g](ct)},Re[w.n7]=function(ct){Ve&&Ve[w.n7](ct)},Re.getCookieMgr=function(){return dt||(dt=(0,J.Nz)(z,Re[w.eZ])),dt},Re.setCookieMgr=function(ct){dt=ct},Re[N.kl]=function(){if(!oe&&!nt&&(0,B.v4)(z.enablePerfMgr)){var ct=(0,B.v4)(z[N.DN]);(0,B.mf)(ct)&&(nt=ct(Re,Re[w.tb]()))}return oe||nt||(0,Q.j5)()},Re.setPerfMgr=function(ct){oe=ct},Re.eventCnt=function(){return xe[w.R5]},Re.releaseQueue=function(){if(he&&xe[w.R5]>0){var ct=xe;xe=[],(0,B.tO)(ct,function($t){j()[w.uL]($t)})}},Re.pollInternalLogs=function(ct){Ce=ct||null;var $t=(0,B.v4)(z.diagnosticLogInterval);return(!$t||!($t>0))&&($t=1e4),q&&clearInterval(q),q=setInterval(function(){Sn()},$t),q},Re[w.LS]=function(){q&&(clearInterval(q),q=0,Sn())},(0,B.Vb)(Re,function(){return de},["addTelemetryInitializer"]),Re.unload=function(ct,$t,en){var Zt;ct===void 0&&(ct=!0),he||(0,B._y)(_e),Fe&&(0,B._y)(ve);var nn=(Zt={reason:50},Zt[w.d]=ct,Zt.flushComplete=!1,Zt),Dn=(0,m.Bt)(Gt(),Re);Dn[w.Fc](function(){ae(),$t&&$t(nn)},Re);function ar(vr){nn.flushComplete=vr,Fe=!0,Qe.run(Dn,nn),Re[w.LS](),Dn[w.uL](nn)}o(ar,"_doUnload"),jn(ct,ar,6,en)||ar(!1)},Re[w.TO]=Ft,Re.addPlugin=function(ct,$t,en,Zt){if(!ct){Zt&&Zt(!1),kr(le);return}var nn=Ft(ct[w.pZ]);if(nn&&!$t){Zt&&Zt(!1),kr("Plugin ["+ct[w.pZ]+"] is already loaded!");return}var Dn={reason:16};function ar(pr){I[w.MW](ct),Dn.added=[ct],Ye(Dn),Zt&&Zt(!0)}if(o(ar,"_addPlugin"),nn){var vr=[nn.plugin],Gn={reason:2,isAsync:!!en};xn(vr,Gn,function(pr){pr?(Dn.removed=vr,Dn.reason|=32,ar(!0)):Zt&&Zt(!1)})}else ar(!1)},Re.evtNamespace=function(){return Me},Re[w.kL]=jn,Re.getTraceCtx=function(ct){return Ne||(Ne=(0,y.Yn)()),Ne},Re.setTraceCtx=function(ct){Ne=ct||null},(0,B.Oi)(Re,"addUnloadCb",function(){return Qe},"add");function ae(){he=!1,z=(0,B.mm)(!0,{},Ie),Re[w.TC]=z,Re[w.eZ]=new $.AQ(z),Re[w.iC]=[],de=new Y,xe=[],Ve=null,oe=null,nt=null,dt=null,ht=null,H=null,I=[],ne=null,ge=null,Ke=null,Fe=!1,Ce=null,Me=(0,se.J)("AIBaseCore",!0),Qe=(0,k.Y)(),Ne=null}o(ae,"_initDefaults");function j(){return(0,m.CD)(Gt(),z,Re)}o(j,"_createTelCtx");function Ye(ct){var $t=Se(Re[w.eZ],U,I);H=$t[N.oV],ht=null;var en=$t.all;if(Ke=(0,B.FL)(x(ge,en,Re)),ne){var Zt=(0,B.UA)(en,ne);Zt!==-1&&en[w.cb](Zt,1),Zt=(0,B.UA)(H,ne),Zt!==-1&&H[w.cb](Zt,1),ne._setQueue(Ke)}else ne=O(Ke,Re);en[w.MW](ne),H[w.MW](ne),Re[w.iC]=(0,y.AA)(en),ne[w.VL](z,Re,en),(0,y.bP)(j(),en),Re[w.iC]=(0,B.FL)((0,y.AA)(H||[])).slice(),ct&&Lr(ct)}o(Ye,"_initPluginChain");function Ft(ct){var $t,en=null,Zt=null;return(0,B.tO)(Re[w.iC],function(nn){if(nn[w.pZ]===ct&&nn!==ne&&nn!==de)return Zt=nn,-1}),!Zt&&ne&&(Zt=ne.getChannel(ct)),Zt&&(en=($t={plugin:Zt},$t[w.$h]=function(nn){(0,y.OY)(Zt)[N.mE]=!nn},$t.isEnabled=function(){var nn=(0,y.OY)(Zt);return!nn[w.fi]&&!nn[N.mE]},$t.remove=function(nn,Dn){var ar;nn===void 0&&(nn=!0);var vr=[Zt],Gn=(ar={reason:1},ar[w.d]=nn,ar);xn(vr,Gn,function(pr){pr&&Ye({reason:32,removed:vr}),Dn&&Dn(pr)})},$t)),en}o(Ft,"_getPlugin");function Gt(){if(!ht){var ct=(H||[]).slice();(0,B.UA)(ct,de)===-1&&ct[w.MW](de),ht=(0,m.jV)((0,y.AA)(ct),z,Re)}return ht}o(Gt,"_getPluginChain");function xn(ct,$t,en){if(ct&&ct[w.R5]>0){var Zt=(0,m.jV)(ct,z,Re),nn=(0,m.Bt)(Zt,Re);nn[w.Fc](function(){var Dn=!1,ar=[];(0,B.tO)(I,function(Gn,pr){D(Gn,ct)?Dn=!0:ar[w.MW](Gn)}),I=ar;var vr=[];ge&&((0,B.tO)(ge,function(Gn,pr){var Br=[];(0,B.tO)(Gn,function(On){D(On,ct)?Dn=!0:Br[w.MW](On)}),vr[w.MW](Br)}),ge=vr),en&&en(Dn)}),nn[w.uL]($t)}else en(!1)}o(xn,"_removePlugins");function Sn(){var ct=Re[w.eZ]?Re[w.eZ].queue:[];ct&&((0,B.tO)(ct,function($t){var en,Zt=(en={},en[w.I]=Ce||"InternalMessageId: "+$t[w.Gc],en.iKey=(0,B.v4)(z[w.p$]),en.time=(0,B.Y6)(new Date),en.baseType=$.lQ.dataType,en.baseData={message:$t[w.gU]},en);Re.track(Zt)}),ct[w.R5]=0)}o(Sn,"_flushInternalLogs");function jn(ct,$t,en,Zt){return ne?ne[w.kL](ct,$t,en||6,Zt):($t&&$t(!1),!0)}o(jn,"_flushChannels");function Xn(){var ct=(0,B.v4)(z.disableDbgExt);ct===!0&&be&&(Ve[w.n7](be),be=null),Ve&&!be&&ct!==!0&&(be=(0,Ae.p)(z),Ve[w.g](be))}o(Xn,"_initDebugListener");function Kn(){var ct=(0,B.v4)(z.enablePerfMgr);!ct&&nt&&(nt=null),ct&&(0,B.qK)(z,N.DN,ie)}o(Kn,"_initPerfManager");function gr(){var ct=(0,B.qK)(z,N.Zh,{});ct.NotificationManager=Ve}o(gr,"_initExtConfig");function Lr(ct){var $t=(0,m.xy)(Gt(),Re);(!Re._updateHook||Re._updateHook($t,ct)!==!0)&&$t[w.uL](ct)}o(Lr,"_doUpdate");function kr(ct){var $t=Re[w.eZ];$t?(0,$.kP)($t,2,73,ct):(0,B._y)(ct)}o(kr,"_logOrThrowError")})}return o(ue,"BaseCore"),ue.__ieDyn=1,ue}()},4063:(at,l,C)=>{"use strict";C.d(l,{i:()=>y});var R=C(1679),v=C(8096),P=C(6708),w=C(6041),B=C(1589),N=C(310),m="getPlugin",y=function(){function U(){var W=this,_,O,x,J,se;Q(),(0,R.Z)(U,W,function(X){X[v.VL]=function(L,Y,k,le){$(L,Y,le),_=!0},X[v.fi]=function(L,Y){var k,le=X[w.oV];if(!le||L&&le!==L[w.oV]())return;var G,ve=!1,_e=L||(0,B.Bt)(null,le,x&&x[m]?x[m]():x),Ie=Y||(k={reason:0},k[v.d]=!1,k);function ie(){if(!ve){ve=!0,J.run(_e,Y);var Se=se;se=[],(0,P.tO)(Se,function(D){D.rm()}),G===!0&&_e[v.uL](Ie),Q()}}return o(ie,"_unloadCallback"),!X[v.F3]||X[v.F3](_e,Ie,ie)!==!0?ie():G=!0,G},X[v.Tu]=function(L,Y){var k=X[w.oV];if(!k||L&&k!==L[w.oV]())return;var le,G=!1,ve=L||(0,B.xy)(null,k,x&&x[m]?x[m]():x),_e=Y||{reason:0};function Ie(){G||(G=!0,$(ve.getCfg(),ve.core(),ve[v.W2]()))}return o(Ie,"_updateCallback"),!X._doUpdate||X._doUpdate(ve,_e,Ie)!==!0?Ie():le=!0,le},X._addHook=function(L){L&&((0,P.kJ)(L)?se=se.concat(L):se[v.MW](L))},(0,P.Oi)(X,"_addUnloadCb",function(){return J},"add")}),W[v.mc]=function(X){return Ae(X)[v.mc]()},W[v.yl]=function(){return _},W.setInitialized=function(X){_=X},W[v.Jd]=function(X){x=X},W[v.uL]=function(X,L){L?L[v.uL](X):x&&(0,P.mf)(x[w.hL])&&x[w.hL](X,null)},W._getTelCtx=Ae;function Ae(X){X===void 0&&(X=null);var L=X;if(!L){var Y=O||(0,B.CD)(null,{},W[w.oV]);x&&x[m]?L=Y[v.zV](null,x[m]):L=Y[v.zV](null,x)}return L}o(Ae,"_getTelCtx");function $(X,L,Y){X&&(0,P.sO)(X,w.Zh,[],null,P.le),!Y&&L&&(Y=L[v.SD]()[v.W2]());var k=x;x&&x[m]&&(k=x[m]()),W[w.oV]=L,O=(0,B.CD)(Y,X,L,k)}o($,"_setDefaults");function Q(){_=!1,W[w.oV]=null,O=null,x=null,se=[],J=(0,N.Y)()}o(Q,"_initDefaults")}return o(U,"BaseTelemetryPlugin"),U.__ieDyn=1,U}()},3242:(at,l,C)=>{"use strict";C.d(l,{JP:()=>ve,Nz:()=>_e,UY:()=>ue,kj:()=>L,p7:()=>Ie});var R=C(8096),v=C(5018),P=C(7630),w=C(6708),B=C(6041),N="toGMTString",m="toUTCString",y="cookie",U="expires",W="enabled",_="isCookieUseDisabled",O="disableCookiesUsage",x="_ckMgr",J=null,se=null,Ae=null,$=(0,P.Me)(),Q={},X={};function L(z,he){var xe=_e[x]||X[x];return xe||(xe=_e[x]=_e(z,he),X[x]=xe),xe}o(L,"_gblCookieMgr");function Y(z){return z?z.isEnabled():!0}o(Y,"_isMgrEnabled");function k(z){var he=z[R.Lk]=z[R.Lk]||{};if((0,w.sO)(he,"domain",z.cookieDomain,w.BX,w.le),(0,w.sO)(he,"path",z.cookiePath||"/",null,w.le),(0,w.le)(he[W])){var xe=void 0;(0,w.o8)(z[_])||(xe=!z[_]),(0,w.o8)(z[O])||(xe=!z[O]),he[W]=xe}return he}o(k,"_createCookieMgrConfig");function le(z,he){return he&&z&&(0,w.kJ)(z.ignoreCookies)?z.ignoreCookies[R.ou](he)!==-1:!1}o(le,"_isIgnoredCookie");function G(z,he){return he&&z&&(0,w.kJ)(z.blockedCookies)&&z.blockedCookies[R.ou](he)!==-1?!0:le(z,he)}o(G,"_isBlockedCookie");function ve(z,he){var xe;if(z)xe=z.getCookieMgr();else if(he){var Ve=he[R.Lk];Ve[x]?xe=Ve[x]:xe=_e(he)}return xe||(xe=L(he,(z||{})[R.eZ])),xe}o(ve,"safeGetCookieMgr");function _e(z,he){var xe,Ve=k(z||X),oe=Ve.path||"/",nt=Ve.domain,dt=Ve[W]!==!1,ht=(xe={isEnabled:function(){var I=dt&&Ie(he),H=X[x];return I&&H&&ht!==H&&(I=Y(H)),I}},xe[R.$h]=function(I){dt=I!==!1},xe.set=function(I,H,ne,ge,Ke){var Fe=!1;if(Y(ht)&&!G(Ve,I)){var de={},Ce=(0,w.nd)(H||B.qS),Me=Ce[R.ou](";");if(Me!==-1&&(Ce=(0,w.nd)(H[R.zc](0,Me)),de=ie(H[R.zc](Me+1))),(0,w.sO)(de,"domain",ge||nt,w.fQ,w.o8),!(0,w.le)(ne)){var Qe=(0,P.w1)();if((0,w.o8)(de[U])){var be=(0,w.m6)(),Ne=be+ne*1e3;if(Ne>0){var q=new Date;q.setTime(Ne),(0,w.sO)(de,U,Se(q,Qe?N:m)||Se(q,Qe?N:m)||B.qS,w.fQ)}}Qe||(0,w.sO)(de,"max-age",B.qS+ne,null,w.o8)}var Re=(0,P.k$)();Re&&Re.protocol==="https:"&&((0,w.sO)(de,"secure",null,null,w.o8),se===null&&(se=!ue(((0,P.jW)()||{})[R.qV])),se&&(0,w.sO)(de,"SameSite","None",null,w.o8)),(0,w.sO)(de,"path",Ke||oe,null,w.o8);var ae=Ve.setCookie||fe;ae(I,D(Ce,de)),Fe=!0}return Fe},xe.get=function(I){var H=B.qS;return Y(ht)&&!le(Ve,I)&&(H=(Ve.getCookie||He)(I)),H},xe.del=function(I,H){var ne=!1;return Y(ht)&&(ne=ht.purge(I,H)),ne},xe.purge=function(I,H){var ne,ge=!1;if(Ie(he)){var Ke=(ne={},ne.path=H||"/",ne[U]="Thu, 01 Jan 1970 00:00:01 GMT",ne);(0,P.w1)()||(Ke["max-age"]="0");var Fe=Ve.delCookie||fe;Fe(I,D(B.qS,Ke)),ge=!0}return ge},xe);return ht[x]=ht,ht}o(_e,"createCookieMgr");function Ie(z){if(J===null){J=!1;try{var he=$||{};J=he[y]!==void 0}catch(xe){(0,v.kP)(z,2,68,"Cannot access document.cookie - "+(0,w.jj)(xe),{exception:(0,P.eU)(xe)})}}return J}o(Ie,"areCookiesSupported");function ie(z){var he={};if(z&&z[R.R5]){var xe=(0,w.nd)(z)[R.w6](";");(0,w.tO)(xe,function(Ve){if(Ve=(0,w.nd)(Ve||B.qS),Ve){var oe=Ve[R.ou]("=");oe===-1?he[Ve]=null:he[(0,w.nd)(Ve[R.zc](0,oe))]=(0,w.nd)(Ve[R.zc](oe+1))}})}return he}o(ie,"_extractParts");function Se(z,he){return(0,w.mf)(z[he])?z[he]():null}o(Se,"_formatDate");function D(z,he){var xe=z||B.qS;return(0,w.rW)(he,function(Ve,oe){xe+="; "+Ve+((0,w.le)(oe)?B.qS:"="+oe)}),xe}o(D,"_formatCookieValue");function He(z){var he=B.qS;if($){var xe=$[y]||B.qS;Ae!==xe&&(Q=ie(xe),Ae=xe),he=(0,w.nd)(Q[z]||B.qS)}return he}o(He,"_getCookieValue");function fe(z,he){$&&($[y]=z+"="+he)}o(fe,"_setCookieValue");function ue(z){return(0,w.HD)(z)?!!((0,w._Q)(z,"CPU iPhone OS 12")||(0,w._Q)(z,"iPad; CPU OS 12")||(0,w._Q)(z,"Macintosh; Intel Mac OS X 10_14")&&(0,w._Q)(z,"Version/")&&(0,w._Q)(z,"Safari")||(0,w._Q)(z,"Macintosh; Intel Mac OS X 10_14")&&(0,w.Id)(z,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||(0,w._Q)(z,"Chrome/5")||(0,w._Q)(z,"Chrome/6")||(0,w._Q)(z,"UnrealEngine")&&!(0,w._Q)(z,"Chrome")||(0,w._Q)(z,"UCBrowser/12")||(0,w._Q)(z,"UCBrowser/11")):!1}o(ue,"uaDisallowsSameSiteNone")},5843:(at,l,C)=>{"use strict";C.d(l,{DO:()=>se,GW:()=>O,Jj:()=>x,Tr:()=>Ae,d8:()=>le,ej:()=>k,kT:()=>G,oF:()=>L,vn:()=>Y,zB:()=>Q});var R=C(2091),v=C(8096),P=C(3242),w=C(7630),B=C(4869),N=C(6708),m=C(6041),y=C(4878),U=null,W,_=null;function O(){var ve=se();return ve[v.zc](0,8)+"-"+ve[v.zc](8,12)+"-"+ve[v.zc](12,16)+"-"+ve[v.zc](16,20)+"-"+ve[v.zc](20)}o(O,"newGuid");function x(){var ve=(0,w.r)();return ve&&ve.now?ve.now():(0,N.m6)()}o(x,"perfNow");function J(ve,_e){if(ve&&_e){var Ie=ve[_DYN_LENGTH],ie=Ie-_e[_DYN_LENGTH];return ve[_DYN_SUBSTRING](ie>=0?ie:0,Ie)===_e}return!1}o(J,"strEndsWith");function se(){for(var ve=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],_e=m.qS,Ie,ie=0;ie<4;ie++)Ie=(0,y._l)(),_e+=ve[Ie&15]+ve[Ie>>4&15]+ve[Ie>>8&15]+ve[Ie>>12&15]+ve[Ie>>16&15]+ve[Ie>>20&15]+ve[Ie>>24&15]+ve[Ie>>28&15];var Se=ve[8+((0,y._l)()&3)|0];return _e[v.Jn](0,8)+_e[v.Jn](9,4)+"4"+_e[v.Jn](13,3)+Se+_e[v.Jn](16,3)+_e[v.Jn](19,12)}o(se,"generateW3CId");var Ae={_canUseCookies:void 0,isTypeof:N.Ym,isUndefined:N.o8,isNullOrUndefined:N.le,hasOwnProperty:N.nr,isFunction:N.mf,isObject:N.Kn,isDate:N.J_,isArray:N.kJ,isError:N.VZ,isString:N.HD,isNumber:N.hj,isBoolean:N.jn,toISOString:N.Y6,arrForEach:N.tO,arrIndexOf:N.UA,arrMap:N.Mr,arrReduce:N.Xz,strTrim:N.nd,objCreate:R.pu,objKeys:N.FY,objDefineAccessors:N.l_,addEventHandler:B.Ib,dateNow:N.m6,isIE:w.w1,disableCookies:L,newGuid:O,perfNow:x,newId:y.pZ,randomValue:y.az,random32:y._l,mwcRandomSeed:y.CN,mwcRandom32:y.F6,generateW3CId:se},$=/[xy]/g,Q={Attach:B.pZ,AttachEvent:B.pZ,Detach:B.pD,DetachEvent:B.pD};function X(ve,_e){var Ie=(0,P.kj)(ve,_e),ie=Ae._canUseCookies;return U===null&&(U=[],W=ie,(0,N.l_)(Ae,"_canUseCookies",function(){return W},function(Se){W=Se,(0,N.tO)(U,function(D){D[v.$h](Se)})})),(0,N.UA)(U,Ie)===-1&&U[v.MW](Ie),(0,N.jn)(ie)&&Ie[v.$h](ie),(0,N.jn)(W)&&Ie[v.$h](W),Ie}o(X,"_legacyCookieMgr");function L(){X()[v.$h](!1)}o(L,"disableCookies");function Y(ve){return X(null,ve).isEnabled()}o(Y,"canUseCookies");function k(ve,_e){return X(null,ve).get(_e)}o(k,"getCookie");function le(ve,_e,Ie,ie){X(null,ve).set(_e,Ie,null,ie)}o(le,"setCookie");function G(ve,_e){return X(null,ve).del(_e)}o(G,"deleteCookie")},5883:(at,l,C)=>{"use strict";C.d(l,{J:()=>x,K:()=>J});var R=C(4392),v=C(8096),P=C(6708),w=C(6041),B=C(4878),N=R.RJ,m="2.8.12",y="."+(0,B.pZ)(6),U=0;function W(se,Ae,$){if(N)try{return N(se,Ae,{value:$,enumerable:!1,configurable:!0}),!0}catch(Q){}return!1}o(W,"_createAccessor");function _(se){return se[v.xv]===1||se[v.xv]===9||!+se[v.xv]}o(_,"_canAcceptData");function O(se,Ae){var $=Ae[se.id];if(!$){$={};try{_(Ae)&&(W(Ae,se.id,$)||(Ae[se.id]=$))}catch(Q){}}return $}o(O,"_getCache");function x(se,Ae){return Ae===void 0&&(Ae=!1),(0,P.Gf)(se+U+++(Ae?"."+m:w.qS)+y)}o(x,"createUniqueNamespace");function J(se){var Ae={id:x("_aiData-"+(se||w.qS)+"."+m),accept:function($){return _($)},get:function($,Q,X,L){var Y=$[Ae.id];return Y?Y[(0,P.Gf)(Q)]:(L&&(Y=O(Ae,$),Y[(0,P.Gf)(Q)]=X),X)},kill:function($,Q){if($&&$[Q])try{delete $[Q]}catch(X){}}};return Ae}o(J,"createElmNodeData")},7158:(at,l,C)=>{"use strict";C.d(l,{j:()=>y,p:()=>U});var R=C(8096),v=C(7630),P=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],w=null,B;function N(W,_){return function(){var O=arguments,x=y(_);if(x){var J=x.listener;J&&J[W]&&J[W][R.ZV](J,O)}}}o(N,"_listenerProxyFunc");function m(){var W=(0,v.a8)("Microsoft");return W&&(w=W.ApplicationInsights),w}o(m,"_getExtensionNamespace");function y(W){var _=w;return!_&&W.disableDbgExt!==!0&&(_=w||m()),_?_.ChromeDbgExt:null}o(y,"getDebugExt");function U(W){if(!B){B={};for(var _=0;_<P[R.R5];_++)B[P[_]]=N(P[_],W)}return B}o(U,"getDebugListener")},5018:(at,l,C)=>{"use strict";C.d(l,{AQ:()=>J,L4:()=>Q,jV:()=>$,kP:()=>Ae,lQ:()=>O,vH:()=>x});var R=C(1679),v=C(8096),P=C(7158),w=C(7630),B=C(6708),N=C(6041),m="AI (Internal): ",y="AI: ",U="AITR_";function W(X){return X?'"'+X[v.i7](/\"/g,N.qS)+'"':N.qS}o(W,"_sanitizeDiagnosticText");function _(X,L){var Y=(0,w.dr)();if(Y){var k="log";Y[X]&&(k=X),(0,B.mf)(Y[k])&&Y[k](L)}}o(_,"_logToConsole");var O=function(){function X(L,Y,k,le){k===void 0&&(k=!1);var G=this;G[v.Gc]=L,G[v.gU]=(k?y:m)+L;var ve=N.qS;(0,w.nS)()&&(ve=(0,w.xA)().stringify(le));var _e=(Y?" message:"+W(Y):N.qS)+(le?" props:"+W(ve):N.qS);G[v.gU]+=_e}return o(X,"_InternalLogMessage"),X.dataType="MessageData",X}();function x(X,L){return(X||{})[v.eZ]||new J(L)}o(x,"safeGetLogger");var J=function(){function X(L){this.identifier="DiagnosticLogger",this.queue=[];var Y=0,k={},le,G,ve,_e;(0,R.Z)(X,this,function(Ie){Se(L||{}),Ie.consoleLoggingLevel=function(){return le},Ie.telemetryLoggingLevel=function(){return G},Ie.maxInternalMessageLimit=function(){return ve},Ie[v.Fr]=function(){return _e},Ie.throwInternal=function(fe,ue,z,he,xe){xe===void 0&&(xe=!1);var Ve=new O(ue,z,xe,he);if(_e)throw(0,w.eU)(Ve);var oe=fe===1?N.ys:N.cL;if((0,B.o8)(Ve[v.gU]))He("throw"+(fe===1?"Critical":"Warning"),Ve);else{if(xe){var nt=+Ve[v.Gc];!k[nt]&&le>=fe&&(Ie[oe](Ve[v.gU]),k[nt]=!0)}else le>=fe&&Ie[oe](Ve[v.gU]);ie(fe,Ve)}},Ie[N.cL]=function(fe){_("warn",fe),He("warning",fe)},Ie[N.ys]=function(fe){_("error",fe),He("error",fe)},Ie.resetInternalMessageCount=function(){Y=0,k={}},Ie[v.jk]=ie;function ie(fe,ue){if(!D()){var z=!0,he=U+ue[v.Gc];if(k[he]?z=!1:k[he]=!0,z&&(fe<=G&&(Ie.queue[v.MW](ue),Y++,He(fe===1?"error":"warn",ue)),Y===ve)){var xe="Internal events throttle limit per PageView reached for this app.",Ve=new O(23,xe,!1);Ie.queue[v.MW](Ve),fe===1?Ie[N.ys](xe):Ie[N.cL](xe)}}}o(ie,"_logInternalMessage");function Se(fe){le=(0,B.v4)(fe.loggingLevelConsole,0),G=(0,B.v4)(fe.loggingLevelTelemetry,1),ve=(0,B.v4)(fe.maxMessageLimit,25),_e=(0,B.v4)(fe.enableDebug,(0,B.v4)(fe[v.Fr],!1))}o(Se,"_setDefaultsFromConfig");function D(){return Y>=ve}o(D,"_areInternalMessagesThrottled");function He(fe,ue){var z=(0,P.j)(L||{});z&&z[v.mc]&&z[v.mc](fe,ue)}o(He,"_debugExtMsg")})}return o(X,"DiagnosticLogger"),X.__ieDyn=1,X}();function se(X){return X||new J}o(se,"_getLogger");function Ae(X,L,Y,k,le,G){G===void 0&&(G=!1),se(X).throwInternal(L,Y,k,le,G)}o(Ae,"_throwInternal");function $(X,L){se(X)[N.cL](L)}o($,"_warnToConsole");function Q(X,L,Y){se(X)[v.jk](L,Y)}o(Q,"_logInternalMessage")},7630:(at,l,C)=>{"use strict";C.d(l,{JO:()=>Me,Jj:()=>D,MF:()=>Ce,MX:()=>I,Me:()=>fe,Nv:()=>He,Ym:()=>Se,Z3:()=>be,a8:()=>ie,b$:()=>ne,cp:()=>Qe,d6:()=>ue,dI:()=>Ie,dr:()=>oe,eU:()=>Fe,ed:()=>q,fE:()=>he,gz:()=>H,jW:()=>z,k$:()=>Ve,nS:()=>dt,pI:()=>Re,r:()=>nt,s1:()=>xe,sA:()=>Ke,w1:()=>ge,xA:()=>ht});var R=C(4392),v=C(2091),P=C(8096),w=C(6708),B=C(6041),N="window",m="document",y="documentMode",U="navigator",W="history",_="location",O="console",x="performance",J="JSON",se="crypto",Ae="msCrypto",$="ReactNative",Q="msie",X="trident/",L="XMLHttpRequest",Y=null,k=null,le=!1,G=null,ve=null;function _e(ae,j){var Ye=!1;if(ae){try{if(Ye=j in ae,!Ye){var Ft=ae[R.hB];Ft&&(Ye=j in Ft)}}catch(xn){}if(!Ye)try{var Gt=new ae;Ye=!(0,w.o8)(Gt[j])}catch(xn){}}return Ye}o(_e,"_hasProperty");function Ie(ae){le=ae}o(Ie,"setEnableEnvMocks");function ie(ae){var j=(0,v.Rd)();return j&&j[ae]?j[ae]:ae===N&&Se()?window:null}o(ie,"getGlobalInst");function Se(){return Boolean(typeof window===R.fK&&window)}o(Se,"hasWindow");function D(){return Se()?window:ie(N)}o(D,"getWindow");function He(){return Boolean(typeof document===R.fK&&document)}o(He,"hasDocument");function fe(){return He()?document:ie(m)}o(fe,"getDocument");function ue(){return Boolean(typeof navigator===R.fK&&navigator)}o(ue,"hasNavigator");function z(){return ue()?navigator:ie(U)}o(z,"getNavigator");function he(){return Boolean(typeof history===R.fK&&history)}o(he,"hasHistory");function xe(){return he()?history:ie(W)}o(xe,"getHistory");function Ve(ae){if(ae&&le){var j=ie("__mockLocation");if(j)return j}return typeof location===R.fK&&location?location:ie(_)}o(Ve,"getLocation");function oe(){return typeof console!==R.jA?console:ie(O)}o(oe,"getConsole");function nt(){return ie(x)}o(nt,"getPerformance");function dt(){return Boolean(typeof JSON===R.fK&&JSON||ie(J)!==null)}o(dt,"hasJSON");function ht(){return dt()?JSON||ie(J):null}o(ht,"getJSON");function I(){return ie(se)}o(I,"getCrypto");function H(){return ie(Ae)}o(H,"getMsCrypto");function ne(){var ae=z();return ae&&ae.product?ae.product===$:!1}o(ne,"isReactNative");function ge(){var ae=z();if(ae&&(ae[P.qV]!==k||Y===null)){k=ae[P.qV];var j=(k||B.qS)[P.T1]();Y=(0,w._Q)(j,Q)||(0,w._Q)(j,X)}return Y}o(ge,"isIE");function Ke(ae){if(ae===void 0&&(ae=null),!ae){var j=z()||{};ae=j?(j[P.qV]||B.qS)[P.T1]():B.qS}var Ye=(ae||B.qS)[P.T1]();if((0,w._Q)(Ye,Q)){var Ft=fe()||{};return Math.max(parseInt(Ye[P.w6](Q)[1]),Ft[y]||0)}else if((0,w._Q)(Ye,X)){var Gt=parseInt(Ye[P.w6](X)[1]);if(Gt)return Gt+4}return null}o(Ke,"getIEVersion");function Fe(ae){var j=Object[R.hB].toString[P._S](ae),Ye=B.qS;return j==="[object Error]"?Ye="{ stack: '"+ae.stack+"', message: '"+ae.message+"', name: '"+ae[P.I]+"'":dt()&&(Ye=ht().stringify(ae)),j+Ye}o(Fe,"dumpObj");function de(ae){if(!ae||!isString(ae)){var j=z()||{};ae=j?(j[_DYN_USER_AGENT]||STR_EMPTY)[_DYN_TO_LOWER_CASE]():STR_EMPTY}var Ye=(ae||STR_EMPTY)[_DYN_TO_LOWER_CASE]();return Ye[_DYN_INDEX_OF]("safari")>=0}o(de,"isSafari");function Ce(){return ve===null&&(ve=ue()&&Boolean(z().sendBeacon)),ve}o(Ce,"isBeaconsSupported");function Me(ae){var j=!1;try{j=!!ie("fetch");var Ye=ie("Request");j&&ae&&Ye&&(j=_e(Ye,"keepalive"))}catch(Ft){}return j}o(Me,"isFetchSupported");function Qe(){return G===null&&(G=typeof XDomainRequest!==R.jA,G&&be()&&(G=G&&!_e(ie(L),"withCredentials"))),G}o(Qe,"useXDomainRequest");function be(){var ae=!1;try{var j=ie(L);ae=!!j}catch(Ye){}return ae}o(be,"isXhrSupported");function Ne(ae,j){if(ae)for(var Ye=0;Ye<ae[P.R5];Ye++){var Ft=ae[Ye];if(Ft[P.I]&&Ft[P.I]===j)return Ft}return{}}o(Ne,"_getNamedValue");function q(ae){var j=fe();return j&&ae?Ne(j.querySelectorAll("meta"),ae).content:null}o(q,"findMetaTag");function Re(ae){var j,Ye=nt();if(Ye){var Ft=Ye.getEntriesByType("navigation")||[];j=Ne((Ft[P.R5]>0?Ft[0]:{}).serverTiming,ae).description}return j}o(Re,"findNamedServerTiming")},4869:(at,l,C)=>{"use strict";C.d(l,{C1:()=>oe,C9:()=>ge,Ib:()=>Ve,JA:()=>H,QY:()=>z,TJ:()=>ne,XO:()=>ue,Yl:()=>Fe,c9:()=>I,jU:()=>fe,nD:()=>Ke,nJ:()=>ht,pD:()=>xe,pZ:()=>he,um:()=>_e,yw:()=>dt});var R=C(8096),v=C(5883),P=C(7630),w=C(6708),B=C(6041),N="on",m="attachEvent",y="addEventListener",U="detachEvent",W="removeEventListener",_="events",O="visibilitychange",x="pagehide",J="pageshow",se="unload",Ae="beforeunload",$=(0,v.J)("aiEvtPageHide"),Q=(0,v.J)("aiEvtPageShow"),X=/\.[\.]+/g,L=/[\.]+$/,Y=1,k=(0,v.K)("events"),le=/^([^.]*)(?:\.(.+)|)/;function G(de){return de&&de[R.i7]?de[R.i7](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,B.qS):de}o(G,"_normalizeNamespace");function ve(de,Ce){var Me;if(Ce){var Qe=B.qS;(0,w.kJ)(Ce)?(Qe=B.qS,(0,w.tO)(Ce,function(Ne){Ne=G(Ne),Ne&&(Ne[0]!=="."&&(Ne="."+Ne),Qe+=Ne)})):Qe=G(Ce),Qe&&(Qe[0]!=="."&&(Qe="."+Qe),de=(de||B.qS)+Qe)}var be=le.exec(de||B.qS)||[];return Me={},Me[R.P6]=be[1],Me.ns=(be[2]||B.qS).replace(X,".").replace(L,B.qS)[R.w6](".").sort().join("."),Me}o(ve,"_getEvtNamespace");function _e(de,Ce,Me){var Qe=[],be=k.get(de,_,{},!1),Ne=ve(Ce,Me);return(0,w.rW)(be,function(q,Re){(0,w.tO)(Re,function(ae){var j;(!Ne[R.P6]||Ne[R.P6]===ae.evtName[R.P6])&&(!Ne.ns||Ne.ns===Ne.ns)&&Qe[R.MW]((j={},j[R.I]=ae.evtName[R.P6]+(ae.evtName.ns?"."+ae.evtName.ns:B.qS),j.handler=ae[R.Kn],j))})}),Qe}o(_e,"__getRegisteredEvents");function Ie(de,Ce,Me){Me===void 0&&(Me=!0);var Qe=k.get(de,_,{},Me),be=Qe[Ce];return be||(be=Qe[Ce]=[]),be}o(Ie,"_getRegisteredEvents");function ie(de,Ce,Me,Qe){de&&Ce&&Ce[R.P6]&&(de[W]?de[W](Ce[R.P6],Me,Qe):de[U]&&de[U](N+Ce[R.P6],Me))}o(ie,"_doDetach");function Se(de,Ce,Me,Qe){var be=!1;return de&&Ce&&Ce[R.P6]&&Me&&(de[y]?(de[y](Ce[R.P6],Me,Qe),be=!0):de[m]&&(de[m](N+Ce[R.P6],Me),be=!0)),be}o(Se,"_doAttach");function D(de,Ce,Me,Qe){for(var be=Ce[R.R5];be--;){var Ne=Ce[be];Ne&&(!Me.ns||Me.ns===Ne.evtName.ns)&&(!Qe||Qe(Ne))&&(ie(de,Ne.evtName,Ne[R.Kn],Ne.capture),Ce[R.cb](be,1))}}o(D,"_doUnregister");function He(de,Ce,Me){if(Ce[R.P6])D(de,Ie(de,Ce[R.P6]),Ce,Me);else{var Qe=k.get(de,_,{});(0,w.rW)(Qe,function(be,Ne){D(de,Ne,Ce,Me)}),(0,w.FY)(Qe)[R.R5]===0&&k.kill(de,_)}}o(He,"_unregisterEvents");function fe(de,Ce){var Me;return Ce?((0,w.kJ)(Ce)?Me=[de].concat(Ce):Me=[de,Ce],Me=ve("xx",Me).ns[R.w6](".")):Me=de,Me}o(fe,"mergeEvtNamespace");function ue(de,Ce,Me,Qe,be){var Ne;be===void 0&&(be=!1);var q=!1;if(de)try{var Re=ve(Ce,Qe);if(q=Se(de,Re,Me,be),q&&k.accept(de)){var ae=(Ne={guid:Y++,evtName:Re},Ne[R.Kn]=Me,Ne.capture=be,Ne);Ie(de,Re.type)[R.MW](ae)}}catch(j){}return q}o(ue,"eventOn");function z(de,Ce,Me,Qe,be){if(be===void 0&&(be=!1),de)try{var Ne=ve(Ce,Qe),q=!1;He(de,Ne,function(Re){return Ne.ns&&!Me||Re[R.Kn]===Me?(q=!0,!0):!1}),q||ie(de,Ne,Me,be)}catch(Re){}}o(z,"eventOff");function he(de,Ce,Me,Qe){return Qe===void 0&&(Qe=!1),ue(de,Ce,Me,null,Qe)}o(he,"attachEvent");function xe(de,Ce,Me,Qe){Qe===void 0&&(Qe=!1),z(de,Ce,Me,null,Qe)}o(xe,"detachEvent");function Ve(de,Ce,Me){var Qe=!1,be=(0,P.Jj)();be&&(Qe=ue(be,de,Ce,Me),Qe=ue(be.body,de,Ce,Me)||Qe);var Ne=(0,P.Me)();return Ne&&(Qe=ue(Ne,de,Ce,Me)||Qe),Qe}o(Ve,"addEventHandler");function oe(de,Ce,Me){var Qe=(0,P.Jj)();Qe&&(z(Qe,de,Ce,Me),z(Qe.body,de,Ce,Me));var be=(0,P.Me)();be&&z(be,de,Ce,Me)}o(oe,"removeEventHandler");function nt(de,Ce,Me,Qe){var be=!1;return Ce&&de&&de[R.R5]>0&&(0,w.tO)(de,function(Ne){Ne&&(!Me||(0,w.UA)(Me,Ne)===-1)&&(be=Ve(Ne,Ce,Qe)||be)}),be}o(nt,"_addEventListeners");function dt(de,Ce,Me,Qe){var be=!1;return Ce&&de&&(0,w.kJ)(de)&&(be=nt(de,Ce,Me,Qe),!be&&Me&&Me[R.R5]>0&&(be=nt(de,Ce,null,Qe))),be}o(dt,"addEventListeners");function ht(de,Ce,Me){de&&(0,w.kJ)(de)&&(0,w.tO)(de,function(Qe){Qe&&oe(Qe,Ce,Me)})}o(ht,"removeEventListeners");function I(de,Ce,Me){return dt([Ae,se,x],de,Ce,Me)}o(I,"addPageUnloadEventListener");function H(de,Ce){ht([Ae,se,x],de,Ce)}o(H,"removePageUnloadEventListener");function ne(de,Ce,Me){function Qe(q){var Re=(0,P.Me)();de&&Re&&Re.visibilityState==="hidden"&&de(q)}o(Qe,"_handlePageVisibility");var be=fe($,Me),Ne=nt([x],de,Ce,be);return(!Ce||(0,w.UA)(Ce,O)===-1)&&(Ne=nt([O],Qe,Ce,be)||Ne),!Ne&&Ce&&(Ne=ne(de,null,Me)),Ne}o(ne,"addPageHideEventListener");function ge(de,Ce){var Me=fe($,Ce);ht([x],de,Me),ht([O],null,Me)}o(ge,"removePageHideEventListener");function Ke(de,Ce,Me){function Qe(q){var Re=(0,P.Me)();de&&Re&&Re.visibilityState==="visible"&&de(q)}o(Qe,"_handlePageVisibility");var be=fe(Q,Me),Ne=nt([J],de,Ce,be);return Ne=nt([O],Qe,Ce,be)||Ne,!Ne&&Ce&&(Ne=Ke(de,null,Me)),Ne}o(Ke,"addPageShowEventListener");function Fe(de,Ce){var Me=fe(Q,Ce);ht([J],de,Me),ht([O],null,Me)}o(Fe,"removePageShowEventListener")},6708:(at,l,C)=>{"use strict";C.d(l,{Ax:()=>ui,BX:()=>nt,F:()=>On,FL:()=>nn,FY:()=>ct,Gf:()=>ne,HD:()=>Re,Id:()=>Ke,J_:()=>Qe,Kn:()=>ht,Mr:()=>Xn,Oi:()=>Tr,UA:()=>jn,VZ:()=>q,Vb:()=>Hr,Xi:()=>Dn,Xz:()=>Kn,Y6:()=>Gt,Ym:()=>he,_A:()=>Zt,_Q:()=>Me,_y:()=>_r,cf:()=>Qr,fQ:()=>Zn,hj:()=>ae,hl:()=>wi,jj:()=>vr,jn:()=>j,kJ:()=>be,l_:()=>$t,le:()=>oe,m6:()=>ar,mf:()=>I,mm:()=>lr,nd:()=>gr,nr:()=>dt,o8:()=>xe,qK:()=>pr,rW:()=>ge,sO:()=>Gn,tO:()=>Sn,v4:()=>Br,xe:()=>de});var R=C(4392),v=C(2091),P=C(8096),w=C(6041),B="toISOString",N="endsWith",m="startsWith",y="indexOf",U="map",W="reduce",_="trim",O="toString",x="__proto__",J="constructor",se=R.RJ,Ae=R.Pw.freeze,$=R.Pw.seal,Q=R.Pw.keys,X=String[R.hB],L=X[_],Y=X[N],k=X[m],le=Date[R.hB],G=le[B],ve=Array.isArray,_e=R.V4[O],Ie=R.CY[O],ie=Ie[P._S](R.Pw),Se=/-([a-z])/g,D=/([^\w\d_$])/g,He=/^(\d+[\w\d_$])/,fe=Object.getPrototypeOf;function ue(T){if(T){if(fe)return fe(T);var ce=T[x]||T[R.hB]||T[J];if(ce)return ce}return null}o(ue,"_getObjProto");function z(T){return _e[_DYN_CALL](T)}o(z,"objToString");function he(T,ce){return typeof T===ce}o(he,"isTypeof");function xe(T){return T===void 0||typeof T===R.jA}o(xe,"isUndefined");function Ve(T){return!xe(T)}o(Ve,"isNotUndefined");function oe(T){return T===null||xe(T)}o(oe,"isNullOrUndefined");function nt(T){return!oe(T)}o(nt,"isNotNullOrUndefined");function dt(T,ce){return!!(T&&R.CY[P._S](T,ce))}o(dt,"hasOwnProperty");function ht(T){return!!(T&&typeof T===R.fK)}o(ht,"isObject");function I(T){return!!(T&&typeof T===R.cb)}o(I,"isFunction");function H(T){return T&&I(T.then)}o(H,"isPromiseLike");function ne(T){var ce=T;return ce&&Re(ce)&&(ce=ce[P.i7](Se,function(Ee,Ue){return Ue.toUpperCase()}),ce=ce[P.i7](D,"_"),ce=ce[P.i7](He,function(Ee,Ue){return"_"+Ue})),ce}o(ne,"normalizeJsName");function ge(T,ce){if(T)for(var Ee in T)R.CY[P._S](T,Ee)&&ce[P._S](T,Ee,T[Ee])}o(ge,"objForEachKey");function Ke(T,ce){var Ee=!1;return T&&ce&&!(Ee=T===ce)&&(Ee=Y?T[N](ce):Fe(T,ce)),Ee}o(Ke,"strEndsWith");function Fe(T,ce){var Ee=!1,Ue=ce?ce[P.R5]:0,et=T?T[P.R5]:0;if(Ue&&et&&et>=Ue&&!(Ee=T===ce)){for(var Be=et-1,lt=Ue-1;lt>=0;lt--){if(T[Be]!=ce[lt])return!1;Be--}Ee=!0}return Ee}o(Fe,"_strEndsWithPoly");function de(T,ce){var Ee=!1;return T&&ce&&!(Ee=T===ce)&&(Ee=k?T[m](ce):Ce(T,ce)),Ee}o(de,"strStartsWith");function Ce(T,ce){var Ee=!1,Ue=ce?ce[P.R5]:0;if(T&&Ue&&T[P.R5]>=Ue&&!(Ee=T===ce)){for(var et=0;et<Ue;et++)if(T[et]!==ce[et])return!1;Ee=!0}return Ee}o(Ce,"_strStartsWithPoly");function Me(T,ce){return T&&ce?T[P.ou](ce)!==-1:!1}o(Me,"strContains");function Qe(T){return!!(T&&_e[P._S](T)==="[object Date]")}o(Qe,"isDate");var be=ve||Ne;function Ne(T){return!!(T&&_e[P._S](T)==="[object Array]")}o(Ne,"_isArrayPoly");function q(T){return!!(T&&_e[P._S](T)==="[object Error]")}o(q,"isError");function Re(T){return typeof T=="string"}o(Re,"isString");function ae(T){return typeof T=="number"}o(ae,"isNumber");function j(T){return typeof T=="boolean"}o(j,"isBoolean");function Ye(T){return typeof T=="symbol"}o(Ye,"isSymbol");function Ft(T){var ce=!1;if(T&&typeof T=="object"){var Ee=fe?fe(T):ue(T);Ee?(Ee[J]&&R.CY[P._S](Ee,J)&&(Ee=Ee[J]),ce=typeof Ee===R.cb&&Ie[P._S](Ee)===ie):ce=!0}return ce}o(Ft,"isPlainObject");function Gt(T){if(T)return G?T[B]():xn(T)}o(Gt,"toISOString");function xn(T){if(T&&T.getUTCFullYear){var ce=o(function(Ee){var Ue=String(Ee);return Ue[P.R5]===1&&(Ue="0"+Ue),Ue},"pad");return T.getUTCFullYear()+"-"+ce(T.getUTCMonth()+1)+"-"+ce(T.getUTCDate())+"T"+ce(T.getUTCHours())+":"+ce(T.getUTCMinutes())+":"+ce(T.getUTCSeconds())+"."+String((T.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}o(xn,"_toISOStringPoly");function Sn(T,ce,Ee){var Ue=T[P.R5];try{for(var et=0;et<Ue&&!(et in T&&ce[P._S](Ee||T,T[et],et,T)===-1);et++);}catch(Be){}}o(Sn,"arrForEach");function jn(T,ce,Ee){if(T){if(T[y])return T[y](ce,Ee);var Ue=T[P.R5],et=Ee||0;try{for(var Be=Math.max(et>=0?et:Ue-Math.abs(et),0);Be<Ue;Be++)if(Be in T&&T[Be]===ce)return Be}catch(lt){}}return-1}o(jn,"arrIndexOf");function Xn(T,ce,Ee){var Ue;if(T){if(T[U])return T[U](ce,Ee);var et=T[P.R5],Be=Ee||T;Ue=new Array(et);try{for(var lt=0;lt<et;lt++)lt in T&&(Ue[lt]=ce[P._S](Be,T[lt],T))}catch(_t){}}return Ue}o(Xn,"arrMap");function Kn(T,ce,Ee){var Ue;if(T){if(T[W])return T[W](ce,Ee);var et=T[P.R5],Be=0;if(arguments[P.R5]>=3)Ue=arguments[2];else{for(;Be<et&&!(Be in T);)Be++;Ue=T[Be++]}for(;Be<et;)Be in T&&(Ue=ce(Ue,T[Be],Be,T)),Be++}return Ue}o(Kn,"arrReduce");function gr(T){return T&&(T=L&&T[_]?T[_]():T[P.i7]?T[P.i7](/^\s+|(?=\s)\s+$/g,w.qS):T),T}o(gr,"strTrim");var Lr=!{toString:null}.propertyIsEnumerable("toString"),kr=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function ct(T){var ce=typeof T;if(ce!==R.cb&&(ce!==R.fK||T===null)&&(0,v.ZU)("objKeys called on non-object"),!Lr&&Q)return Q(T);var Ee=[];for(var Ue in T)T&&R.CY[P._S](T,Ue)&&Ee[P.MW](Ue);if(Lr)for(var et=kr[P.R5],Be=0;Be<et;Be++)T&&R.CY[P._S](T,kr[Be])&&Ee[P.MW](kr[Be]);return Ee}o(ct,"objKeys");function $t(T,ce,Ee,Ue){if(se)try{var et={enumerable:!0,configurable:!0};return Ee&&(et.get=Ee),Ue&&(et.set=Ue),se(T,ce,et),!0}catch(Be){}return!1}o($t,"objDefineAccessors");function en(T){return T}o(en,"_doNothing");function Zt(T){return Ae&&ge(T,function(ce,Ee){(be(Ee)||ht(Ee))&&Ae(Ee)}),nn(T)}o(Zt,"deepFreeze");var nn=Ae||en,Dn=$||en;function ar(){var T=Date;return T.now?T.now():new T().getTime()}o(ar,"dateNow");function vr(T){return q(T)?T[P.I]:w.qS}o(vr,"getExceptionName");function Gn(T,ce,Ee,Ue,et){var Be=Ee;return T&&(Be=T[ce],Be!==Ee&&(!et||et(Be))&&(!Ue||Ue(Ee))&&(Be=Ee,T[ce]=Be)),Be}o(Gn,"setValue");function pr(T,ce,Ee){var Ue;return T?(Ue=T[ce],!Ue&&oe(Ue)&&(Ue=xe(Ee)?{}:Ee,T[ce]=Ue)):Ue=xe(Ee)?{}:Ee,Ue}o(pr,"getSetValue");function Br(T,ce){return oe(T)?ce:T}o(Br,"getCfgValue");function On(T){return!T}o(On,"isNotTruthy");function Zn(T){return!!T}o(Zn,"isTruthy");function _r(T){throw new Error(T)}o(_r,"throwError");function Cn(T,ce){var Ee=null,Ue=null;return I(T)?Ee=T:Ue=T,function(){var et=arguments;if(Ee&&(Ue=Ee()),Ue)return Ue[ce][P.ZV](Ue,et)}}o(Cn,"_createProxyFunction");function Qr(T,ce,Ee){if(T&&ce&&ht(T)&&ht(ce)){var Ue=o(function(Be){if(Re(Be)){var lt=ce[Be];I(lt)?(!Ee||Ee(Be,!0,ce,T))&&(T[Be]=Cn(ce,Be)):(!Ee||Ee(Be,!1,ce,T))&&(dt(T,Be)&&delete T[Be],$t(T,Be,function(){return ce[Be]},function(_t){ce[Be]=_t})||(T[Be]=lt))}},"_loop_1");for(var et in ce)Ue(et)}return T}o(Qr,"proxyAssign");function Tr(T,ce,Ee,Ue,et){T&&ce&&Ee&&(et!==!1||xe(T[ce]))&&(T[ce]=Cn(Ee,Ue))}o(Tr,"proxyFunctionAs");function Hr(T,ce,Ee,Ue){return T&&ce&&ht(T)&&be(Ee)&&Sn(Ee,function(et){Re(et)&&Tr(T,et,ce,et,Ue)}),T}o(Hr,"proxyFunctions");function wi(T){return function(){function ce(){var Ee=this;T&&ge(T,function(Ue,et){Ee[Ue]=et})}return o(ce,"class_1"),ce}()}o(wi,"createClassFromInterface");function ui(T){return T&&R.rl&&(T=(0,R.Pw)((0,R.rl)({},T))),T}o(ui,"optimizeObject");function lr(T,ce,Ee,Ue,et,Be){var lt=arguments,_t=lt[0]||{},Tt=lt[P.R5],on=!1,St=1;for(Tt>0&&j(_t)&&(on=_t,_t=lt[St]||{},St++),ht(_t)||(_t={});St<Tt;St++){var Jt=lt[St],Ot=be(Jt),Ut=ht(Jt);for(var Mt in Jt){var zn=Ot&&Mt in Jt||Ut&&R.CY[P._S](Jt,Mt);if(!!zn){var bn=Jt[Mt],cr=void 0;if(on&&bn&&((cr=be(bn))||Ft(bn))){var Hn=_t[Mt];cr?be(Hn)||(Hn=[]):Ft(Hn)||(Hn={}),bn=lr(on,Hn,bn)}bn!==void 0&&(_t[Mt]=bn)}}}return _t}o(lr,"objExtend")},6041:(at,l,C)=>{"use strict";C.d(l,{$F:()=>_,C$:()=>x,DN:()=>w,Z:()=>v,Zh:()=>N,cL:()=>se,f_:()=>O,hL:()=>y,js:()=>m,kl:()=>Ae,mE:()=>B,oV:()=>P,qS:()=>R,uC:()=>W,yi:()=>U,ys:()=>J});var R="",v="channels",P="core",w="createPerfMgr",B="disabled",N="extensionConfig",m="extensions",y="processTelemetry",U="priority",W="eventsSent",_="eventsDiscarded",O="eventsSendRequest",x="perfEvent",J="errorToConsole",se="warnToConsole",Ae="getPerfMgr"},1880:(at,l,C)=>{"use strict";C.d(l,{f:()=>N});var R=C(1679),v=C(8096),P=C(6708),w=C(6041);function B(m,y,U,W){(0,P.tO)(m,function(_){if(_&&_[y])if(U)setTimeout(function(){return W(_)},0);else try{W(_)}catch(O){}})}o(B,"_runListeners");var N=function(){function m(y){this.listeners=[];var U=!!(y||{}).perfEvtsSendAll;(0,R.Z)(m,this,function(W){W[v.g]=function(_){W.listeners[v.MW](_)},W[v.n7]=function(_){for(var O=(0,P.UA)(W[v.dE],_);O>-1;)W.listeners[v.cb](O,1),O=(0,P.UA)(W[v.dE],_)},W[w.uC]=function(_){B(W[v.dE],w.uC,!0,function(O){O[w.uC](_)})},W[w.$F]=function(_,O){B(W[v.dE],w.$F,!0,function(x){x[w.$F](_,O)})},W[w.f_]=function(_,O){B(W[v.dE],w.f_,O,function(x){x[w.f_](_,O)})},W[w.C$]=function(_){_&&(U||!_[v.PL]())&&B(W[v.dE],w.C$,!1,function(O){_[v.d]?setTimeout(function(){return O[w.C$](_)},0):O[w.C$](_)})}})}return o(m,"NotificationManager"),m.__ieDyn=1,m}()},9288:(at,l,C)=>{"use strict";C.d(l,{Jk:()=>W,Lm:()=>O,j5:()=>J,zn:()=>U});var R=C(1679),v=C(8096),P=C(6708),w=C(6041),B="ctx",N="ParentContextKey",m="ChildrenContextKey",y=null,U=function(){function se(Ae,$,Q){var X=this,L=!1;if(X.start=(0,P.m6)(),X[v.I]=Ae,X[v.d]=Q,X[v.PL]=function(){return!1},(0,P.mf)($)){var Y;L=(0,P.l_)(X,"payload",function(){return!Y&&(0,P.mf)($)&&(Y=$(),$=null),Y})}X[v.T]=function(k){return k?k===se[N]||k===se[m]?X[k]:(X[B]||{})[k]:null},X[v.wu]=function(k,le){if(k)if(k===se[N])X[k]||(X[v.PL]=function(){return!0}),X[k]=le;else if(k===se[m])X[k]=le;else{var G=X[B]=X[B]||{};G[k]=le}},X[v.Km]=function(){var k=0,le=X[v.T](se[m]);if((0,P.kJ)(le))for(var G=0;G<le[v.R5];G++){var ve=le[G];ve&&(k+=ve[v.Z_])}X[v.Z_]=(0,P.m6)()-X.start,X.exTime=X[v.Z_]-k,X[v.Km]=function(){},!L&&(0,P.mf)($)&&(X.payload=$())}}return o(se,"PerfEvent"),se.ParentContextKey="parent",se.ChildrenContextKey="childEvts",se}(),W=function(){function se(Ae){this.ctx={},(0,R.Z)(se,this,function($){$.create=function(Q,X,L){return new U(Q,X,L)},$.fire=function(Q){Q&&(Q[v.Km](),Ae&&(0,P.mf)(Ae[w.C$])&&Ae[w.C$](Q))},$[v.wu]=function(Q,X){if(Q){var L=$[B]=$[B]||{};L[Q]=X}},$[v.T]=function(Q){return($[B]||{})[Q]}})}return o(se,"PerfManager"),se.__ieDyn=1,se}(),_="CoreUtils.doPerf";function O(se,Ae,$,Q,X){if(se){var L=se;if(L[w.kl]&&(L=L[w.kl]()),L){var Y=void 0,k=L[v.T](_);try{if(Y=L.create(Ae(),Q,X),Y){if(k&&Y[v.wu]&&(Y[v.wu](U[N],k),k[v.T]&&k[v.wu])){var le=k[v.T](U[m]);le||(le=[],k[v.wu](U[m],le)),le[v.MW](Y)}return L[v.wu](_,Y),$(Y)}}catch(G){Y&&Y[v.wu]&&Y[v.wu]("exception",G)}finally{Y&&L.fire(Y),L[v.wu](_,k)}}}return $()}o(O,"doPerf");function x(se){y=se}o(x,"setGblPerfMgr");function J(){return y}o(J,"getGblPerfMgr")},1589:(at,l,C)=>{"use strict";C.d(l,{Bt:()=>se,CD:()=>J,Vi:()=>X,jV:()=>$,xy:()=>Ae});var R=C(8096),v=C(5018),P=C(7630),w=C(6708),B=C(6041),N=C(9288),m=C(3833),y="TelemetryPluginChain",U="_hasRun",W="_getTelCtx",_=0;function O(L,Y,k){for(;L;){if(L[R.TO]()===k)return L;L=L[R.W2]()}return $([k],Y[R.TC]||{},Y)}o(O,"_getNextProxyStart");function x(L,Y,k,le){var G=null,ve=[];le!==null&&(G=le?O(L,k,le):L);var _e={_next:ie,ctx:{core:function(){return k},diagLog:function(){return(0,v.vH)(k,Y)},getCfg:function(){return Y},getExtCfg:Se,getConfig:D,hasNext:function(){return!!G},getNext:function(){return G},setNext:function(fe){G=fe},iterate:He,onComplete:Ie}};function Ie(fe,ue){for(var z=[],he=2;he<arguments.length;he++)z[he-2]=arguments[he];fe&&ve[R.MW]({func:fe,self:(0,w.o8)(ue)?_e.ctx:ue,args:z})}o(Ie,"_addOnComplete");function ie(){var fe=G;if(G=fe?fe[R.W2]():null,!fe){var ue=ve;ue&&ue[R.R5]>0&&((0,w.tO)(ue,function(z){try{z.func[R._S](z.self,z.args)}catch(he){(0,v.kP)(k[R.eZ],2,73,"Unexpected Exception during onComplete - "+(0,P.eU)(he))}}),ve=[])}return fe}o(ie,"_moveNext");function Se(fe,ue,z){ue===void 0&&(ue={}),z===void 0&&(z=0);var he;if(Y){var xe=Y[B.Zh];xe&&fe&&(he=xe[fe])}if(!he)he=ue;else if((0,w.Kn)(ue)&&z!==0){var Ve=(0,w.mm)(!0,ue,he);Y&&z===2&&(0,w.rW)(ue,function(oe){if((0,w.le)(Ve[oe])){var nt=Y[oe];(0,w.le)(nt)||(Ve[oe]=nt)}}),he=Ve}return he}o(Se,"_getExtCfg");function D(fe,ue,z){z===void 0&&(z=!1);var he,xe=Se(fe,null);return xe&&!(0,w.le)(xe[ue])?he=xe[ue]:Y&&!(0,w.le)(Y[ue])&&(he=Y[ue]),(0,w.le)(he)?z:he}o(D,"_getConfig");function He(fe){for(var ue;ue=_e._next();){var z=ue[R.TO]();z&&fe(z)}}return o(He,"_iterateChain"),_e}o(x,"_createInternalContext");function J(L,Y,k,le){var G=x(L,Y,k,le),ve=G.ctx;function _e(ie){var Se=G._next();return Se&&Se[B.hL](ie,ve),!Se}o(_e,"_processNext");function Ie(ie,Se){return ie===void 0&&(ie=null),(0,w.kJ)(ie)&&(ie=$(ie,Y,k,Se)),J(ie||ve[R.W2](),Y,k,Se)}return o(Ie,"_createNew"),ve[R.uL]=_e,ve[R.zV]=Ie,ve}o(J,"createProcessTelemetryContext");function se(L,Y,k){var le=Y[R.TC]||{},G=x(L,le,Y,k),ve=G.ctx;function _e(ie){var Se=G._next();return Se&&Se.unload(ve,ie),!Se}o(_e,"_processNext");function Ie(ie,Se){return ie===void 0&&(ie=null),(0,w.kJ)(ie)&&(ie=$(ie,le,Y,Se)),se(ie||ve[R.W2](),Y,Se)}return o(Ie,"_createNew"),ve[R.uL]=_e,ve[R.zV]=Ie,ve}o(se,"createProcessTelemetryUnloadContext");function Ae(L,Y,k){var le=Y[R.TC]||{},G=x(L,le,Y,k),ve=G.ctx;function _e(ie){return ve.iterate(function(Se){(0,w.mf)(Se[R.Tu])&&Se[R.Tu](ve,ie)})}o(_e,"_processNext");function Ie(ie,Se){return ie===void 0&&(ie=null),(0,w.kJ)(ie)&&(ie=$(ie,le,Y,Se)),Ae(ie||ve[R.W2](),Y,Se)}return o(Ie,"_createNew"),ve[R.uL]=_e,ve[R.zV]=Ie,ve}o(Ae,"createProcessTelemetryUpdateContext");function $(L,Y,k,le){var G=null,ve=!le;if((0,w.kJ)(L)&&L[R.R5]>0){var _e=null;(0,w.tO)(L,function(Ie){if(!ve&&le===Ie&&(ve=!0),ve&&Ie&&(0,w.mf)(Ie[B.hL])){var ie=Q(Ie,Y,k);G||(G=ie),_e&&_e._setNext(ie),_e=ie}})}return le&&!G?$([le],Y,k):G}o($,"createTelemetryProxyChain");function Q(L,Y,k){var le=null,G=(0,w.mf)(L[B.hL]),ve=(0,w.mf)(L[R.Jd]),_e;L?_e=L[R.pZ]+"-"+L[B.yi]+"-"+_++:_e="Unknown-0-"+_++;var Ie={getPlugin:function(){return L},getNext:function(){return le},processTelemetry:D,unload:He,update:fe,_id:_e,_setNext:function(ue){le=ue}};function ie(){var ue;return L&&(0,w.mf)(L[W])&&(ue=L[W]()),ue||(ue=J(Ie,Y,k)),ue}o(ie,"_getTelCtx");function Se(ue,z,he,xe,Ve){var oe=!1,nt=L?L[R.pZ]:y,dt=ue[U];return dt||(dt=ue[U]={}),ue.setNext(le),L&&(0,N.Lm)(ue[B.oV](),function(){return nt+":"+he},function(){dt[_e]=!0;try{var ht=le?le._id:B.qS;ht&&(dt[ht]=!1),oe=z(ue)}catch(H){var I=le?dt[le._id]:!0;I&&(oe=!0),(!le||!I)&&(0,v.kP)(ue[R.mc](),1,73,"Plugin ["+nt+"] failed during "+he+" - "+(0,P.eU)(H)+", run flags: "+(0,P.eU)(dt))}},xe,Ve),oe}o(Se,"_processChain");function D(ue,z){z=z||ie();function he(xe){if(!L||!G)return!1;var Ve=(0,m.OY)(L);return Ve[R.fi]||Ve[B.mE]?!1:(ve&&L[R.Jd](le),L[B.hL](ue,xe),!0)}o(he,"_callProcessTelemetry"),Se(z,he,"processTelemetry",function(){return{item:ue}},!ue.sync)||z[R.uL](ue)}o(D,"_processTelemetry");function He(ue,z){function he(){var xe=!1;if(L){var Ve=(0,m.OY)(L),oe=L[B.oV]||Ve[B.oV];L&&(!oe||oe===ue.core())&&!Ve[R.fi]&&(Ve[B.oV]=null,Ve[R.fi]=!0,Ve[R.yl]=!1,L[R.fi]&&L[R.fi](ue,z)===!0&&(xe=!0))}return xe}o(he,"_callTeardown"),Se(ue,he,"unload",function(){},z[R.d])||ue[R.uL](z)}o(He,"_unloadPlugin");function fe(ue,z){function he(){var xe=!1;if(L){var Ve=(0,m.OY)(L),oe=L[B.oV]||Ve[B.oV];L&&(!oe||oe===ue.core())&&!Ve[R.fi]&&L[R.Tu]&&L[R.Tu](ue,z)===!0&&(xe=!0)}return xe}o(he,"_callUpdate"),Se(ue,he,"update",function(){},!1)||ue[R.uL](z)}return o(fe,"_updatePlugin"),(0,w.FL)(Ie)}o(Q,"createTelemetryPluginProxy");var X=function(){function L(Y,k,le,G){var ve=this,_e=J(Y,k,le,G);(0,w.Vb)(ve,_e,(0,w.FY)(_e))}return o(L,"ProcessTelemetryContext"),L}()},4878:(at,l,C)=>{"use strict";C.d(l,{CN:()=>J,F6:()=>se,_l:()=>x,az:()=>O,pZ:()=>Ae});var R=C(8096),v=C(7630),P=C(6708),w=C(6041),B=4294967296,N=4294967295,m=!1,y=123456789,U=987654321;function W($){$<0&&($>>>=0),y=123456789+$&N,U=987654321-$&N,m=!0}o(W,"_mwcSeed");function _(){try{var $=(0,P.m6)()&2147483647;W((Math.random()*B^$)+$)}catch(Q){}}o(_,"_autoSeedMwc");function O($){return $>0?Math.floor(x()/N*($+1))>>>0:0}o(O,"randomValue");function x($){var Q=0,X=(0,v.MX)()||(0,v.gz)();return X&&X.getRandomValues&&(Q=X.getRandomValues(new Uint32Array(1))[0]&N),Q===0&&(0,v.w1)()&&(m||_(),Q=se()&N),Q===0&&(Q=Math.floor(B*Math.random()|0)),$||(Q>>>=0),Q}o(x,"random32");function J($){$?W($):_()}o(J,"mwcRandomSeed");function se($){U=36969*(U&65535)+(U>>16)&N,y=18e3*(y&65535)+(y>>16)&N;var Q=(U<<16)+(y&65535)>>>0&N|0;return $||(Q>>>=0),Q}o(se,"mwcRandom32");function Ae($){$===void 0&&($=22);for(var Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",X=x()>>>0,L=0,Y=w.qS;Y[R.R5]<$;)L++,Y+=Q.charAt(X&63),X>>>=6,L===5&&(X=(x()<<2&4294967295|X&3)>>>0,L=0);return Y}o(Ae,"newId")},3833:(at,l,C)=>{"use strict";C.d(l,{AA:()=>U,OY:()=>m,Yn:()=>_,bP:()=>y});var R=C(8096),v=C(5883),P=C(6708),w=C(6041),B=C(4206),N=(0,v.K)("plugin");function m(O){return N.get(O,"state",{},!0)}o(m,"_getPluginState");function y(O,x){for(var J=[],se=null,Ae=O[R.W2](),$;Ae;){var Q=Ae[R.TO]();if(Q){se&&(0,P.mf)(se[R.Jd])&&(0,P.mf)(Q[w.hL])&&se[R.Jd](Q);var X=!1;(0,P.mf)(Q[R.yl])?X=Q[R.yl]():($=m(Q),X=$[R.yl]),X||J[R.MW](Q),se=Q,Ae=Ae[R.W2]()}}(0,P.tO)(J,function(L){var Y=O[w.oV]();L[R.VL](O.getCfg(),Y,x,O[R.W2]()),$=m(L),!L[w.oV]&&!$[w.oV]&&($[w.oV]=Y),$[R.yl]=!0,delete $[R.fi]})}o(y,"initializePlugins");function U(O){return O.sort(function(x,J){var se=0;if(J){var Ae=(0,P.mf)(J[w.hL]);(0,P.mf)(x[w.hL])?se=Ae?x[w.yi]-J[w.yi]:1:Ae&&(se=-1)}else se=x?1:-1;return se})}o(U,"sortPlugins");function W(O,x,J,se){var Ae=0;function $(){for(;Ae<O[_DYN_LENGTH];){var Q=O[Ae++];if(Q){var X=Q._doUnload||Q[_DYN__DO_TEARDOWN];if(isFunction(X)&&X[_DYN_CALL](Q,x,J,$)===!0)return!0}}}return o($,"_doUnload"),$()}o(W,"unloadComponents");function _(O){var x={};return{getName:function(){return x[R.I]},setName:function(J){O&&O.setName(J),x[R.I]=J},getTraceId:function(){return x[R.nY]},setTraceId:function(J){O&&O.setTraceId(J),(0,B.jN)(J)&&(x[R.nY]=J)},getSpanId:function(){return x[R._d]},setSpanId:function(J){O&&O.setSpanId(J),(0,B.Lc)(J)&&(x[R._d]=J)},getTraceFlags:function(){return x[R.T0]},setTraceFlags:function(J){O&&O.setTraceFlags(J),x[R.T0]=J}}}o(_,"createDistributedTraceContext")},310:(at,l,C)=>{"use strict";C.d(l,{Y:()=>B});var R=C(8096),v=C(5018),P=C(7630),w=C(6708);function B(){var N=[];function m(U){U&&N[R.MW](U)}o(m,"_addHandler");function y(U,W){(0,w.tO)(N,function(_){try{_(U,W)}catch(O){(0,v.kP)(U[R.mc](),2,73,"Unexpected error calling unload handler - "+(0,P.eU)(O))}}),N=[]}return o(y,"_runHandlers"),{add:m,run:y}}o(B,"createUnloadHandlerContainer")},4206:(at,l,C)=>{"use strict";C.d(l,{J6:()=>Q,Lc:()=>$,Pn:()=>X,SU:()=>J,aR:()=>L,jN:()=>Ae,j_:()=>se,lq:()=>Y});var R=C(8096),v=C(5843),P=C(7630),w=C(6708),B=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,N="00",m="ff",y="00000000000000000000000000000000",U="0000000000000000",W=1;function _(k,le,G){return k&&k[R.R5]===le&&k!==G?!!k.match(/^[\da-f]*$/):!1}o(_,"_isValid");function O(k,le,G){return _(k,le)?k:G}o(O,"_formatValue");function x(k){(isNaN(k)||k<0||k>255)&&(k=1);for(var le=k.toString(16);le[R.R5]<2;)le="0"+le;return le}o(x,"_formatFlags");function J(k,le,G,ve){var _e;return _e={},_e[R.PA]=_(ve,2,m)?ve:N,_e[R.nY]=Ae(k)?k:(0,v.DO)(),_e.spanId=$(le)?le:(0,v.DO)()[R.Jn](0,16),_e.traceFlags=G>=0&&G<=255?G:1,_e}o(J,"createTraceParent");function se(k){var le;if(!k||((0,w.kJ)(k)&&(k=k[0]||""),!k||!(0,w.HD)(k)||k[R.R5]>8192))return null;var G=B.exec((0,w.nd)(k));return!G||G[1]===m||G[2]===y||G[3]===U?null:(le={},le[R.PA]=G[1],le[R.nY]=G[2],le[R._d]=G[3],le[R.T0]=parseInt(G[4],16),le)}o(se,"parseTraceParent");function Ae(k){return _(k,32,y)}o(Ae,"isValidTraceId");function $(k){return _(k,16,U)}o($,"isValidSpanId");function Q(k){return!(!k||!_(k[R.PA],2,m)||!_(k[R.nY],32,y)||!_(k[R._d],16,U)||!_(x(k[R.T0]),2))}o(Q,"isValidTraceParent");function X(k){return Q(k)?(k[R.T0]&W)===W:!1}o(X,"isSampledFlag");function L(k){if(k){var le=x(k[R.T0]);_(le,2)||(le="01");var G=k[R.PA]||N;return G!=="00"&&G!=="ff"&&(G=N),"".concat(G,"-").concat(O(k.traceId,32,y),"-").concat(O(k.spanId,16,U),"-").concat(le)}return""}o(L,"formatTraceParent");function Y(){var k="traceparent",le=se((0,P.ed)(k));return le||(le=se((0,P.pI)(k))),le}o(Y,"findW3cTraceParent")},8096:(at,l,C)=>{"use strict";C.d(l,{$h:()=>Ve,F3:()=>_e,Fc:()=>$,Fr:()=>I,Gc:()=>le,I:()=>v,Jd:()=>D,Jn:()=>oe,Km:()=>be,Kn:()=>Fe,LS:()=>Ae,Lk:()=>fe,MW:()=>B,P6:()=>Ke,PA:()=>ae,PL:()=>Ce,R5:()=>W,SD:()=>x,T:()=>Me,T0:()=>Re,T1:()=>ne,TC:()=>m,TO:()=>Q,Tu:()=>Ie,VL:()=>R,W2:()=>ie,ZV:()=>dt,Z_:()=>_,_S:()=>ge,_d:()=>q,cb:()=>Y,d:()=>ve,dE:()=>de,eZ:()=>U,fi:()=>k,g:()=>J,gU:()=>G,i7:()=>ht,iC:()=>L,jk:()=>H,kL:()=>X,mc:()=>Se,n7:()=>se,nY:()=>Ne,ou:()=>ue,p$:()=>y,pZ:()=>w,qV:()=>he,tb:()=>P,uL:()=>O,w6:()=>xe,wu:()=>Qe,xv:()=>nt,yl:()=>N,zV:()=>He,zc:()=>z});var R="initialize",v="name",P="getNotifyMgr",w="identifier",B="push",N="isInitialized",m="config",y="instrumentationKey",U="logger",W="length",_="time",O="processNext",x="getProcessTelContext",J="addNotificationListener",se="removeNotificationListener",Ae="stopPollingInternalLogs",$="onComplete",Q="getPlugin",X="flush",L="_extensions",Y="splice",k="teardown",le="messageId",G="message",ve="isAsync",_e="_doTeardown",Ie="update",ie="getNext",Se="diagLog",D="setNextPlugin",He="createNew",fe="cookieCfg",ue="indexOf",z="substring",he="userAgent",xe="split",Ve="setEnabled",oe="substr",nt="nodeType",dt="apply",ht="replace",I="enableDebugExceptions",H="logInternalMessage",ne="toLowerCase",ge="call",Ke="type",Fe="handler",de="listeners",Ce="isChildEvt",Me="getCtx",Qe="setCtx",be="complete",Ne="traceId",q="spanId",Re="traceFlags",ae="version"},4392:(at,l,C)=>{"use strict";C.d(l,{CY:()=>O,Pw:()=>m,RJ:()=>_,V4:()=>y,bO:()=>B,cb:()=>R,fK:()=>v,hB:()=>w,jA:()=>P,rl:()=>U,yu:()=>W});var R="function",v="object",P="undefined",w="prototype",B="hasOwnProperty",N="default",m=Object,y=m[w],U=m.assign,W=m.create,_=m.defineProperty,O=y[B]},2091:(at,l,C)=>{"use strict";C.d(l,{Rd:()=>P,ZU:()=>w,pu:()=>B});var R=C(4392),v=null;function P(N){N===void 0&&(N=!0);var m=N===!1?null:v;return m||(typeof globalThis!==R.jA&&(m=globalThis),!m&&typeof self!==R.jA&&(m=self),!m&&typeof window!==R.jA&&(m=window),!m&&typeof C.g!==R.jA&&(m=C.g),v=m),m}o(P,"getGlobal");function w(N){throw new TypeError(N)}o(w,"throwTypeError");function B(N){var m=R.yu;if(m)return m(N);if(N==null)return{};var y=typeof N;y!==R.fK&&y!==R.cb&&w("Object prototype may only be an Object:"+N);function U(){}return o(U,"tmpFunc"),U[R.hB]=N,new U}o(B,"objCreateFn")},1088:(at,l,C)=>{"use strict";C.d(l,{$h:()=>G,ne:()=>J,uc:()=>O});var R=C(4392),v=C(2091),P=((0,v.Rd)()||{}).Symbol,w=((0,v.Rd)()||{}).Reflect,B=!!P,N=!!w,m="decorate",y="metadata",U="getOwnPropertySymbols",W="iterator",_=o(function(ie){for(var Se,D=1,He=arguments.length;D<He;D++){Se=arguments[D];for(var fe in Se)R.V4[R.bO].call(Se,fe)&&(ie[fe]=Se[fe])}return ie},"__objAssignFnImpl"),O=R.rl||_,x=o(function(ie,Se){return x=R.Pw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,He){D.__proto__=He}||function(D,He){for(var fe in He)He[R.bO](fe)&&(D[fe]=He[fe])},x(ie,Se)},"extendStaticsFn");function J(ie,Se){typeof Se!==R.cb&&Se!==null&&(0,v.ZU)("Class extends value "+String(Se)+" is not a constructor or null"),x(ie,Se);function D(){this.constructor=ie}o(D,"__"),ie[R.hB]=Se===null?(0,v.pu)(Se):(D[R.hB]=Se[R.hB],new D)}o(J,"__extendsFn");function se(ie,Se){var D={};for(var He in ie)ObjHasOwnProperty.call(ie,He)&&Se.indexOf(He)<0&&(D[He]=ie[He]);if(ie!=null&&typeof ObjClass[U]===strShimFunction)for(var fe=0,ue=ObjClass[U](ie);fe<ue.length;fe++)Se.indexOf(ue[fe])<0&&ObjProto.propertyIsEnumerable.call(ie,ue[fe])&&(D[ue[fe]]=ie[ue[fe]]);return D}o(se,"__restFn");function Ae(ie,Se,D,He){var fe=arguments.length,ue=fe<3?Se:He===null?He=ObjClass.getOwnPropertyDescriptor(Se,D):He,z;if(N&&typeof w[m]===strShimFunction)ue=w[m](ie,Se,D,He);else for(var he=ie.length-1;he>=0;he--)(z=ie[he])&&(ue=(fe<3?z(ue):fe>3?z(Se,D,ue):z(Se,D))||ue);return fe>3&&ue&&ObjDefineProperty(Se,D,ue),ue}o(Ae,"__decorateFn");function $(ie,Se){return function(D,He){Se(D,He,ie)}}o($,"__paramFn");function Q(ie,Se){if(N&&w[y]===strShimFunction)return w[y](ie,Se)}o(Q,"__metadataFn");function X(ie,Se){for(var D in ie)D!==strDefault&&!ObjHasOwnProperty.call(Se,D)&&L(Se,ie,D)}o(X,"__exportStarFn");function L(ie,Se,D,He){He===void 0&&(He=D),ObjCreate?ObjDefineProperty(ie,He,{enumerable:!0,get:function(){return Se[D]}}):ie[He]=Se[D]}o(L,"__createBindingFn");function Y(ie){var Se=typeof P===strShimFunction&&P[W],D=Se&&ie[Se],He=0;if(D)return D.call(ie);if(ie&&typeof ie.length=="number")return{next:function(){return ie&&He>=ie.length&&(ie=void 0),{value:ie&&ie[He++],done:!ie}}};throwTypeError(Se?"Object is not iterable.":"Symbol.iterator is not defined.")}o(Y,"__valuesFn");function k(ie,Se){var D=typeof P===strShimFunction&&ie[P[W]];if(!D)return ie;var He=D.call(ie),fe,ue=[],z;try{for(;(Se===void 0||Se-- >0)&&!(fe=He.next()).done;)ue.push(fe.value)}catch(he){z={error:he}}finally{try{fe&&!fe.done&&(D=He.return)&&D.call(He)}finally{if(z)throw z.error}}return ue}o(k,"__readFn");function le(){for(var ie=arguments,Se=0,D=0,He=ie.length;D<He;D++)Se+=ie[D].length;for(var fe=Array(Se),ue=0,D=0;D<He;D++)for(var z=ie[D],he=0,xe=z.length;he<xe;he++,ue++)fe[ue]=z[he];return fe}o(le,"__spreadArraysFn");function G(ie,Se){for(var D=0,He=Se.length,fe=ie.length;D<He;D++,fe++)ie[fe]=Se[D];return ie}o(G,"__spreadArrayFn");function ve(ie,Se){return ObjDefineProperty?ObjDefineProperty(ie,"raw",{value:Se}):ie.raw=Se,ie}o(ve,"__makeTemplateObjectFn");function _e(ie){if(ie&&ie.__esModule)return ie;var Se={};if(ie!=null)for(var D in ie)D!==strDefault&&Object.prototype.hasOwnProperty.call(ie,D)&&L(Se,ie,D);return ObjCreate?ObjDefineProperty(Se,strDefault,{enumerable:!0,value:ie}):Se[strDefault]=ie,Se}o(_e,"__importStarFn");function Ie(ie){return ie&&ie.__esModule?ie:{strDefault:ie}}o(Ie,"__importDefaultFn")},3268:(at,l,C)=>{"use strict";C.r(l),C.d(l,{AppInsightsCore:()=>ia.F,ApplicationInsights:()=>Ai,CoreUtils:()=>Ut.Tr,Sender:()=>Ia,SeverityLevel:()=>Do,_InternalMessageId:()=>ya.v,arrForEach:()=>q.tO,isNullOrUndefined:()=>q.le,proxyFunctions:()=>q.Vb,throwError:()=>q._y});var R=C(1679),v=C(1088),P="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",w="sampleRate",B="ProcessLegacy",N="http.method",m="https://dc.services.visualstudio.com",y="/v2/track",U="not_specified",W="iKey",_="split",O="length",x="toLowerCase",J="ingestionendpoint",se="toString",Ae="removeItem",$="name",Q="message",X="count",L="preTriggerDate",Y="disabled",k="interval",le="daysOfMonth",G="date",ve="getUTCDate",_e="stringify",Ie="pathname",ie="correlationHeaderExcludePatterns",Se="indexOf",D="extensionConfig",He="exceptions",fe="parsedStack",ue="properties",z="measurements",he="sizeInBytes",xe="typeName",Ve="severityLevel",oe="problemGroup",nt="isManual",dt="CreateFromInterface",ht="assembly",I="hasFullStack",H="level",ne="method",ge="fileName",Ke="line",Fe="duration",de="receivedResponse",Ce="substring",Me="sanitizeKeyAndAddUniqueness",Qe="sanitizeException",be="sanitizeProperties",Ne="sanitizeMeasurements",q=C(6708),Re=C(5018),ae=C(7630),j;function Ye(S,g,A){var F=g[O],ee=Ft(S,g);if(ee[O]!==F){for(var we=0,Pe=ee;A[Pe]!==void 0;)we++,Pe=ee[Ce](0,150-3)+kr(we);ee=Pe}return ee}o(Ye,"dataSanitizeKeyAndAddUniqueness");function Ft(S,g){var A;return g&&(g=(0,q.nd)(g[se]()),g[O]>150&&(A=g[Ce](0,150),(0,Re.kP)(S,2,57,"name is too long.  It has been truncated to "+150+" characters.",{name:g},!0))),A||g}o(Ft,"dataSanitizeKey");function Gt(S,g,A){A===void 0&&(A=1024);var F;return g&&(A=A||1024,g=(0,q.nd)(g),g.toString()[O]>A&&(F=g[se]()[Ce](0,A),(0,Re.kP)(S,2,61,"string value is too long. It has been truncated to "+A+" characters.",{value:g},!0))),F||g}o(Gt,"dataSanitizeString");function xn(S,g){return Lr(S,g,2048,66)}o(xn,"dataSanitizeUrl");function Sn(S,g){var A;return g&&g[O]>32768&&(A=g[Ce](0,32768),(0,Re.kP)(S,2,56,"message is too long, it has been truncated to "+32768+" characters.",{message:g},!0)),A||g}o(Sn,"dataSanitizeMessage");function jn(S,g){var A;if(g){var F=""+g;F[O]>32768&&(A=F[Ce](0,32768),(0,Re.kP)(S,2,52,"exception is too long, it has been truncated to "+32768+" characters.",{exception:g},!0))}return A||g}o(jn,"dataSanitizeException");function Xn(S,g){if(g){var A={};(0,q.rW)(g,function(F,ee){if((0,q.Kn)(ee)&&(0,ae.nS)())try{ee=(0,ae.xA)()[_e](ee)}catch(we){(0,Re.kP)(S,2,49,"custom property is not valid",{exception:we},!0)}ee=Gt(S,ee,8192),F=Ye(S,F,A),A[F]=ee}),g=A}return g}o(Xn,"dataSanitizeProperties");function Kn(S,g){if(g){var A={};(0,q.rW)(g,function(F,ee){F=Ye(S,F,A),A[F]=ee}),g=A}return g}o(Kn,"dataSanitizeMeasurements");function gr(S,g){return g&&Lr(S,g,128,69)[se]()}o(gr,"dataSanitizeId");function Lr(S,g,A,F){var ee;return g&&(g=(0,q.nd)(g),g[O]>A&&(ee=g[Ce](0,A),(0,Re.kP)(S,2,F,"input is too long, it has been truncated to "+A+" characters.",{data:g},!0))),ee||g}o(Lr,"dataSanitizeInput");function kr(S){var g="00"+S;return g.substr(g[O]-3)}o(kr,"dsPadNumber");var ct=(j={MAX_NAME_LENGTH:150,MAX_ID_LENGTH:128,MAX_PROPERTY_LENGTH:8192,MAX_STRING_LENGTH:1024,MAX_URL_LENGTH:2048,MAX_MESSAGE_LENGTH:32768,MAX_EXCEPTION_LENGTH:32768},j[Me]=Ye,j.sanitizeKey=Ft,j.sanitizeString=Gt,j.sanitizeUrl=xn,j.sanitizeMessage=Sn,j[Qe]=jn,j[be]=Xn,j[Ne]=Kn,j.sanitizeId=gr,j.sanitizeInput=Lr,j.padNumber=kr,j.trim=q.nd,j),$t=function(){function S(g,A,F,ee){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var we=this;we.ver=2,we[$]=Gt(g,A)||U,we[ue]=Xn(g,F),we[z]=Kn(g,ee)}return o(S,"Event"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Event",S.dataType="EventData",S}(),en=function(){function S(g,A,F,ee,we){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var Pe=this;Pe.ver=2,A=A||U,Pe[Q]=Sn(g,A),Pe[ue]=Xn(g,ee),Pe[z]=Kn(g,we),F&&(Pe[Ve]=F)}return o(S,"Trace"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Message",S.dataType="MessageData",S}(),Zt="";function nn(S,g){return g===void 0&&(g=!1),S==null?g:S.toString()[x]()==="true"}o(nn,"stringToBoolOrDefault");function Dn(S){(isNaN(S)||S<0)&&(S=0),S=Math.round(S);var g=Zt+S%1e3,A=Zt+Math.floor(S/1e3)%60,F=Zt+Math.floor(S/(1e3*60))%60,ee=Zt+Math.floor(S/(1e3*60*60))%24,we=Math.floor(S/(1e3*60*60*24));return g=g[O]===1?"00"+g:g[O]===2?"0"+g:g,A=A[O]<2?"0"+A:A,F=F[O]<2?"0"+F:F,ee=ee[O]<2?"0"+ee:ee,(we>0?we+".":Zt)+ee+":"+F+":"+A+"."+g}o(Dn,"msToTimeSpan");function ar(S,g){var A=null;return(0,q.tO)(S,function(F){if(F.identifier===g)return A=F,-1}),A}o(ar,"getExtensionByName");function vr(S,g,A,F,ee){return!ee&&(0,q.HD)(S)&&(S==="Script error."||S==="Script error")}o(vr,"isCrossOriginError");var Gn=function(){function S(g,A,F,ee,we,Pe,Xe){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var wt=this;wt.ver=2,wt.id=gr(g,Xe),wt.url=xn(g,F),wt[$]=Gt(g,A)||U,isNaN(ee)||(wt[Fe]=Dn(ee)),wt[ue]=Xn(g,we),wt[z]=Kn(g,Pe)}return o(S,"PageView"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",S.dataType="PageviewData",S}(),pr=function(){function S(g,A,F,ee,we,Pe,Xe){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var wt=this;wt.ver=2,wt.url=xn(g,F),wt[$]=Gt(g,A)||U,wt[ue]=Xn(g,we),wt[z]=Kn(g,Pe),Xe&&(wt.domProcessing=Xe.domProcessing,wt[Fe]=Xe[Fe],wt.networkConnect=Xe.networkConnect,wt.perfTotal=Xe.perfTotal,wt[de]=Xe[de],wt.sentRequest=Xe.sentRequest)}return o(S,"PageViewPerformance"),S.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",S.dataType="PageviewPerformanceData",S}(),Br="<no_method>",On="error",Zn="stack",_r="stackDetails",Cn="errorSrc",Qr="message",Tr="description";function Hr(S,g){var A=S;return A&&!(0,q.HD)(A)&&(JSON&&JSON[_e]?(A=JSON[_e](S),g&&(!A||A==="{}")&&((0,q.mf)(S[se])?A=S[se]():A=""+S)):A=""+S+" - (Missing JSON.stringify)"),A||""}o(Hr,"_stringify");function wi(S,g){var A=S;return S&&(A&&!(0,q.HD)(A)&&(A=S[Qr]||S[Tr]||A),A&&!(0,q.HD)(A)&&(A=Hr(A,!0)),S.filename&&(A=A+" @"+(S.filename||"")+":"+(S.lineno||"?")+":"+(S.colno||"?"))),g&&g!=="String"&&g!=="Object"&&g!=="Error"&&(A||"")[Se](g)===-1&&(A=g+": "+A),A||""}o(wi,"_formatMessage");function ui(S){try{if((0,q.Kn)(S))return"hasFullStack"in S&&"typeName"in S}catch(g){}return!1}o(ui,"_isExceptionDetailsInternal");function lr(S){try{if((0,q.Kn)(S))return"ver"in S&&"exceptions"in S&&"properties"in S}catch(g){}return!1}o(lr,"_isExceptionInternal");function T(S){return S&&S.src&&(0,q.HD)(S.src)&&S.obj&&(0,q.kJ)(S.obj)}o(T,"_isStackDetails");function ce(S){var g=S||"";(0,q.HD)(g)||((0,q.HD)(g[Zn])?g=g[Zn]:g=""+g);var A=g[_](`
`);return{src:g,obj:A}}o(ce,"_convertStackObj");function Ee(S){for(var g=[],A=S[_](`
`),F=0;F<A[O];F++){var ee=A[F];A[F+1]&&(ee+="@"+A[F+1],F++),g.push(ee)}return{src:S,obj:g}}o(Ee,"_getOperaStack");function Ue(S){var g=null;if(S)try{if(S[Zn])g=ce(S[Zn]);else if(S[On]&&S[On][Zn])g=ce(S[On][Zn]);else if(S.exception&&S.exception[Zn])g=ce(S.exception[Zn]);else if(T(S))g=S;else if(T(S[_r]))g=S[_r];else if(window&&window.opera&&S[Qr])g=Ee(S[Q]);else if(S.reason&&S.reason[Zn])g=ce(S.reason[Zn]);else if((0,q.HD)(S))g=ce(S);else{var A=S[Qr]||S[Tr]||"";(0,q.HD)(S[Cn])&&(A&&(A+=`
`),A+=" from "+S[Cn]),A&&(g=ce(A))}}catch(F){g=ce(F)}return g||{src:"",obj:null}}o(Ue,"_getStackFromErrorObj");function et(S){var g="";return S&&(S.obj?(0,q.tO)(S.obj,function(A){g+=A+`
`}):g=S.src||""),g}o(et,"_formatStackTrace");function Be(S){var g,A=S.obj;if(A&&A[O]>0){g=[];var F=0,ee=0;(0,q.tO)(A,function(hn){var wr=hn[se]();if(St.regex.test(wr)){var We=new St(wr,F++);ee+=We[he],g.push(We)}});var we=32*1024;if(ee>we)for(var Pe=0,Xe=g[O]-1,wt=0,Ct=Pe,It=Xe;Pe<Xe;){var un=g[Pe][he],Mn=g[Xe][he];if(wt+=un+Mn,wt>we){var cn=It-Ct+1;g.splice(Ct,cn);break}Ct=Pe,It=Xe,Pe++,Xe--}}return g}o(Be,"_parseStack");function lt(S){var g="";if(S&&(g=S.typeName||S[$]||"",!g))try{var A=/function (.{1,200})\(/,F=A.exec(S.constructor[se]());g=F&&F[O]>1?F[1]:""}catch(ee){}return g}o(lt,"_getErrorType");function _t(S){if(S)try{if(!(0,q.HD)(S)){var g=lt(S),A=Hr(S,!1);return(!A||A==="{}")&&(S[On]&&(S=S[On],g=lt(S)),A=Hr(S,!0)),A[Se](g)!==0&&g!=="String"?g+":"+A:A}}catch(F){}return""+(S||"")}o(_t,"_formatErrorCode");var Tt=function(){function S(g,A,F,ee,we,Pe){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var Xe=this;Xe.ver=2,lr(A)?(Xe[He]=A[He]||[],Xe[ue]=A[ue],Xe[z]=A[z],A[Ve]&&(Xe[Ve]=A[Ve]),A.id&&(Xe.id=A.id),A[oe]&&(Xe[oe]=A[oe]),(0,q.le)(A[nt])||(Xe[nt]=A[nt])):(F||(F={}),Xe[He]=[new on(g,A,F)],Xe[ue]=Xn(g,F),Xe[z]=Kn(g,ee),we&&(Xe[Ve]=we),Pe&&(Xe.id=Pe))}return o(S,"Exception"),S.CreateAutoException=function(g,A,F,ee,we,Pe,Xe,wt){var Ct,It=lt(we||Pe||g);return Ct={},Ct[Q]=wi(g,It),Ct.url=A,Ct.lineNumber=F,Ct.columnNumber=ee,Ct.error=_t(we||Pe||g),Ct.evt=_t(Pe||g),Ct[xe]=It,Ct.stackDetails=Ue(Xe||we||Pe),Ct.errorSrc=wt,Ct},S.CreateFromInterface=function(g,A,F,ee){var we=A[He]&&(0,q.Mr)(A[He],function(Xe){return on[dt](g,Xe)}),Pe=new S(g,(0,v.uc)((0,v.uc)({},A),{exceptions:we}),F,ee);return Pe},S.prototype.toInterface=function(){var g,A=this,F=A.exceptions,ee=A.properties,we=A.measurements,Pe=A.severityLevel,Xe=A.problemGroup,wt=A.id,Ct=A.isManual,It=F instanceof Array&&(0,q.Mr)(F,function(un){return un.toInterface()})||void 0;return g={ver:"4.0"},g[He]=It,g.severityLevel=Pe,g.properties=ee,g.measurements=we,g.problemGroup=Xe,g.id=wt,g.isManual=Ct,g},S.CreateSimpleException=function(g,A,F,ee,we,Pe){var Xe;return{exceptions:[(Xe={},Xe[I]=!0,Xe.message=g,Xe.stack=we,Xe.typeName=A,Xe)]}},S.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",S.dataType="ExceptionData",S.formatError=_t,S}(),on=function(){function S(g,A,F){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var ee=this;if(ui(A))ee[xe]=A[xe],ee[Q]=A[Q],ee[Zn]=A[Zn],ee[fe]=A[fe]||[],ee[I]=A[I];else{var we=A,Pe=we&&we.evt;(0,q.VZ)(we)||(we=we[On]||Pe||we),ee[xe]=Gt(g,lt(we))||U,ee[Q]=Sn(g,wi(A||we,ee[xe]))||U;var Xe=A[_r]||Ue(A);ee[fe]=Be(Xe),(0,q.kJ)(ee[fe])&&(0,q.Mr)(ee[fe],function(wt){return wt[ht]=Gt(g,wt[ht])}),ee[Zn]=jn(g,et(Xe)),ee.hasFullStack=(0,q.kJ)(ee.parsedStack)&&ee.parsedStack[O]>0,F&&(F[xe]=F[xe]||ee[xe])}}return o(S,"_ExceptionDetails"),S.prototype.toInterface=function(){var g,A=this,F=A[fe]instanceof Array&&(0,q.Mr)(A[fe],function(we){return we.toInterface()}),ee=(g={id:A.id,outerId:A.outerId,typeName:A[xe],message:A[Q],hasFullStack:A[I],stack:A[Zn]},g[fe]=F||void 0,g);return ee},S.CreateFromInterface=function(g,A){var F=A[fe]instanceof Array&&(0,q.Mr)(A[fe],function(we){return St[dt](we)})||A[fe],ee=new S(g,(0,v.uc)((0,v.uc)({},A),{parsedStack:F}));return ee},S}(),St=function(){function S(g,A){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var F=this;if(F[he]=0,typeof g=="string"){var ee=g;F[H]=A,F[ne]=Br,F[ht]=(0,q.nd)(ee),F[ge]="",F[Ke]=0;var we=ee.match(S.regex);we&&we[O]>=5&&(F[ne]=(0,q.nd)(we[2])||F[ne],F[ge]=(0,q.nd)(we[4]),F[Ke]=parseInt(we[5])||0)}else F[H]=g[H],F[ne]=g[ne],F[ht]=g[ht],F[ge]=g[ge],F[Ke]=g[Ke],F[he]=0;F.sizeInBytes+=F.method[O],F.sizeInBytes+=F.fileName[O],F.sizeInBytes+=F.assembly[O],F[he]+=S.baseSize,F.sizeInBytes+=F.level.toString()[O],F.sizeInBytes+=F.line.toString()[O]}return o(S,"_StackFrame"),S.CreateFromInterface=function(g){return new S(g,null)},S.prototype.toInterface=function(){var g=this;return{level:g[H],method:g[ne],assembly:g[ht],fileName:g[ge],line:g[Ke]}},S.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,S.baseSize=58,S}(),Jt=function(){function S(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return o(S,"DataPoint"),S}(),Ot=function(){function S(g,A,F,ee,we,Pe,Xe,wt,Ct){this.aiDataContract={ver:1,metrics:1,properties:0};var It=this;It.ver=2;var un=new Jt;un[X]=ee>0?ee:void 0,un.max=isNaN(Pe)||Pe===null?void 0:Pe,un.min=isNaN(we)||we===null?void 0:we,un[$]=Gt(g,A)||U,un.value=F,un.stdDev=isNaN(Xe)||Xe===null?void 0:Xe,It.metrics=[un],It[ue]=Xn(g,wt),It[z]=Kn(g,Ct)}return o(S,"Metric"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",S.dataType="MetricData",S}(),Ut=C(5843),Mt=C(3242),zn=C(4878),bn=C(4869);function cr(S){var g=null;if((0,q.mf)(Event))g=new Event(S);else{var A=(0,ae.Me)();A&&A.createEvent&&(g=A.createEvent("Event"),g.initEvent(S,!0,!0))}return g}o(cr,"createDomEvent");var Hn=C(4873),ur=(0,Hn.cc)({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),Xr=C(2091),Gr=(0,Hn.By)({LocalStorage:0,SessionStorage:1}),er=(0,Hn.By)({AI:0,AI_AND_W3C:1,W3C:2}),xr=void 0,Dt=void 0;function Vn(){return Sr()?_n(Gr.LocalStorage):null}o(Vn,"_getLocalStorageObject");function _n(S){try{if((0,q.le)((0,Xr.Rd)()))return null;var g=new Date()[se](),A=(0,ae.a8)(S===Gr.LocalStorage?"localStorage":"sessionStorage");A.setItem(g,g);var F=A.getItem(g)!==g;if(A[Ae](g),!F)return A}catch(ee){}return null}o(_n,"_getVerifiedStorageObject");function Rn(){return Mi()?_n(Gr.SessionStorage):null}o(Rn,"_getSessionStorageObject");function Wn(){xr=!1,Dt=!1}o(Wn,"utlDisableStorage");function or(){xr=Sr(!0),Dt=Mi(!0)}o(or,"utlEnableStorage");function Sr(S){return(S||xr===void 0)&&(xr=!!_n(Gr.LocalStorage)),xr}o(Sr,"utlCanUseLocalStorage");function Fr(S,g){var A=Vn();if(A!==null)try{return A.getItem(g)}catch(F){xr=!1,(0,Re.kP)(S,2,1,"Browser failed read of local storage. "+(0,q.jj)(F),{exception:(0,ae.eU)(F)})}return null}o(Fr,"utlGetLocalStorage");function Er(S,g,A){var F=Vn();if(F!==null)try{return F.setItem(g,A),!0}catch(ee){xr=!1,(0,Re.kP)(S,2,3,"Browser failed write to local storage. "+(0,q.jj)(ee),{exception:(0,ae.eU)(ee)})}return!1}o(Er,"utlSetLocalStorage");function Zi(S,g){var A=Vn();if(A!==null)try{return A[Ae](g),!0}catch(F){xr=!1,(0,Re.kP)(S,2,5,"Browser failed removal of local storage item. "+(0,q.jj)(F),{exception:(0,ae.eU)(F)})}return!1}o(Zi,"utlRemoveStorage");function Mi(S){return(S||Dt===void 0)&&(Dt=!!_n(Gr.SessionStorage)),Dt}o(Mi,"utlCanUseSessionStorage");function oa(){var S=[];return Mi()&&(0,q.rW)((0,ae.a8)("sessionStorage"),function(g){S.push(g)}),S}o(oa,"utlGetSessionStorageKeys");function Pi(S,g){var A=Rn();if(A!==null)try{return A.getItem(g)}catch(F){Dt=!1,(0,Re.kP)(S,2,2,"Browser failed read of session storage. "+(0,q.jj)(F),{exception:(0,ae.eU)(F)})}return null}o(Pi,"utlGetSessionStorage");function zi(S,g,A){var F=Rn();if(F!==null)try{return F.setItem(g,A),!0}catch(ee){Dt=!1,(0,Re.kP)(S,2,4,"Browser failed write to session storage. "+(0,q.jj)(ee),{exception:(0,ae.eU)(ee)})}return!1}o(zi,"utlSetSessionStorage");function ea(S,g){var A=Rn();if(A!==null)try{return A[Ae](g),!0}catch(F){Dt=!1,(0,Re.kP)(S,2,6,"Browser failed removal of session storage item. "+(0,q.jj)(F),{exception:(0,ae.eU)(F)})}return!1}o(ea,"utlRemoveSessionStorage");var Vi=(0,ae.Me)()||{},ta=0,di=[null,null,null,null,null];function Zr(S){var g=ta,A=di,F=A[g];return Vi.createElement?A[g]||(F=A[g]=Vi.createElement("a")):F={host:ai(S,!0)},F.href=S,g++,g>=A[O]&&(g=0),ta=g,F}o(Zr,"urlParseUrl");function fi(S){var g,A=Zr(S);return A&&(g=A.href),g}o(fi,"urlGetAbsoluteUrl");function Oi(S){var g,A=Zr(S);return A&&(g=A[Ie]),g}o(Oi,"urlGetPathName");function va(S,g){return S?S.toUpperCase()+" "+g:g}o(va,"urlGetCompleteUrl");function ai(S,g){var A=Ji(S,g)||"";if(A){var F=A.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[O]>3&&(0,q.HD)(F[2])&&F[2][O]>0)return F[2]+(F[3]||"")}return A}o(ai,"urlParseHost");function Ji(S,g){var A=null;if(S){var F=S.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[O]>2&&(0,q.HD)(F[2])&&F[2][O]>0&&(A=F[2]||"",g&&F[O]>2)){var ee=(F[1]||"")[x](),we=F[3]||"";(ee==="http"&&we===":80"||ee==="https"&&we===":443")&&(we=""),A+=we}}return A}o(Ji,"urlParseFullHost");var Oe=[m+y,"https://breeze.aimon.applicationinsights.io"+y,"https://dc-int.services.visualstudio.com"+y];function tt(S){return(0,q.UA)(Oe,S[x]())!==-1}o(tt,"isInternalApplicationInsightsEndpoint");var vt={NotSpecified:U,createDomEvent:cr,disableStorage:Wn,isInternalApplicationInsightsEndpoint:tt,canUseLocalStorage:Sr,getStorage:Fr,setStorage:Er,removeStorage:Zi,canUseSessionStorage:Mi,getSessionStorageKeys:oa,getSessionStorage:Pi,setSessionStorage:zi,removeSessionStorage:ea,disableCookies:Ut.oF,canUseCookies:Ut.vn,disallowsSameSiteNone:Mt.UY,setCookie:Ut.d8,stringToBoolOrDefault:nn,getCookie:Ut.ej,deleteCookie:Ut.kT,trim:q.nd,newId:zn.pZ,random32:function(){return(0,zn._l)(!0)},generateW3CId:Ut.DO,isArray:q.kJ,isError:q.VZ,isDate:q.J_,toISOStringForIE8:q.Y6,getIEVersion:ae.sA,msToTimeSpan:Dn,isCrossOriginError:vr,dump:ae.eU,getExceptionName:q.jj,addEventHandler:bn.pZ,IsBeaconApiSupported:ae.MF,getExtension:ar},rt={parseUrl:Zr,getAbsoluteUrl:fi,getPathName:Oi,getCompleteUrl:va,parseHost:ai,parseFullHost:Ji},Bt={correlationIdPrefix:"cid-v1:",canIncludeCorrelationHeader:function(S,g,A){if(!g||S&&S.disableCorrelationHeaders)return!1;if(S&&S[ie]){for(var F=0;F<S.correlationHeaderExcludePatterns[O];F++)if(S[ie][F].test(g))return!1}var ee=Zr(g).host[x]();if(ee&&(ee[Se](":443")!==-1||ee[Se](":80")!==-1)&&(ee=(Ji(g,!0)||"")[x]()),(!S||!S.enableCorsCorrelation)&&ee&&ee!==A)return!1;var we=S&&S.correlationHeaderDomains;if(we){var Pe;if((0,q.tO)(we,function(Ct){var It=new RegExp(Ct.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));Pe=Pe||It.test(ee)}),!Pe)return!1}var Xe=S&&S.correlationHeaderExcludedDomains;if(!Xe||Xe[O]===0)return!0;for(var F=0;F<Xe[O];F++){var wt=new RegExp(Xe[F].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(wt.test(ee))return!1}return ee&&ee[O]>0},getCorrelationContext:function(S){if(S){var g=Bt.getCorrelationContextValue(S,ur[1]);if(g&&g!==Bt.correlationIdPrefix)return g}},getCorrelationContextValue:function(S,g){if(S)for(var A=S[_](","),F=0;F<A[O];++F){var ee=A[F][_]("=");if(ee[O]===2&&ee[0]===g)return ee[1]}}};function jt(S,g,A,F){var ee,we=F,Pe=F;if(g&&g[O]>0){var Xe=Zr(g);if(ee=Xe.host,!we)if(Xe[Ie]!=null){var wt=Xe.pathname[O]===0?"/":Xe[Ie];wt.charAt(0)!=="/"&&(wt="/"+wt),Pe=Xe[Ie],we=Gt(S,A?A+" "+wt:wt)}else we=Gt(S,g)}else ee=F,we=F;return{target:ee,name:we,data:Pe}}o(jt,"AjaxHelperParseDependencyPath");function pt(){var S=(0,ae.r)();if(S&&S.now&&S.timing){var g=S.now()+S.timing.navigationStart;if(g>0)return g}return(0,q.m6)()}o(pt,"dateTimeUtilsNow");function tn(S,g){var A=null;return S!==0&&g!==0&&!(0,q.le)(S)&&!(0,q.le)(g)&&(A=g-S),A}o(tn,"dateTimeUtilsDuration");var Ht={Now:pt,GetDuration:tn};function yn(S,g){var A=S||{};return{getName:function(){return A[_DYN_NAME]},setName:function(F){g&&g.setName(F),A[_DYN_NAME]=F},getTraceId:function(){return A.traceID},setTraceId:function(F){g&&g.setTraceId(F),isValidTraceId(F)&&(A.traceID=F)},getSpanId:function(){return A.parentID},setSpanId:function(F){g&&g.setSpanId(F),isValidSpanId(F)&&(A.parentID=F)},getTraceFlags:function(){return A.traceFlags},setTraceFlags:function(F){g&&g.setTraceFlags(F),A.traceFlags=F}}}o(yn,"createDistributedTraceContextFromTrace");var En=function(){function S(g,A,F,ee,we,Pe,Xe,wt,Ct,It,un,Mn){Ct===void 0&&(Ct="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var cn=this;cn.ver=2,cn.id=A,cn[Fe]=Dn(we),cn.success=Pe,cn.resultCode=Xe+"",cn.type=Gt(g,Ct);var hn=jt(g,F,wt,ee);cn.data=xn(g,ee)||hn.data,cn.target=Gt(g,hn.target),It&&(cn.target="".concat(cn.target," | ").concat(It)),cn[$]=Gt(g,hn[$]),cn[ue]=Xn(g,un),cn[z]=Kn(g,Mn)}return o(S,"RemoteDependencyData"),S.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",S.dataType="RemoteDependencyData",S}(),nr="AppInsightsPropertiesPlugin",Jn="AppInsightsChannelPlugin",dr="ApplicationInsightsAnalytics",fn=C(5883),qt=C(4063);function zt(S){var g="ai."+S+".";return function(A){return g+A}}o(zt,"_aiNameFunc");var Nt=zt("application"),gn=zt("device"),M=zt("location"),te=zt("operation"),ze=zt("session"),ot=zt("user"),Wt=zt("cloud"),Et=zt("internal"),vn=function(S){(0,v.ne)(g,S);function g(){return S.call(this)||this}return o(g,"ContextTagKeys"),g}((0,q.hl)({applicationVersion:Nt("ver"),applicationBuild:Nt("build"),applicationTypeId:Nt("typeId"),applicationId:Nt("applicationId"),applicationLayer:Nt("layer"),deviceId:gn("id"),deviceIp:gn("ip"),deviceLanguage:gn("language"),deviceLocale:gn("locale"),deviceModel:gn("model"),deviceFriendlyName:gn("friendlyName"),deviceNetwork:gn("network"),deviceNetworkName:gn("networkName"),deviceOEMName:gn("oemName"),deviceOS:gn("os"),deviceOSVersion:gn("osVersion"),deviceRoleInstance:gn("roleInstance"),deviceRoleName:gn("roleName"),deviceScreenResolution:gn("screenResolution"),deviceType:gn("type"),deviceMachineName:gn("machineName"),deviceVMName:gn("vmName"),deviceBrowser:gn("browser"),deviceBrowserVersion:gn("browserVersion"),locationIp:M("ip"),locationCountry:M("country"),locationProvince:M("province"),locationCity:M("city"),operationId:te("id"),operationName:te("name"),operationParentId:te("parentId"),operationRootId:te("rootId"),operationSyntheticSource:te("syntheticSource"),operationCorrelationVector:te("correlationVector"),sessionId:ze("id"),sessionIsFirst:ze("isFirst"),sessionIsNew:ze("isNew"),userAccountAcquisitionDate:ot("accountAcquisitionDate"),userAccountId:ot("accountId"),userAgent:ot("userAgent"),userId:ot("id"),userStoreRegion:ot("storeRegion"),userAuthUserId:ot("authUserId"),userAnonymousUserAcquisitionDate:ot("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:ot("authUserAcquisitionDate"),cloudName:Wt("name"),cloudRole:Wt("role"),cloudRoleVer:Wt("roleVer"),cloudRoleInstance:Wt("roleInstance"),cloudEnvironment:Wt("environment"),cloudLocation:Wt("location"),cloudDeploymentUnit:Wt("deploymentUnit"),internalNodeName:Et("nodeName"),internalSdkVersion:Et("sdkVersion"),internalAgentVersion:Et("agentVersion"),internalSnippet:Et("snippet"),internalSdkSrc:Et("sdkSrc")})),pn={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},Qt=new vn,sn=function(){function S(g,A,F){var ee=this,we=this;we.ver=1,we.sampleRate=100,we.tags={},we[$]=Gt(g,F)||U,we.data=A,we.time=(0,q.Y6)(new Date),we.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return ee.sampleRate===100?4:1},tags:1,data:1}}return o(S,"Envelope"),S}(),mn=function(){function S(g,A){this.aiDataContract={baseType:1,baseData:1},this.baseType=g,this.baseData=A}return o(S,"Data"),S}(),Kt="duration",ut="tags",Fn="deviceType",In="data",Un="name",rr="traceID",kt="length",$n="stringify",mr="measurements",kn="dataType",ei="envelopeType",Nr="toString",Cr="onLine",hi="isOnline",fr="enqueue",oi="count",Wr="push",Si="emitLineDelimitedJson",Mr="clear",gi="batchPayloads",ti="markAsSent",Ci="clearSent",vi="bufferOverride",zr="BUFFER_KEY",Pr="SENT_BUFFER_KEY",si="MAX_BUFFER_SIZE",hr="namePrefix",$r="maxBatchSizeInBytes",ye="triggerSend",Ze="diagLog",st="onunloadDisableBeacon",yt="isBeaconApiDisabled",Rt="_sender",Pt="_senderConfig",ln="enableSessionStorageBuffer",pe="_buffer",$e="samplingPercentage",ke="instrumentationKey",ft="endpointUrl",xt="customHeaders",Yt="disableXhr",An="onunloadDisableFetch",Tn="disableTelemetry",Nn="baseType",pi="sampleRate",Ii="convertUndefined",li="_xhrReadyStateChange",ir="_onError",Li="_onPartialSuccess",ki="_onSuccess",Ui="itemsAccepted",Bi="itemsReceived",bi="isRetryDisabled",Ir="setRequestHeader",xi="maxBatchInterval",na="eventsSendRequest",ji="disableInstrumentationKeyValidation",Yi="getSamplingScore",ra="getHashCodeScore",sa="baseType",Yn="baseData",Ar="properties",Ao="true";function yr(S,g,A){return(0,q.sO)(S,g,A,q.fQ)}o(yr,"_setValueIf");function ja(S,g,A){var F=A[ut]=A[ut]||{},ee=g.ext=g.ext||{},we=g[ut]=g[ut]||[],Pe=ee.user;Pe&&(yr(F,Qt.userAuthUserId,Pe.authId),yr(F,Qt.userId,Pe.id||Pe.localId));var Xe=ee.app;Xe&&yr(F,Qt.sessionId,Xe.sesId);var wt=ee.device;wt&&(yr(F,Qt.deviceId,wt.id||wt.localId),yr(F,Qt[Fn],wt.deviceClass),yr(F,Qt.deviceIp,wt.ip),yr(F,Qt.deviceModel,wt.model),yr(F,Qt[Fn],wt[Fn]));var Ct=g.ext.web;if(Ct){yr(F,Qt.deviceLanguage,Ct.browserLang),yr(F,Qt.deviceBrowserVersion,Ct.browserVer),yr(F,Qt.deviceBrowser,Ct.browser);var It=A[In]=A[In]||{},un=It[Yn]=It[Yn]||{},Mn=un[Ar]=un[Ar]||{};yr(Mn,"domain",Ct.domain),yr(Mn,"isManual",Ct.isManual?Ao:null),yr(Mn,"screenRes",Ct.screenRes),yr(Mn,"userConsent",Ct.userConsent?Ao:null)}var cn=ee.os;cn&&yr(F,Qt.deviceOS,cn[Un]);var hn=ee.trace;hn&&(yr(F,Qt.operationParentId,hn.parentID),yr(F,Qt.operationName,Gt(S,hn[Un])),yr(F,Qt.operationId,hn[rr]));for(var wr={},We=we[kt]-1;We>=0;We--){var qn=we[We];(0,q.rW)(qn,function(Dr,tr){wr[Dr]=tr}),we.splice(We,1)}(0,q.rW)(we,function(Dr,tr){wr[Dr]=tr});var Qn=(0,v.uc)((0,v.uc)({},F),wr);Qn[Qt.internalSdkVersion]||(Qn[Qt.internalSdkVersion]="javascript:".concat(Ya.Version)),A[ut]=(0,q.Ax)(Qn)}o(ja,"_extractPartAExtensions");function mi(S,g,A){(0,q.le)(S)||(0,q.rW)(S,function(F,ee){(0,q.hj)(ee)?A[F]=ee:(0,q.HD)(ee)?g[F]=ee:(0,ae.nS)()&&(g[F]=(0,ae.xA)()[$n](ee))})}o(mi,"_extractPropsAndMeasurements");function Hi(S,g){(0,q.le)(S)||(0,q.rW)(S,function(A,F){S[A]=F||g})}o(Hi,"_convertPropsUndefinedToCustomDefinedValue");function Vr(S,g,A,F){var ee=new sn(S,F,g);yr(ee,"sampleRate",A[w]),(A[Yn]||{}).startTime&&(ee.time=(0,q.Y6)(A[Yn].startTime)),ee.iKey=A.iKey;var we=A.iKey.replace(/-/g,"");return ee[Un]=ee[Un].replace("{0}",we),ja(S,A,ee),A[ut]=A[ut]||[],(0,q.Ax)(ee)}o(Vr,"_createEnvelope");function Fi(S,g){(0,q.le)(g[Yn])&&(0,Re.kP)(S,1,46,"telemetryItem.baseData cannot be null.")}o(Fi,"EnvelopeCreatorInit");var Ya={Version:"2.8.12"};function qa(S,g,A){Fi(S,g);var F=g[Yn][mr]||{},ee=g[Yn][Ar]||{};mi(g[In],ee,F),(0,q.le)(A)||Hi(ee,A);var we=g[Yn];if((0,q.le)(we))return(0,Re.jV)(S,"Invalid input for dependency data"),null;var Pe=we[Ar]&&we[Ar][N]?we[Ar][N]:"GET",Xe=new En(S,we.id,we.target,we[Un],we[Kt],we.success,we.responseCode,Pe,we.type,we.correlationContext,ee,F),wt=new mn(En[kn],Xe);return Vr(S,En[ei],g,wt)}o(qa,"DependencyEnvelopeCreator");function Aa(S,g,A){Fi(S,g);var F={},ee={};g[sa]!==$t[kn]&&(F.baseTypeSource=g[sa]),g[sa]===$t[kn]?(F=g[Yn][Ar]||{},ee=g[Yn][mr]||{}):g[Yn]&&mi(g[Yn],F,ee),mi(g[In],F,ee),(0,q.le)(A)||Hi(F,A);var we=g[Yn][Un],Pe=new $t(S,we,F,ee),Xe=new mn($t[kn],Pe);return Vr(S,$t[ei],g,Xe)}o(Aa,"EventEnvelopeCreator");function Qa(S,g,A){Fi(S,g);var F=g[Yn][mr]||{},ee=g[Yn][Ar]||{};mi(g[In],ee,F),(0,q.le)(A)||Hi(ee,A);var we=g[Yn],Pe=Tt.CreateFromInterface(S,we,ee,F),Xe=new mn(Tt[kn],Pe);return Vr(S,Tt[ei],g,Xe)}o(Qa,"ExceptionEnvelopeCreator");function Xa(S,g,A){Fi(S,g);var F=g[Yn],ee=F[Ar]||{},we=F[mr]||{};mi(g[In],ee,we),(0,q.le)(A)||Hi(ee,A);var Pe=new Ot(S,F[Un],F.average,F.sampleCount,F.min,F.max,F.stdDev,ee,we),Xe=new mn(Ot[kn],Pe);return Vr(S,Ot[ei],g,Xe)}o(Xa,"MetricEnvelopeCreator");function Za(S,g,A){Fi(S,g);var F,ee=g[Yn];!(0,q.le)(ee)&&!(0,q.le)(ee[Ar])&&!(0,q.le)(ee[Ar][Kt])?(F=ee[Ar][Kt],delete ee[Ar][Kt]):!(0,q.le)(g[In])&&!(0,q.le)(g[In][Kt])&&(F=g[In][Kt],delete g[In][Kt]);var we=g[Yn],Pe;((g.ext||{}).trace||{})[rr]&&(Pe=g.ext.trace[rr]);var Xe=we.id||Pe,wt=we[Un],Ct=we.uri,It=we[Ar]||{},un=we[mr]||{};if((0,q.le)(we.refUri)||(It.refUri=we.refUri),(0,q.le)(we.pageType)||(It.pageType=we.pageType),(0,q.le)(we.isLoggedIn)||(It.isLoggedIn=we.isLoggedIn[Nr]()),!(0,q.le)(we[Ar])){var Mn=we[Ar];(0,q.rW)(Mn,function(wr,We){It[wr]=We})}mi(g[In],It,un),(0,q.le)(A)||Hi(It,A);var cn=new Gn(S,wt,Ct,F,It,un,Xe),hn=new mn(Gn[kn],cn);return Vr(S,Gn[ei],g,hn)}o(Za,"PageViewEnvelopeCreator");function eo(S,g,A){Fi(S,g);var F=g[Yn],ee=F[Un],we=F.uri||F.url,Pe=F[Ar]||{},Xe=F[mr]||{};mi(g[In],Pe,Xe),(0,q.le)(A)||Hi(Pe,A);var wt=new pr(S,ee,we,void 0,Pe,Xe,F),Ct=new mn(pr[kn],wt);return Vr(S,pr[ei],g,Ct)}o(eo,"PageViewPerformanceEnvelopeCreator");function pa(S,g,A){Fi(S,g);var F=g[Yn].message,ee=g[Yn].severityLevel,we=g[Yn][Ar]||{},Pe=g[Yn][mr]||{};mi(g[In],we,Pe),(0,q.le)(A)||Hi(we,A);var Xe=new en(S,F,ee,we,Pe),wt=new mn(en[kn],Xe);return Vr(S,en[ei],g,wt)}o(pa,"TraceEnvelopeCreator");function Da(S,g){(0,bn.QY)(S,null,null,g)}o(Da,"_disableEvents");function to(S){var g,A=(0,ae.Me)(),F=(0,ae.jW)(),ee=!1,we=!0,Pe=(0,bn.jU)((0,fn.J)("OfflineListener"),S);try{if(wt((0,ae.Jj)())&&(ee=!0),A){var Xe=A.body||A;Xe.ononline&&wt(Xe)&&(ee=!0)}ee&&F&&!(0,q.le)(F[Cr])&&(we=F[Cr])}catch(cn){ee=!1}function wt(cn){var hn=!1;return cn&&(hn=(0,bn.XO)(cn,"online",Ct,Pe),hn&&(0,bn.XO)(cn,"offline",It,Pe)),hn}o(wt,"_enableEvents");function Ct(){we=!0}o(Ct,"_setOnline");function It(){we=!1}o(It,"_setOffline");function un(){var cn=!0;return ee?cn=we:F&&!(0,q.le)(F[Cr])&&(cn=F[Cr]),cn}o(un,"_isOnline");function Mn(){var cn=(0,ae.Jj)();if(cn&&ee){if(Da(cn,Pe),A){var hn=A.body||A;(0,q.o8)(hn.ononline)||Da(hn,Pe)}ee=!1}}return o(Mn,"_unload"),g={},g[hi]=un,g.isListening=function(){return ee},g.unload=Mn,g}o(to,"createOfflineListener");var Ra=function(){function S(g,A){var F=[],ee=!1;this._get=function(){return F},this._set=function(we){return F=we,F},(0,R.Z)(S,this,function(we){we[fr]=function(Pe){if(we[oi]()>=A.eventsLimitInMem()){ee||((0,Re.kP)(g,2,105,"Maximum in-memory buffer size reached: "+we[oi](),!0),ee=!0);return}F[Wr](Pe)},we[oi]=function(){return F[kt]},we.size=function(){for(var Pe=F[kt],Xe=0;Xe<F[kt];Xe++)Pe+=F[Xe][kt];return A[Si]()||(Pe+=2),Pe},we[Mr]=function(){F=[],ee=!1},we.getItems=function(){return F.slice(0)},we[gi]=function(Pe){if(Pe&&Pe[kt]>0){var Xe=A[Si]()?Pe.join(`
`):"["+Pe.join(",")+"]";return Xe}return null}})}return o(S,"BaseSendBuffer"),S.__ieDyn=1,S}(),la=function(S){(0,v.ne)(g,S);function g(A,F){var ee=S.call(this,A,F)||this;return(0,R.Z)(g,ee,function(we,Pe){we[ti]=function(Xe){Pe[Mr]()},we[Ci]=function(Xe){}}),ee}return o(g,"ArraySendBuffer"),g.__ieDyn=1,g}(Ra),no=function(S){(0,v.ne)(g,S);function g(A,F){var ee=S.call(this,A,F)||this,we=!1,Pe=F[vi]()||{getItem:Pi,setItem:zi},Xe=Pe.getItem,wt=Pe.setItem;return(0,R.Z)(g,ee,function(Ct,It){var un=wr(g[zr]),Mn=wr(g[Pr]),cn=Ct._set(un.concat(Mn));cn[kt]>g[si]&&(cn[kt]=g[si]),We(g[Pr],[]),We(g[zr],cn),Ct[fr]=function(qn){if(Ct[oi]()>=g[si]){we||((0,Re.kP)(A,2,67,"Maximum buffer size reached: "+Ct[oi](),!0),we=!0);return}It[fr](qn),We(g[zr],Ct._get())},Ct[Mr]=function(){It[Mr](),We(g[zr],Ct._get()),We(g[Pr],[]),we=!1},Ct[ti]=function(qn){We(g[zr],Ct._set(hn(qn,Ct._get())));var Qn=wr(g[Pr]);Qn instanceof Array&&qn instanceof Array&&(Qn=Qn.concat(qn),Qn[kt]>g[si]&&((0,Re.kP)(A,1,67,"Sent buffer reached its maximum size: "+Qn[kt],!0),Qn[kt]=g[si]),We(g[Pr],Qn))},Ct[Ci]=function(qn){var Qn=wr(g[Pr]);Qn=hn(qn,Qn),We(g[Pr],Qn)};function hn(qn,Qn){var Dr=[];return(0,q.tO)(Qn,function(tr){!(0,q.mf)(tr)&&(0,q.UA)(qn,tr)===-1&&Dr[Wr](tr)}),Dr}o(hn,"_removePayloadsFromBuffer");function wr(qn){var Qn=qn;try{Qn=F[hr]&&F[hr]()?F[hr]()+"_"+Qn:Qn;var Dr=Xe(A,Qn);if(Dr){var tr=(0,ae.xA)().parse(Dr);if((0,q.HD)(tr)&&(tr=(0,ae.xA)().parse(tr)),tr&&(0,q.kJ)(tr))return tr}}catch(Wi){(0,Re.kP)(A,1,42," storage key: "+Qn+", "+(0,q.jj)(Wi),{exception:(0,ae.eU)(Wi)})}return[]}o(wr,"_getBuffer");function We(qn,Qn){var Dr=qn;try{Dr=F[hr]&&F[hr]()?F[hr]()+"_"+Dr:Dr;var tr=JSON[$n](Qn);wt(A,Dr,tr)}catch(Wi){wt(A,Dr,JSON[$n]([])),(0,Re.kP)(A,2,41," storage key: "+Dr+", "+(0,q.jj)(Wi)+". Buffer cleared",{exception:(0,ae.eU)(Wi)})}}o(We,"_setBuffer")}),ee}return o(g,"SessionStorageSendBuffer"),g.BUFFER_KEY="AI_buffer",g.SENT_BUFFER_KEY="AI_sentBuffer",g.MAX_BUFFER_SIZE=2e3,g}(Ra),Ta=function(){function S(g){(0,R.Z)(S,this,function(A){A.serialize=function(Pe){var Xe=F(Pe,"root");try{return(0,ae.xA)()[$n](Xe)}catch(wt){(0,Re.kP)(g,1,48,wt&&(0,q.mf)(wt[Nr])?wt[Nr]():"Error serializing object",null,!0)}};function F(Pe,Xe){var wt="__aiCircularRefCheck",Ct={};if(!Pe)return(0,Re.kP)(g,1,48,"cannot serialize object because it is null or undefined",{name:Xe},!0),Ct;if(Pe[wt])return(0,Re.kP)(g,2,50,"Circular reference detected while serializing object",{name:Xe},!0),Ct;if(!Pe.aiDataContract){if(Xe==="measurements")Ct=we(Pe,"number",Xe);else if(Xe==="properties")Ct=we(Pe,"string",Xe);else if(Xe==="tags")Ct=we(Pe,"string",Xe);else if((0,q.kJ)(Pe))Ct=ee(Pe,Xe);else{(0,Re.kP)(g,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:Xe},!0);try{(0,ae.xA)()[$n](Pe),Ct=Pe}catch(It){(0,Re.kP)(g,1,48,It&&(0,q.mf)(It[Nr])?It[Nr]():"Error serializing object",null,!0)}}return Ct}return Pe[wt]=!0,(0,q.rW)(Pe.aiDataContract,function(It,un){var Mn=(0,q.mf)(un)?un()&1:un&1,cn=(0,q.mf)(un)?un()&4:un&4,hn=un&2,wr=Pe[It]!==void 0,We=(0,q.Kn)(Pe[It])&&Pe[It]!==null;if(Mn&&!wr&&!hn)(0,Re.kP)(g,1,24,"Missing required field specification. The field is required but not present on source",{field:It,name:Xe});else if(!cn){var qn=void 0;We?hn?qn=ee(Pe[It],It):qn=F(Pe[It],It):qn=Pe[It],qn!==void 0&&(Ct[It]=qn)}}),delete Pe[wt],Ct}o(F,"_serializeObject");function ee(Pe,Xe){var wt;if(Pe)if(!(0,q.kJ)(Pe))(0,Re.kP)(g,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:Xe},!0);else{wt=[];for(var Ct=0;Ct<Pe[kt];Ct++){var It=Pe[Ct],un=F(It,Xe+"["+Ct+"]");wt[Wr](un)}}return wt}o(ee,"_serializeArray");function we(Pe,Xe,wt){var Ct;return Pe&&(Ct={},(0,q.rW)(Pe,function(It,un){if(Xe==="string")un===void 0?Ct[It]="undefined":un===null?Ct[It]="null":un[Nr]?Ct[It]=un[Nr]():Ct[It]="invalid field: toString() is not defined.";else if(Xe==="number")if(un===void 0)Ct[It]="undefined";else if(un===null)Ct[It]="null";else{var Mn=parseFloat(un);isNaN(Mn)?Ct[It]="NaN":Ct[It]=Mn}else Ct[It]="invalid field: "+wt+" is of unknown type.",(0,Re.kP)(g,1,Ct[It],null,!0)})),Ct}o(we,"_serializeStringMap")})}return o(S,"Serializer"),S.__ieDyn=1,S}(),Ma=8,ro=function(){function S(){}return o(S,"HashCodeScoreGenerator"),S.prototype.getHashCodeScore=function(g){var A=this.getHashCode(g)/S.INT_MAX_VALUE;return A*100},S.prototype.getHashCode=function(g){if(g==="")return 0;for(;g[kt]<Ma;)g=g.concat(g);for(var A=5381,F=0;F<g[kt];++F)A=(A<<5)+A+g.charCodeAt(F),A=A&A;return Math.abs(A)},S.INT_MAX_VALUE=2147483647,S}(),io=function(){function S(){var g=this,A=new ro,F=new vn;g[Yi]=function(ee){var we=0;return ee[ut]&&ee[ut][F.userId]?we=A.getHashCodeScore(ee[ut][F.userId]):ee.ext&&ee.ext.user&&ee.ext.user.id?we=A[ra](ee.ext.user.id):ee[ut]&&ee[ut][F.operationId]?we=A.getHashCodeScore(ee[ut][F.operationId]):ee.ext&&ee.ext.telemetryTrace&&ee.ext.telemetryTrace[rr]?we=A.getHashCodeScore(ee.ext.telemetryTrace[rr]):we=Math.random()*100,we}}return o(S,"SamplingScoreGenerator"),S}(),_i=function(){function S(g,A){this.INT_MAX_VALUE=2147483647;var F=A||(0,Re.vH)(null);(g>100||g<0)&&(F.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:g},!0),g=100),this[pi]=g,this.samplingScoreGenerator=new io}return o(S,"Sample"),S.prototype.isSampledIn=function(g){var A=this[pi],F=!1;return A==null||A>=100||g.baseType===Ot[kn]?!0:(F=this.samplingScoreGenerator[Yi](g)<A,F)},S}(),Ei,ao=65e3;function ca(S){try{return S.responseText}catch(g){}return null}o(ca,"_getResponseText");function Pa(){var S,g,A;return S={endpointUrl:function(){return m+y}},S[Si]=function(){return!1},S[xi]=function(){return 15e3},S[$r]=function(){return 102400},S[Tn]=function(){return!1},S[ln]=function(){return!0},S[vi]=function(){return!1},S[bi]=function(){return!1},S[yt]=function(){return!0},S[Yt]=function(){return!1},S[An]=function(){return!1},S[st]=function(){return!1},S[ke]=function(){return g},S[hr]=function(){return g},S[$e]=function(){return 100},S[xt]=function(){return A},S[Ii]=function(){return g},S.eventsLimitInMem=function(){return 1e4},S}o(Pa,"_getDefaultAppInsightsChannelConfig");var oo=(Ei={},Ei[$t.dataType]=Aa,Ei[en.dataType]=pa,Ei[Gn.dataType]=Za,Ei[pr.dataType]=eo,Ei[Tt.dataType]=Qa,Ei[Ot.dataType]=Xa,Ei[En.dataType]=qa,Ei),Ia=function(S){(0,v.ne)(g,S);function g(){var A=S.call(this)||this;A.priority=1001,A.identifier=Jn,A._senderConfig=Pa();var F,ee,we,Pe,Xe,wt,Ct,It,un=0,Mn,cn,hn,wr;return(0,R.Z)(g,A,function(We,qn){Ua(),We.pause=function(){qi(),Pe=!0},We.resume=function(){Pe&&(Pe=!1,ee=null,We._buffer.size()>We._senderConfig[$r]()&&We[ye](!0,null,10),da())},We.flush=function(Te,bt,At){if(Te===void 0&&(Te=!0),!Pe){qi();try{We[ye](Te,null,At||1)}catch(rn){(0,Re.kP)(We[Ze](),1,22,"flush failed, telemetry will not be collected: "+(0,q.jj)(rn),{exception:(0,ae.eU)(rn)})}}},We.onunloadFlush=function(){if(!Pe)if((We._senderConfig[st]()===!1||We[Pt][yt]()===!1)&&(0,ae.MF)())try{We[ye](!0,Wi,2)}catch(Te){(0,Re.kP)(We[Ze](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+(0,q.jj)(Te),{exception:(0,ae.eU)(Te)})}else We.flush()},We.addHeader=function(Te,bt){It[Te]=bt},We.initialize=function(Te,bt,At,rn){We.isInitialized()&&(0,Re.kP)(We[Ze](),1,28,"Sender is already initialized"),qn.initialize(Te,bt,At,rn);var Pn=We._getTelCtx(),Ln=We.identifier;wt=new Ta(bt.logger),F=0,ee=null,we=0,We[Rt]=null,Ct=0;var Bn=We[Ze]();wr=(0,bn.jU)((0,fn.J)("Sender"),bt.evtNamespace&&bt.evtNamespace()),hn=to(wr);var Kr=Pa();(0,q.rW)(Kr,function(yi,br){We[Pt][yi]=function(){var ii=Pn.getConfig(Ln,yi,br());return!ii&&yi==="endpointUrl"&&(ii=br()),ii}});var ri=We[Pt][ln]()&&!!(We._senderConfig[vi]()||Mi());We[pe]=ri?new no(Bn,We[Pt]):new la(Bn,We[Pt]),We._sample=new _i(We[Pt][$e](),Bn),ts(Te)||(0,Re.kP)(Bn,1,100,"Invalid Instrumentation key "+Te[ke]),!tt(We._senderConfig.endpointUrl())&&We._senderConfig.customHeaders()&&We._senderConfig.customHeaders()[kt]>0&&(0,q.tO)(We[Pt][xt](),function(yi){A.addHeader(yi.header,yi.value)});var Yr=We[Pt],Or=null;!Yr[Yt]()&&(0,ae.cp)()?Or=Di:!Yr[Yt]()&&(0,ae.Z3)()&&(Or=wa),!Or&&(0,ae.JO)()&&(Or=jr),Mn=Or||wa,!Yr[yt]()&&(0,ae.MF)()&&(Or=Jr),We[Rt]=Or||wa,!Yr[An]()&&(0,ae.JO)(!0)?cn=Ro:(0,ae.MF)()?cn=Jr:!Yr[Yt]()&&(0,ae.cp)()?cn=Di:!Yr[Yt]()&&(0,ae.Z3)()?cn=wa:cn=Mn},We.processTelemetry=function(Te,bt){bt=We._getTelCtx(bt);var At=bt[Ze]();try{if(We[Pt][Tn]())return;if(!Te){(0,Re.kP)(At,1,7,"Cannot send empty telemetry");return}if(Te.baseData&&!Te[Nn]){(0,Re.kP)(At,1,70,"Cannot send telemetry without baseData and baseType");return}if(Te[Nn]||(Te[Nn]="EventData"),!We[Rt]){(0,Re.kP)(At,1,28,"Sender was not initialized");return}if(Qn(Te))Te[w]=We._sample[pi];else{(0,Re.kP)(At,2,33,"Telemetry item was sampled out and not sent",{SampleRate:We._sample[pi]});return}var rn=We[Pt][Ii]()||void 0,Pn=Te.iKey||We[Pt][ke](),Ln=g.constructEnvelope(Te,Pn,At,rn);if(!Ln){(0,Re.kP)(At,1,47,"Unable to create an AppInsights envelope");return}var Bn=!1;if(Te[ut]&&Te[ut][B]&&((0,q.tO)(Te[ut][B],function(Or){try{Or&&Or(Ln)===!1&&(Bn=!0,(0,Re.jV)(At,"Telemetry processor check returns false"))}catch(yi){(0,Re.kP)(At,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,q.jj)(yi),{exception:(0,ae.eU)(yi)},!0)}}),delete Te[ut][B]),Bn)return;var Kr=wt.serialize(Ln),ri=We[pe],Yr=ri.size();Yr+Kr[kt]>We[Pt][$r]()&&(!hn||hn[hi]())&&We[ye](!0,null,10),ri[fr](Kr),da()}catch(Or){(0,Re.kP)(At,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+(0,q.jj)(Or),{exception:(0,ae.eU)(Or)})}We.processNext(Te,bt)},We[li]=function(Te,bt,At){Te.readyState===4&&Dr(Te.status,bt,Te.responseURL,At,Sa(Te),ca(Te)||Te.response)},We[ye]=function(Te,bt,At){if(Te===void 0&&(Te=!0),!Pe)try{var rn=We[pe];if(We[Pt][Tn]())rn[Mr]();else{if(rn[oi]()>0){var Pn=rn.getItems();Mo(At||0,Te),bt?bt.call(A,Pn,Te):We[Rt](Pn,Te)}we=+new Date}qi()}catch(Bn){var Ln=(0,ae.sA)();(!Ln||Ln>9)&&(0,Re.kP)(We[Ze](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+(0,q.jj)(Bn),{exception:(0,ae.eU)(Bn)})}},We._doTeardown=function(Te,bt){We.onunloadFlush(),hn.unload(),Ua()},We[ir]=function(Te,bt,At){(0,Re.kP)(We[Ze](),2,26,"Failed to send telemetry.",{message:bt}),We._buffer[Ci](Te)},We[Li]=function(Te,bt){for(var At=[],rn=[],Pn=bt.errors.reverse(),Ln=0,Bn=Pn;Ln<Bn.length;Ln++){var Kr=Bn[Ln],ri=Te.splice(Kr.index,1)[0];Oa(Kr.statusCode)?rn[Wr](ri):At[Wr](ri)}Te[kt]>0&&We[ki](Te,bt[Ui]),At[kt]>0&&We[ir](At,Sa(null,["partial success",bt[Ui],"of",bt.itemsReceived].join(" "))),rn[kt]>0&&(Fa(rn),(0,Re.kP)(We[Ze](),2,40,"Partial success. Delivered: "+Te[kt]+", Failed: "+At[kt]+". Will retry to send "+rn[kt]+" our of "+bt[Bi]+" items"))},We[ki]=function(Te,bt){We._buffer[Ci](Te)},We._xdrOnLoad=function(Te,bt){var At=ca(Te);if(Te&&(At+""=="200"||At===""))F=0,We[ki](bt,0);else{var rn=xa(At);rn&&rn.itemsReceived&&rn.itemsReceived>rn[Ui]&&!We[Pt][bi]()?We[Li](bt,rn):We[ir](bt,co(Te))}};function Qn(Te){return We._sample.isSampledIn(Te)}o(Qn,"_isSampledIn");function Dr(Te,bt,At,rn,Pn,Ln){var Bn=null;if(We._appId||(Bn=xa(Ln),Bn&&Bn.appId&&(We._appId=Bn.appId)),(Te<200||Te>=300)&&Te!==0){if((Te===301||Te===307||Te===308)&&!tr(At)){We[ir](bt,Pn);return}!We[Pt][bi]()&&Oa(Te)?(Fa(bt),(0,Re.kP)(We[Ze](),2,40,". Response code "+Te+". Will retry to send "+bt[kt]+" items.")):We[ir](bt,Pn)}else if(hn&&!hn[hi]()){if(!We[Pt][bi]()){var Kr=10;Fa(bt,Kr),(0,Re.kP)(We[Ze](),2,40,". Offline - Response Code: ".concat(Te,". Offline status: ").concat(!hn.isOnline(),". Will retry to send ").concat(bt.length," items."))}}else tr(At),Te===206?(Bn||(Bn=xa(Ln)),Bn&&!We[Pt][bi]()?We[Li](bt,Bn):We[ir](bt,Pn)):(F=0,We[ki](bt,rn))}o(Dr,"_checkResponsStatus");function tr(Te){return Ct>=10?!1:!(0,q.le)(Te)&&Te!==""&&Te!==We[Pt][ft]()?(We[Pt][ft]=function(){return Te},++Ct,!0):!1}o(tr,"_checkAndUpdateEndPointUrl");function Wi(Te,bt){cn?cn(Te,!1):Jr(Te,bt)}o(Wi,"_doUnloadSend");function La(Te){var bt=(0,ae.jW)(),At=We[pe],rn=We[Pt][ft](),Pn=We._buffer[gi](Te),Ln=new Blob([Pn],{type:"text/plain;charset=UTF-8"}),Bn=bt.sendBeacon(rn,Ln);return Bn&&(At[ti](Te),We._onSuccess(Te,Te[kt])),Bn}o(La,"_doBeaconSend");function Jr(Te,bt){if((0,q.kJ)(Te)&&Te[kt]>0&&!La(Te)){for(var At=[],rn=0;rn<Te[kt];rn++){var Pn=Te[rn];La([Pn])||At[Wr](Pn)}At[kt]>0&&(Mn&&Mn(At,!0),(0,Re.kP)(We[Ze](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}o(Jr,"_beaconSender");function wa(Te,bt){var At=new XMLHttpRequest,rn=We[Pt][ft]();try{At[P]=!0}catch(Ln){}At.open("POST",rn,bt),At[Ir]("Content-type","application/json"),tt(rn)&&At[Ir](ur[6],ur[7]),(0,q.tO)((0,q.FY)(It),function(Ln){At[Ir](Ln,It[Ln])}),At.onreadystatechange=function(){return We._xhrReadyStateChange(At,Te,Te[kt])},At.onerror=function(Ln){return We[ir](Te,Sa(At),Ln)};var Pn=We._buffer[gi](Te);At.send(Pn),We._buffer[ti](Te)}o(wa,"_xhrSender");function Ro(Te,bt){if((0,q.kJ)(Te)){for(var At=Te[kt],rn=0;rn<Te[kt];rn++)At+=Te[rn][kt];un+At<=ao?ka(Te,!1):(0,ae.MF)()?Jr(Te,bt):(Mn&&Mn(Te,!0),(0,Re.kP)(We[Ze](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."))}}o(Ro,"_fetchKeepAliveSender");function jr(Te,bt){ka(Te,!0)}o(jr,"_fetchSender");function ka(Te,bt){var At,rn=We[Pt][ft](),Pn=We._buffer[gi](Te),Ln=new Blob([Pn],{type:"application/json"}),Bn=new Headers,Kr=Pn[kt],ri=!1,Yr=!1;tt(rn)&&Bn.append(ur[6],ur[7]),(0,q.tO)((0,q.FY)(It),function(br){Bn.append(br,It[br])});var Or=(At={method:"POST",headers:Bn,body:Ln},At[P]=!0,At);bt||(Or.keepalive=!0,ri=!0,un+=Kr);var yi=new Request(rn,Or);try{yi[P]=!0}catch(br){}We._buffer[ti](Te);try{fetch(yi).then(function(br){bt||(un-=Kr,Kr=0),Yr||(Yr=!0,br.ok?br.text().then(function(ii){Dr(br.status,Te,br.url,Te[kt],br.statusText,ii)}):We[ir](Te,br.statusText))}).catch(function(br){bt||(un-=Kr,Kr=0),Yr||(Yr=!0,We[ir](Te,br.message))})}catch(br){Yr||We[ir](Te,(0,ae.eU)(br))}ri&&!Yr&&(Yr=!0,We._onSuccess(Te,Te[kt]))}o(ka,"_doFetchSender");function xa(Te){try{if(Te&&Te!==""){var bt=(0,ae.xA)().parse(Te);if(bt&&bt.itemsReceived&&bt.itemsReceived>=bt[Ui]&&bt.itemsReceived-bt.itemsAccepted===bt.errors[kt])return bt}}catch(At){(0,Re.kP)(We[Ze](),1,43,"Cannot parse the response. "+(0,q.jj)(At),{response:Te})}return null}o(xa,"_parseResponse");function Fa(Te,bt){if(bt===void 0&&(bt=1),!(!Te||Te[kt]===0)){var At=We[pe];At[Ci](Te),F++;for(var rn=0,Pn=Te;rn<Pn.length;rn++){var Ln=Pn[rn];At[fr](Ln)}Na(bt),da()}}o(Fa,"_resendPayload");function Na(Te){var bt=10,At;if(F<=1)At=bt;else{var rn=(Math.pow(2,F)-1)/2,Pn=Math.floor(Math.random()*rn*bt)+1;Pn=Te*Pn,At=Math.max(Math.min(Pn,3600),bt)}var Ln=(0,q.m6)()+At*1e3;ee=Ln}o(Na,"_setRetryTime");function da(){if(!Xe&&!Pe){var Te=ee?Math.max(0,ee-(0,q.m6)()):0,bt=Math.max(We[Pt][xi](),Te);Xe=setTimeout(function(){Xe=null,We[ye](!0,null,1)},bt)}}o(da,"_setupTimer");function qi(){clearTimeout(Xe),Xe=null,ee=null}o(qi,"_clearScheduledTimer");function Oa(Te){return Te===401||Te===403||Te===408||Te===429||Te===500||Te===502||Te===503||Te===504}o(Oa,"_isRetriable");function Sa(Te,bt){return Te?"XMLHttpRequest,Status:"+Te.status+",Response:"+ca(Te)||0||0:bt}o(Sa,"_formatErrorMessageXhr");function Di(Te,bt){var At=We[pe],rn=(0,ae.Jj)(),Pn=new XDomainRequest;Pn.onload=function(){return We._xdrOnLoad(Pn,Te)},Pn.onerror=function(ri){return We[ir](Te,co(Pn),ri)};var Ln=rn&&rn.location&&rn.location.protocol||"";if(We[Pt][ft]().lastIndexOf(Ln,0)!==0){(0,Re.kP)(We[Ze](),2,40,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),At[Mr]();return}var Bn=We[Pt][ft]().replace(/^(https?:)/,"");Pn.open("POST",Bn);var Kr=At[gi](Te);Pn.send(Kr),At[ti](Te)}o(Di,"_xdrSender");function co(Te,bt){return Te?"XDomainRequest,Response:"+ca(Te)||0:bt}o(co,"_formatErrorMessageXdr");function To(){var Te="getNotifyMgr";return We.core[Te]?We.core[Te]():We.core._notificationManager}o(To,"_getNotifyMgr");function Mo(Te,bt){var At=To();if(At&&At[na])try{At[na](Te,bt)}catch(rn){(0,Re.kP)(We[Ze](),1,74,"send request notification failed: "+(0,q.jj)(rn),{exception:(0,ae.eU)(rn)})}}o(Mo,"_notifySendRequest");function ts(Te){var bt=(0,q.le)(Te[ji])?!1:Te[ji];if(bt)return!0;var At="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",rn=new RegExp(At);return rn.test(Te[ke])}o(ts,"_validateInstrumentationKey");function Ua(){We[Rt]=null,We[pe]=null,We._appId=null,We._sample=null,It={},hn=null,F=0,ee=null,we=null,Pe=!1,Xe=null,wt=null,Ct=0,un=0,Mn=null,cn=null,wr=null}o(Ua,"_initDefaults")}),A}return o(g,"Sender"),g.constructEnvelope=function(A,F,ee,we){var Pe;F!==A.iKey&&!(0,q.le)(F)?Pe=(0,v.uc)((0,v.uc)({},A),{iKey:F}):Pe=A;var Xe=oo[Pe.baseType]||Aa;return Xe(ee,Pe,we)},g}(qt.i),es=";",so="=";function lo(S){if(!S)return{};var g=S[_](es),A=(0,q.Xz)(g,function(ee,we){var Pe=we[_](so);if(Pe[O]===2){var Xe=Pe[0][x](),wt=Pe[1];ee[Xe]=wt}return ee},{});if((0,q.FY)(A)[O]>0){if(A.endpointsuffix){var F=A.location?A.location+".":"";A[J]=A[J]||"https://"+F+"dc."+A.endpointsuffix}A[J]=A[J]||m}return A}o(lo,"parseConnectionString");var Je={parse:lo},ia=C(5121),ua="instrumentationKey",ma="connectionString",ni="diagnosticLogInterval",ya=C(7310),Do=(0,Hn.By)({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),Ai=function(){function S(g){var A=new ia.F;((0,q.le)(g)||(0,q.le)(g[ua])&&(0,q.le)(g[ma]))&&(0,q._y)("Invalid input configuration"),(0,R.Z)(S,this,function(F){if(g[ma]){var ee=lo(g[ma]),we=ee.ingestionendpoint;g.endpointUrl=we?we+y:g.endpointUrl,g[ua]=ee.instrumentationkey||g[ua]}F.config=g,Pe(),F.initialize=Pe,F.getSKUDefaults=function(){F.config[ni]=F.config[ni]&&F.config[ni]>0?F.config[ni]:1e4},F.getSKUDefaults(),(0,q.Vb)(F,A,["track","flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb"]);function Pe(){A.initialize(F.config,[new Ia]),A.pollInternalLogs()}o(Pe,"_initialize")})}return o(S,"ApplicationInsights"),S.__ieDyn=1,S}()},1679:(at,l,C)=>{"use strict";C.d(l,{Z:()=>ht});/*!
 * Microsoft Dynamic Proto Utility, 1.1.9
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var R,v="undefined",P="constructor",w="prototype",B="function",N="_dynInstFuncs",m="_isDynProxy",y="_dynClass",U="_dynCls$",W="_dynInstChk",_=W,O="_dfOpts",x="_unknown_",J="__proto__",se="_dyn"+J,Ae="__dynProto$Gbl",$="_dynInstProto",Q="useBaseInst",X="setInstFuncs",L=Object,Y=L.getPrototypeOf,k=L.getOwnPropertyNames;function le(){var I;return typeof globalThis!==v&&(I=globalThis),!I&&typeof self!==v&&(I=self),!I&&typeof window!==v&&(I=window),!I&&typeof C.g!==v&&(I=C.g),I||{}}o(le,"_getGlobal");var G=le(),ve=G[Ae]||(G[Ae]={o:(R={},R[X]=!0,R[Q]=!0,R),n:1e3});function _e(I,H){return I&&L[w].hasOwnProperty.call(I,H)}o(_e,"_hasOwnProperty");function Ie(I){return I&&(I===L[w]||I===Array[w])}o(Ie,"_isObjectOrArrayPrototype");function ie(I){return Ie(I)||I===Function[w]}o(ie,"_isObjectArrayOrFunctionPrototype");function Se(I){var H;if(I){if(Y)return Y(I);var ne=I[J]||I[w]||(I[P]?I[P][w]:null);H=I[se]||ne,_e(I,se)||(delete I[$],H=I[se]=I[$]||I[se],I[$]=ne)}return H}o(Se,"_getObjProto");function D(I,H){var ne=[];if(k)ne=k(I);else for(var ge in I)typeof ge=="string"&&_e(I,ge)&&ne.push(ge);if(ne&&ne.length>0)for(var Ke=0;Ke<ne.length;Ke++)H(ne[Ke])}o(D,"_forEachProp");function He(I,H,ne){return H!==P&&typeof I[H]===B&&(ne||_e(I,H))}o(He,"_isDynamicCandidate");function fe(I){throw new TypeError("DynamicProto: "+I)}o(fe,"_throwTypeError");function ue(I){var H={};return D(I,function(ne){!H[ne]&&He(I,ne,!1)&&(H[ne]=I[ne])}),H}o(ue,"_getInstanceFuncs");function z(I,H){for(var ne=I.length-1;ne>=0;ne--)if(I[ne]===H)return!0;return!1}o(z,"_hasVisited");function he(I,H,ne,ge){function Ke(Me,Qe,be){var Ne=Qe[be];if(Ne[m]&&ge){var q=Me[N]||{};q[_]!==!1&&(Ne=(q[Qe[y]]||{})[be]||Ne)}return function(){return Ne.apply(Me,arguments)}}o(Ke,"_instFuncProxy");var Fe={};D(ne,function(Me){Fe[Me]=Ke(H,ne,Me)});for(var de=Se(I),Ce=[];de&&!ie(de)&&!z(Ce,de);)D(de,function(Me){!Fe[Me]&&He(de,Me,!Y)&&(Fe[Me]=Ke(H,de,Me))}),Ce.push(de),de=Se(de);return Fe}o(he,"_getBaseFuncs");function xe(I,H,ne,ge){var Ke=null;if(I&&_e(ne,y)){var Fe=I[N]||{};if(Ke=(Fe[ne[y]]||{})[H],Ke||fe("Missing ["+H+"] "+B),!Ke[W]&&Fe[_]!==!1){for(var de=!_e(I,H),Ce=Se(I),Me=[];de&&Ce&&!ie(Ce)&&!z(Me,Ce);){var Qe=Ce[H];if(Qe){de=Qe===ge;break}Me.push(Ce),Ce=Se(Ce)}try{de&&(I[H]=Ke),Ke[W]=1}catch(be){Fe[_]=!1}}}return Ke}o(xe,"_getInstFunc");function Ve(I,H,ne){var ge=H[I];return ge===ne&&(ge=Se(H)[I]),typeof ge!==B&&fe("["+I+"] is not a "+B),ge}o(Ve,"_getProtoFunc");function oe(I,H,ne,ge,Ke){function Fe(Me,Qe){var be=o(function(){var Ne=xe(this,Qe,Me,be)||Ve(Qe,Me,be);return Ne.apply(this,arguments)},"dynProtoProxy");return be[m]=1,be}if(o(Fe,"_createDynamicPrototype"),!Ie(I)){var de=ne[N]=ne[N]||{},Ce=de[H]=de[H]||{};de[_]!==!1&&(de[_]=!!Ke),D(ne,function(Me){He(ne,Me,!1)&&ne[Me]!==ge[Me]&&(Ce[Me]=ne[Me],delete ne[Me],(!_e(I,Me)||I[Me]&&!I[Me][m])&&(I[Me]=Fe(I,Me)))})}}o(oe,"_populatePrototype");function nt(I,H){if(Y){for(var ne=[],ge=Se(H);ge&&!ie(ge)&&!z(ne,ge);){if(ge===I)return!0;ne.push(ge),ge=Se(ge)}return!1}return!0}o(nt,"_checkPrototype");function dt(I,H){return _e(I,w)?I.name||H||x:((I||{})[P]||{}).name||H||x}o(dt,"_getObjName");function ht(I,H,ne,ge){_e(I,w)||fe("theClass is an invalid class definition.");var Ke=I[w];nt(Ke,H)||fe("["+dt(I)+"] not in hierarchy of ["+dt(H)+"]");var Fe=null;_e(Ke,y)?Fe=Ke[y]:(Fe=U+dt(I,"_")+"$"+ve.n,ve.n++,Ke[y]=Fe);var de=ht[O],Ce=!!de[Q];Ce&&ge&&ge[Q]!==void 0&&(Ce=!!ge[Q]);var Me=ue(H),Qe=he(Ke,H,Me,Ce);ne(H,Qe);var be=!!Y&&!!de[X];be&&ge&&(be=!!ge[X]),oe(Ke,Fe,H,Me,be!==!1)}o(ht,"dynamicProto"),ht[O]=ve.o},6232:(at,l,C)=>{"use strict";const R=C(8641),v=C(8692),P=C(1474),w=C(5870),B=o((N,m={})=>{let y=[];if(Array.isArray(N))for(const U of N){const W=B.create(U,m);Array.isArray(W)?y.push(...W):y.push(W)}else y=[].concat(B.create(N,m));return m&&m.expand===!0&&m.nodupes===!0&&(y=[...new Set(y)]),y},"braces");B.parse=(N,m={})=>w(N,m),B.stringify=(N,m={})=>R(typeof N=="string"?B.parse(N,m):N,m),B.compile=(N,m={})=>(typeof N=="string"&&(N=B.parse(N,m)),v(N,m)),B.expand=(N,m={})=>{typeof N=="string"&&(N=B.parse(N,m));let y=P(N,m);return m.noempty===!0&&(y=y.filter(Boolean)),m.nodupes===!0&&(y=[...new Set(y)]),y},B.create=(N,m={})=>N===""||N.length<3?[N]:m.expand!==!0?B.compile(N,m):B.expand(N,m),at.exports=B},8692:(at,l,C)=>{"use strict";const R=C(1516),v=C(3596),P=o((w,B={})=>{const N=o((m,y={})=>{const U=v.isInvalidBrace(y),W=m.invalid===!0&&B.escapeInvalid===!0,_=U===!0||W===!0,O=B.escapeInvalid===!0?"\\":"";let x="";if(m.isOpen===!0)return O+m.value;if(m.isClose===!0)return console.log("node.isClose",O,m.value),O+m.value;if(m.type==="open")return _?O+m.value:"(";if(m.type==="close")return _?O+m.value:")";if(m.type==="comma")return m.prev.type==="comma"?"":_?m.value:"|";if(m.value)return m.value;if(m.nodes&&m.ranges>0){const J=v.reduce(m.nodes),se=R(...J,{...B,wrap:!1,toRegex:!0,strictZeros:!0});if(se.length!==0)return J.length>1&&se.length>1?`(${se})`:se}if(m.nodes)for(const J of m.nodes)x+=N(J,m);return x},"walk");return N(w)},"compile");at.exports=P},7007:at=>{"use strict";at.exports={MAX_LENGTH:1e4,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}},1474:(at,l,C)=>{"use strict";const R=C(1516),v=C(8641),P=C(3596),w=o((N="",m="",y=!1)=>{const U=[];if(N=[].concat(N),m=[].concat(m),!m.length)return N;if(!N.length)return y?P.flatten(m).map(W=>`{${W}}`):m;for(const W of N)if(Array.isArray(W))for(const _ of W)U.push(w(_,m,y));else for(let _ of m)y===!0&&typeof _=="string"&&(_=`{${_}}`),U.push(Array.isArray(_)?w(W,_,y):W+_);return P.flatten(U)},"append"),B=o((N,m={})=>{const y=m.rangeLimit===void 0?1e3:m.rangeLimit,U=o((W,_={})=>{W.queue=[];let O=_,x=_.queue;for(;O.type!=="brace"&&O.type!=="root"&&O.parent;)O=O.parent,x=O.queue;if(W.invalid||W.dollar){x.push(w(x.pop(),v(W,m)));return}if(W.type==="brace"&&W.invalid!==!0&&W.nodes.length===2){x.push(w(x.pop(),["{}"]));return}if(W.nodes&&W.ranges>0){const $=P.reduce(W.nodes);if(P.exceedsLimit(...$,m.step,y))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let Q=R(...$,m);Q.length===0&&(Q=v(W,m)),x.push(w(x.pop(),Q)),W.nodes=[];return}const J=P.encloseBrace(W);let se=W.queue,Ae=W;for(;Ae.type!=="brace"&&Ae.type!=="root"&&Ae.parent;)Ae=Ae.parent,se=Ae.queue;for(let $=0;$<W.nodes.length;$++){const Q=W.nodes[$];if(Q.type==="comma"&&W.type==="brace"){$===1&&se.push(""),se.push("");continue}if(Q.type==="close"){x.push(w(x.pop(),se,J));continue}if(Q.value&&Q.type!=="open"){se.push(w(se.pop(),Q.value));continue}Q.nodes&&U(Q,W)}return se},"walk");return P.flatten(U(N))},"expand");at.exports=B},5870:(at,l,C)=>{"use strict";const R=C(8641),{MAX_LENGTH:v,CHAR_BACKSLASH:P,CHAR_BACKTICK:w,CHAR_COMMA:B,CHAR_DOT:N,CHAR_LEFT_PARENTHESES:m,CHAR_RIGHT_PARENTHESES:y,CHAR_LEFT_CURLY_BRACE:U,CHAR_RIGHT_CURLY_BRACE:W,CHAR_LEFT_SQUARE_BRACKET:_,CHAR_RIGHT_SQUARE_BRACKET:O,CHAR_DOUBLE_QUOTE:x,CHAR_SINGLE_QUOTE:J,CHAR_NO_BREAK_SPACE:se,CHAR_ZERO_WIDTH_NOBREAK_SPACE:Ae}=C(7007),$=o((Q,X={})=>{if(typeof Q!="string")throw new TypeError("Expected a string");const L=X||{},Y=typeof L.maxLength=="number"?Math.min(v,L.maxLength):v;if(Q.length>Y)throw new SyntaxError(`Input length (${Q.length}), exceeds max characters (${Y})`);const k={type:"root",input:Q,nodes:[]},le=[k];let G=k,ve=k,_e=0;const Ie=Q.length;let ie=0,Se=0,D;const He=o(()=>Q[ie++],"advance"),fe=o(ue=>{if(ue.type==="text"&&ve.type==="dot"&&(ve.type="text"),ve&&ve.type==="text"&&ue.type==="text"){ve.value+=ue.value;return}return G.nodes.push(ue),ue.parent=G,ue.prev=ve,ve=ue,ue},"push");for(fe({type:"bos"});ie<Ie;)if(G=le[le.length-1],D=He(),!(D===Ae||D===se)){if(D===P){fe({type:"text",value:(X.keepEscaping?D:"")+He()});continue}if(D===O){fe({type:"text",value:"\\"+D});continue}if(D===_){_e++;let ue;for(;ie<Ie&&(ue=He());){if(D+=ue,ue===_){_e++;continue}if(ue===P){D+=He();continue}if(ue===O&&(_e--,_e===0))break}fe({type:"text",value:D});continue}if(D===m){G=fe({type:"paren",nodes:[]}),le.push(G),fe({type:"text",value:D});continue}if(D===y){if(G.type!=="paren"){fe({type:"text",value:D});continue}G=le.pop(),fe({type:"text",value:D}),G=le[le.length-1];continue}if(D===x||D===J||D===w){const ue=D;let z;for(X.keepQuotes!==!0&&(D="");ie<Ie&&(z=He());){if(z===P){D+=z+He();continue}if(z===ue){X.keepQuotes===!0&&(D+=z);break}D+=z}fe({type:"text",value:D});continue}if(D===U){Se++;const ue=ve.value&&ve.value.slice(-1)==="$"||G.dollar===!0;G=fe({type:"brace",open:!0,close:!1,dollar:ue,depth:Se,commas:0,ranges:0,nodes:[]}),le.push(G),fe({type:"open",value:D});continue}if(D===W){if(G.type!=="brace"){fe({type:"text",value:D});continue}const ue="close";G=le.pop(),G.close=!0,fe({type:ue,value:D}),Se--,G=le[le.length-1];continue}if(D===B&&Se>0){if(G.ranges>0){G.ranges=0;const ue=G.nodes.shift();G.nodes=[ue,{type:"text",value:R(G)}]}fe({type:"comma",value:D}),G.commas++;continue}if(D===N&&Se>0&&G.commas===0){const ue=G.nodes;if(Se===0||ue.length===0){fe({type:"text",value:D});continue}if(ve.type==="dot"){if(G.range=[],ve.value+=D,ve.type="range",G.nodes.length!==3&&G.nodes.length!==5){G.invalid=!0,G.ranges=0,ve.type="text";continue}G.ranges++,G.args=[];continue}if(ve.type==="range"){ue.pop();const z=ue[ue.length-1];z.value+=ve.value+D,ve=z,G.ranges--;continue}fe({type:"dot",value:D});continue}fe({type:"text",value:D})}do if(G=le.pop(),G.type!=="root"){G.nodes.forEach(he=>{he.nodes||(he.type==="open"&&(he.isOpen=!0),he.type==="close"&&(he.isClose=!0),he.nodes||(he.type="text"),he.invalid=!0)});const ue=le[le.length-1],z=ue.nodes.indexOf(G);ue.nodes.splice(z,1,...G.nodes)}while(le.length>0);return fe({type:"eos"}),k},"parse");at.exports=$},8641:(at,l,C)=>{"use strict";const R=C(3596);at.exports=(v,P={})=>{const w=o((B,N={})=>{const m=P.escapeInvalid&&R.isInvalidBrace(N),y=B.invalid===!0&&P.escapeInvalid===!0;let U="";if(B.value)return(m||y)&&R.isOpenOrClose(B)?"\\"+B.value:B.value;if(B.value)return B.value;if(B.nodes)for(const W of B.nodes)U+=w(W);return U},"stringify");return w(v)}},3596:(at,l)=>{"use strict";l.isInteger=C=>typeof C=="number"?Number.isInteger(C):typeof C=="string"&&C.trim()!==""?Number.isInteger(Number(C)):!1,l.find=(C,R)=>C.nodes.find(v=>v.type===R),l.exceedsLimit=(C,R,v=1,P)=>P===!1||!l.isInteger(C)||!l.isInteger(R)?!1:(Number(R)-Number(C))/Number(v)>=P,l.escapeNode=(C,R=0,v)=>{const P=C.nodes[R];!P||(v&&P.type===v||P.type==="open"||P.type==="close")&&P.escaped!==!0&&(P.value="\\"+P.value,P.escaped=!0)},l.encloseBrace=C=>C.type!=="brace"?!1:C.commas>>0+C.ranges>>0==0?(C.invalid=!0,!0):!1,l.isInvalidBrace=C=>C.type!=="brace"?!1:C.invalid===!0||C.dollar?!0:C.commas>>0+C.ranges>>0==0||C.open!==!0||C.close!==!0?(C.invalid=!0,!0):!1,l.isOpenOrClose=C=>C.type==="open"||C.type==="close"?!0:C.open===!0||C.close===!0,l.reduce=C=>C.reduce((R,v)=>(v.type==="text"&&R.push(v.value),v.type==="range"&&(v.type="text"),R),[]),l.flatten=(...C)=>{const R=[],v=o(P=>{for(let w=0;w<P.length;w++){const B=P[w];if(Array.isArray(B)){v(B);continue}B!==void 0&&R.push(B)}return R},"flat");return v(C),R}},1516:(at,l,C)=>{"use strict";/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */const R=C(6529),v=C(2999),P=o(L=>L!==null&&typeof L=="object"&&!Array.isArray(L),"isObject"),w=o(L=>Y=>L===!0?Number(Y):String(Y),"transform"),B=o(L=>typeof L=="number"||typeof L=="string"&&L!=="","isValidValue"),N=o(L=>Number.isInteger(+L),"isNumber"),m=o(L=>{let Y=`${L}`,k=-1;if(Y[0]==="-"&&(Y=Y.slice(1)),Y==="0")return!1;for(;Y[++k]==="0";);return k>0},"zeros"),y=o((L,Y,k)=>typeof L=="string"||typeof Y=="string"?!0:k.stringify===!0,"stringify"),U=o((L,Y,k)=>{if(Y>0){let le=L[0]==="-"?"-":"";le&&(L=L.slice(1)),L=le+L.padStart(le?Y-1:Y,"0")}return k===!1?String(L):L},"pad"),W=o((L,Y)=>{let k=L[0]==="-"?"-":"";for(k&&(L=L.slice(1),Y--);L.length<Y;)L="0"+L;return k?"-"+L:L},"toMaxLen"),_=o((L,Y,k)=>{L.negatives.sort((Ie,ie)=>Ie<ie?-1:Ie>ie?1:0),L.positives.sort((Ie,ie)=>Ie<ie?-1:Ie>ie?1:0);let le=Y.capture?"":"?:",G="",ve="",_e;return L.positives.length&&(G=L.positives.map(Ie=>W(String(Ie),k)).join("|")),L.negatives.length&&(ve=`-(${le}${L.negatives.map(Ie=>W(String(Ie),k)).join("|")})`),G&&ve?_e=`${G}|${ve}`:_e=G||ve,Y.wrap?`(${le}${_e})`:_e},"toSequence"),O=o((L,Y,k,le)=>{if(k)return v(L,Y,{wrap:!1,...le});let G=String.fromCharCode(L);if(L===Y)return G;let ve=String.fromCharCode(Y);return`[${G}-${ve}]`},"toRange"),x=o((L,Y,k)=>{if(Array.isArray(L)){let le=k.wrap===!0,G=k.capture?"":"?:";return le?`(${G}${L.join("|")})`:L.join("|")}return v(L,Y,k)},"toRegex"),J=o((...L)=>new RangeError("Invalid range arguments: "+R.inspect(...L)),"rangeError"),se=o((L,Y,k)=>{if(k.strictRanges===!0)throw J([L,Y]);return[]},"invalidRange"),Ae=o((L,Y)=>{if(Y.strictRanges===!0)throw new TypeError(`Expected step "${L}" to be a number`);return[]},"invalidStep"),$=o((L,Y,k=1,le={})=>{let G=Number(L),ve=Number(Y);if(!Number.isInteger(G)||!Number.isInteger(ve)){if(le.strictRanges===!0)throw J([L,Y]);return[]}G===0&&(G=0),ve===0&&(ve=0);let _e=G>ve,Ie=String(L),ie=String(Y),Se=String(k);k=Math.max(Math.abs(k),1);let D=m(Ie)||m(ie)||m(Se),He=D?Math.max(Ie.length,ie.length,Se.length):0,fe=D===!1&&y(L,Y,le)===!1,ue=le.transform||w(fe);if(le.toRegex&&k===1)return O(W(L,He),W(Y,He),!0,le);let z={negatives:[],positives:[]},he=o(oe=>z[oe<0?"negatives":"positives"].push(Math.abs(oe)),"push"),xe=[],Ve=0;for(;_e?G>=ve:G<=ve;)le.toRegex===!0&&k>1?he(G):xe.push(U(ue(G,Ve),He,fe)),G=_e?G-k:G+k,Ve++;return le.toRegex===!0?k>1?_(z,le,He):x(xe,null,{wrap:!1,...le}):xe},"fillNumbers"),Q=o((L,Y,k=1,le={})=>{if(!N(L)&&L.length>1||!N(Y)&&Y.length>1)return se(L,Y,le);let G=le.transform||(fe=>String.fromCharCode(fe)),ve=`${L}`.charCodeAt(0),_e=`${Y}`.charCodeAt(0),Ie=ve>_e,ie=Math.min(ve,_e),Se=Math.max(ve,_e);if(le.toRegex&&k===1)return O(ie,Se,!1,le);let D=[],He=0;for(;Ie?ve>=_e:ve<=_e;)D.push(G(ve,He)),ve=Ie?ve-k:ve+k,He++;return le.toRegex===!0?x(D,null,{wrap:!1,options:le}):D},"fillLetters"),X=o((L,Y,k,le={})=>{if(Y==null&&B(L))return[L];if(!B(L)||!B(Y))return se(L,Y,le);if(typeof k=="function")return X(L,Y,1,{transform:k});if(P(k))return X(L,Y,0,k);let G={...le};return G.capture===!0&&(G.wrap=!0),k=k||G.step||1,N(k)?N(L)&&N(Y)?$(L,Y,k,G):Q(L,Y,Math.max(Math.abs(k),1),G):k!=null&&!P(k)?Ae(k,G):X(L,Y,1,k)},"fill");at.exports=X},3338:at=>{"use strict";/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */at.exports=function(l){return typeof l=="number"?l-l==0:typeof l=="string"&&l.trim()!==""?Number.isFinite?Number.isFinite(+l):isFinite(+l):!1}},5179:(at,l,C)=>{at=C.nmd(at);var R=200,v="__lodash_hash_undefined__",P=1,w=2,B=9007199254740991,N="[object Arguments]",m="[object Array]",y="[object AsyncFunction]",U="[object Boolean]",W="[object Date]",_="[object Error]",O="[object Function]",x="[object GeneratorFunction]",J="[object Map]",se="[object Number]",Ae="[object Null]",$="[object Object]",Q="[object Promise]",X="[object Proxy]",L="[object RegExp]",Y="[object Set]",k="[object String]",le="[object Symbol]",G="[object Undefined]",ve="[object WeakMap]",_e="[object ArrayBuffer]",Ie="[object DataView]",ie="[object Float32Array]",Se="[object Float64Array]",D="[object Int8Array]",He="[object Int16Array]",fe="[object Int32Array]",ue="[object Uint8Array]",z="[object Uint8ClampedArray]",he="[object Uint16Array]",xe="[object Uint32Array]",Ve=/[\\^$.*+?()[\]{}|]/g,oe=/^\[object .+?Constructor\]$/,nt=/^(?:0|[1-9]\d*)$/,dt={};dt[ie]=dt[Se]=dt[D]=dt[He]=dt[fe]=dt[ue]=dt[z]=dt[he]=dt[xe]=!0,dt[N]=dt[m]=dt[_e]=dt[U]=dt[Ie]=dt[W]=dt[_]=dt[O]=dt[J]=dt[se]=dt[$]=dt[L]=dt[Y]=dt[k]=dt[ve]=!1;var ht=typeof C.g=="object"&&C.g&&C.g.Object===Object&&C.g,I=typeof self=="object"&&self&&self.Object===Object&&self,H=ht||I||Function("return this")(),ne=l&&!l.nodeType&&l,ge=ne&&!0&&at&&!at.nodeType&&at,Ke=ge&&ge.exports===ne,Fe=Ke&&ht.process,de=function(){try{return Fe&&Fe.binding&&Fe.binding("util")}catch(M){}}(),Ce=de&&de.isTypedArray;function Me(M,te){for(var ze=-1,ot=M==null?0:M.length,Wt=0,Et=[];++ze<ot;){var vn=M[ze];te(vn,ze,M)&&(Et[Wt++]=vn)}return Et}o(Me,"arrayFilter");function Qe(M,te){for(var ze=-1,ot=te.length,Wt=M.length;++ze<ot;)M[Wt+ze]=te[ze];return M}o(Qe,"arrayPush");function be(M,te){for(var ze=-1,ot=M==null?0:M.length;++ze<ot;)if(te(M[ze],ze,M))return!0;return!1}o(be,"arraySome");function Ne(M,te){for(var ze=-1,ot=Array(M);++ze<M;)ot[ze]=te(ze);return ot}o(Ne,"baseTimes");function q(M){return function(te){return M(te)}}o(q,"baseUnary");function Re(M,te){return M.has(te)}o(Re,"cacheHas");function ae(M,te){return M==null?void 0:M[te]}o(ae,"getValue");function j(M){var te=-1,ze=Array(M.size);return M.forEach(function(ot,Wt){ze[++te]=[Wt,ot]}),ze}o(j,"mapToArray");function Ye(M,te){return function(ze){return M(te(ze))}}o(Ye,"overArg");function Ft(M){var te=-1,ze=Array(M.size);return M.forEach(function(ot){ze[++te]=ot}),ze}o(Ft,"setToArray");var Gt=Array.prototype,xn=Function.prototype,Sn=Object.prototype,jn=H["__core-js_shared__"],Xn=xn.toString,Kn=Sn.hasOwnProperty,gr=function(){var M=/[^.]+$/.exec(jn&&jn.keys&&jn.keys.IE_PROTO||"");return M?"Symbol(src)_1."+M:""}(),Lr=Sn.toString,kr=RegExp("^"+Xn.call(Kn).replace(Ve,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ct=Ke?H.Buffer:void 0,$t=H.Symbol,en=H.Uint8Array,Zt=Sn.propertyIsEnumerable,nn=Gt.splice,Dn=$t?$t.toStringTag:void 0,ar=Object.getOwnPropertySymbols,vr=ct?ct.isBuffer:void 0,Gn=Ye(Object.keys,Object),pr=fi(H,"DataView"),Br=fi(H,"Map"),On=fi(H,"Promise"),Zn=fi(H,"Set"),_r=fi(H,"WeakMap"),Cn=fi(Object,"create"),Qr=Bt(pr),Tr=Bt(Br),Hr=Bt(On),wi=Bt(Zn),ui=Bt(_r),lr=$t?$t.prototype:void 0,T=lr?lr.valueOf:void 0;function ce(M){var te=-1,ze=M==null?0:M.length;for(this.clear();++te<ze;){var ot=M[te];this.set(ot[0],ot[1])}}o(ce,"Hash");function Ee(){this.__data__=Cn?Cn(null):{},this.size=0}o(Ee,"hashClear");function Ue(M){var te=this.has(M)&&delete this.__data__[M];return this.size-=te?1:0,te}o(Ue,"hashDelete");function et(M){var te=this.__data__;if(Cn){var ze=te[M];return ze===v?void 0:ze}return Kn.call(te,M)?te[M]:void 0}o(et,"hashGet");function Be(M){var te=this.__data__;return Cn?te[M]!==void 0:Kn.call(te,M)}o(Be,"hashHas");function lt(M,te){var ze=this.__data__;return this.size+=this.has(M)?0:1,ze[M]=Cn&&te===void 0?v:te,this}o(lt,"hashSet"),ce.prototype.clear=Ee,ce.prototype.delete=Ue,ce.prototype.get=et,ce.prototype.has=Be,ce.prototype.set=lt;function _t(M){var te=-1,ze=M==null?0:M.length;for(this.clear();++te<ze;){var ot=M[te];this.set(ot[0],ot[1])}}o(_t,"ListCache");function Tt(){this.__data__=[],this.size=0}o(Tt,"listCacheClear");function on(M){var te=this.__data__,ze=or(te,M);if(ze<0)return!1;var ot=te.length-1;return ze==ot?te.pop():nn.call(te,ze,1),--this.size,!0}o(on,"listCacheDelete");function St(M){var te=this.__data__,ze=or(te,M);return ze<0?void 0:te[ze][1]}o(St,"listCacheGet");function Jt(M){return or(this.__data__,M)>-1}o(Jt,"listCacheHas");function Ot(M,te){var ze=this.__data__,ot=or(ze,M);return ot<0?(++this.size,ze.push([M,te])):ze[ot][1]=te,this}o(Ot,"listCacheSet"),_t.prototype.clear=Tt,_t.prototype.delete=on,_t.prototype.get=St,_t.prototype.has=Jt,_t.prototype.set=Ot;function Ut(M){var te=-1,ze=M==null?0:M.length;for(this.clear();++te<ze;){var ot=M[te];this.set(ot[0],ot[1])}}o(Ut,"MapCache");function Mt(){this.size=0,this.__data__={hash:new ce,map:new(Br||_t),string:new ce}}o(Mt,"mapCacheClear");function zn(M){var te=Zr(this,M).delete(M);return this.size-=te?1:0,te}o(zn,"mapCacheDelete");function bn(M){return Zr(this,M).get(M)}o(bn,"mapCacheGet");function cr(M){return Zr(this,M).has(M)}o(cr,"mapCacheHas");function Hn(M,te){var ze=Zr(this,M),ot=ze.size;return ze.set(M,te),this.size+=ze.size==ot?0:1,this}o(Hn,"mapCacheSet"),Ut.prototype.clear=Mt,Ut.prototype.delete=zn,Ut.prototype.get=bn,Ut.prototype.has=cr,Ut.prototype.set=Hn;function ur(M){var te=-1,ze=M==null?0:M.length;for(this.__data__=new Ut;++te<ze;)this.add(M[te])}o(ur,"SetCache");function Xr(M){return this.__data__.set(M,v),this}o(Xr,"setCacheAdd");function Gr(M){return this.__data__.has(M)}o(Gr,"setCacheHas"),ur.prototype.add=ur.prototype.push=Xr,ur.prototype.has=Gr;function er(M){var te=this.__data__=new _t(M);this.size=te.size}o(er,"Stack");function xr(){this.__data__=new _t,this.size=0}o(xr,"stackClear");function Dt(M){var te=this.__data__,ze=te.delete(M);return this.size=te.size,ze}o(Dt,"stackDelete");function Vn(M){return this.__data__.get(M)}o(Vn,"stackGet");function _n(M){return this.__data__.has(M)}o(_n,"stackHas");function Rn(M,te){var ze=this.__data__;if(ze instanceof _t){var ot=ze.__data__;if(!Br||ot.length<R-1)return ot.push([M,te]),this.size=++ze.size,this;ze=this.__data__=new Ut(ot)}return ze.set(M,te),this.size=ze.size,this}o(Rn,"stackSet"),er.prototype.clear=xr,er.prototype.delete=Dt,er.prototype.get=Vn,er.prototype.has=_n,er.prototype.set=Rn;function Wn(M,te){var ze=tn(M),ot=!ze&&pt(M),Wt=!ze&&!ot&&yn(M),Et=!ze&&!ot&&!Wt&&qt(M),vn=ze||ot||Wt||Et,pn=vn?Ne(M.length,String):[],Qt=pn.length;for(var sn in M)(te||Kn.call(M,sn))&&!(vn&&(sn=="length"||Wt&&(sn=="offset"||sn=="parent")||Et&&(sn=="buffer"||sn=="byteLength"||sn=="byteOffset")||Ji(sn,Qt)))&&pn.push(sn);return pn}o(Wn,"arrayLikeKeys");function or(M,te){for(var ze=M.length;ze--;)if(jt(M[ze][0],te))return ze;return-1}o(or,"assocIndexOf");function Sr(M,te,ze){var ot=te(M);return tn(M)?ot:Qe(ot,ze(M))}o(Sr,"baseGetAllKeys");function Fr(M){return M==null?M===void 0?G:Ae:Dn&&Dn in Object(M)?Oi(M):rt(M)}o(Fr,"baseGetTag");function Er(M){return fn(M)&&Fr(M)==N}o(Er,"baseIsArguments");function Zi(M,te,ze,ot,Wt){return M===te?!0:M==null||te==null||!fn(M)&&!fn(te)?M!==M&&te!==te:Mi(M,te,ze,ot,Zi,Wt)}o(Zi,"baseIsEqual");function Mi(M,te,ze,ot,Wt,Et){var vn=tn(M),pn=tn(te),Qt=vn?m:ai(M),sn=pn?m:ai(te);Qt=Qt==N?$:Qt,sn=sn==N?$:sn;var mn=Qt==$,Kt=sn==$,ut=Qt==sn;if(ut&&yn(M)){if(!yn(te))return!1;vn=!0,mn=!1}if(ut&&!mn)return Et||(Et=new er),vn||qt(M)?ea(M,te,ze,ot,Wt,Et):Vi(M,te,Qt,ze,ot,Wt,Et);if(!(ze&P)){var Fn=mn&&Kn.call(M,"__wrapped__"),In=Kt&&Kn.call(te,"__wrapped__");if(Fn||In){var Un=Fn?M.value():M,rr=In?te.value():te;return Et||(Et=new er),Wt(Un,rr,ze,ot,Et)}}return ut?(Et||(Et=new er),ta(M,te,ze,ot,Wt,Et)):!1}o(Mi,"baseIsEqualDeep");function oa(M){if(!dr(M)||tt(M))return!1;var te=nr(M)?kr:oe;return te.test(Bt(M))}o(oa,"baseIsNative");function Pi(M){return fn(M)&&Jn(M.length)&&!!dt[Fr(M)]}o(Pi,"baseIsTypedArray");function zi(M){if(!vt(M))return Gn(M);var te=[];for(var ze in Object(M))Kn.call(M,ze)&&ze!="constructor"&&te.push(ze);return te}o(zi,"baseKeys");function ea(M,te,ze,ot,Wt,Et){var vn=ze&P,pn=M.length,Qt=te.length;if(pn!=Qt&&!(vn&&Qt>pn))return!1;var sn=Et.get(M);if(sn&&Et.get(te))return sn==te;var mn=-1,Kt=!0,ut=ze&w?new ur:void 0;for(Et.set(M,te),Et.set(te,M);++mn<pn;){var Fn=M[mn],In=te[mn];if(ot)var Un=vn?ot(In,Fn,mn,te,M,Et):ot(Fn,In,mn,M,te,Et);if(Un!==void 0){if(Un)continue;Kt=!1;break}if(ut){if(!be(te,function(rr,kt){if(!Re(ut,kt)&&(Fn===rr||Wt(Fn,rr,ze,ot,Et)))return ut.push(kt)})){Kt=!1;break}}else if(!(Fn===In||Wt(Fn,In,ze,ot,Et))){Kt=!1;break}}return Et.delete(M),Et.delete(te),Kt}o(ea,"equalArrays");function Vi(M,te,ze,ot,Wt,Et,vn){switch(ze){case Ie:if(M.byteLength!=te.byteLength||M.byteOffset!=te.byteOffset)return!1;M=M.buffer,te=te.buffer;case _e:return!(M.byteLength!=te.byteLength||!Et(new en(M),new en(te)));case U:case W:case se:return jt(+M,+te);case _:return M.name==te.name&&M.message==te.message;case L:case k:return M==te+"";case J:var pn=j;case Y:var Qt=ot&P;if(pn||(pn=Ft),M.size!=te.size&&!Qt)return!1;var sn=vn.get(M);if(sn)return sn==te;ot|=w,vn.set(M,te);var mn=ea(pn(M),pn(te),ot,Wt,Et,vn);return vn.delete(M),mn;case le:if(T)return T.call(M)==T.call(te)}return!1}o(Vi,"equalByTag");function ta(M,te,ze,ot,Wt,Et){var vn=ze&P,pn=di(M),Qt=pn.length,sn=di(te),mn=sn.length;if(Qt!=mn&&!vn)return!1;for(var Kt=Qt;Kt--;){var ut=pn[Kt];if(!(vn?ut in te:Kn.call(te,ut)))return!1}var Fn=Et.get(M);if(Fn&&Et.get(te))return Fn==te;var In=!0;Et.set(M,te),Et.set(te,M);for(var Un=vn;++Kt<Qt;){ut=pn[Kt];var rr=M[ut],kt=te[ut];if(ot)var $n=vn?ot(kt,rr,ut,te,M,Et):ot(rr,kt,ut,M,te,Et);if(!($n===void 0?rr===kt||Wt(rr,kt,ze,ot,Et):$n)){In=!1;break}Un||(Un=ut=="constructor")}if(In&&!Un){var mr=M.constructor,kn=te.constructor;mr!=kn&&"constructor"in M&&"constructor"in te&&!(typeof mr=="function"&&mr instanceof mr&&typeof kn=="function"&&kn instanceof kn)&&(In=!1)}return Et.delete(M),Et.delete(te),In}o(ta,"equalObjects");function di(M){return Sr(M,zt,va)}o(di,"getAllKeys");function Zr(M,te){var ze=M.__data__;return Oe(te)?ze[typeof te=="string"?"string":"hash"]:ze.map}o(Zr,"getMapData");function fi(M,te){var ze=ae(M,te);return oa(ze)?ze:void 0}o(fi,"getNative");function Oi(M){var te=Kn.call(M,Dn),ze=M[Dn];try{M[Dn]=void 0;var ot=!0}catch(Et){}var Wt=Lr.call(M);return ot&&(te?M[Dn]=ze:delete M[Dn]),Wt}o(Oi,"getRawTag");var va=ar?function(M){return M==null?[]:(M=Object(M),Me(ar(M),function(te){return Zt.call(M,te)}))}:Nt,ai=Fr;(pr&&ai(new pr(new ArrayBuffer(1)))!=Ie||Br&&ai(new Br)!=J||On&&ai(On.resolve())!=Q||Zn&&ai(new Zn)!=Y||_r&&ai(new _r)!=ve)&&(ai=o(function(M){var te=Fr(M),ze=te==$?M.constructor:void 0,ot=ze?Bt(ze):"";if(ot)switch(ot){case Qr:return Ie;case Tr:return J;case Hr:return Q;case wi:return Y;case ui:return ve}return te},"getTag"));function Ji(M,te){return te=te==null?B:te,!!te&&(typeof M=="number"||nt.test(M))&&M>-1&&M%1==0&&M<te}o(Ji,"isIndex");function Oe(M){var te=typeof M;return te=="string"||te=="number"||te=="symbol"||te=="boolean"?M!=="__proto__":M===null}o(Oe,"isKeyable");function tt(M){return!!gr&&gr in M}o(tt,"isMasked");function vt(M){var te=M&&M.constructor,ze=typeof te=="function"&&te.prototype||Sn;return M===ze}o(vt,"isPrototype");function rt(M){return Lr.call(M)}o(rt,"objectToString");function Bt(M){if(M!=null){try{return Xn.call(M)}catch(te){}try{return M+""}catch(te){}}return""}o(Bt,"toSource");function jt(M,te){return M===te||M!==M&&te!==te}o(jt,"eq");var pt=Er(function(){return arguments}())?Er:function(M){return fn(M)&&Kn.call(M,"callee")&&!Zt.call(M,"callee")},tn=Array.isArray;function Ht(M){return M!=null&&Jn(M.length)&&!nr(M)}o(Ht,"isArrayLike");var yn=vr||gn;function En(M,te){return Zi(M,te)}o(En,"isEqual");function nr(M){if(!dr(M))return!1;var te=Fr(M);return te==O||te==x||te==y||te==X}o(nr,"isFunction");function Jn(M){return typeof M=="number"&&M>-1&&M%1==0&&M<=B}o(Jn,"isLength");function dr(M){var te=typeof M;return M!=null&&(te=="object"||te=="function")}o(dr,"isObject");function fn(M){return M!=null&&typeof M=="object"}o(fn,"isObjectLike");var qt=Ce?q(Ce):Pi;function zt(M){return Ht(M)?Wn(M):zi(M)}o(zt,"keys");function Nt(){return[]}o(Nt,"stubArray");function gn(){return!1}o(gn,"stubFalse"),at.exports=En},919:(at,l,C)=>{"use strict";const R=C(6391),v=C(6232),P=C(6796),w=C(292),B=o(m=>m===""||m==="./","isEmptyString"),N=o((m,y,U)=>{y=[].concat(y),m=[].concat(m);let W=new Set,_=new Set,O=new Set,x=0,J=o($=>{O.add($.output),U&&U.onResult&&U.onResult($)},"onResult");for(let $=0;$<y.length;$++){let Q=P(String(y[$]),{...U,onResult:J},!0),X=Q.state.negated||Q.state.negatedExtglob;X&&x++;for(let L of m){let Y=Q(L,!0);!(X?!Y.isMatch:Y.isMatch)||(X?W.add(Y.output):(W.delete(Y.output),_.add(Y.output)))}}let Ae=(x===y.length?[...O]:[..._]).filter($=>!W.has($));if(U&&Ae.length===0){if(U.failglob===!0)throw new Error(`No matches found for "${y.join(", ")}"`);if(U.nonull===!0||U.nullglob===!0)return U.unescape?y.map($=>$.replace(/\\/g,"")):y}return Ae},"micromatch");N.match=N,N.matcher=(m,y)=>P(m,y),N.isMatch=(m,y,U)=>P(y,U)(m),N.any=N.isMatch,N.not=(m,y,U={})=>{y=[].concat(y).map(String);let W=new Set,_=[],O=o(J=>{U.onResult&&U.onResult(J),_.push(J.output)},"onResult"),x=new Set(N(m,y,{...U,onResult:O}));for(let J of _)x.has(J)||W.add(J);return[...W]},N.contains=(m,y,U)=>{if(typeof m!="string")throw new TypeError(`Expected a string: "${R.inspect(m)}"`);if(Array.isArray(y))return y.some(W=>N.contains(m,W,U));if(typeof y=="string"){if(B(m)||B(y))return!1;if(m.includes(y)||m.startsWith("./")&&m.slice(2).includes(y))return!0}return N.isMatch(m,y,{...U,contains:!0})},N.matchKeys=(m,y,U)=>{if(!w.isObject(m))throw new TypeError("Expected the first argument to be an object");let W=N(Object.keys(m),y,U),_={};for(let O of W)_[O]=m[O];return _},N.some=(m,y,U)=>{let W=[].concat(m);for(let _ of[].concat(y)){let O=P(String(_),U);if(W.some(x=>O(x)))return!0}return!1},N.every=(m,y,U)=>{let W=[].concat(m);for(let _ of[].concat(y)){let O=P(String(_),U);if(!W.every(x=>O(x)))return!1}return!0},N.all=(m,y,U)=>{if(typeof m!="string")throw new TypeError(`Expected a string: "${R.inspect(m)}"`);return[].concat(y).every(W=>P(W,U)(m))},N.capture=(m,y,U)=>{let W=w.isWindows(U),O=P.makeRe(String(m),{...U,capture:!0}).exec(W?w.toPosixSlashes(y):y);if(O)return O.slice(1).map(x=>x===void 0?"":x)},N.makeRe=(...m)=>P.makeRe(...m),N.scan=(...m)=>P.scan(...m),N.parse=(m,y)=>{let U=[];for(let W of[].concat(m||[]))for(let _ of v(String(W),y))U.push(P.parse(_,y));return U},N.braces=(m,y)=>{if(typeof m!="string")throw new TypeError("Expected a string");return y&&y.nobrace===!0||!/\{.*\}/.test(m)?[m]:v(m,y)},N.braceExpand=(m,y)=>{if(typeof m!="string")throw new TypeError("Expected a string");return N.braces(m,{...y,expand:!0})},at.exports=N},6796:(at,l,C)=>{"use strict";at.exports=C(5761)},3889:(at,l,C)=>{"use strict";const R=C(6470),v="\\\\/",P=`[^${v}]`,w="\\.",B="\\+",N="\\?",m="\\/",y="(?=.)",U="[^/]",W=`(?:${m}|$)`,_=`(?:^|${m})`,O=`${w}{1,2}${W}`,x=`(?!${w})`,J=`(?!${_}${O})`,se=`(?!${w}{0,1}${W})`,Ae=`(?!${O})`,$=`[^.${m}]`,Q=`${U}*?`,X={DOT_LITERAL:w,PLUS_LITERAL:B,QMARK_LITERAL:N,SLASH_LITERAL:m,ONE_CHAR:y,QMARK:U,END_ANCHOR:W,DOTS_SLASH:O,NO_DOT:x,NO_DOTS:J,NO_DOT_SLASH:se,NO_DOTS_SLASH:Ae,QMARK_NO_DOT:$,STAR:Q,START_ANCHOR:_},L={...X,SLASH_LITERAL:`[${v}]`,QMARK:P,STAR:`${P}*?`,DOTS_SLASH:`${w}{1,2}(?:[${v}]|$)`,NO_DOT:`(?!${w})`,NO_DOTS:`(?!(?:^|[${v}])${w}{1,2}(?:[${v}]|$))`,NO_DOT_SLASH:`(?!${w}{0,1}(?:[${v}]|$))`,NO_DOTS_SLASH:`(?!${w}{1,2}(?:[${v}]|$))`,QMARK_NO_DOT:`[^.${v}]`,START_ANCHOR:`(?:^|[${v}])`,END_ANCHOR:`(?:[${v}]|$)`},Y={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};at.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:Y,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:R.sep,extglobChars(k){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${k.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(k){return k===!0?L:X}}},3969:(at,l,C)=>{"use strict";const R=C(3889),v=C(292),{MAX_LENGTH:P,POSIX_REGEX_SOURCE:w,REGEX_NON_SPECIAL_CHARS:B,REGEX_SPECIAL_CHARS_BACKREF:N,REPLACEMENTS:m}=R,y=o((_,O)=>{if(typeof O.expandRange=="function")return O.expandRange(..._,O);_.sort();const x=`[${_.join("-")}]`;try{new RegExp(x)}catch(J){return _.map(se=>v.escapeRegex(se)).join("..")}return x},"expandRange"),U=o((_,O)=>`Missing ${_}: "${O}" - use "\\\\${O}" to match literal characters`,"syntaxError"),W=o((_,O)=>{if(typeof _!="string")throw new TypeError("Expected a string");_=m[_]||_;const x={...O},J=typeof x.maxLength=="number"?Math.min(P,x.maxLength):P;let se=_.length;if(se>J)throw new SyntaxError(`Input length: ${se}, exceeds maximum allowed length: ${J}`);const Ae={type:"bos",value:"",output:x.prepend||""},$=[Ae],Q=x.capture?"":"?:",X=v.isWindows(O),L=R.globChars(X),Y=R.extglobChars(L),{DOT_LITERAL:k,PLUS_LITERAL:le,SLASH_LITERAL:G,ONE_CHAR:ve,DOTS_SLASH:_e,NO_DOT:Ie,NO_DOT_SLASH:ie,NO_DOTS_SLASH:Se,QMARK:D,QMARK_NO_DOT:He,STAR:fe,START_ANCHOR:ue}=L,z=o(ae=>`(${Q}(?:(?!${ue}${ae.dot?_e:k}).)*?)`,"globstar"),he=x.dot?"":Ie,xe=x.dot?D:He;let Ve=x.bash===!0?z(x):fe;x.capture&&(Ve=`(${Ve})`),typeof x.noext=="boolean"&&(x.noextglob=x.noext);const oe={input:_,index:-1,start:0,dot:x.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:$};_=v.removePrefix(_,oe),se=_.length;const nt=[],dt=[],ht=[];let I=Ae,H;const ne=o(()=>oe.index===se-1,"eos"),ge=oe.peek=(ae=1)=>_[oe.index+ae],Ke=oe.advance=()=>_[++oe.index]||"",Fe=o(()=>_.slice(oe.index+1),"remaining"),de=o((ae="",j=0)=>{oe.consumed+=ae,oe.index+=j},"consume"),Ce=o(ae=>{oe.output+=ae.output!=null?ae.output:ae.value,de(ae.value)},"append"),Me=o(()=>{let ae=1;for(;ge()==="!"&&(ge(2)!=="("||ge(3)==="?");)Ke(),oe.start++,ae++;return ae%2==0?!1:(oe.negated=!0,oe.start++,!0)},"negate"),Qe=o(ae=>{oe[ae]++,ht.push(ae)},"increment"),be=o(ae=>{oe[ae]--,ht.pop()},"decrement"),Ne=o(ae=>{if(I.type==="globstar"){const j=oe.braces>0&&(ae.type==="comma"||ae.type==="brace"),Ye=ae.extglob===!0||nt.length&&(ae.type==="pipe"||ae.type==="paren");ae.type!=="slash"&&ae.type!=="paren"&&!j&&!Ye&&(oe.output=oe.output.slice(0,-I.output.length),I.type="star",I.value="*",I.output=Ve,oe.output+=I.output)}if(nt.length&&ae.type!=="paren"&&(nt[nt.length-1].inner+=ae.value),(ae.value||ae.output)&&Ce(ae),I&&I.type==="text"&&ae.type==="text"){I.value+=ae.value,I.output=(I.output||"")+ae.value;return}ae.prev=I,$.push(ae),I=ae},"push"),q=o((ae,j)=>{const Ye={...Y[j],conditions:1,inner:""};Ye.prev=I,Ye.parens=oe.parens,Ye.output=oe.output;const Ft=(x.capture?"(":"")+Ye.open;Qe("parens"),Ne({type:ae,value:j,output:oe.output?"":ve}),Ne({type:"paren",extglob:!0,value:Ke(),output:Ft}),nt.push(Ye)},"extglobOpen"),Re=o(ae=>{let j=ae.close+(x.capture?")":""),Ye;if(ae.type==="negate"){let Ft=Ve;if(ae.inner&&ae.inner.length>1&&ae.inner.includes("/")&&(Ft=z(x)),(Ft!==Ve||ne()||/^\)+$/.test(Fe()))&&(j=ae.close=`)$))${Ft}`),ae.inner.includes("*")&&(Ye=Fe())&&/^\.[^\\/.]+$/.test(Ye)){const Gt=W(Ye,{...O,fastpaths:!1}).output;j=ae.close=`)${Gt})${Ft})`}ae.prev.type==="bos"&&(oe.negatedExtglob=!0)}Ne({type:"paren",extglob:!0,value:H,output:j}),be("parens")},"extglobClose");if(x.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(_)){let ae=!1,j=_.replace(N,(Ye,Ft,Gt,xn,Sn,jn)=>xn==="\\"?(ae=!0,Ye):xn==="?"?Ft?Ft+xn+(Sn?D.repeat(Sn.length):""):jn===0?xe+(Sn?D.repeat(Sn.length):""):D.repeat(Gt.length):xn==="."?k.repeat(Gt.length):xn==="*"?Ft?Ft+xn+(Sn?Ve:""):Ve:Ft?Ye:`\\${Ye}`);return ae===!0&&(x.unescape===!0?j=j.replace(/\\/g,""):j=j.replace(/\\+/g,Ye=>Ye.length%2==0?"\\\\":Ye?"\\":"")),j===_&&x.contains===!0?(oe.output=_,oe):(oe.output=v.wrapOutput(j,oe,O),oe)}for(;!ne();){if(H=Ke(),H==="\0")continue;if(H==="\\"){const Ye=ge();if(Ye==="/"&&x.bash!==!0||Ye==="."||Ye===";")continue;if(!Ye){H+="\\",Ne({type:"text",value:H});continue}const Ft=/^\\+/.exec(Fe());let Gt=0;if(Ft&&Ft[0].length>2&&(Gt=Ft[0].length,oe.index+=Gt,Gt%2!=0&&(H+="\\")),x.unescape===!0?H=Ke():H+=Ke(),oe.brackets===0){Ne({type:"text",value:H});continue}}if(oe.brackets>0&&(H!=="]"||I.value==="["||I.value==="[^")){if(x.posix!==!1&&H===":"){const Ye=I.value.slice(1);if(Ye.includes("[")&&(I.posix=!0,Ye.includes(":"))){const Ft=I.value.lastIndexOf("["),Gt=I.value.slice(0,Ft),xn=I.value.slice(Ft+2),Sn=w[xn];if(Sn){I.value=Gt+Sn,oe.backtrack=!0,Ke(),!Ae.output&&$.indexOf(I)===1&&(Ae.output=ve);continue}}}(H==="["&&ge()!==":"||H==="-"&&ge()==="]")&&(H=`\\${H}`),H==="]"&&(I.value==="["||I.value==="[^")&&(H=`\\${H}`),x.posix===!0&&H==="!"&&I.value==="["&&(H="^"),I.value+=H,Ce({value:H});continue}if(oe.quotes===1&&H!=='"'){H=v.escapeRegex(H),I.value+=H,Ce({value:H});continue}if(H==='"'){oe.quotes=oe.quotes===1?0:1,x.keepQuotes===!0&&Ne({type:"text",value:H});continue}if(H==="("){Qe("parens"),Ne({type:"paren",value:H});continue}if(H===")"){if(oe.parens===0&&x.strictBrackets===!0)throw new SyntaxError(U("opening","("));const Ye=nt[nt.length-1];if(Ye&&oe.parens===Ye.parens+1){Re(nt.pop());continue}Ne({type:"paren",value:H,output:oe.parens?")":"\\)"}),be("parens");continue}if(H==="["){if(x.nobracket===!0||!Fe().includes("]")){if(x.nobracket!==!0&&x.strictBrackets===!0)throw new SyntaxError(U("closing","]"));H=`\\${H}`}else Qe("brackets");Ne({type:"bracket",value:H});continue}if(H==="]"){if(x.nobracket===!0||I&&I.type==="bracket"&&I.value.length===1){Ne({type:"text",value:H,output:`\\${H}`});continue}if(oe.brackets===0){if(x.strictBrackets===!0)throw new SyntaxError(U("opening","["));Ne({type:"text",value:H,output:`\\${H}`});continue}be("brackets");const Ye=I.value.slice(1);if(I.posix!==!0&&Ye[0]==="^"&&!Ye.includes("/")&&(H=`/${H}`),I.value+=H,Ce({value:H}),x.literalBrackets===!1||v.hasRegexChars(Ye))continue;const Ft=v.escapeRegex(I.value);if(oe.output=oe.output.slice(0,-I.value.length),x.literalBrackets===!0){oe.output+=Ft,I.value=Ft;continue}I.value=`(${Q}${Ft}|${I.value})`,oe.output+=I.value;continue}if(H==="{"&&x.nobrace!==!0){Qe("braces");const Ye={type:"brace",value:H,output:"(",outputIndex:oe.output.length,tokensIndex:oe.tokens.length};dt.push(Ye),Ne(Ye);continue}if(H==="}"){const Ye=dt[dt.length-1];if(x.nobrace===!0||!Ye){Ne({type:"text",value:H,output:H});continue}let Ft=")";if(Ye.dots===!0){const Gt=$.slice(),xn=[];for(let Sn=Gt.length-1;Sn>=0&&($.pop(),Gt[Sn].type!=="brace");Sn--)Gt[Sn].type!=="dots"&&xn.unshift(Gt[Sn].value);Ft=y(xn,x),oe.backtrack=!0}if(Ye.comma!==!0&&Ye.dots!==!0){const Gt=oe.output.slice(0,Ye.outputIndex),xn=oe.tokens.slice(Ye.tokensIndex);Ye.value=Ye.output="\\{",H=Ft="\\}",oe.output=Gt;for(const Sn of xn)oe.output+=Sn.output||Sn.value}Ne({type:"brace",value:H,output:Ft}),be("braces"),dt.pop();continue}if(H==="|"){nt.length>0&&nt[nt.length-1].conditions++,Ne({type:"text",value:H});continue}if(H===","){let Ye=H;const Ft=dt[dt.length-1];Ft&&ht[ht.length-1]==="braces"&&(Ft.comma=!0,Ye="|"),Ne({type:"comma",value:H,output:Ye});continue}if(H==="/"){if(I.type==="dot"&&oe.index===oe.start+1){oe.start=oe.index+1,oe.consumed="",oe.output="",$.pop(),I=Ae;continue}Ne({type:"slash",value:H,output:G});continue}if(H==="."){if(oe.braces>0&&I.type==="dot"){I.value==="."&&(I.output=k);const Ye=dt[dt.length-1];I.type="dots",I.output+=H,I.value+=H,Ye.dots=!0;continue}if(oe.braces+oe.parens===0&&I.type!=="bos"&&I.type!=="slash"){Ne({type:"text",value:H,output:k});continue}Ne({type:"dot",value:H,output:k});continue}if(H==="?"){if(!(I&&I.value==="(")&&x.noextglob!==!0&&ge()==="("&&ge(2)!=="?"){q("qmark",H);continue}if(I&&I.type==="paren"){const Ft=ge();let Gt=H;if(Ft==="<"&&!v.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(I.value==="("&&!/[!=<:]/.test(Ft)||Ft==="<"&&!/<([!=]|\w+>)/.test(Fe()))&&(Gt=`\\${H}`),Ne({type:"text",value:H,output:Gt});continue}if(x.dot!==!0&&(I.type==="slash"||I.type==="bos")){Ne({type:"qmark",value:H,output:He});continue}Ne({type:"qmark",value:H,output:D});continue}if(H==="!"){if(x.noextglob!==!0&&ge()==="("&&(ge(2)!=="?"||!/[!=<:]/.test(ge(3)))){q("negate",H);continue}if(x.nonegate!==!0&&oe.index===0){Me();continue}}if(H==="+"){if(x.noextglob!==!0&&ge()==="("&&ge(2)!=="?"){q("plus",H);continue}if(I&&I.value==="("||x.regex===!1){Ne({type:"plus",value:H,output:le});continue}if(I&&(I.type==="bracket"||I.type==="paren"||I.type==="brace")||oe.parens>0){Ne({type:"plus",value:H});continue}Ne({type:"plus",value:le});continue}if(H==="@"){if(x.noextglob!==!0&&ge()==="("&&ge(2)!=="?"){Ne({type:"at",extglob:!0,value:H,output:""});continue}Ne({type:"text",value:H});continue}if(H!=="*"){(H==="$"||H==="^")&&(H=`\\${H}`);const Ye=B.exec(Fe());Ye&&(H+=Ye[0],oe.index+=Ye[0].length),Ne({type:"text",value:H});continue}if(I&&(I.type==="globstar"||I.star===!0)){I.type="star",I.star=!0,I.value+=H,I.output=Ve,oe.backtrack=!0,oe.globstar=!0,de(H);continue}let ae=Fe();if(x.noextglob!==!0&&/^\([^?]/.test(ae)){q("star",H);continue}if(I.type==="star"){if(x.noglobstar===!0){de(H);continue}const Ye=I.prev,Ft=Ye.prev,Gt=Ye.type==="slash"||Ye.type==="bos",xn=Ft&&(Ft.type==="star"||Ft.type==="globstar");if(x.bash===!0&&(!Gt||ae[0]&&ae[0]!=="/")){Ne({type:"star",value:H,output:""});continue}const Sn=oe.braces>0&&(Ye.type==="comma"||Ye.type==="brace"),jn=nt.length&&(Ye.type==="pipe"||Ye.type==="paren");if(!Gt&&Ye.type!=="paren"&&!Sn&&!jn){Ne({type:"star",value:H,output:""});continue}for(;ae.slice(0,3)==="/**";){const Xn=_[oe.index+4];if(Xn&&Xn!=="/")break;ae=ae.slice(3),de("/**",3)}if(Ye.type==="bos"&&ne()){I.type="globstar",I.value+=H,I.output=z(x),oe.output=I.output,oe.globstar=!0,de(H);continue}if(Ye.type==="slash"&&Ye.prev.type!=="bos"&&!xn&&ne()){oe.output=oe.output.slice(0,-(Ye.output+I.output).length),Ye.output=`(?:${Ye.output}`,I.type="globstar",I.output=z(x)+(x.strictSlashes?")":"|$)"),I.value+=H,oe.globstar=!0,oe.output+=Ye.output+I.output,de(H);continue}if(Ye.type==="slash"&&Ye.prev.type!=="bos"&&ae[0]==="/"){const Xn=ae[1]!==void 0?"|$":"";oe.output=oe.output.slice(0,-(Ye.output+I.output).length),Ye.output=`(?:${Ye.output}`,I.type="globstar",I.output=`${z(x)}${G}|${G}${Xn})`,I.value+=H,oe.output+=Ye.output+I.output,oe.globstar=!0,de(H+Ke()),Ne({type:"slash",value:"/",output:""});continue}if(Ye.type==="bos"&&ae[0]==="/"){I.type="globstar",I.value+=H,I.output=`(?:^|${G}|${z(x)}${G})`,oe.output=I.output,oe.globstar=!0,de(H+Ke()),Ne({type:"slash",value:"/",output:""});continue}oe.output=oe.output.slice(0,-I.output.length),I.type="globstar",I.output=z(x),I.value+=H,oe.output+=I.output,oe.globstar=!0,de(H);continue}const j={type:"star",value:H,output:Ve};if(x.bash===!0){j.output=".*?",(I.type==="bos"||I.type==="slash")&&(j.output=he+j.output),Ne(j);continue}if(I&&(I.type==="bracket"||I.type==="paren")&&x.regex===!0){j.output=H,Ne(j);continue}(oe.index===oe.start||I.type==="slash"||I.type==="dot")&&(I.type==="dot"?(oe.output+=ie,I.output+=ie):x.dot===!0?(oe.output+=Se,I.output+=Se):(oe.output+=he,I.output+=he),ge()!=="*"&&(oe.output+=ve,I.output+=ve)),Ne(j)}for(;oe.brackets>0;){if(x.strictBrackets===!0)throw new SyntaxError(U("closing","]"));oe.output=v.escapeLast(oe.output,"["),be("brackets")}for(;oe.parens>0;){if(x.strictBrackets===!0)throw new SyntaxError(U("closing",")"));oe.output=v.escapeLast(oe.output,"("),be("parens")}for(;oe.braces>0;){if(x.strictBrackets===!0)throw new SyntaxError(U("closing","}"));oe.output=v.escapeLast(oe.output,"{"),be("braces")}if(x.strictSlashes!==!0&&(I.type==="star"||I.type==="bracket")&&Ne({type:"maybe_slash",value:"",output:`${G}?`}),oe.backtrack===!0){oe.output="";for(const ae of oe.tokens)oe.output+=ae.output!=null?ae.output:ae.value,ae.suffix&&(oe.output+=ae.suffix)}return oe},"parse");W.fastpaths=(_,O)=>{const x={...O},J=typeof x.maxLength=="number"?Math.min(P,x.maxLength):P,se=_.length;if(se>J)throw new SyntaxError(`Input length: ${se}, exceeds maximum allowed length: ${J}`);_=m[_]||_;const Ae=v.isWindows(O),{DOT_LITERAL:$,SLASH_LITERAL:Q,ONE_CHAR:X,DOTS_SLASH:L,NO_DOT:Y,NO_DOTS:k,NO_DOTS_SLASH:le,STAR:G,START_ANCHOR:ve}=R.globChars(Ae),_e=x.dot?k:Y,Ie=x.dot?le:Y,ie=x.capture?"":"?:",Se={negated:!1,prefix:""};let D=x.bash===!0?".*?":G;x.capture&&(D=`(${D})`);const He=o(he=>he.noglobstar===!0?D:`(${ie}(?:(?!${ve}${he.dot?L:$}).)*?)`,"globstar"),fe=o(he=>{switch(he){case"*":return`${_e}${X}${D}`;case".*":return`${$}${X}${D}`;case"*.*":return`${_e}${D}${$}${X}${D}`;case"*/*":return`${_e}${D}${Q}${X}${Ie}${D}`;case"**":return _e+He(x);case"**/*":return`(?:${_e}${He(x)}${Q})?${Ie}${X}${D}`;case"**/*.*":return`(?:${_e}${He(x)}${Q})?${Ie}${D}${$}${X}${D}`;case"**/.*":return`(?:${_e}${He(x)}${Q})?${$}${X}${D}`;default:{const xe=/^(.*?)\.(\w+)$/.exec(he);if(!xe)return;const Ve=fe(xe[1]);return Ve?Ve+$+xe[2]:void 0}}},"create"),ue=v.removePrefix(_,Se);let z=fe(ue);return z&&x.strictSlashes!==!0&&(z+=`${Q}?`),z},at.exports=W},5761:(at,l,C)=>{"use strict";const R=C(6470),v=C(9826),P=C(3969),w=C(292),B=C(3889),N=o(y=>y&&typeof y=="object"&&!Array.isArray(y),"isObject"),m=o((y,U,W=!1)=>{if(Array.isArray(y)){const Q=y.map(L=>m(L,U,W));return o(L=>{for(const Y of Q){const k=Y(L);if(k)return k}return!1},"arrayMatcher")}const _=N(y)&&y.tokens&&y.input;if(y===""||typeof y!="string"&&!_)throw new TypeError("Expected pattern to be a non-empty string");const O=U||{},x=w.isWindows(U),J=_?m.compileRe(y,U):m.makeRe(y,U,!1,!0),se=J.state;delete J.state;let Ae=o(()=>!1,"isIgnored");if(O.ignore){const Q={...U,ignore:null,onMatch:null,onResult:null};Ae=m(O.ignore,Q,W)}const $=o((Q,X=!1)=>{const{isMatch:L,match:Y,output:k}=m.test(Q,J,U,{glob:y,posix:x}),le={glob:y,state:se,regex:J,posix:x,input:Q,output:k,match:Y,isMatch:L};return typeof O.onResult=="function"&&O.onResult(le),L===!1?(le.isMatch=!1,X?le:!1):Ae(Q)?(typeof O.onIgnore=="function"&&O.onIgnore(le),le.isMatch=!1,X?le:!1):(typeof O.onMatch=="function"&&O.onMatch(le),X?le:!0)},"matcher");return W&&($.state=se),$},"picomatch");m.test=(y,U,W,{glob:_,posix:O}={})=>{if(typeof y!="string")throw new TypeError("Expected input to be a string");if(y==="")return{isMatch:!1,output:""};const x=W||{},J=x.format||(O?w.toPosixSlashes:null);let se=y===_,Ae=se&&J?J(y):y;return se===!1&&(Ae=J?J(y):y,se=Ae===_),(se===!1||x.capture===!0)&&(x.matchBase===!0||x.basename===!0?se=m.matchBase(y,U,W,O):se=U.exec(Ae)),{isMatch:Boolean(se),match:se,output:Ae}},m.matchBase=(y,U,W,_=w.isWindows(W))=>(U instanceof RegExp?U:m.makeRe(U,W)).test(R.basename(y)),m.isMatch=(y,U,W)=>m(U,W)(y),m.parse=(y,U)=>Array.isArray(y)?y.map(W=>m.parse(W,U)):P(y,{...U,fastpaths:!1}),m.scan=(y,U)=>v(y,U),m.compileRe=(y,U,W=!1,_=!1)=>{if(W===!0)return y.output;const O=U||{},x=O.contains?"":"^",J=O.contains?"":"$";let se=`${x}(?:${y.output})${J}`;y&&y.negated===!0&&(se=`^(?!${se}).*$`);const Ae=m.toRegex(se,U);return _===!0&&(Ae.state=y),Ae},m.makeRe=(y,U={},W=!1,_=!1)=>{if(!y||typeof y!="string")throw new TypeError("Expected a non-empty string");let O={negated:!1,fastpaths:!0};return U.fastpaths!==!1&&(y[0]==="."||y[0]==="*")&&(O.output=P.fastpaths(y,U)),O.output||(O=P(y,U)),m.compileRe(O,U,W,_)},m.toRegex=(y,U)=>{try{const W=U||{};return new RegExp(y,W.flags||(W.nocase?"i":""))}catch(W){if(U&&U.debug===!0)throw W;return/$^/}},m.constants=B,at.exports=m},9826:(at,l,C)=>{"use strict";const R=C(292),{CHAR_ASTERISK:v,CHAR_AT:P,CHAR_BACKWARD_SLASH:w,CHAR_COMMA:B,CHAR_DOT:N,CHAR_EXCLAMATION_MARK:m,CHAR_FORWARD_SLASH:y,CHAR_LEFT_CURLY_BRACE:U,CHAR_LEFT_PARENTHESES:W,CHAR_LEFT_SQUARE_BRACKET:_,CHAR_PLUS:O,CHAR_QUESTION_MARK:x,CHAR_RIGHT_CURLY_BRACE:J,CHAR_RIGHT_PARENTHESES:se,CHAR_RIGHT_SQUARE_BRACKET:Ae}=C(3889),$=o(L=>L===y||L===w,"isPathSeparator"),Q=o(L=>{L.isPrefix!==!0&&(L.depth=L.isGlobstar?1/0:1)},"depth"),X=o((L,Y)=>{const k=Y||{},le=L.length-1,G=k.parts===!0||k.scanToEnd===!0,ve=[],_e=[],Ie=[];let ie=L,Se=-1,D=0,He=0,fe=!1,ue=!1,z=!1,he=!1,xe=!1,Ve=!1,oe=!1,nt=!1,dt=!1,ht=!1,I=0,H,ne,ge={value:"",depth:0,isGlob:!1};const Ke=o(()=>Se>=le,"eos"),Fe=o(()=>ie.charCodeAt(Se+1),"peek"),de=o(()=>(H=ne,ie.charCodeAt(++Se)),"advance");for(;Se<le;){ne=de();let Ne;if(ne===w){oe=ge.backslashes=!0,ne=de(),ne===U&&(Ve=!0);continue}if(Ve===!0||ne===U){for(I++;Ke()!==!0&&(ne=de());){if(ne===w){oe=ge.backslashes=!0,de();continue}if(ne===U){I++;continue}if(Ve!==!0&&ne===N&&(ne=de())===N){if(fe=ge.isBrace=!0,z=ge.isGlob=!0,ht=!0,G===!0)continue;break}if(Ve!==!0&&ne===B){if(fe=ge.isBrace=!0,z=ge.isGlob=!0,ht=!0,G===!0)continue;break}if(ne===J&&(I--,I===0)){Ve=!1,fe=ge.isBrace=!0,ht=!0;break}}if(G===!0)continue;break}if(ne===y){if(ve.push(Se),_e.push(ge),ge={value:"",depth:0,isGlob:!1},ht===!0)continue;if(H===N&&Se===D+1){D+=2;continue}He=Se+1;continue}if(k.noext!==!0&&(ne===O||ne===P||ne===v||ne===x||ne===m)===!0&&Fe()===W){if(z=ge.isGlob=!0,he=ge.isExtglob=!0,ht=!0,ne===m&&Se===D&&(dt=!0),G===!0){for(;Ke()!==!0&&(ne=de());){if(ne===w){oe=ge.backslashes=!0,ne=de();continue}if(ne===se){z=ge.isGlob=!0,ht=!0;break}}continue}break}if(ne===v){if(H===v&&(xe=ge.isGlobstar=!0),z=ge.isGlob=!0,ht=!0,G===!0)continue;break}if(ne===x){if(z=ge.isGlob=!0,ht=!0,G===!0)continue;break}if(ne===_){for(;Ke()!==!0&&(Ne=de());){if(Ne===w){oe=ge.backslashes=!0,de();continue}if(Ne===Ae){ue=ge.isBracket=!0,z=ge.isGlob=!0,ht=!0;break}}if(G===!0)continue;break}if(k.nonegate!==!0&&ne===m&&Se===D){nt=ge.negated=!0,D++;continue}if(k.noparen!==!0&&ne===W){if(z=ge.isGlob=!0,G===!0){for(;Ke()!==!0&&(ne=de());){if(ne===W){oe=ge.backslashes=!0,ne=de();continue}if(ne===se){ht=!0;break}}continue}break}if(z===!0){if(ht=!0,G===!0)continue;break}}k.noext===!0&&(he=!1,z=!1);let Ce=ie,Me="",Qe="";D>0&&(Me=ie.slice(0,D),ie=ie.slice(D),He-=D),Ce&&z===!0&&He>0?(Ce=ie.slice(0,He),Qe=ie.slice(He)):z===!0?(Ce="",Qe=ie):Ce=ie,Ce&&Ce!==""&&Ce!=="/"&&Ce!==ie&&$(Ce.charCodeAt(Ce.length-1))&&(Ce=Ce.slice(0,-1)),k.unescape===!0&&(Qe&&(Qe=R.removeBackslashes(Qe)),Ce&&oe===!0&&(Ce=R.removeBackslashes(Ce)));const be={prefix:Me,input:L,start:D,base:Ce,glob:Qe,isBrace:fe,isBracket:ue,isGlob:z,isExtglob:he,isGlobstar:xe,negated:nt,negatedExtglob:dt};if(k.tokens===!0&&(be.maxDepth=0,$(ne)||_e.push(ge),be.tokens=_e),k.parts===!0||k.tokens===!0){let Ne;for(let q=0;q<ve.length;q++){const Re=Ne?Ne+1:D,ae=ve[q],j=L.slice(Re,ae);k.tokens&&(q===0&&D!==0?(_e[q].isPrefix=!0,_e[q].value=Me):_e[q].value=j,Q(_e[q]),be.maxDepth+=_e[q].depth),(q!==0||j!=="")&&Ie.push(j),Ne=ae}if(Ne&&Ne+1<L.length){const q=L.slice(Ne+1);Ie.push(q),k.tokens&&(_e[_e.length-1].value=q,Q(_e[_e.length-1]),be.maxDepth+=_e[_e.length-1].depth)}be.slashes=ve,be.parts=Ie}return be},"scan");at.exports=X},292:(at,l,C)=>{"use strict";var R=C(6038);const v=C(6470),P=R.platform==="win32",{REGEX_BACKSLASH:w,REGEX_REMOVE_BACKSLASH:B,REGEX_SPECIAL_CHARS:N,REGEX_SPECIAL_CHARS_GLOBAL:m}=C(3889);l.isObject=y=>y!==null&&typeof y=="object"&&!Array.isArray(y),l.hasRegexChars=y=>N.test(y),l.isRegexChar=y=>y.length===1&&l.hasRegexChars(y),l.escapeRegex=y=>y.replace(m,"\\$1"),l.toPosixSlashes=y=>y.replace(w,"/"),l.removeBackslashes=y=>y.replace(B,U=>U==="\\"?"":U),l.supportsLookbehinds=()=>{const y=R.version.slice(1).split(".").map(Number);return y.length===3&&y[0]>=9||y[0]===8&&y[1]>=10},l.isWindows=y=>y&&typeof y.windows=="boolean"?y.windows:P===!0||v.sep==="\\",l.escapeLast=(y,U,W)=>{const _=y.lastIndexOf(U,W);return _===-1?y:y[_-1]==="\\"?l.escapeLast(y,U,_-1):`${y.slice(0,_)}\\${y.slice(_)}`},l.removePrefix=(y,U={})=>{let W=y;return W.startsWith("./")&&(W=W.slice(2),U.prefix="./"),W},l.wrapOutput=(y,U={},W={})=>{const _=W.contains?"":"^",O=W.contains?"":"$";let x=`${_}(?:${y})${O}`;return U.negated===!0&&(x=`(?:^(?!${x}).*$)`),x}},6038:at=>{var l=at.exports={},C,R;function v(){throw new Error("setTimeout has not been defined")}o(v,"defaultSetTimout");function P(){throw new Error("clearTimeout has not been defined")}o(P,"defaultClearTimeout"),function(){try{typeof setTimeout=="function"?C=setTimeout:C=v}catch(J){C=v}try{typeof clearTimeout=="function"?R=clearTimeout:R=P}catch(J){R=P}}();function w(J){if(C===setTimeout)return setTimeout(J,0);if((C===v||!C)&&setTimeout)return C=setTimeout,setTimeout(J,0);try{return C(J,0)}catch(se){try{return C.call(null,J,0)}catch(Ae){return C.call(this,J,0)}}}o(w,"runTimeout");function B(J){if(R===clearTimeout)return clearTimeout(J);if((R===P||!R)&&clearTimeout)return R=clearTimeout,clearTimeout(J);try{return R(J)}catch(se){try{return R.call(null,J)}catch(Ae){return R.call(this,J)}}}o(B,"runClearTimeout");var N=[],m=!1,y,U=-1;function W(){!m||!y||(m=!1,y.length?N=y.concat(N):U=-1,N.length&&_())}o(W,"cleanUpNextTick");function _(){if(!m){var J=w(W);m=!0;for(var se=N.length;se;){for(y=N,N=[];++U<se;)y&&y[U].run();U=-1,se=N.length}y=null,m=!1,B(J)}}o(_,"drainQueue"),l.nextTick=function(J){var se=new Array(arguments.length-1);if(arguments.length>1)for(var Ae=1;Ae<arguments.length;Ae++)se[Ae-1]=arguments[Ae];N.push(new O(J,se)),N.length===1&&!m&&w(_)};function O(J,se){this.fun=J,this.array=se}o(O,"Item"),O.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={};function x(){}o(x,"noop"),l.on=x,l.addListener=x,l.once=x,l.off=x,l.removeListener=x,l.removeAllListeners=x,l.emit=x,l.prependListener=x,l.prependOnceListener=x,l.listeners=function(J){return[]},l.binding=function(J){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(J){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},2999:(at,l,C)=>{"use strict";/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */const R=C(3338),v=o(($,Q,X)=>{if(R($)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(Q===void 0||$===Q)return String($);if(R(Q)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let L={relaxZeros:!0,...X};typeof L.strictZeros=="boolean"&&(L.relaxZeros=L.strictZeros===!1);let Y=String(L.relaxZeros),k=String(L.shorthand),le=String(L.capture),G=String(L.wrap),ve=$+":"+Q+"="+Y+k+le+G;if(v.cache.hasOwnProperty(ve))return v.cache[ve].result;let _e=Math.min($,Q),Ie=Math.max($,Q);if(Math.abs(_e-Ie)===1){let fe=$+"|"+Q;return L.capture?`(${fe})`:L.wrap===!1?fe:`(?:${fe})`}let ie=se($)||se(Q),Se={min:$,max:Q,a:_e,b:Ie},D=[],He=[];if(ie&&(Se.isPadded=ie,Se.maxLen=String(Se.max).length),_e<0){let fe=Ie<0?Math.abs(Ie):1;He=N(fe,Math.abs(_e),Se,L),_e=Se.a=0}return Ie>=0&&(D=N(_e,Ie,Se,L)),Se.negatives=He,Se.positives=D,Se.result=P(He,D,L),L.capture===!0?Se.result=`(${Se.result})`:L.wrap!==!1&&D.length+He.length>1&&(Se.result=`(?:${Se.result})`),v.cache[ve]=Se,Se.result},"toRegexRange");function P($,Q,X){let L=m($,Q,"-",!1,X)||[],Y=m(Q,$,"",!1,X)||[],k=m($,Q,"-?",!0,X)||[];return L.concat(k).concat(Y).join("|")}o(P,"collatePatterns");function w($,Q){let X=1,L=1,Y=_($,X),k=new Set([Q]);for(;$<=Y&&Y<=Q;)k.add(Y),X+=1,Y=_($,X);for(Y=O(Q+1,L)-1;$<Y&&Y<=Q;)k.add(Y),L+=1,Y=O(Q+1,L)-1;return k=[...k],k.sort(U),k}o(w,"splitToRanges");function B($,Q,X){if($===Q)return{pattern:$,count:[],digits:0};let L=y($,Q),Y=L.length,k="",le=0;for(let G=0;G<Y;G++){let[ve,_e]=L[G];ve===_e?k+=ve:ve!=="0"||_e!=="9"?k+=J(ve,_e,X):le++}return le&&(k+=X.shorthand===!0?"\\d":"[0-9]"),{pattern:k,count:[le],digits:Y}}o(B,"rangeToPattern");function N($,Q,X,L){let Y=w($,Q),k=[],le=$,G;for(let ve=0;ve<Y.length;ve++){let _e=Y[ve],Ie=B(String(le),String(_e),L),ie="";if(!X.isPadded&&G&&G.pattern===Ie.pattern){G.count.length>1&&G.count.pop(),G.count.push(Ie.count[0]),G.string=G.pattern+x(G.count),le=_e+1;continue}X.isPadded&&(ie=Ae(_e,X,L)),Ie.string=ie+Ie.pattern+x(Ie.count),k.push(Ie),le=_e+1,G=Ie}return k}o(N,"splitToPatterns");function m($,Q,X,L,Y){let k=[];for(let le of $){let{string:G}=le;!L&&!W(Q,"string",G)&&k.push(X+G),L&&W(Q,"string",G)&&k.push(X+G)}return k}o(m,"filterPatterns");function y($,Q){let X=[];for(let L=0;L<$.length;L++)X.push([$[L],Q[L]]);return X}o(y,"zip");function U($,Q){return $>Q?1:Q>$?-1:0}o(U,"compare");function W($,Q,X){return $.some(L=>L[Q]===X)}o(W,"contains");function _($,Q){return Number(String($).slice(0,-Q)+"9".repeat(Q))}o(_,"countNines");function O($,Q){return $-$%Math.pow(10,Q)}o(O,"countZeros");function x($){let[Q=0,X=""]=$;return X||Q>1?`{${Q+(X?","+X:"")}}`:""}o(x,"toQuantifier");function J($,Q,X){return`[${$}${Q-$==1?"":"-"}${Q}]`}o(J,"toCharacterClass");function se($){return/^-?(0+)\d/.test($)}o(se,"hasPadding");function Ae($,Q,X){if(!Q.isPadded)return $;let L=Math.abs(Q.maxLen-String($).length),Y=X.relaxZeros!==!1;switch(L){case 0:return"";case 1:return Y?"0?":"0";case 2:return Y?"0{0,2}":"00";default:return Y?`0{0,${L}}`:`0{${L}}`}}o(Ae,"padZeros"),v.cache={},v.clearCache=()=>v.cache={},at.exports=v},6724:()=>{},6470:(at,l,C)=>{"use strict";var R=C(4155);function v(N){if(typeof N!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(N))}o(v,"assertPath");function P(N,m){for(var y="",U=0,W=-1,_=0,O,x=0;x<=N.length;++x){if(x<N.length)O=N.charCodeAt(x);else{if(O===47)break;O=47}if(O===47){if(!(W===x-1||_===1))if(W!==x-1&&_===2){if(y.length<2||U!==2||y.charCodeAt(y.length-1)!==46||y.charCodeAt(y.length-2)!==46){if(y.length>2){var J=y.lastIndexOf("/");if(J!==y.length-1){J===-1?(y="",U=0):(y=y.slice(0,J),U=y.length-1-y.lastIndexOf("/")),W=x,_=0;continue}}else if(y.length===2||y.length===1){y="",U=0,W=x,_=0;continue}}m&&(y.length>0?y+="/..":y="..",U=2)}else y.length>0?y+="/"+N.slice(W+1,x):y=N.slice(W+1,x),U=x-W-1;W=x,_=0}else O===46&&_!==-1?++_:_=-1}return y}o(P,"normalizeStringPosix");function w(N,m){var y=m.dir||m.root,U=m.base||(m.name||"")+(m.ext||"");return y?y===m.root?y+U:y+N+U:U}o(w,"_format");var B={resolve:o(function(){for(var m="",y=!1,U,W=arguments.length-1;W>=-1&&!y;W--){var _;W>=0?_=arguments[W]:(U===void 0&&(U=R.cwd()),_=U),v(_),_.length!==0&&(m=_+"/"+m,y=_.charCodeAt(0)===47)}return m=P(m,!y),y?m.length>0?"/"+m:"/":m.length>0?m:"."},"resolve"),normalize:o(function(m){if(v(m),m.length===0)return".";var y=m.charCodeAt(0)===47,U=m.charCodeAt(m.length-1)===47;return m=P(m,!y),m.length===0&&!y&&(m="."),m.length>0&&U&&(m+="/"),y?"/"+m:m},"normalize"),isAbsolute:o(function(m){return v(m),m.length>0&&m.charCodeAt(0)===47},"isAbsolute"),join:o(function(){if(arguments.length===0)return".";for(var m,y=0;y<arguments.length;++y){var U=arguments[y];v(U),U.length>0&&(m===void 0?m=U:m+="/"+U)}return m===void 0?".":B.normalize(m)},"join"),relative:o(function(m,y){if(v(m),v(y),m===y||(m=B.resolve(m),y=B.resolve(y),m===y))return"";for(var U=1;U<m.length&&m.charCodeAt(U)===47;++U);for(var W=m.length,_=W-U,O=1;O<y.length&&y.charCodeAt(O)===47;++O);for(var x=y.length,J=x-O,se=_<J?_:J,Ae=-1,$=0;$<=se;++$){if($===se){if(J>se){if(y.charCodeAt(O+$)===47)return y.slice(O+$+1);if($===0)return y.slice(O+$)}else _>se&&(m.charCodeAt(U+$)===47?Ae=$:$===0&&(Ae=0));break}var Q=m.charCodeAt(U+$),X=y.charCodeAt(O+$);if(Q!==X)break;Q===47&&(Ae=$)}var L="";for($=U+Ae+1;$<=W;++$)($===W||m.charCodeAt($)===47)&&(L.length===0?L+="..":L+="/..");return L.length>0?L+y.slice(O+Ae):(O+=Ae,y.charCodeAt(O)===47&&++O,y.slice(O))},"relative"),_makeLong:o(function(m){return m},"_makeLong"),dirname:o(function(m){if(v(m),m.length===0)return".";for(var y=m.charCodeAt(0),U=y===47,W=-1,_=!0,O=m.length-1;O>=1;--O)if(y=m.charCodeAt(O),y===47){if(!_){W=O;break}}else _=!1;return W===-1?U?"/":".":U&&W===1?"//":m.slice(0,W)},"dirname"),basename:o(function(m,y){if(y!==void 0&&typeof y!="string")throw new TypeError('"ext" argument must be a string');v(m);var U=0,W=-1,_=!0,O;if(y!==void 0&&y.length>0&&y.length<=m.length){if(y.length===m.length&&y===m)return"";var x=y.length-1,J=-1;for(O=m.length-1;O>=0;--O){var se=m.charCodeAt(O);if(se===47){if(!_){U=O+1;break}}else J===-1&&(_=!1,J=O+1),x>=0&&(se===y.charCodeAt(x)?--x==-1&&(W=O):(x=-1,W=J))}return U===W?W=J:W===-1&&(W=m.length),m.slice(U,W)}else{for(O=m.length-1;O>=0;--O)if(m.charCodeAt(O)===47){if(!_){U=O+1;break}}else W===-1&&(_=!1,W=O+1);return W===-1?"":m.slice(U,W)}},"basename"),extname:o(function(m){v(m);for(var y=-1,U=0,W=-1,_=!0,O=0,x=m.length-1;x>=0;--x){var J=m.charCodeAt(x);if(J===47){if(!_){U=x+1;break}continue}W===-1&&(_=!1,W=x+1),J===46?y===-1?y=x:O!==1&&(O=1):y!==-1&&(O=-1)}return y===-1||W===-1||O===0||O===1&&y===W-1&&y===U+1?"":m.slice(y,W)},"extname"),format:o(function(m){if(m===null||typeof m!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof m);return w("/",m)},"format"),parse:o(function(m){v(m);var y={root:"",dir:"",base:"",ext:"",name:""};if(m.length===0)return y;var U=m.charCodeAt(0),W=U===47,_;W?(y.root="/",_=1):_=0;for(var O=-1,x=0,J=-1,se=!0,Ae=m.length-1,$=0;Ae>=_;--Ae){if(U=m.charCodeAt(Ae),U===47){if(!se){x=Ae+1;break}continue}J===-1&&(se=!1,J=Ae+1),U===46?O===-1?O=Ae:$!==1&&($=1):O!==-1&&($=-1)}return O===-1||J===-1||$===0||$===1&&O===J-1&&O===x+1?J!==-1&&(x===0&&W?y.base=y.name=m.slice(1,J):y.base=y.name=m.slice(x,J)):(x===0&&W?(y.name=m.slice(1,O),y.base=m.slice(1,J)):(y.name=m.slice(x,O),y.base=m.slice(x,J)),y.ext=m.slice(O,J)),x>0?y.dir=m.slice(0,x-1):W&&(y.dir="/"),y},"parse"),sep:"/",delimiter:":",win32:null,posix:null};B.posix=B,at.exports=B},4155:at=>{var l=at.exports={},C,R;function v(){throw new Error("setTimeout has not been defined")}o(v,"defaultSetTimout");function P(){throw new Error("clearTimeout has not been defined")}o(P,"defaultClearTimeout"),function(){try{typeof setTimeout=="function"?C=setTimeout:C=v}catch(J){C=v}try{typeof clearTimeout=="function"?R=clearTimeout:R=P}catch(J){R=P}}();function w(J){if(C===setTimeout)return setTimeout(J,0);if((C===v||!C)&&setTimeout)return C=setTimeout,setTimeout(J,0);try{return C(J,0)}catch(se){try{return C.call(null,J,0)}catch(Ae){return C.call(this,J,0)}}}o(w,"runTimeout");function B(J){if(R===clearTimeout)return clearTimeout(J);if((R===P||!R)&&clearTimeout)return R=clearTimeout,clearTimeout(J);try{return R(J)}catch(se){try{return R.call(null,J)}catch(Ae){return R.call(this,J)}}}o(B,"runClearTimeout");var N=[],m=!1,y,U=-1;function W(){!m||!y||(m=!1,y.length?N=y.concat(N):U=-1,N.length&&_())}o(W,"cleanUpNextTick");function _(){if(!m){var J=w(W);m=!0;for(var se=N.length;se;){for(y=N,N=[];++U<se;)y&&y[U].run();U=-1,se=N.length}y=null,m=!1,B(J)}}o(_,"drainQueue"),l.nextTick=function(J){var se=new Array(arguments.length-1);if(arguments.length>1)for(var Ae=1;Ae<arguments.length;Ae++)se[Ae-1]=arguments[Ae];N.push(new O(J,se)),N.length===1&&!m&&w(_)};function O(J,se){this.fun=J,this.array=se}o(O,"Item"),O.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={};function x(){}o(x,"noop"),l.on=x,l.addListener=x,l.once=x,l.off=x,l.removeListener=x,l.removeAllListeners=x,l.emit=x,l.prependListener=x,l.prependOnceListener=x,l.listeners=function(J){return[]},l.binding=function(J){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(J){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},6529:()=>{},6391:()=>{}},Ja={};function sr(at){var l=Ja[at];if(l!==void 0)return l.exports;var C=Ja[at]={id:at,loaded:!1,exports:{}};return _o[at](C,C.exports,sr),C.loaded=!0,C.exports}o(sr,"__webpack_require__"),(()=>{sr.n=at=>{var l=at&&at.__esModule?()=>at.default:()=>at;return sr.d(l,{a:l}),l}})(),(()=>{sr.d=(at,l)=>{for(var C in l)sr.o(l,C)&&!sr.o(at,C)&&Object.defineProperty(at,C,{enumerable:!0,get:l[C]})}})(),(()=>{sr.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(at){if(typeof window=="object")return window}}()})(),(()=>{sr.o=(at,l)=>Object.prototype.hasOwnProperty.call(at,l)})(),(()=>{sr.r=at=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(at,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(at,"__esModule",{value:!0})}})(),(()=>{sr.nmd=at=>(at.paths=[],at.children||(at.children=[]),at)})();var Eo={};(()=>{"use strict";sr.r(Eo),sr.d(Eo,{AllowedProviderExtensionIds:()=>Jo,StateKeys:()=>ga,activate:()=>bc,ensureProvidersRegistered:()=>Ur,getOpenActionsService:()=>So,getState:()=>el,isPreRelease:()=>Cc,updateState:()=>Vo});var at={};sr.r(at),sr.d(at,{max:()=>Ml,min:()=>Tl});const l=require("vscode"),C=new TextDecoder,R=new TextEncoder,v=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function P(t){const e=R.encode(t),n=new Array(e.length);for(let r=0;r<e.length;++r)n[r]=v[e[r]];return n.join("")}o(P,"encodeUtf8Hex");function w(t){const e=t.match(/(\w{2})/g);if(e===null)return"";const n=new Uint8Array(e.map(r=>parseInt(r,16)));return C.decode(n)}o(w,"decodeUtf8Hex");const B=/^[0-9a-f]{40}$/i;function N(t){return t!==void 0&&B.test(t)}o(N,"isSha");const m=/^[^/](?!.*\/\.)(?!.*\.\.)(?!.*\/\/)(?!.*@\{)[^\000-\037\177 ~^:?*[\\]+[^./]$/;function y(t){return m.test(t)}o(y,"isValidBranchName");function U(t){return t===""||t==="~"||t==="HEAD"?t:t.endsWith("^")?`${t.substr(0,7)}^`:t.substr(0,7)}o(U,"shortenRef");const W=47;function _(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,fragment:""}).toString()}o(_,"asKey");function O(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.query&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,query:"",fragment:""}).toString()}o(O,"asFileKey");function x(t,e){return`${(e==null?void 0:e.excludeScheme)?"":`${t.scheme}-`}${t.authority}${t.path.endsWith("/")?t.path.slice(0,-1):t.path}`}o(x,"asFileStorageKey");function J(t){const e=typeof t=="string"?t:t.path;let n=0,r=-1,i=!0;for(let a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===W){if(!i){n=a+1;break}}else r===-1&&(i=!1,r=a+1);return r===-1?"":e.slice(n,r)}o(J,"basename");function se(t){const e=t.path;if(e.length===1)return"/";let n,r=-1,i=!0;for(let a=e.length-1;a>=1;--a)if(n=e.charCodeAt(a),n===W){if(!i){r=a;break}}else i=!1;return r===-1?"/":e.slice(0,r)}o(se,"dirname");function Ae(t){const e=t.path.lastIndexOf("/");return e===-1?t.with({path:"/"}):t.with({path:t.path.substring(0,e)})}o(Ae,"getParent");function $(t,e){const n=typeof e=="string"?e:e.path;return n.startsWith(t.path)?l.Uri.joinPath(t,n.substr(t.path.length)):l.Uri.joinPath(t,n)}o($,"joinRelativePath");function Q(t,e){return typeof e=="string"?(e.startsWith("/")||(e=`/${e}`),X(t,e)&&t.path.substr(e.length+(e.endsWith("/")?0:1)).split("/").length===1):X(t,e)&&t.path.substr(e.path.length+(e.path.endsWith("/")?0:1)).split("/").length===1}o(Q,"isChild");function X(t,e){if(typeof t=="string")return e=typeof e=="string"?e:e.path,e.startsWith("/")||(e=`/${e}`),e.length===1||t.startsWith(e.endsWith("/")?e:`${e}/`);if(typeof e=="string"){e.startsWith("/")||(e=`/${e}`);const n=typeof t=="string"?t:t.path;return e.length===1||n.startsWith(e.endsWith("/")?e:`${e}/`)}return e.scheme===t.scheme&&e.authority===t.authority&&(e.path.length===1||t.path.startsWith(e.path.endsWith("/")?e.path:`${e.path}/`))}o(X,"isDescendent");function L(t){return t&&typeof t=="object"&&"scheme"in t}o(L,"isSerializedUri");function Y(t){return t.split("/").map(e=>encodeURIComponent(e)).join("/")}o(Y,"encodeURIComponentExceptSlashes");var k;(function(t){t.authoritySeparator="+",t.scheme="vscode-vfs",t.baseVirtualWorkspaceUri=l.Uri.parse(`${t.scheme}://`);function e(d){const{authority:f}=d,h=f.indexOf(t.authoritySeparator);return h!==-1?f.substr(0,h):f}o(e,"getProviderId"),t.getProviderId=e;function n(d){return d.scheme!==t.scheme?d:d.with({scheme:e(d)})}o(n,"getProviderUri"),t.getProviderUri=n;function r(d,f){const h=new Map,p=l.workspace.textDocuments;if(p.length===0)return h;for(const b of p)b.uri.scheme===d&&f.some(Z=>X(b.uri,Z))&&h.set(_(b.uri),b.uri);return h}o(r,"getOpenUris"),t.getOpenUris=r;function i(d){return d.scheme===t.scheme?d:d.with({scheme:t.scheme})}o(i,"getVirtualUri"),t.getVirtualUri=i;function a(d,f){const[h,p]=d.authority.split(t.authoritySeparator);let b;if(p)try{const Z=JSON.parse(w(p));b=f?f(Z):Z}catch{}return{scheme:h,metadata:b}}o(a,"decodeAuthority"),t.decodeAuthority=a;function s(d,f){const h=f?`${t.authoritySeparator}${P(JSON.stringify(f))}`:"";return`${d}${h}`}o(s,"encodeAuthority"),t.encodeAuthority=s;function c(d){return d.authority.indexOf(t.authoritySeparator)===-1}o(c,"isCanonicalUri"),t.isCanonicalUri=c;function u(){var d,f;return(f=(d=l.workspace.workspaceFolders)==null?void 0:d.every(h=>h.uri.scheme===t.scheme))!=null?f:!1}o(u,"isVirtualWorkspace"),t.isVirtualWorkspace=u})(k||(k={}));var le;(function(t){t[t.Admin=100]="Admin",t[t.Maintain=40]="Maintain",t[t.WriteToPullRequest=31]="WriteToPullRequest",t[t.Write=30]="Write",t[t.Triage=20]="Triage",t[t.Read=10]="Read",t[t.None=0]="None"})(le||(le={}));var G;(function(t){t[t.Branch=0]="Branch",t[t.RemoteBranch=1]="RemoteBranch",t[t.Tag=2]="Tag",t[t.Commit=3]="Commit"})(G||(G={}));var ve;(function(t){function e(n){return n!==void 0&&n.type===ie.Active}o(e,"isActive"),t.isActive=e})(ve||(ve={}));var _e;(function(t){function e(n){const r=k.decodeAuthority(n).metadata;if(!(r===void 0||r.idx===void 0)){if(r.idx==="latest")return{type:Ie.Latest};if(N(r.idx))return{type:Ie.SHA,sha:r.idx}}}o(e,"decode"),t.decode=e})(_e||(_e={}));var Ie;(function(t){t[t.Latest=1]="Latest",t[t.SHA=2]="SHA"})(Ie||(Ie={}));var ie;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.Indexed=1]="Indexed",t[t.Match=2]="Match",t[t.Active=3]="Active"})(ie||(ie={})),function(t){function e(n){return n!==void 0&&(n===t.Indexed||n===t.Match||n===t.Active)}o(e,"hasIndex"),t.hasIndex=e}(ie||(ie={}));var Se;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed",t[t.Merged=2]="Merged"})(Se||(Se={}));var D;(function(t){t[t.Changed=1]="Changed",t[t.Created=2]="Created",t[t.Deleted=3]="Deleted"})(D||(D={}));var He;(function(t){t.CurrentWindow="currentWindow",t.NewWindow="newWindow",t.AddToWorkspace="addToWorkspace"})(He||(He={}));var fe;(function(t){t[t.Branch=0]="Branch",t[t.Tag=1]="Tag",t[t.Commit=2]="Commit",t[t.PullRequest=3]="PullRequest",t[t.Tree=4]="Tree"})(fe||(fe={}));var ue;(function(t){t[t.Abort=0]="Abort",t[t.KeepCurrent=1]="KeepCurrent",t[t.DiscardCurrent=2]="DiscardCurrent",t[t.Merge=3]="Merge"})(ue||(ue={}));var z;(function(t){t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.File=4]="File",t[t.Tag=5]="Tag"})(z||(z={}));var he;(function(t){t.Branch="branch",t.RemoteBranch="remoteBranch",t.PullRequestBranch="pullRequestBranch",t.PullRequestRemoteBranch="pullRequestRemoteBranch",t.Tag="tag",t.Commit="commit"})(he||(he={}));var xe;(function(t){t.None="none",t.Latest="latest",t.Match="match",t.TipPlusLatest="tip+latest"})(xe||(xe={}));var Ve;(function(t){t.Browse="browse",t.Edit="edit"})(Ve||(Ve={}));var oe;(function(t){t.CommitFailedError="CommitFailedError",t.DetachedHEADError="DetachedHEADError",t.CommitToProtectedBranchError="CommitToProtectedBranchError",t.CommitToArchivedRepositoryError="CommitToArchivedRepositoryError",t.InvalidBranchNameError="InvalidBranchNameError",t.InvalidCredentialsError="InvalidCredentialsError",t.MergeConflictError="MergeConflictError",t.NothingToCommitError="NothingToCommitError",t.SyncConflictsError="SyncConflictsError",t.SyncOrFetchError="SyncOrFetchError",t.UnresolvedConflictsError="UnresolvedConflictsError",t.InvalidRepositoryError="InvalidRepositoryError",t.Unknown="Unknown"})(oe||(oe={}));class nt extends Error{constructor(e,n,r){super(typeof e=="string"?e:e.message);this.messageOrError=e,this.errorCode=n,this.action=r}static CommitFailedError(){return new nt("Failed to create and push commit",oe.CommitFailedError)}static DetachedHEADError(e){return new nt(e,oe.DetachedHEADError)}static CommitToProtectedBranchError(e){return new nt(e,oe.CommitToProtectedBranchError)}static CommitToArchivedRepositoryError(e){return new nt(e,oe.CommitToArchivedRepositoryError)}static InvalidBranchNameError(e,n=!1){const r=n?`Branch '${e}' already exists`:`Invalid branch name '${e}'`;return new nt(r,oe.InvalidBranchNameError)}static InvalidCredentialsError(e,n){return new nt(e,oe.InvalidCredentialsError,n)}static MergeConflictError(e){return new nt(e,oe.MergeConflictError)}static NothingToCommitError(e){return new nt(e,oe.NothingToCommitError)}static SyncOrFetchError(e=!1){const n=e?"Unable to sync the repository":"Unable to fetch the repository";return new nt(n,oe.SyncOrFetchError)}static SyncConflictsError(){const e="Sync operation will result in conflicts";return new nt(e,oe.SyncConflictsError)}static UnresolvedConflictsError(){return new nt("You have unresolved merge conflicts.",oe.UnresolvedConflictsError)}static InvalidRepositoryError(){return new nt("The current repository is invalid",oe.InvalidRepositoryError)}static asVirtualProviderErrorCode(e){return e instanceof Error&&"messageOrError"in e&&"errorCode"in e?e.errorCode:oe.Unknown}}o(nt,"VirtualProviderError");const dt=6;var ht;(function(t){t.Off="off",t.Auto="auto",t.Always="always"})(ht||(ht={}));var I;(function(t){t.None="none",t.Latest="latest",t.Match="match",t.TipPlusLatest="tip+latest"})(I||(I={})),function(t){function e(n){return n===t.None||n===t.Latest||n===t.Match||n===t.TipPlusLatest?n:t.None}o(e,"sanitize"),t.sanitize=e}(I||(I={}));var H;(function(t){t.Browse="browse",t.Edit="edit"})(H||(H={})),function(t){function e(r){return r===t.Browse||r===t.Edit?r:t.Edit}o(e,"sanitize"),t.sanitize=e;function n(r){return r===t.Browse?t.Edit:t.Browse}o(n,"toggle"),t.toggle=n}(H||(H={}));var ne;(function(t){function e(n,r){return n.display===r.display&&n.index===r.index}o(e,"equals"),t.equals=e})(ne||(ne={}));var ge;(function(t){const e=new Map([[he.Branch,I.None],[he.RemoteBranch,I.None],[he.PullRequestBranch,I.Match],[he.PullRequestRemoteBranch,I.Match],[he.Commit,I.Match],[he.Tag,I.Match]]),n=new Map([[he.Branch,H.Edit],[he.RemoteBranch,H.Edit],[he.PullRequestBranch,H.Browse],[he.PullRequestRemoteBranch,H.Browse],[he.Commit,H.Browse],[he.Tag,H.Browse]]);function r(a){var s,c;return{display:(s=n.get(a))!=null?s:H.Edit,index:(c=e.get(a))!=null?c:I.None}}o(r,"getDefault"),t.getDefault=r;function i(a){switch(a){case he.Branch:case he.RemoteBranch:return{display:H.Browse,index:I.Latest};case he.PullRequestBranch:case he.PullRequestRemoteBranch:return{display:H.Browse,index:I.Match};case he.Commit:case he.Tag:return{display:H.Browse,index:I.Match};default:return{display:H.Edit,index:I.None}}}o(i,"getIndexDefault"),t.getIndexDefault=i})(ge||(ge={}));const Ke=null;var Fe=sr(5179),de=sr.n(Fe);const Ce="modes",Me="indexMemento";class Qe{constructor(){this._onDidChange=new l.EventEmitter,this._onDidChangeAny=new l.EventEmitter,this.memoryState=new Map}static configure(e,n){be.configPrefix=e,be.state=n.workspaceState,n.subscriptions.push(l.workspace.onDidChangeConfiguration(be.onConfigurationChanged,be))}get onDidChange(){return this._onDidChange.event}get onDidChangeAny(){return this._onDidChangeAny.event}onConfigurationChanged(e){if(!e.affectsConfiguration(this.configPrefix)){this._onDidChangeAny.fire(e);return}this._onDidChangeAny.fire(e),this._onDidChange.fire(e)}set state(e){if(this._state=e,this.modes=this._state.get(Ce),this.modes===void 0&&(this.modes=Object.create(null)),this.memoryState.size!==0){for(const n of this.memoryState.entries())this.modes[n[0]]=n[1];this._state.update(Ce,this.modes).then(()=>{this.memoryState.clear()},void 0)}this.indexMemento=this._state.get(Me),this.indexMemento===void 0&&(this.indexMemento=Object.create(null))}getEffective(e,n,r){const i=this.inspect(e,n);return i===void 0&&r!==void 0?r:(i==null?void 0:i.workspaceFolderValue)!==void 0?i.workspaceFolderValue:(i==null?void 0:i.workspaceValue)!==void 0?i.workspaceValue:i==null?void 0:i.globalValue}get(e,n,r){return r===void 0?l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).get(e===void 0?this.configPrefix:e):l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).get(e===void 0?this.configPrefix:e,r)}getMode(e,n,r){var i;const a=e.toString();let s=this.modes!==void 0?this.modes[a]:void 0;if(s!==void 0)return{display:H.sanitize(s.display),index:I.sanitize(s.index)};if(s=this.memoryState.get(a),s!==void 0)return s;if(n===he.Branch||n===he.RemoteBranch)switch((i=l.workspace.getConfiguration("remoteHub.richNavigation.indexMode",e))==null?void 0:i.get("branch")){case"none":return{display:H.Edit,index:I.None};case"latest":return{display:H.Browse,index:I.Latest};case"tipPlusLatest":return{display:H.Edit,index:I.TipPlusLatest}}if(!r)return ge.getDefault(n)}setMode(e,n){const r=e.toString();return this._state===void 0||this.modes===void 0?(this.memoryState.set(r,n),Promise.resolve()):(this.modes[r]=n,this._state.update(Ce,this.modes))}getIndexMemento(e){if(this.indexMemento!==void 0)return this.indexMemento[e.toString()]}setIndexMemento(e,n){return this.indexMemento===void 0||this._state===void 0?Promise.resolve():(this.indexMemento[e.toString()]=n,this._state.update(Me,this.indexMemento))}getAny(e,n,r){return r===void 0?l.workspace.getConfiguration(void 0,n).get(e):l.workspace.getConfiguration(void 0,n).get(e,r)}changed(e,n,r){var i;return(i=e==null?void 0:e.affectsConfiguration(`${this.configPrefix}.${n}`,r))!=null?i:!0}inspect(e,n){return l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).inspect(e===void 0?this.configPrefix:e)}inspectAny(e,n){return l.workspace.getConfiguration(void 0,n).inspect(e)}async migrate(e,n,r){const i=be.inspect(e);if(i===void 0)return!1;let a=!1;return i.globalValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.globalValue):i.globalValue,l.ConfigurationTarget.Global),a=!0),i.workspaceValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceValue):i.workspaceValue,l.ConfigurationTarget.Workspace),a=!0),i.workspaceFolderValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,l.ConfigurationTarget.WorkspaceFolder),a=!0),!a&&r.fallbackValue!==void 0&&(await this.update(n,r.fallbackValue,l.ConfigurationTarget.Global),a=!0),a}async migrateIfMissing(e,n,r){const i=be.inspect(e);if(i===void 0)return;const a=be.inspect(n);i.globalValue!==void 0&&(a===void 0||a.globalValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.globalValue):i.globalValue,l.ConfigurationTarget.Global),i.workspaceValue!==void 0&&(a===void 0||a.workspaceValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceValue):i.workspaceValue,l.ConfigurationTarget.Workspace),i.workspaceFolderValue!==void 0&&(a===void 0||a.workspaceFolderValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,l.ConfigurationTarget.WorkspaceFolder)}name(e){return e}update(e,n,r){return l.workspace.getConfiguration(this.configPrefix).update(e,n,r)}updateAny(e,n,r,i){return l.workspace.getConfiguration(void 0,r===l.ConfigurationTarget.Global?void 0:i).update(e,n,r)}updateEffective(e,n){const r=be.inspect(e);return r.workspaceFolderValue!==void 0?n===r.workspaceFolderValue?Promise.resolve(void 0):be.update(e,n,l.ConfigurationTarget.WorkspaceFolder):r.workspaceValue!==void 0?n===r.workspaceValue?Promise.resolve(void 0):be.update(e,n,l.ConfigurationTarget.Workspace):r.globalValue===n||r.globalValue===void 0&&n===r.defaultValue?Promise.resolve(void 0):be.update(e,de()(n,r.defaultValue)?void 0:n,l.ConfigurationTarget.Global)}}o(Qe,"Configuration");const be=new Qe,Ne="";var q;(function(t){t[t.Off=0]="Off",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Info=3]="Info",t[t.Debug=4]="Debug"})(q||(q={}));const Re="[RemoteHub]",ae=o(class{static configure(t,e){this._isDebugging=t.extensionMode===l.ExtensionMode.Development,this.outputChannelName=e}static enabled(t){return this.level>=this.toOrderedLevel(t)}static toOrderedLevel(t){switch(t){case l.LogLevel.Off:return 0;case l.LogLevel.Error:return 1;case l.LogLevel.Warning:return 2;case l.LogLevel.Info:return 3;case l.LogLevel.Debug:case l.LogLevel.Trace:return 4}}static get isDebugging(){return this._isDebugging}static ensureOutputChannel(){var t;this.level=this.toOrderedLevel(l.env.logLevel),this.output=(t=this.output)!=null?t:l.window.createOutputChannel(this.outputChannelName,{log:!0})}static debug(t,...e){var n;this.ensureOutputChannel(),ae.isDebugging&&console.log(Re,t!=null?t:Ne,...e),(n=this.output)==null||n.debug(`${t!=null?t:Ne}${this.toLoggableParams(!0,e)}`)}static error(t,e,...n){var r;if(this.ensureOutputChannel(),!(this.level<1&&!ae.isDebugging)){if(e===void 0){const i=t instanceof Error?t.stack:void 0;if(i){const a=/.*\s*?at\s(.+?)\s/.exec(i);a!==null&&(e=a[1])}}ae.isDebugging&&console.error(Re,e!=null?e:Ne,...n,t),(r=this.output)==null||r.error(`${e!=null?e:Ne}${this.toLoggableParams(!1,n)}
${String(t)}`)}}static log(t,...e){var n;this.ensureOutputChannel(),ae.isDebugging&&console.log(Re,t!=null?t:Ne,...e),(n=this.output)==null||n.info(`${t!=null?t:Ne}${this.toLoggableParams(!1,e)}`)}static warn(t,...e){var n;this.ensureOutputChannel(),ae.isDebugging&&console.warn(Re,t!=null?t:Ne,...e),(n=this.output)==null||n.warn(`${t!=null?t:Ne}${this.toLoggableParams(!1,e)}`)}static toLoggable(t,e){if(typeof t!="object")return String(t);if(t instanceof l.Uri)return`Uri(${t.toString(!0)})`;try{return JSON.stringify(t,e)}catch{return"<error>"}}static toLoggableName(t){var e,n,r;let i;if(typeof t=="function"){if(t.prototype===void 0||t.prototype.constructor===void 0)return t.name;i=(e=t.prototype.constructor.name)!=null?e:Ne}else i=(r=(n=t.constructor)==null?void 0:n.name)!=null?r:Ne;const a=i.indexOf("_");return a===-1?i:i.substr(a+1)}static toLoggableParams(t,e){if(e.length===0||t&&this.level<4&&!ae.isDebugging)return Ne;const n=e.map(r=>this.toLoggable(r)).join(", ");return n.length!==0?` \u2014 ${n}`:Ne}},"_Logger");let j=ae;j.level=0;const Ye=new TextDecoder,Ft=new TextEncoder;async function Gt(t){const e=typeof t=="string"?Ft.encode(t):t;let n;if(globalThis.crypto.subtle)n=await globalThis.crypto.subtle.digest({name:"sha-1"},e);else{const r=new gr;r.update(e),n=r.digest()}return globalThis.btoa(encodeURIComponent(Ye.decode(n)))}o(Gt,"sha1");async function xn(t){const e=await globalThis.crypto.subtle.digest({name:"sha-256"},t);return Array.from(new Uint8Array(e)).map(r=>r.toString(16).padStart(2,"0")).join("")}o(xn,"sha256");var Sn;(function(t){t[t.BLOCK_SIZE=64]="BLOCK_SIZE"})(Sn||(Sn={}));function jn(t,e,n=32){const r=n-e,i=~((1<<r)-1);return(t<<e|(i&t)>>>r)>>>0}o(jn,"leftRotate");function Xn(t,e=0,n=t.byteLength,r=0){for(let i=0;i<n;i++)t[e+i]=r}o(Xn,"fill");const Kn=o(class{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._finished=!1}update(t){const e=this._buff;let n=this._buffLen,r=0;const i=t.byteLength;for(;r<i;){const a=Math.min(64-n,i-r);for(let s=0;s<a;s++)e[n++]=t[r++];n>=64&&(this._step(),n-=64,this._totalLen+=64)}this._buffLen=n}digest(){this._finished||(this._finished=!0,this._totalLen+=this._buffLen,this._wrapUp());const t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this._h0,!1),e.setUint32(4,this._h1,!1),e.setUint32(8,this._h2,!1),e.setUint32(12,this._h3,!1),e.setUint32(16,this._h4,!1),t}_wrapUp(){this._buff[this._buffLen++]=128,Xn(this._buff,this._buffLen),this._buffLen>56&&(this._step(),Xn(this._buff));const t=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(t/4294967296),!1),this._buffDV.setUint32(60,t%4294967296,!1),this._step()}_step(){const t=Kn._bigBlock32,e=this._buffDV;for(let f=0;f<64;f+=4)t.setUint32(f,e.getUint32(f,!1),!1);for(let f=64;f<320;f+=4)t.setUint32(f,jn(t.getUint32(f-12,!1)^t.getUint32(f-32,!1)^t.getUint32(f-56,!1)^t.getUint32(f-64,!1),1),!1);let n=this._h0,r=this._h1,i=this._h2,a=this._h3,s=this._h4,c,u,d;for(let f=0;f<80;f++)f<20?(c=r&i|~r&a,u=1518500249):f<40?(c=r^i^a,u=1859775393):f<60?(c=r&i|r&a|i&a,u=2400959708):(c=r^i^a,u=3395469782),d=jn(n,5)+c+s+u+t.getUint32(f*4,!1)&4294967295,s=a,a=i,i=jn(r,30),r=n,n=d;this._h0=this._h0+n&4294967295,this._h1=this._h1+r&4294967295,this._h2=this._h2+i&4294967295,this._h3=this._h3+a&4294967295,this._h4=this._h4+s&4294967295}},"_SHA1Computer");let gr=Kn;gr._bigBlock32=new DataView(new ArrayBuffer(320));function Lr(t,e){if(t===e)return-1;let n=0;for(;t[n]===e[n];)n++;return n}o(Lr,"indexOfDifference");function kr(t){return t.replace(/[\\{}*+?|^$.[\]()]/g,"\\$&")}o(kr,"escapeRegExpCharacters");let ct;var $t;(function(t){function e(n){const r=Zt(n);return ct=l.env.uiKind===l.UIKind.Web,j.warn(`Running on the ${ct?"web":"desktop"}${n.extensionRuntime!==l.ExtensionRuntime.Node?" in a webworker":""}; workspaceId=${r}; storageUri=${n.globalStorageUri.toString(!0)}`),r}o(e,"configure"),t.configure=e})($t||($t={}));const en=/\/workspaceStorage\/(?<id>[^/]+)/i;function Zt(t){var e;if(t.storageUri===void 0)return"";const n=en.exec(t.storageUri.path);let r;if((e=n==null?void 0:n.groups)==null?void 0:e.id)r=n.groups.id;else{r=t.storageUri.path;const i=Lr(t.globalStorageUri.path,r),a=`/${t.extension.id}`;r.endsWith(a)?r=r.slice(i,-a.length):r=r.substr(i)}return/-[0-9]$/.test(r)?r.slice(0,-2):r}o(Zt,"getWorkspaceId");var nn;(function(t){t.HasVirtualFolders="remoteHub:hasVirtualFolders",t.VirtualFolderProviders="remoteHub:virtualFolderProviders",t.HasRecentRepositories="remoteHub:hasRecentRepositories",t.ActiveResourceHasChanges="remoteHub:activeResourceHasChanges",t.OpenDiffOnClick="remoteHub:openDiffOnClick",t.HasSearchIndexes="gitHub:hasSearchIndexes",t.EnabledSomeSearchIndexes="gitHub:enabledSomeSearchIndexes",t.EnabledAllSearchIndexes="gitHub:enabledAllSearchIndexes",t.HasPullRequestExtension="gitHub:hasPullRequestExtension"})(nn||(nn={}));const Dn=new Map;function ar(t){return t==="isWeb"?isWeb:t==="remoteName"?env.remoteName:t==="virtualWorkspace"?VirtualProviderUtils.isVirtualWorkspace():t.startsWith("config.")?configuration.getAny(t.substring(7)):Dn.get(t)}o(ar,"getContext");function vr(t){return t==="isWeb"||t==="remoteName"||t==="virtualWorkspace"||t.startsWith("config.")||t.startsWith("remoteHub:")||t.startsWith("continueOn:")}o(vr,"isSupportedContextKey");async function Gn(t,e){Dn.set(t,e),!t.startsWith("continueOn:")&&await l.commands.executeCommand("setContext",t,e)}o(Gn,"setContext");const pr=o(async(t,e,n)=>{const r=await Promise.resolve().then(sr.bind(sr,850)),i=await Promise.resolve().then(sr.bind(sr,5229)),a=new r.AppInsightsCore,s=new i.PostChannel,c={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(n){c.extensionConfig={};const f={alwaysUseXhrOverride:!0,httpXHROverride:n};c.extensionConfig[s.identifier]=f}const d=e.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(c,[]),a.addTelemetryInitializer(f=>{var h,p;!d||(f.ext=(h=f.ext)!=null?h:{},f.ext.utc=(p=f.ext.utc)!=null?p:{},f.ext.utc.flags=8462029)}),a},"getAICore"),Br=o(async(t,e,n)=>{const r=await pr(t,e,n);return{logEvent:(a,s)=>{try{r==null||r.track({name:a,baseData:{name:a,properties:s==null?void 0:s.properties,measurements:s==null?void 0:s.measurements}})}catch(c){throw new Error(`Failed to log event to app insights!
`+c.message)}},flush:async()=>{try{r==null||r.unload()}catch(a){throw new Error(`Failed to flush app insights!
`+a.message)}}}},"oneDataSystemClientFactory");var On;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(On||(On={}));class Zn{constructor(e,n){this._instantiationStatus=On.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=n,this._key=e}sendEventData(e,n){if(!this._telemetryClient){this._instantiationStatus!==On.INSTANTIATED&&this._eventQueue.push({eventName:e,data:n});return}this._telemetryClient.logEvent(e,n)}sendErrorData(e,n){if(!this._telemetryClient){this._instantiationStatus!==On.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:n});return}}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:n})=>this.sendEventData(e,n)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:n})=>this.sendErrorData(e,n)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===On.NOT_INSTANTIATED&&(this._instantiationStatus=On.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=On.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=On.INSTANTIATED}))}}o(Zn,"BaseTelemetrySender");class _r{constructor(e,n,r){this.telemetrySender=e,this.vscodeAPI=n,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,r),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,n,r,i){i?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logUsage(e,{properties:n,measurements:r})}sendTelemetryEvent(e,n,r){this.internalSendTelemetryEvent(e,n,r,!1)}sendDangerousTelemetryEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,n,r,!0)}internalSendTelemetryErrorEvent(e,n,r,i){i?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logError(e,{properties:n,measurements:r})}sendTelemetryErrorEvent(e,n,r){this.internalSendTelemetryErrorEvent(e,n,r,!1)}sendDangerousTelemetryErrorEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,n,r,!0)}internalSendTelemetryException(e,n,r,i){i?this.telemetrySender.sendErrorData(e,{properties:n,measurements:r}):this.telemetryLogger.logError(e,{properties:n,measurements:r})}sendTelemetryException(e,n,r){this.internalSendTelemetryException(e,n,r,!1)}sendDangerousTelemetryException(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryException(e,n,r,!0)}dispose(){return this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}}o(_r,"BaseTelemetryReporter");class Cn{static applyReplacements(e,n){for(const r of Object.keys(e))for(const i of n)i.lookup.test(r)&&(i.replacementString!==void 0?e[r]=i.replacementString:delete e[r])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.7.7"}}static getInstance(){return Cn._instance||(Cn._instance=new Cn),Cn._instance}}o(Cn,"TelemetryUtil");const Qr=o(async(t,e)=>{let n;try{const i=await Promise.resolve().then(sr.bind(sr,3268));n=new i.ApplicationInsights({instrumentationKey:t,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0})}catch(i){return Promise.reject(i)}return{logEvent:(i,a)=>{const s={...a==null?void 0:a.properties,...a==null?void 0:a.measurements};(e==null?void 0:e.length)&&Cn.applyReplacements(s,e),n==null||n.track({name:i,data:s})},flush:async()=>{n==null||n.flush()}}},"webAppInsightsClientFactory");function Tr(t){if(t.userAgentData){const e=t.userAgentData.brands[t.userAgentData.brands.length-1];return`${t.userAgentData.platform} - ${e==null?void 0:e.brand} v${e==null?void 0:e.version}}`}else return t.appVersion}o(Tr,"getBrowserRelease");class Hr extends _r{constructor(e,n){let r=o(s=>Qr(s,n),"clientFactory");Cn.shouldUseOneDataSystemSDK(e)&&(r=o(s=>Br(s,l),"clientFactory"));const i={release:Tr(navigator),platform:"web",architecture:"web"},a=new Zn(e,r);if(e&&e.indexOf("AIF")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(a,l,{additionalCommonProperties:Cn.getAdditionalCommonProperties(i)})}}o(Hr,"TelemetryReporter");const wi="Type of classified event does not match event properties",ui=o(class{constructor(t){this.context=t,this.sharedProperties={},ui._instance=this,this.reporter=new Hr(ui.ingestionKey)}static get instance(){return this._instance}dispose(){this.reporter.dispose()}publicLog2(t,e){e!==wi&&this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e})}sendEvent(t,e,n){this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e},n)}sendErrorEvent(t,e,n){this.reporter.sendTelemetryErrorEvent(t,{...this.sharedProperties,...e},n)}sendException(t,e,n){this.reporter.sendTelemetryException(t,{...this.sharedProperties,...e},n)}setSharedProperty(t,e){this.sharedProperties[t]=e}reportWorkbenchLoadResult(t){const e="_codespaces.webeditor.connectWorkspace";l.env.appHost==="github.dev"&&(j.debug(`Executing ${e}`),t={...t,errorDetail:t.errorDetail instanceof Error?t.errorDetail.name:void 0},l.commands.executeCommand(e,t).then(n=>{},n=>{j.debug(`Failed to execute ${e}`,n)}))}},"_TelemetryService");let lr=ui;lr.ingestionKey="0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255";function T(t,e){const n=l.l10n.t("Report Issue"),r=l.l10n.t("Reload");l.window.showErrorMessage(l.l10n.t("The {0} extension failed to activate.",t.extension.packageJSON.displayName),{modal:!0,detail:l.l10n.t("Please try reloading the window, or report an issue.")},r,n).then(i=>{i===n?l.commands.executeCommand("workbench.action.openIssueReporter",{extensionId:t.extension.id,issueTitle:"Extension activation failed",issueBody:e instanceof Error?e.toString():void 0}):i===r&&l.commands.executeCommand("workbench.action.reloadWindow")})}o(T,"handleExtensionActivationError");function ce(t){const e=performance.now()*.001;let n=Math.floor(e),r=Math.floor(e%1*1e9);return t!==void 0&&(n=n-t[0],r=r-t[1],r<0&&(n--,r+=1e9)),[n,r]}o(ce,"hrtime");let Ee=0;function Ue(){return Ee===Number.MAX_SAFE_INTEGER&&(Ee=0),++Ee}o(Ue,"getNextInstanceId");const et=o(class{constructor(t,e,...n){this.context=t,this.instance=`[${Ue().toString().padStart(5)}] `;var r,i,a,s,c,u;let d;if(typeof(e==null?void 0:e.log)=="boolean"?d=e.log?{}:void 0:d=(r=e==null?void 0:e.log)!=null?r:{},this.logLevel=(i=e==null?void 0:e.logLevel)!=null?i:l.LogLevel.Info,this.time=ce(),d){if(!j.enabled(this.logLevel))return;n.length?lt(this.logLevel,`${this.instance}${(a=d.prefix)!=null?a:""}${t}${(s=d.message)!=null?s:""}`,...n):lt(this.logLevel,`${this.instance}${(c=d.prefix)!=null?c:""}${t}${(u=d.message)!=null?u:""}`)}}log(t){this.logCore(this.context,t,!1)}logStep(t,e){(!t||e)&&this.logCore(this.context,e,!1),this.step=t?{time:ce(),label:t}:void 0}restart(t){this.logCore(this.context,t,!0),this.step=void 0,this.time=ce()}stop(t){this.restart(t)}logCore(t,e,n){var r,i,a,s,c,u,d;if(!j.enabled(this.logLevel))return;let f="";if(this.step){const[Z,E]=ce(this.step.time),K=Z*1e3+Math.floor(E/1e6);f=`${this.step.label?`${this.step.label} took `:""}${K} ms`}if(!n){lt(this.logLevel,`${this.instance}${(r=e==null?void 0:e.prefix)!=null?r:""}${t}${(i=e==null?void 0:e.message)!=null?i:""}${f?` ${f}`:""}${(a=e==null?void 0:e.suffix)!=null?a:""}`);return}const[h,p]=ce(this.time),b=h*1e3+Math.floor(p/1e6);lt(b>500?l.LogLevel.Warning:this.logLevel,`${this.instance}${(s=e==null?void 0:e.prefix)!=null?s:""}${t}${(c=e==null?void 0:e.message)!=null?c:""}${(u=e==null?void 0:e.took)!=null?u:" took "}${b} ms${f?` (${f})`:""}${(d=e==null?void 0:e.suffix)!=null?d:""}`)}static start(t,e,...n){var r;(r=et.watches.get(t))==null||r.log(),et.watches.set(t,new et(t,e,...n))}static log(t,e){var n;(n=et.watches.get(t))==null||n.log(e)}static stop(t,e){var n;(n=et.watches.get(t))==null||n.stop(e),et.watches.delete(t)}},"_Stopwatch");let Be=et;Be.watches=new Map;function lt(t,e,...n){switch(t){case l.LogLevel.Warning:j.warn(e,...n);break;case l.LogLevel.Info:j.log(e,...n);break;default:j.debug(e,...n);break}}o(lt,"log");class _t{constructor(e){this.providerService=e}async provideCanonicalUri(e,n){var r,i;if(n.targetScheme==="https")switch(e.scheme){case k.scheme:{const a=this.providerService.getRepository(e);if(!a)return;const s=await this.providerService.getRepositoryContext(a,"http");return s.uri?l.Uri.parse(s.uri.endsWith(".git")?s.uri.slice(0,-4):s.uri):void 0}default:return(i=(r=this.providerService).getHttpsCloneUri)==null?void 0:i.call(r,e)}}}o(_t,"CanonicalUriProvider"),_t.SupportedSchemes=["https","ssh",k.scheme];class Tt{constructor(e){this.providerService=e,this.providers=[],this.handledRepositories=new Set,this.services=new Map,this.disposable=l.Disposable.from(e.onDidChangeRepositories(n=>{for(const r of n.added)this.repositoryOpened(r);for(const r of n.removed)this.repositoryClosed(r)}),be.onDidChange(n=>{for(const r of this.services.values()){const i=r.service.getRepository();n.affectsConfiguration("remoteHub.richNavigation.indexMode",i.uri)&&r.service.updateIndexMode().catch(a=>{j.error(a)})}}));for(const n of this.providerService.repositories)this.repositoryOpened(n)}dispose(){this.disposable.dispose()}register(e){const n=this.providers.length;return this.providers.push(e),{dispose:()=>this.providers.splice(n,1)}}async repositoryOpened(e){const n=_(e.uri);if(!this.handledRepositories.has(n)){this.handledRepositories.add(n);for(const r of this.providers){const i=await r.createNavigationService(this.providerService,e);if(i!==void 0){const a=i();this.services.set(n,{service:a});break}}}}repositoryClosed(e){const n=_(e.uri);this.handledRepositories.delete(n);const r=this.services.get(n);r!==void 0&&(r.service.dispose(),this.services.delete(_(e.uri)))}}o(Tt,"CodeNavigationServices");const on=globalThis.fetch;async function St(t,e,n){const r=new AbortController;n.onCancellationRequested(()=>r.abort());try{return await globalThis.fetch(t,{...e,signal:r.signal})}catch(i){throw n.isCancellationRequested?new l.CancellationError:i}}o(St,"fetchWithCancellation");async function Jt(t,e,n,r,i){if(n===0)throw new CancellationError;const a=new CancellationTokenSource;r.onCancellationRequested(()=>a.cancel());try{const s=await St(t,e,a.token);if(s.body){const c=[];let u=0;const d=s.body.getReader();let f=3;for(;;){let{done:h,value:p}=await d.read();if(h){const Z=c.reduce((me,re)=>me+re.length,0),E=new Uint8Array(Z);let K=0;for(const me of c)E.set(me,K),K+=me.length;return E}p&&(c.push(p),u+=p.length);const b=Math.floor(u/(1024*1024));if(f<b){f=b;const Z={message:b+" MB"};i.report(Z)}if(n!==void 0&&u>n)throw d.cancel(),a.cancel(),new Error("LIMIT_HIT")}}}catch(s){throw r.isCancellationRequested?new CancellationError:s}throw new CancellationError}o(Jt,"fetchUInt8ArrayWithMaxSizeAndCancellation");const Ot=globalThis.crypto;function Ut(){return Ot.randomUUID()}o(Ut,"uuid");/*! (c) Andrea Giammarchi - ISC */var Mt={};try{(function(t,e){if(new t("q=%2B").get("q")!==e||new t({q:e}).get("q")!==e||new t([["q",e]]).get("q")!==e||new t(`q=
`).toString()!=="q=%0A"||new t({q:" &"}).toString()!=="q=+%26"||new t({q:"%zx"}).toString()!=="q=%25zx")throw t;Mt.URLSearchParams=t})(URLSearchParams,"+")}catch(t){(function(e,n,r){"use strict";var i=e.create,a=e.defineProperty,s=/[!'\(\)~]|%20|%00/g,c=/%(?![0-9a-fA-F]{2})/g,u=/\+/g,d={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},f={append:function(re,De){Z(this._ungap,re,De)},delete:function(re){delete this._ungap[re]},get:function(re){return this.has(re)?this._ungap[re][0]:null},getAll:function(re){return this.has(re)?this._ungap[re].slice(0):[]},has:function(re){return re in this._ungap},set:function(re,De){this._ungap[re]=[n(De)]},forEach:function(re,De){var Le=this;for(var Ge in Le._ungap)Le._ungap[Ge].forEach(qe,Ge);function qe(it){re.call(De,it,n(Ge),Le)}o(qe,"invoke")},toJSON:function(){return{}},toString:function(){var re=[];for(var De in this._ungap)for(var Le=K(De),Ge=0,qe=this._ungap[De];Ge<qe.length;Ge++)re.push(Le+"="+K(qe[Ge]));return re.join("&")}};for(var h in f)a(p.prototype,h,{configurable:!0,writable:!0,value:f[h]});Mt.URLSearchParams=p;function p(re){var De=i(null);switch(a(this,"_ungap",{value:De}),!0){case!re:break;case typeof re=="string":re.charAt(0)==="?"&&(re=re.slice(1));for(var Le=re.split("&"),Ge=0,qe=Le.length;Ge<qe;Ge++){var it=Le[Ge],je=it.indexOf("=");-1<je?Z(De,E(it.slice(0,je)),E(it.slice(je+1))):it.length&&Z(De,E(it),"")}break;case r(re):for(var Ge=0,qe=re.length;Ge<qe;Ge++){var it=re[Ge];Z(De,it[0],it[1])}break;case"forEach"in re:re.forEach(b,De);break;default:for(var Lt in re)Z(De,Lt,re[Lt])}}o(p,"URLSearchParams");function b(re,De){Z(this,De,re)}o(b,"addEach");function Z(re,De,Le){var Ge=r(Le)?Le.join(","):Le;De in re?re[De].push(Ge):re[De]=[Ge]}o(Z,"appendTo");function E(re){return decodeURIComponent(re.replace(c,"%25").replace(u," "))}o(E,"decode");function K(re){return encodeURIComponent(re).replace(s,me)}o(K,"encode");function me(re){return d[re]}o(me,"replacer")})(Object,String,Array.isArray)}(function(t){var e=!1;try{e=!!Symbol.iterator}catch(r){}"forEach"in t||(t.forEach=o(function(i,a){var s=this,c=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(u){!u.length||u in c||(c[u]=s.getAll(u)).forEach(function(d){i.call(a,d,u,s)})})},"forEach")),"keys"in t||(t.keys=o(function(){return n(this,function(i,a){this.push(a)})},"keys")),"values"in t||(t.values=o(function(){return n(this,function(i,a){this.push(i)})},"values")),"entries"in t||(t.entries=o(function(){return n(this,function(i,a){this.push([a,i])})},"entries")),e&&!(Symbol.iterator in t)&&(t[Symbol.iterator]=t.entries),"sort"in t||(t.sort=o(function(){for(var i=this.entries(),a=i.next(),s=a.done,c=[],u=Object.create(null),d,f,h;!s;)h=a.value,f=h[0],c.push(f),f in u||(u[f]=[]),u[f].push(h[1]),a=i.next(),s=a.done;for(c.sort(),d=0;d<c.length;d++)this.delete(c[d]);for(d=0;d<c.length;d++)f=c[d],this.append(f,u[f].shift())},"sort"));function n(r,i){var a=[];return r.forEach(i,a),e?a[Symbol.iterator]():{next:function(){var s=a.shift();return{done:s===void 0,value:s}}}}o(n,"iterator"),function(r){var i=r.defineProperty,a=r.getOwnPropertyDescriptor,s=o(function(h){function p(E,K){t.append.call(this,E,K),E=this.toString(),h.set.call(this._usp,E?"?"+E:"")}o(p,"append");function b(E){t.delete.call(this,E),E=this.toString(),h.set.call(this._usp,E?"?"+E:"")}o(b,"del");function Z(E,K){t.set.call(this,E,K),E=this.toString(),h.set.call(this._usp,E?"?"+E:"")}return o(Z,"set"),function(E,K){return E.append=p,E.delete=b,E.set=Z,i(E,"_usp",{configurable:!0,writable:!0,value:K})}},"createSearchParamsPollute"),c=o(function(h){return function(p,b){return i(p,"_searchParams",{configurable:!0,writable:!0,value:h(b,p)}),b}},"createSearchParamsCreate"),u=o(function(h){var p=h.append;h.append=t.append,URLSearchParams.call(h,h._usp.search.slice(1)),h.append=p},"updateSearchParams"),d=o(function(h,p){if(!(h instanceof p))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+p.name)},"verifySearchParams"),f=o(function(h){var p=h.prototype,b=a(p,"searchParams"),Z=a(p,"href"),E=a(p,"search"),K;!b&&E&&E.set&&(K=c(s(E)),r.defineProperties(p,{href:{get:function(){return Z.get.call(this)},set:function(me){var re=this._searchParams;Z.set.call(this,me),re&&u(re)}},search:{get:function(){return E.get.call(this)},set:function(me){var re=this._searchParams;E.set.call(this,me),re&&u(re)}},searchParams:{get:function(){return d(this,h),this._searchParams||K(this,new URLSearchParams(this.search.slice(1)))},set:function(me){d(this,h),K(this,me)}}}))},"upgradeClass");try{f(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&f(URL)}catch(h){}}(Object)})(Mt.URLSearchParams.prototype,Object);const zn=Mt.URLSearchParams,bn=60,cr=bn*60,Hn=cr*24,ur=Hn*7,Xr=Hn*30,Gr=Hn*365;function er(t,e){typeof t!="number"&&(t=t.getTime());const n=Math.round((new Date().getTime()-t)/1e3);if(n<-30)return l.l10n.t("in {0}",er(new Date().getTime()+n*1e3,{ago:!1,short:e==null?void 0:e.short}));if(n<30)return(e==null?void 0:e.ago)?(e==null?void 0:e.short)?l.l10n.t("secs ago"):l.l10n.t("A few seconds ago"):(e==null?void 0:e.short)?l.l10n.t("now"):l.l10n.t("Just now");let r;return n<bn?(r=n,(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} sec ago",r):l.l10n.t("{0} second ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} secs ago",r):l.l10n.t("{0} seconds ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} sec",r):l.l10n.t("{0} second",r):(e==null?void 0:e.short)?l.l10n.t("{0} secs",r):l.l10n.t("{0} seconds",r)):n<cr?(r=Math.floor(n/bn),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} min ago",r):l.l10n.t("{0} minute ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} mins ago",r):l.l10n.t("{0} minutes ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} min",r):l.l10n.t("{0} minute",r):(e==null?void 0:e.short)?l.l10n.t("{0} mins",r):l.l10n.t("{0} minutes",r)):n<Hn?(r=Math.floor(n/cr),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} hr ago",r):l.l10n.t("{0} hour ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} hrs ago",r):l.l10n.t("{0} hours ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} hr",r):l.l10n.t("{0} hour",r):(e==null?void 0:e.short)?l.l10n.t("{0} hrs",r):l.l10n.t("{0} hours",r)):n<ur?(r=Math.floor(n/Hn),(e==null?void 0:e.ago)?r===1?l.l10n.t("{0} day ago",r):l.l10n.t("{0} days ago",r):r===1?l.l10n.t("{0} day",r):l.l10n.t("{0} days",r)):n<Xr?(r=Math.floor(n/ur),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} wk ago",r):l.l10n.t("{0} week ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} wks ago",r):l.l10n.t("{0} weeks ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} wk",r):l.l10n.t("{0} week",r):(e==null?void 0:e.short)?l.l10n.t("{0} wks",r):l.l10n.t("{0} weeks",r)):n<Gr?(r=Math.floor(n/Xr),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} mo ago",r):l.l10n.t("{0} month ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} mos ago",r):l.l10n.t("{0} months ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} mo",r):l.l10n.t("{0} month",r):(e==null?void 0:e.short)?l.l10n.t("{0} mos",r):l.l10n.t("{0} months",r)):(r=Math.floor(n/Gr),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} yr ago",r):l.l10n.t("{0} year ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} yrs ago",r):l.l10n.t("{0} years ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} yr",r):l.l10n.t("{0} year",r):(e==null?void 0:e.short)?l.l10n.t("{0} yrs",r):l.l10n.t("{0} years",r))}o(er,"fromNow");var xr,Dt;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Dt||(Dt={}));class Vn{constructor(){this[xr]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,n=Dt.None){const r=this._map.get(e);if(!!r)return n!==Dt.None&&this.touch(r,n),r.value}set(e,n,r=Dt.None){let i=this._map.get(e);if(i)i.value=n,r!==Dt.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case Dt.None:this.addItemLast(i);break;case Dt.First:this.addItemFirst(i);break;case Dt.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return Boolean(this.remove(e))}remove(e){const n=this._map.get(e);if(!!n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){const r=this._state;let i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.key,done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}values(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.value,done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}entries(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:[n.key,n.value],done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}[(xr=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==Dt.First&&n!==Dt.Last)){if(n===Dt.First){if(e===this._head)return;const r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===Dt.Last){if(e===this._tail)return;const r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(const[n,r]of e)this.set(n,r)}}o(Vn,"LinkedMap");class _n extends Vn{constructor(e,n=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=Dt.AsNew){return super.get(e,n)}peek(e){return super.get(e,Dt.None)}set(e,n){return super.set(e,n,Dt.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}o(_n,"LRUCache");class Rn{constructor(e){this.defaultDelay=e}dispose(){this.cancelTimeout()}debounce(e,n=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((r,i)=>{this.resolver=r,this.rejecter=i}).then(()=>{if(this.completionPromise=void 0,this.resolver=void 0,this.task){const r=this.task;return this.task=void 0,r()}})),this.timeout=setTimeout(()=>{var r;this.timeout=void 0,(r=this.resolver)==null||r.call(this,void 0)},n),this.completionPromise}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.rejecter)==null||e.call(this,new Error("Canceled")),this.completionPromise=void 0)}cancelTimeout(){this.timeout!==void 0&&(clearTimeout(this.timeout),this.timeout=void 0)}}o(Rn,"TaskDebouncer");const Wn=Symbol("QuickPickGoBack");var or;(function(t){async function e(n,r,i,a,s){const c=[],u=n.getRemoteWorkspaceSourceProviders();c.push(...u.map(b=>new Sr(b)));const d=await n.getRecentWorkspaceSourceProviders();if(d){const b=await d.provideSources();if(b){const Z=b.reduce((E,K)=>("providerId"in K&&E.push({label:`${K.icon?`${K.icon} `:""}${K.name}`,description:K.description,detail:K.detail,url:K.url,workspace:K.url?void 0:K.workspace,buttons:[Er.OpenInNewWindow],showMore:void 0}),E),[]);c.push({label:l.l10n.t("recently opened"),kind:l.QuickPickItemKind.Separator},...Z)}}const f=l.window.createQuickPick(),h=[];let p=r;try{for(;;){const b=await new Promise(Z=>{h.push(f.onDidHide(()=>Z(void 0)),f.onDidChangeValue(E=>{if(E=E.trim(),E.length===0)f.items=c.map(K=>(K.kind===l.QuickPickItemKind.Separator||(K.alwaysShow=!1),K));else{const K=new Fr(n,E);if(K.validate())f.items=[K];else{let re=!1;for(const De of c)if(De.label.includes(E)){re=!0;break}re?f.items=c:f.items=[...c.map(De=>(De.alwaysShow=!0,De))]}}}),f.onDidAccept(()=>{if(f.activeItems.length!==0){const[E]=f.activeItems;(!(E instanceof Fr)||E.validate())&&Z(E)}}),f.onDidChangeActive(()=>{if(p!==void 0||!(s==null?void 0:s.allowAddToWorkspace))return;const[E]=f.activeItems;let K=!0;if(E===void 0?K=Boolean(f.value):K=E instanceof Fr,K){if(f.buttons.length===1)return;f.buttons=[Er.AddToWorkspace]}else{if(f.buttons.length===0)return;f.buttons=[]}}),f.onDidTriggerButton(E=>{if(E===Er.AddToWorkspace){const[K]=f.activeItems;if(!(K instanceof Fr))return;K.validate()&&(p=He.AddToWorkspace,Z(K))}}),f.onDidTriggerItemButton(E=>{switch(E.button){case Er.OpenInNewWindow:p=He.NewWindow,Z(E.item);break;default:break}})),f.title=a,f.placeholder=i,f.matchOnDescription=!0,f.items=c,f.sortByLabel=!1,f.show()});if(b instanceof Sr){const Z=await b.show(p,b.placeholder,a,s);if(Z===Wn)continue;const[E,K]=Z;if(E&&"showMore"in E&&E.showMore!==void 0)continue;return[E,K]}if(!(b&&"showMore"in b&&b.showMore!==void 0))return[b,p]}}finally{f.dispose(),h.forEach(b=>void b.dispose())}}o(e,"show"),t.show=e})(or||(or={}));class Sr{constructor(e){this.provider=e,this.alwaysShow=!1,this.kind=l.QuickPickItemKind.Default}get label(){return`${this.provider.icon?`${this.provider.icon} `:""}${this.provider.label}`}get placeholder(){return this.provider.placeholder}async show(e,n,r,i){const a=l.window.createQuickPick(),s=new Rn(500),c=[s];async function u(K,me,re,De,Le){const Ge=await K.provideSources(me,re,De,Le);return Ge==null?void 0:Ge.map(qe=>"showMore"in qe?{label:qe.label,showMore:qe.showMore}:"kind"in qe?qe:{label:`${qe.icon?`${qe.icon} `:""}${qe.name}`,description:qe.description,detail:qe.detail,url:qe.url,workspace:qe.workspace,buttons:[Er.OpenInNewWindow]})}o(u,"getItems");async function d(K){var me;b=void 0;const re=a.activeItems;a.items=(me=K!=null?K:await E)!=null?me:[];const De=a.items.find(Le=>Le.url===a.value);De?a.items=[{...De,alwaysShow:!0},...a.items]:p&&re.length!==0&&(a.activeItems=a.items.filter(Le=>re.some(Ge=>Ge.url===Le.url))),a.busy=!1}o(d,"setItems");let f,h;if(this.provider.provideOrganization&&this.provider.provideProject){if(f=await this.provider.provideOrganization(),!f)return[void 0,void 0];if(h=await this.provider.provideProject(f),!h)return[void 0,void 0]}let p=!1,b,Z=e,E=u(this.provider,f,h,void 0,{sort:"updated"});try{const K=await new Promise(me=>{c.push(a.onDidHide(()=>me(void 0)),a.onDidChangeValue(re=>{p=!1,re=re.trim(),a.busy=!0;const De=s.debounce(re?()=>u(this.provider,f,h,re,{sort:"stars"}):()=>E);b===void 0&&(b=De.then(Le=>d(Le)))}),a.onDidAccept(async()=>{var re;if(a.activeItems.length!==0){const[De]=a.activeItems;if("showMore"in De){await((re=De.showMore)==null?void 0:re.call(De)),E=u(this.provider,f,h,void 0,{sort:"updated"}),await d(await E);return}me(De)}}),a.onDidChangeActive(()=>{if(p=a.activeItems.length!==0,Z!==void 0||!(i==null?void 0:i.allowAddToWorkspace))return;const[re]=a.activeItems;if(re===void 0){if(a.buttons.length===1)return;a.buttons=[l.QuickInputButtons.Back]}else{if(a.buttons.length===2)return;a.buttons=[l.QuickInputButtons.Back,Er.AddToWorkspace]}}),a.onDidTriggerButton(re=>{if(re===l.QuickInputButtons.Back){me(Wn);return}if(re===Er.AddToWorkspace){const[De]=a.activeItems;if(De===void 0)return;Z=He.AddToWorkspace,me(De)}}),a.onDidTriggerItemButton(re=>{switch(re.button){case Er.OpenInNewWindow:Z=He.NewWindow,me(re.item);break;default:break}})),a.title=r,a.placeholder=n,a.matchOnDetail=!0,a.sortByLabel=!1,a.buttons=[l.QuickInputButtons.Back],a.busy=!0,a.show(),b=s.debounce(()=>E,100).then(re=>d(re))});return K===Wn?K:[K,Z]}finally{a.dispose(),c.forEach(K=>void K.dispose())}}}o(Sr,"RemoteSourceProviderPickerItem");class Fr{constructor(e,n){this.url=n,this.alwaysShow=!0,this.canOpenResult=e.canOpenRemoteUrl(n)}get buttons(){return[Er.OpenInNewWindow]}get label(){if(this.canOpenResult){const{provider:e,urlType:n}=this.canOpenResult;switch(n){case z.Branch:return l.l10n.t("Open Branch from {0} Repository",e.name);case z.Tag:return l.l10n.t("Open Tag from {0} Repository",e.name);case z.Commit:return l.l10n.t("Open Commit from {0} Repository",e.name);case z.File:return l.l10n.t("Open File from {0} Repository",e.name);case z.PullRequest:return l.l10n.t("Open Pull Request from {0} Repository",e.name);default:return l.l10n.t("Open {0} Repository",e.name)}}return l.l10n.t("Enter a Remote Url")}get description(){return this.url}validate(){return this.canOpenResult!==void 0}}o(Fr,"RemoteUrlQuickPickItem");var Er;(function(t){t.AddToWorkspace={iconPath:new l.ThemeIcon("plus"),tooltip:l.l10n.t("Add to Workspace")},t.OpenInNewWindow={iconPath:new l.ThemeIcon("empty-window"),tooltip:l.l10n.t("Open in New Window")}})(Er||(Er={}));function Zi(t,e){return t.reduce((r,i)=>{const a=e(i),s=r.get(a);return s===void 0?r.set(a,[i]):s.push(i),r},new Map)}o(Zi,"groupBy");function Mi(t){let e=0;for(const n of t){if(n===0)return!0;if(e++,e>8e3)break}return!1}o(Mi,"isBinary");function oa(t,e,n=r=>r){return[...t.reduce((i,a)=>{const s=e(a),c=i.get(s);if(c===void 0)i.set(s,a);else{const u=n(c,a);u!==void 0&&i.set(s,u)}return i},new Map).values()]}o(oa,"uniqueBy");function Pi(t,e){switch(t){case G.Branch:case G.RemoteBranch:return e?"$(git-pull-request)":"$(git-branch)";case G.Tag:return"$(tag)";case G.Commit:return"$(git-commit)"}}o(Pi,"headTypeToCodicon");function zi(t){switch(t){case ie.Active:return"$(layers-active)";case ie.Match:return"$(layers-dot)";case ie.Indexed:return"$(layers)"}}o(zi,"indexTypeToCodicon");function ea(t,e){switch(t){case G.Branch:case G.RemoteBranch:return e?new l.ThemeIcon("git-pull-request"):new l.ThemeIcon("git-branch");case G.Tag:return new l.ThemeIcon("tag");case G.Commit:return new l.ThemeIcon("git-commit")}}o(ea,"headTypeToThemeIcon");function*Vi(t,e){for(const n of t)yield*e(n)}o(Vi,"flatMap");function*ta(t,e){for(const n of t)e(n)&&(yield n)}o(ta,"filter");function*di(t,e){for(const n of t){const r=e(n);r!=null&&(yield r)}}o(di,"filterMap");function Zr(t,e){for(const n of t)if(e(n))return n}o(Zr,"find");function fi(t,e){let n="";const r=t[Symbol.iterator]();let i=r.next();if(i.done)return n;for(;;){const a=i.value.toString();if(i=r.next(),i.done){n+=a;break}n+=a,n+=e}return n}o(fi,"join");function*Oi(t,e){for(const n of t)yield e(n)}o(Oi,"map");function va(t,e){for(const n of t)if(e(n))return!0;return!1}o(va,"some");function*ai(...t){for(const e of t)for(const n of e)yield n}o(ai,"union");function*Ji(t){const e=new Set;for(const n of t)e.has(n)||(e.add(n),yield n)}o(Ji,"unique");const Oe="";function tt(...t){if(t.length===1){const e=t[0];return e===void 0?Oe:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof l.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}o(tt,"defaultResolver");function vt(t){return(e,n,r)=>{let i;if(typeof r.value=="function"?i=r.value:typeof r.get=="function"&&(i=r.get),i===void 0)throw new Error("Not supported");const a=`$serialize$${n}`;r.value=function(...s){const c=s.length===0?a:`${a}$${(t!=null?t:tt)(...s)}`;Object.prototype.hasOwnProperty.call(this,c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let u=this[c];const d=o(()=>i.apply(this,s),"run");return u===void 0?u=d():u=u.then(d,d),this[c]=u,u}}}o(vt,"serialize");let rt=0;function Bt(){return rt===Number.MAX_SAFE_INTEGER&&(rt=0),String(++rt)}o(Bt,"getNextLockId");class jt{constructor(){this.id=Bt()}async synchronize(e){let n;const r=this.promise;this.promise=new Promise(i=>n=i),await r;try{return await e()}finally{n()}}}o(jt,"Lock");class pt{constructor(e){this.lock=new jt,this.readers=new Set,this.counter=0,this._id=e!=null?e:this.lock.id}get id(){return this._id}getNextCounter(){return this.counter===Number.MAX_SAFE_INTEGER&&(this.counter=0),++this.counter}async synchronizeRead(e,n){let r;const i=new Be(`Reader(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:l.LogLevel.Debug});let a;await this.lock.synchronize(async()=>{this.writer&&await this.writer,a=new Promise(s=>r=s),this.readers.add(a)}),i.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await e()}finally{i.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),a!==void 0&&this.readers.delete(a),r()}}async synchronizeWrite(e,n){let r;const i=new Be(`Writer(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:l.LogLevel.Debug});await this.lock.synchronize(async()=>{if(this.writer&&await this.writer,this.readers.size){const a=[...this.readers];this.readers.clear(),await Promise.all(a)}this.writer=new Promise(a=>r=a)}),i.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await e()}finally{i.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),r(),this.writer=void 0}}}o(pt,"ReaderWriterLock");class tn{constructor(){this.locks=new Map}async synchronizeRead(e,n,r){let i=this.locks.get(e);return i===void 0&&(i=new pt(String(e)),this.locks.set(e,i)),i.synchronizeRead(n,r)}async synchronizeWrite(e,n,r){let i=this.locks.get(e);return i===void 0&&(i=new pt(String(e)),this.locks.set(e,i)),i.synchronizeWrite(n,r)}}o(tn,"KeyedReaderWriterLock");const Ht=o(class{constructor(t,e,n,r,i){this.providerService=t,this.storageService=e,this.changeStore=n,this.workspaceId=r,this.context=i,this._onDidChange=new l.EventEmitter,this.cache=new Map,this.lock=new pt("WorkspaceRepositories"),this.disposable=l.Disposable.from(this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(this.onRepositoryChanged,this),this.changeStore.onDidChange(this.onChangeStoreChanged,this),be.onDidChange(this.onConfigurationChanged,this))}get onDidChange(){return this._onDidChange.event}dispose(){this.disposable.dispose()}async exportDebugInfo(){const t=await l.workspace.openTextDocument({language:"json",content:`Remote Repositories

${this.toStorage(await this.getCore())}`});return void l.window.showTextDocument(t)}onConfigurationChanged(t){if(!be.changed(t,"experimental.syncRecentList"))return;const e=be.get("experimental.syncRecentList")===!0?[Ht.storageKey]:[];this.context.globalState.setKeysForSync(e)}onChangeStoreChanged(t){const e=oa(t.map(n=>n.rootUri),n=>_(n)).map(n=>this.providerService.getRepository(n)).filter(n=>Boolean(n));this.addOrUpdate(e)}onRepositoriesChanged(t){this.addOrUpdate(t.added)}onRepositoryChanged(t){this.addOrUpdate([t.repository])}async get(t){let e=await this.lock.synchronizeRead(async()=>{let n=this.cache.get("workspaceRepositories");return n===void 0&&(n=[...(await this.getCore()).values()].sort((r,i)=>i.timestamp-r.timestamp),this.cache.set("workspaceRepositories",n)),n},"WorkspaceRepositories.get");if(t){const n=_(t);e=e.filter(r=>_(r.canonicalUri)===n)}return e}async getCore(){return this.fromStorage(await this.storageService.get(Ht.storageKey))}async getRecents(t=10){return(await this.get()).slice(0,t)}async getRemoteWorkspaceSourceProvider(t){const e=await this.getRecents();if(e.length!==0)return e.filter(n=>n.provider.id===t)}refresh(){this.cache.clear()}async remove(t){await this.lock.synchronizeWrite(async()=>{const e=await this.getCore(),n=`${t.workspaceId}/${_(t.uri)}`,r=e.get(n);if(r===void 0)return;const i=this.changeStore.getScopedChangeStore(r),a=await i.getChanges(r.uri);if(a.length!==0){const s={title:l.l10n.t("Yes")},c={title:l.l10n.t("No"),isCloseAffordance:!0};if(await l.window.showWarningMessage(a.length===1?l.l10n.t(`This repository contains 1 file with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`):l.l10n.t(`This repository contains {0} files with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`,a.length),{modal:!0},s,c)!==s)return;await i.discardAll(r.uri)}this.cache.clear(),e.delete(n);try{await this.storageService.store(Ht.storageKey,this.toStorage(e))}catch(s){throw j.error(s,"Failed to save workspace repositories"),s}},"WorkspaceRepositories.remove"),this._onDidChange.fire()}async addOrUpdate(t){await this.lock.synchronizeWrite(async()=>{this.cache.clear();const e=await this.getCore();for(const n of t){const[{HEAD:r,pullRequest:i},a]=await Promise.all([n.getMetadata(),n.getIndexMetadata()]),s=await this.changeStore.getChanges(n.uri);e.set(`${this.workspaceId}/${_(n.uri)}`,{workspaceId:this.workspaceId,uri:n.uri,canonicalUri:n.canonicalUri,name:n.name,provider:n.provider,ref:{type:r.type,name:r.name},idx:(a==null?void 0:a.type)&&ie.hasIndex(a.type)?{type:a.type}:void 0,pullRequest:i?{id:i.id}:void 0,changes:Jn(s),timestamp:Date.now()})}try{await this.storageService.store(Ht.storageKey,this.toStorage(e))}catch(n){throw j.error(n,"Failed to save workspace repositories"),n}},"WorkspaceRepositories.addOrUpdate"),this._onDidChange.fire()}fromStorage(t){if(!t)return new Map;try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&L(r)?l.Uri.from(r):r);return new Map(e.workspaceRepositories)}catch(e){return j.error(e,"Failed to deserialize workspace repositories"),new Map}}toStorage(t){const e={schemaVersion:Ht.storageSchemaVersion,workspaceRepositories:[...t]};return JSON.stringify(e)}},"_WorkspaceRepositories");let yn=Ht;yn.storageKey="workspaceRepositories",yn.storageSchemaVersion=1;function En(t){return t!==void 0&&(t.added!==0||t.changed!==0||t.deleted!==0)}o(En,"hasChanges");function nr(t){return En(t.changes)}o(nr,"hasUncommittedChanges");function Jn(t){let e=0,n=0,r=0;for(const i of t)switch(i.type){case D.Created:e++;break;case D.Changed:n++;break;case D.Deleted:r++;break}return e||n||r?{added:e,changed:n,deleted:r,timestamp:Date.now()}:void 0}o(Jn,"toChangesSummary");function dr(t,e,{compact:n=!0,preamble:r,separator:i=", ",short:a=!1,single:s=!1}={}){if(!En(e))return t===G.Branch||t===G.RemoteBranch?l.l10n.t("Everything up to date"):l.l10n.t("No uncommitted changes");const{added:c,changed:u,deleted:d}=e;if(s){const h=c+u+d;return h===1?l.l10n.t("{0} change",h):l.l10n.t("{0} changes",h)}let f=`${r!=null?r:""}`;return(c||!n)&&(f+=a?`+${c}`:c===1?l.l10n.t("{0} file added",c):l.l10n.t("{0} files added",c),(u||d||!n)&&(f+=i)),(u||!n)&&(f+=a?`~${u}`:u===1?l.l10n.t("{0} file changed",u):l.l10n.t("{0} files changed",u),(d||!n)&&(f+=i)),(d||!n)&&(f+=a?`-${d}`:d===1?l.l10n.t("{0} file deleted",d):l.l10n.t("{0} files deleted",d)),f}o(dr,"formatChangesSummary");class fn extends Error{constructor(e){var n;const r=typeof e=="string"?e:$n.getProviderId(e);super(`No provider registered with ${r}`);this.id=r,(n=Error.captureStackTrace)==null||n.call(Error,this,fn)}}o(fn,"ProviderNotFoundError");class qt{constructor(e,n,r,i,a){this.providerService=e,this.uri=n,this.id=r,this.name=i,this.provider={id:a.id,name:a.name}}get canonicalUri(){return this.providerService.getVirtualCanonicalRootUri(this.uri)}createRelativeUri(e){return this.providerService.createRelativeUri(this.uri,e)}async getMetadata(){const e=await this.providerService.getMetadata(this.uri);if(!e)throw new Error(`Unable to find metadata for ${this.uri.toString()}`);return e}async getIndexMetadata(){return this.providerService.getIndexMetadata(this.uri)}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.uri)}}o(qt,"VirtualRepository");var zt;(function(t){t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.Tag=4]="Tag"})(zt||(zt={}));var Nt;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.Indexed=1]="Indexed",t[t.Match=2]="Match",t[t.Active=3]="Active"})(Nt||(Nt={})),function(t){function e(n){return n!==void 0&&(n===t.Indexed||n===t.Match||n===t.Active)}o(e,"hasIndex"),t.hasIndex=e}(Nt||(Nt={}));var gn;(function(t){function e(n){return n!==void 0&&n.type===3}o(e,"isActive"),t.isActive=e})(gn||(gn={}));var M;(function(t){t[t.Latest=1]="Latest",t[t.SHA=2]="SHA"})(M||(M={}));var te;(function(t){function e(n){const r=k.decodeAuthority(n).metadata;if(!(r===void 0||r.idx===void 0)){if(r.idx==="latest")return{type:1};if(N(r.idx))return{type:2,sha:r.idx}}}o(e,"decode"),t.decode=e})(te||(te={}));function ze(t){return t!==void 0&&typeof t.then=="function"}o(ze,"isPromise");const ot="";function Wt(...t){if(t.length===1){const e=t[0];return e===void 0?ot:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof l.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}o(Wt,"gate_defaultResolver");function Et(t){return(e,n,r)=>{let i;if(typeof r.value=="function"?i=r.value:typeof r.get=="function"&&(i=r.get),i===void 0)throw new Error("Not supported");const a=`$gate$${n}`;r.value=function(...s){const c=s.length===0?a:`${a}$${(t!=null?t:Wt)(...s)}`;Object.prototype.hasOwnProperty.call(this,c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let u=this[c];if(u===void 0){let d;try{if(d=i.apply(this,s),d==null||!ze(d))return d;this[c]=u=d.then(f=>(this[c]=void 0,f)).catch(f=>{throw this[c]=void 0,f})}catch(f){throw this[c]=void 0,f}}return u}}}o(Et,"gate");var vn=Object.defineProperty,pn=Object.getOwnPropertyDescriptor,Qt=o((t,e,n,r)=>{for(var i=r>1?void 0:r?pn(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&vn(e,n,i),i},"__decorateClass");class sn{constructor(){this.hasShownRepositoryNotValidMessage=!1}async showRepositoryNotValidMessage(){if(this.hasShownRepositoryNotValidMessage)return;this.hasShownRepositoryNotValidMessage=!0;const e=l.l10n.t("Open Repository");await l.window.showErrorMessage(l.l10n.t("The current workspace is not a valid repository. Would you like to open another repository?"),{modal:!0},e)===e&&l.commands.executeCommand("remoteHub.openRepository")}showGitHubStatus500Message(){return l.window.showErrorMessage(l.l10n.t("GitHub failed to respond and might be experiencing issues. Visit the [GitHub status page](https://githubstatus.com) for more information."),l.l10n.t("OK")),Promise.resolve()}async showStatus401Message(e){if(!e)return void l.window.showErrorMessage(l.l10n.t("The provided credentials are either invalid or expired."),l.l10n.t("OK"));const n=l.l10n.t("Reauthenticate");await l.window.showErrorMessage(l.l10n.t("The provided credentials are either invalid or expired. Would you like to reauthenticate?"),n)===n&&e()}async showStatus403Message(e){if(!e)return void l.window.showErrorMessage(l.l10n.t("The provided credentials do not have the required access."),l.l10n.t("OK"));const n=l.l10n.t("Reauthenticate"),r=l.l10n.t("The provided credentials do not have the required access. Would you like to reauthenticate to grant additional access?");await l.window.showErrorMessage(r,n)===n&&e()}async showProviderNotFoundMessage(e){const n=mn.get(e.id);if(n&&l.extensions.getExtension(n[0])===void 0){const r=l.l10n.t("Install");if(await l.window.showInformationMessage(l.l10n.t("Extension '{0}' is not installed. Would you like to install the extension and reload the window to open this workspace?",n[1]),{modal:!0},r)!==r)return;await l.commands.executeCommand("workbench.extensions.installExtension",n[0]),await l.commands.executeCommand("workbench.action.reloadWindow")}}}o(sn,"Messages"),Qt([Et(()=>"")],sn.prototype,"showRepositoryNotValidMessage",1),Qt([Et(()=>"")],sn.prototype,"showGitHubStatus500Message",1),Qt([Et(()=>"")],sn.prototype,"showStatus401Message",1),Qt([Et(()=>"")],sn.prototype,"showStatus403Message",1),Qt([Et()],sn.prototype,"showProviderNotFoundMessage",1);const mn=new Map([["github",["GitHub.remotehub","GitHub Repositories"]],["azurerepos",["ms-vscode.azure-repos","Azure Repos"]]]),Kt=new sn;async function ut(t,e,n){var r,i,a,s,c;if(lr.instance.publicLog2("openWorkspace",{location:e.location}),e.location===He.AddToWorkspace){const d=(i=(r=l.workspace.workspaceFolders)==null?void 0:r.length)!=null?i:0;return void l.workspace.updateWorkspaceFolders(d,0,{uri:e.uri,name:e.name})}if(e.location===He.CurrentWindow&&!(n==null?void 0:n.skipChangesPrompt)){const d=await t.getWorkspaceProvidersWithChanges();if(d.length){const f={title:l.l10n.t("Continue")},h={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showWarningMessage(ct?l.l10n.t(`You have uncommitted changes which you can pick up anytime by reopening this workspace.

If you want to see your changes on {0} or from other browsers or machines, commit them before leaving this workspace.

Do you want to continue opening a new workspace?`,d.map(b=>b.name).join(", ")):l.l10n.t(`You have uncommitted changes which you can pick up anytime by reopening this workspace.

If you want to see your changes on {0} or from other machines, commit them before leaving this workspace.

Do you want to continue opening a new workspace?`,d.map(b=>b.name).join(", ")),{modal:!0},f,h)!==f){lr.instance.publicLog2("openWorkspace.abort",{reason:"abandoned uncommitted changes prompt"});return}}}const u=l.env.remoteName?!0:void 0;return e.filesToOpen&&(e.location===He.CurrentWindow&&u===void 0&&((a=l.workspace.workspaceFolders)==null?void 0:a.length)===1&&l.workspace.workspaceFolders[0].uri.toString()===e.uri.toString()?await((s=So())==null?void 0:s.openPendingFiles(e.uri,e.filesToOpen)):await((c=So())==null?void 0:c.setPendingFilesToOpen(e.uri,e.filesToOpen))),lr.instance.publicLog2("openWorkspace.success",{location:e.location,forceLocalWindow:String(u)}),void l.commands.executeCommand("vscode.openFolder",e.uri,{forceNewWindow:e.location===He.NewWindow,forceLocalWindow:u})}o(ut,"openWorkspace");var Fn=sr(6724),In=Object.defineProperty,Un=Object.getOwnPropertyDescriptor,rr=o((t,e,n,r)=>{for(var i=r>1?void 0:r?Un(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&In(e,n,i),i},"providers_decorateClass");const kt=o(class{constructor(t,e){this.telemetryService=t,this.workspaceState=e,this._providers=new Map,this._indexProviders=new Map,this._onDidChangeProviders=new l.EventEmitter,this._onDidChangeChangeStore=new l.EventEmitter,this._onDidChangeWorkspaceRepositories=new l.EventEmitter,this._repositories=new Map,this._onDidChangeRepositories=new l.EventEmitter,this._onDidChangeRepository=new l.EventEmitter,this._onDidSyncRepository=new l.EventEmitter,this._onDidRefresh=new l.EventEmitter,this._onWillRefresh=new l.EventEmitter,this.pendingMetadataRequests=new Map,this.disposable=l.Disposable.from(l.workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this),l.workspace.onDidSaveTextDocument(this.onDocumentChanged,this),l.workspace.onDidSaveNotebookDocument(this.onDocumentChanged,this),l.window.onDidChangeActiveNotebookEditor(this.onDocumentChanged,this),l.window.onDidChangeActiveTextEditor(this.onDocumentChanged,this))}get onDidChangeProviders(){return this._onDidChangeProviders.event}get onDidChangeChangeStore(){return this._onDidChangeChangeStore.event}get onDidChangeWorkspaceRepositories(){return this._onDidChangeWorkspaceRepositories.event}get onDidChangeRepositories(){return this._onDidChangeRepositories.event}get onDidChangeRepository(){return this._onDidChangeRepository.event}get onDidSyncRepository(){return this._onDidSyncRepository.event}get onDidRefresh(){return this._onDidRefresh.event}get onWillRefresh(){return this._onWillRefresh.event}dispose(){this.disposable.dispose(),this._providers.clear(),this._repositories.clear()}onMetadataChanged(t){const e=this._repositories.get(_(t.uri));!e||(j.log(`VirtualProviderService.onMetadataChanged(${t.uri.toString()}, reason=${t.reason}): Firing onDidChangeRepository...`),this._onDidChangeRepository.fire({repository:e,reason:t.reason==="revision"?"HEAD":void 0}))}addRepository(t){const e=_(t.uri);if(t.uri.scheme!==kt.scheme||this._repositories.has(e))return;const n=this.getProvider(t.uri);if(!n)return;this._repositories.set(e,null);const{repo:r,name:i}=this.getVirtualUriMetadata(t.uri),a=new qt(this,t.uri,r,i,n);this._repositories.set(e,a),this._onDidChangeRepositories.fire({added:[a],removed:[]}),this.telemetryService.publicLog2("repository.opened",{provider:n.id,repositories:this._repositories.size.toString()})}onDocumentChanged(t){var e,n;let r;t&&"uri"in t?r=t.uri:t&&"document"in t&&((e=l.window.activeTextEditor)==null?void 0:e.document.uri.toString())===t.document.uri.toString()?r=t.document.uri:t&&"notebook"in t&&((n=l.window.activeNotebookEditor)==null?void 0:n.notebook.uri.toString())===t.notebook.uri.toString()&&(r=t.notebook.uri);const i=r&&r.scheme===k.scheme?this.getVirtualRootUri(r):void 0;i&&this.changeStoreMaybeHasChanges(i,r)?Gn(nn.ActiveResourceHasChanges,!0):Gn(nn.ActiveResourceHasChanges,!1)}onWorkspaceFoldersChanged(t){if(t.added.length)for(const e of t.added)this.addRepository(e);if(t.removed.length)for(const e of t.removed){const n=_(e.uri);if(e.uri.scheme!==kt.scheme||!this._repositories.has(n))continue;const r=this._repositories.get(n);this._repositories.delete(n),r&&(this._onDidChangeRepositories.fire({added:[],removed:[r]}),this.telemetryService.publicLog2("repository.closed",{repositories:this._repositories.size.toString()}))}Gn(nn.HasVirtualFolders,this._repositories.size!==0),Gn(nn.VirtualFolderProviders,fi(Ji(Oi(this.getRepositories(),e=>e.provider.id)),","))}get hasProviders(){return this._providers.size!==0}get registeredProviders(){return[...Oi(this._providers.values(),t=>({id:t.id,name:t.name}))]}get repositories(){return[...this.getRepositories()]}registerVirtualIndexProvider(t,e){if(this._indexProviders.has(t))throw new Error(`Virtual index provider '${t}' has already been registered`);return this._indexProviders.set(t,e),{dispose:()=>{this._indexProviders.delete(t)}}}register(t,e,n,r,i,a,s,c){var u;if(this._providers.has(t))throw new Error(`Provider '${t}' has already been registered`);const d={id:t,name:e,provider:n,fs:r,storage:i,changeStore:a,metadataStore:s,workspaceRepositories:c};this._providers.set(t,d);const f=l.Disposable.from(d.metadataStore.onDidChange(h=>this.onMetadataChanged(h)),d.changeStore.onDidChange(h=>this._onDidChangeChangeStore.fire(h)),d.workspaceRepositories.onDidChange(async()=>{const h=await this.workspaceRepositoriesGetRepositories();Gn(nn.HasRecentRepositories,h.length>0),this._onDidChangeWorkspaceRepositories.fire()}));return this._onDidChangeProviders.fire({added:[d],removed:[]}),this.telemetryService.publicLog2("provider.registered",{provider:t}),this.onWorkspaceFoldersChanged({added:(u=l.workspace.workspaceFolders)!=null?u:[],removed:[]}),{dispose:()=>{this._providers.delete(t);const h=[];for(const[p,b]of[...this._repositories])(b==null?void 0:b.provider.id)===t&&(this._repositories.delete(p),h.push(b));this._onDidChangeRepositories.fire({added:[],removed:h}),this._onDidChangeProviders.fire({added:[],removed:[d]}),f.dispose()}}}refresh(){if(this._providers.size===0)return;const t=[],e=[];for(const n of this._providers.values()){t.push(...Oi(this.getRepositories(n.id),i=>i.uri));const r=this._indexProviders.get(n.id);r!==void 0&&e.push(r)}this._onWillRefresh.fire(t),t.forEach(n=>this.getMetadataStore(n).refresh()),e.forEach(n=>n.refresh(t)),this._onDidRefresh.fire(t)}getRegisteredProvider(t){const e=this.getProvider(t);return e?{id:e.id,name:e.name}:void 0}getRepository(t,e){var n;const r=l.workspace.getWorkspaceFolder(t);if(!r||r.uri.scheme!==kt.scheme)return;const i=(n=this._repositories.get(_(r.uri)))!=null?n:this.addRepository(r);if(!(e!==void 0&&(i==null?void 0:i.provider.id)!==e))return i!=null?i:void 0}getRepositories(t){return ta(this._repositories.values(),e=>e!==null&&(!t||e.provider.id===t))}hasProvider(t,e){const n=typeof t=="string"?t:kt.getProviderId(t),r=this._providers.get(n);return e!==void 0&&(r==null?void 0:r.id)!==e?!1:r!==void 0}getProvider(t){const e=typeof t=="string"?t:kt.getProviderId(t);return this._providers.get(e)}getRepositoryProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.provider;if(n)return n;throw new fn(t)}getChangeStore(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.changeStore;if(n)return n;throw new fn(t)}getMetadataStore(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.metadataStore;if(n)return n;throw new fn(t)}getWorkspaceRepositories(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.workspaceRepositories;if(n)return n;throw new fn(t)}getFileSystemProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.fs;if(n)return n;throw new fn(t)}getStorageService(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.storage;if(n)return n;throw new fn(t)}async getRecentWorkspaceSourceProviders(){const t=[];for(const[,e]of this._providers.entries()){const n=await e.workspaceRepositories.getRemoteWorkspaceSourceProvider(e.id);t.push(...n!=null?n:[])}if(t.length!==0)return{name:"Recents",label:"Open Recent Repository",icon:"$(history)",placeholder:l.l10n.t("Choose a recent repository"),provideSources:function(e,n,r,i){return t.sort((a,s)=>s.timestamp-a.timestamp).map(a=>({providerId:a.provider.id,name:a.name,icon:"$(repo)",description:er(a.timestamp,{ago:!0}),detail:`${a.provider.name}${a.pullRequest?`\xA0\xA0\u2022\xA0\xA0$(git-pull-request) Pull Request #${a.pullRequest.id}`:""}${k.isCanonicalUri(a.uri)?"":`\xA0\xA0\u2022\xA0\xA0${Pi(a.ref.type)} ${a.ref.name}`}\xA0\xA0\u2022\xA0\xA0${dr(a.ref.type,a.changes)}${a.idx?`\xA0\xA0\u2022\xA0\xA0${zi(a.idx.type)}`:""}`,workspace:{uri:a.uri,name:a.name,location:He.CurrentWindow}}))}}}getRemoteWorkspaceSourceProviders(t){var e,n,r,i,a,s,c;if(t)return(i=(r=(e=this.getProvider(t))==null?void 0:(n=e.provider).getRemoteWorkspaceSourceProviders)==null?void 0:r.call(n))!=null?i:[];const u=new Map;for(const d of this._providers.values()){const f=(c=(s=(a=d.provider).getRemoteWorkspaceSourceProviders)==null?void 0:s.call(a))!=null?c:[];for(const h of f)if(h.qualifiedLabel){const p=u.get(h.label);p!==void 0?u.set(h.label,p.concat(h).map(b=>{var Z;return{...b,label:(Z=b.qualifiedLabel)!=null?Z:b.label}})):u.set(h.label,[h])}else u.set(h.label,[h])}return[...Vi(u.values(),d=>d)]}async getWorkspaceProvidersWithChanges(){var t,e;const n=new Map;for(const r of(t=l.workspace.workspaceFolders)!=null?t:[])if(r.uri.scheme===k.scheme&&await this.getChangeStore(r.uri).hasChanges(r.uri)){const i=(e=this.getRepository(r.uri))==null?void 0:e.provider;if(!i)continue;n.set(i.id,i)}return[...n.values()]}isInWorkspace(t){return this.getVirtualWorkspaceUri(t)!==void 0}getAuthentication(t){const e=this.getProvider(t);if(!e)throw new fn(t);return e==null?void 0:e.provider.getAuthentication(t)}getHttpsCloneUri(t){var e,n;const r=this.canOpenRemoteUrl(t.toString());return(n=r==null?void 0:(e=r.provider.provider).getHttpsCloneUri)==null?void 0:n.call(e,t)}canOpenRemoteUrl(t,e){if(e){const n=this.getProvider(e),r=n==null?void 0:n.provider.canOpenRemoteUrl(t);return r!==void 0?{provider:n,urlType:r}:void 0}for(const n of this._providers.values()){const r=n.provider.canOpenRemoteUrl(t);if(r!==void 0)return{provider:n,urlType:r}}}async createWorkspaceForRemoteUrl(t,e,n=He.CurrentWindow){var r;const i=this.canOpenRemoteUrl(t,e);return(r=i==null?void 0:i.provider)==null?void 0:r.provider.createWorkspaceForRemoteUrl(t,n)}async openWorkspace(t,e){return ut(this,t,e)}createProviderUri(t,e,n){return k.getProviderUri(this.getRepositoryProvider(t).createVirtualUri(kt.baseVirtualWorkspaceUri,e,n))}createRelativeProviderUri(t,e){return k.getProviderUri(this.createRelativeUri(t,e))}createRelativeUri(t,e){const n=this.getProviderRootUri(t);let r=`${n.path}/`;r.endsWith("/")&&(r=r.slice(0,-1));const i=n.with({path:`${n.path}/${e.startsWith("/")?e.substr(1):e}`});return t.scheme===kt.scheme?k.getVirtualUri(i):i}createRelativeVirtualUri(t,e){return k.getVirtualUri(this.createRelativeUri(t,e))}createVirtualUri(t,e,n){return this.getRepositoryProvider(t).createVirtualUri(kt.baseVirtualWorkspaceUri,e,n)}async getBestRemoteUri(t,e,n,r){const{provider:i,repo:a,ref:s}=this.getVirtualUriMetadata(t);if(e===zt.Repository)return this.getRemoteUri(i.id,{repo:a,path:n,item:r});if(e===zt.PullRequest||e===void 0&&(s==null?void 0:s.type)===fe.PullRequest){if((s==null?void 0:s.type)===fe.PullRequest)return this.getRemoteUri(i.id,{repo:a,pullRequest:{id:s.id},path:n,item:r});const{pullRequest:c}=await this.getMetadata(t);if(e===zt.PullRequest&&c)return this.getRemoteUri(i.id,{repo:a,pullRequest:{id:c.id},path:n,item:r})}if(e===zt.Branch||e===void 0&&(s==null?void 0:s.type)===fe.Branch){if((s==null?void 0:s.type)===fe.Branch)return this.getRemoteUri(i.id,{repo:a,branch:s.id,path:n,item:r});const{HEAD:c}=await this.getMetadata(t);if(c.type===G.Branch||c.type===G.RemoteBranch&&e===zt.Branch)return this.getRemoteUri(i.id,{repo:a,branch:c.branch.name,path:n,item:r})}if(e===zt.Tag||e===void 0&&(s==null?void 0:s.type)===fe.Tag){if((s==null?void 0:s.type)===fe.Tag)return this.getRemoteUri(i.id,{repo:a,tag:s.id,path:n,item:r});const{HEAD:c}=await this.getMetadata(t);if(c.type===G.Tag)return this.getRemoteUri(i.id,{repo:a,tag:c.detached.name,path:n,item:r})}if(e===zt.Commit||e===void 0&&((s==null?void 0:s.type)===fe.Commit||(s==null?void 0:s.type)===fe.Tree&&N(s.id))){if((s==null?void 0:s.type)===fe.Commit||(s==null?void 0:s.type)===fe.Tree&&N(s.id))return this.getRemoteUri(i.id,{repo:a,sha:s.id,path:n,item:r});const{HEAD:c}=await this.getMetadata(t);if(e===zt.Commit||c.type===G.Commit)return this.getRemoteUri(i.id,{repo:a,sha:c.sha,path:n,item:r})}if(e===void 0&&(s==null?void 0:s.type)===fe.Tree&&!N(s.id))return this.getRemoteUri(i.id,{repo:a,branch:s.id,path:n,item:r});if(e===void 0)return this.getRemoteUri(i.id,{repo:a,path:n,item:r})}getCanonicalUri(t){let{authority:e}=t;const n=e.indexOf(kt.authoritySeparator);return n!==-1&&(e=e.substr(0,n)),t.with({authority:e})}getRemoteUri(t,e){return this.getRepositoryProvider(t).getRemoteUri(e)}getProviderRootUri(t){return t=k.getProviderUri(t),this.getRepositoryProvider(t).getProviderRootUri(t)}getRelativeFilePath(t,e){return e=k.getProviderUri(e!=null?e:t),this.getRepositoryProvider(e).getRelativeFilePath(t,e)}getVirtualUriMetadata(t){return this.getRepositoryProvider(t).getVirtualUriMetadata(t)}getVirtualCanonicalRootUri(t){const e=k.getVirtualUri(this.getProviderRootUri(t));let{authority:n}=e;const r=n.indexOf(kt.authoritySeparator);return r!==-1&&(n=n.substr(0,r)),e.with({authority:n})}getVirtualRootUri(t){return k.getVirtualUri(this.getProviderRootUri(t))}getVirtualWorkspaceUri(t){var e;return(e=l.workspace.getWorkspaceFolder(k.getVirtualUri(t)))==null?void 0:e.uri}createIGitRepository(t,e,n){var r,i;const a=this.getChangeStore(t);return(i=(r=this.getRepositoryProvider(t)).createIGitRepository)==null?void 0:i.call(r,t,e,n,a)}async getCommitOperations(t,e){const n=this.getChangeStore(t);let r;return(e==null?void 0:e.staged)?(r=await n.getStagedChanges(t),r.length===0&&e.staged==="auto"&&(r=await n.getChanges(t))):r=await n.getChanges(t),r.map(a=>{const s=this.getRelativeFilePath(t,a.uri);switch(a.type){case D.Created:case D.Changed:return{type:a.type,path:s,fileType:a.fileType,content:n.readFile(a.uri).then(async c=>{if(!c)throw this.telemetryService.publicLog2("changeStore.readFailed",{reason:"content undefined"}),new Error("No working content for created or changed commit operation");if(await Gt(c)!==a.hash)throw this.telemetryService.publicLog2("changeStore.readFailed",{reason:"content hash mismatch"}),new Error("Working file content hash does not match expected file content hash");return c})};case D.Deleted:return{type:a.type,path:s,fileType:a.fileType,content:void 0}}})}async getMetadata(t){return{...await this.getMetadataCore(this.getVirtualRootUri(t)),path:this.getRelativeFilePath(t,t)}}async getIndexMetadata(t){const e=this.getIndexProvider(t);return e?e.getIndexMetadata(t):void 0}getModeConfig(t,e,n){return be.getMode(this.getVirtualRootUri(t),e,Boolean(n))}async getModeRefType(t,e){return t=this.getVirtualRootUri(t),this.getRepositoryProvider(t).getModeRefType(t,e)}getIndexProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.id;return n?this._indexProviders.get(n):void 0}async getMetadataCore(t){const e=_(t);let n=this.pendingMetadataRequests.get(e);if(n)return n;let{revision:r,cachedMetadata:i}=await this.getMetadataStore(t).get(t);if(i!==void 0)return i;await this.getChangeStore(t).hasChanges(t)||(r=void 0);const a=this.getProvider(t);if(!a)throw new fn(t);const s=te.decode(t);(s==null?void 0:s.type)===M.SHA&&(r=s.sha);try{n=a.provider.createMetadata(t,r),this.pendingMetadataRequests.set(e,n);const c=await n;return await this.updateMetadataCore(t,c,{silent:!0}),c}catch(c){throw nt.asVirtualProviderErrorCode(c)===oe.InvalidRepositoryError&&Kt.showRepositoryNotValidMessage(),c}finally{this.pendingMetadataRequests.delete(e)}}async updateMetadata(t,e){const n=new Be(`VirtualProviderService.updateMetadata(${t.toString()})`,{},e.HEAD.sha);try{await this.getMetadataStore(t).set(k.getVirtualUri(t),e.HEAD.sha,e)}finally{n.stop()}}updateMetadataCore(t,e,n){return this.getMetadataStore(t).set(k.getVirtualUri(t),e.HEAD.sha,e,n)}async getRepositoryContext(t,e){var n,r;e=e!=null?e:be.get("gitProtocol");let{HEAD:i,cloneUrl:a}=await this.getMetadata(t.uri);if(((n=i.branch)==null?void 0:n.remote)!==void 0){const s=this.getRemoteUri(t.provider.id,{repo:i.branch.remote.repo}),c=(r=await this.createWorkspaceForRemoteUrl(s.toString()))==null?void 0:r.uri;if(c===void 0)throw new Error(`Unable to determine repository context for remote url '${s.toString()}'`);return{cloneUrl:a}=await this.getMetadata(c),{uri:e==="http"?a.http:a.ssh,ref:i.branch.name,name:i.branch.remote.name}}return{uri:e==="http"?a.http:a.ssh,ref:i.name,name:t.name}}async clone(t){const{uri:e,ref:n}=await this.getRepositoryContext(t);if(!e)throw new Error("No url found for clone");let r=`${l.env.uriScheme}://vscode.git/clone?url=${encodeURIComponent(e)}`;if(n!==void 0&&(r+=`&ref=${encodeURIComponent(n)}`),ct)return l.Uri.parse(r);const i=o(async a=>{try{await a.activate(),await l.commands.executeCommand("git.clone",e,void 0,{ref:n})}catch(s){j.error(s,"Unable to clone repository");const c=l.l10n.t("Could not clone your repository as Git is not installed."),u=l.l10n.t("Download Git");await l.window.showErrorMessage(c,{modal:!0},u)===u&&await l.commands.executeCommand("vscode.open",l.Uri.parse("https://aka.ms/vscode-download-git"))}},"cloneRepository");if(l.workspace.isTrusted){const a=l.extensions.getExtension("vscode.git");if(a)await i(a);else throw new Error("Git extension not found")}else return l.Uri.parse(`${r}&windowId=_blank`)}createBranch(t,e,n,r){return this.getRepositoryProvider(t).createBranch(t,e,n,r)}createAndPushCommit(t,e,n,r,i,a){return this.getRepositoryProvider(t).createAndPushCommit(t,e,n,r,i,a)}createPullRequest(t,e,n,r,i,a){return this.getRepositoryProvider(t).createPullRequest(t,e,n,r,i,a)}fetch(t,e){return this.getRepositoryProvider(t).fetch(t,e)}async fetchOrSync(t){await this.getChangeStore(t).hasChanges(t)?await this.fetch(t):await this.sync(t,{reason:"invoked"})}fork(t){return this.getRepositoryProvider(t).fork(t)}getBranch(t,e){return this.getRepositoryProvider(t).getBranch(t,e)}getBranches(t,e){return this.getRepositoryProvider(t).getBranches(t,e)}getCommit(t,e){return this.getRepositoryProvider(t).getCommit(t,e)}getCommits(t,e){var n;return(n=this.getRepositoryProvider(t))==null?void 0:n.getCommits(t,e)}compareCommits(t,e){var n;return(n=this.getRepositoryProvider(t))==null?void 0:n.compareCommits(t,e)}getFileContent(t,e,n){return this.getRepositoryProvider(t).getFileContent(t,e,n)}getFork(t){return this.getRepositoryProvider(t).getFork(t)}async getIncomingChanges(t){var e,n,r;return(r=(n=(e=this.getRepositoryProvider(t)).getIncomingChanges)==null?void 0:n.call(e,t))!=null?r:[]}getPullRequest(t,e){return this.getRepositoryProvider(t).getPullRequest(t,e)}getTags(t,e){return this.getRepositoryProvider(t).getTags(t,e)}getSubmodules(t){var e,n;return(n=(e=this.getRepositoryProvider(t)).getSubmodules)==null?void 0:n.call(e,t)}getSnapshots(t,e){var n,r;return(r=(n=this.getIndexProvider(t))==null?void 0:n.getSnapshots(t,e))!=null?r:Promise.resolve([])}async getTarGz(t,e,n){var r,i;return(i=(r=this.getRepositoryProvider(t)).getTarGz)==null?void 0:i.call(r,t,e,n)}async loadWorkspaceContents(t){return await Ur(this,t),this.getRepositoryProvider(t).loadWorkspaceContents(t)}switchTo(t,e,n){return this.getRepositoryProvider(t).switchTo(t,e,n)}async sync(t,e){const n=this._repositories.get(_(t));n&&this._onDidSyncRepository.fire({repository:n,syncing:!0});try{const r=this.getProvider(t),i=this.getIndexProvider(t);if(r===void 0)throw new fn(t);let{to:a,reason:s,...c}=e!=null?e:{};a===void 0&&i&&(a=await i.resolveIndexRef(t,s==="user"));const u=this.getChangeStore(t);if(await u.hasMergeConflicts(t))throw nt.UnresolvedConflictsError();return await r.provider.sync(t,u,{conflictResolution:ue.Abort,...c,to:a})}finally{n&&this._onDidSyncRepository.fire({repository:n,syncing:!1})}}stat(t){return this.getFileSystemProvider(t).stat(t)}readDirectory(t){return this.getFileSystemProvider(t).readDirectory(t)}readFile(t){return this.getFileSystemProvider(t).readFile(t)}watch(t,e){return this.getFileSystemProvider(t).watch(t,e)}changeStoreApplyChangeset(t,e,n){return this.getChangeStore(t).applyChangeset(t,e,n)}changeStoreCreateFile(t,e){return this.getChangeStore(t).createFile(t,e)}changeStoreCreateDirectory(t){return this.getChangeStore(t).createDirectory(t)}changeStoreDeleteDirectory(t){return this.getChangeStore(t).deleteDirectory(t)}changeStoreDeleteFile(t){return this.getChangeStore(t).deleteFile(t)}changeStoreExportDebugInfo(){var t;for(const e of(t=l.workspace.workspaceFolders)!=null?t:[])this.getChangeStore(e.uri).exportDebugInfo(e.uri)}changeStoreGetChange(t){return this.getChangeStore(t).getChange(t)}changeStoreGetChanges(t,e){return this.getChangeStore(t).getChanges(this.stripUriScope(t),e)}changeStoreGetScopedChangeStore(t,e){const n=typeof e=="string"?e:e.workspaceId;return this.getChangeStore(t).getScopedChangeStore(n)}changeStoreGetScopedUri(t,e){const n=typeof e=="string"?e:e.workspaceId;return this.getChangeStore(t).getScopedUri(t,n)}changeStoreHasChanges(t){return this.getChangeStore(t).hasChanges(this.stripUriScope(t))}changeStoreMaybeHasChanges(t,e){return this.getChangeStore(t).maybeHasChanges(this.stripUriScope(t),this.stripUriScope(e))}changeStoreReadFile(t){return this.getChangeStore(t).readFile(t)}changeStoreResolveDiffCommand(t,e,n,r){return this.getChangeStore(t).resolveDiffCommand(t,e,n,r)}changeStoreStat(t){return this.getChangeStore(t).stat(t)}changeStoreUpdateDirectoryEntries(t,e){return this.getChangeStore(t).updateDirectoryEntries(t,e)}changeStoreWriteFile(t,e,n,r){return this.getChangeStore(t).writeFile(t,e,n,r)}stripUriScope(t){return t===void 0||!t.fragment?t:t.with({fragment:""})}getFromStorage(t,e){return this.getStorageService(t).get(e)}async storeInStorage(t,e,n){return this.getStorageService(t).store(e,n)}async deleteFromStorage(t,e){return this.getStorageService(t).delete(e)}async workspaceRepositoriesGetRepositoriesByCanonicalUri(){const t=await this.workspaceRepositoriesGetRepositories();return Zi(t.sort((e,n)=>n.timestamp-e.timestamp),e=>_(e.canonicalUri))}workspaceRepositoriesRemoveRepository(t){return this.getWorkspaceRepositories(t.uri).remove(t)}workspaceRepositoriesRefresh(){for(const[,t]of this._providers.entries())t.workspaceRepositories.refresh()}async workspaceRepositoriesGetRepositories(){const t=[];for(const[,e]of this._providers.entries()){const n=await e.workspaceRepositories.get();t.push(...n.filter(r=>r.provider.id===e.id))}return t}provideFileSearchResults(t,e,n){return this.getFileSystemProvider(e.folder).provideFileSearchResults(t,e,n)}provideTextSearchResults(t,e,n,r){return this.getFileSystemProvider(e.folder).provideTextSearchResults(t,e,n,r)}static getProviderId(t){const{authority:e}=t,n=e.indexOf(kt.authoritySeparator);return n!==-1?e.substr(0,n):e}static isCanonicalUri(t){return t.authority.indexOf(kt.authoritySeparator)===-1}},"_VirtualProviderService");let $n=kt;$n.scheme="vscode-vfs",$n.authoritySeparator="+",$n.baseVirtualWorkspaceUri=l.Uri.parse(`${kt.scheme}://`),rr([vt()],$n.prototype,"getMetadataCore",1);var mr;(function(t){t[t.File=1]="File",t[t.Notebook=2]="Notebook"})(mr||(mr={}));function kn(t){return t instanceof l.Uri?{fileUri:t,lineNumber:void 0}:t!==void 0&&"lineNumber"in t&&"uri"in t?{fileUri:t.uri,lineNumber:t.lineNumber}:{fileUri:void 0,lineNumber:void 0}}o(kn,"extractContext");function ei(t){var e,n,r;let i;const{fileUri:a,lineNumber:s}=kn(t),c=a!=null?a:(e=l.window.activeTextEditor)==null?void 0:e.document.uri;if(c){if(c.scheme==="vscode-notebook-cell"&&((n=l.window.activeNotebookEditor)==null?void 0:n.notebook.uri.fsPath)===c.fsPath){const u=l.window.activeNotebookEditor.notebook.getCells().find(f=>f.document.uri.fragment===(c==null?void 0:c.fragment)),d=(r=u==null?void 0:u.index)!=null?r:l.window.activeNotebookEditor.selection.start;return i=Nr(s),{type:2,uri:c,cellIndex:d,range:i}}return i=Nr(s),{type:1,uri:c,range:i}}if(l.window.activeNotebookEditor)return{type:2,uri:l.window.activeNotebookEditor.notebook.uri,cellIndex:l.window.activeNotebookEditor.selection.start,range:void 0}}o(ei,"getFileAndPosition");function Nr(t){var e;return t!==void 0&&(!l.window.activeTextEditor||l.window.activeTextEditor.selection.isEmpty||!l.window.activeTextEditor.selection.contains(new l.Position(t-1,0)))?new l.Range(t-1,0,t-1,1):(e=l.window.activeTextEditor)==null?void 0:e.selection}o(Nr,"getRangeOrSelectionForLink");function Cr(){return`${l.env.appName.toLowerCase().includes("insiders")?"insiders.":""}vscode.dev`}o(Cr,"getVscodeDevHost");function hi(t,e,n){async function r(a,s){await Ur(t,void 0);const[c,u]=typeof a=="string"?[{url:a,workspace:void 0}]:await or.show(t,s,l.l10n.t("Enter a remote url, or select a remote provider"),s===He.AddToWorkspace?l.l10n.t("Add Remote Repository to Workspace"):l.l10n.t("Open Remote Repository"),{allowAddToWorkspace:!1});if(!c){n.publicLog2("openRepository.abort",{reason:"abandoned"});return}try{let d;if(c.workspace)d=c.workspace,d.location=u!=null?u:d.location;else if(d=await t.createWorkspaceForRemoteUrl(c.url,void 0,u!=null?u:s),!d){n.publicLog2("openRepository.abort",{reason:"aborted invalid url"});return}await ut(t,d)}catch(d){if(n.sendException(d),nt.asVirtualProviderErrorCode(d)===oe.InvalidCredentialsError){const{action:f}=d;if(f){Kt.showStatus401Message(()=>f());return}}j.error(d)}}o(r,"openRepository");async function i(a,s){const c=s?t.repositories.filter(u=>u.provider.id===s):t.repositories;if(c.length!==0){if(c.length>1){const u=await l.window.showQuickPick(c.map(d=>({label:d.name,description:d.provider.name,repository:d})),{placeHolder:a});return u?u.repository:void 0}return c[0]}}return o(i,"getRepository"),[l.commands.registerCommand("remoteHub.openRepository",a=>(n.publicLog2("command.openRepository"),r(a))),l.commands.registerCommand("remoteHub.continueOn.openRepository",a=>(n.publicLog2("command.continueOn.openRepository"),r(a))),l.commands.registerCommand("remoteHub.addRepositoryToWorkspace",()=>{}),l.commands.registerCommand("remoteHub.continueOn.addRepositoryToWorkspace",()=>{}),l.commands.registerCommand("remoteHub.continueOn",async()=>l.commands.executeCommand("_workbench.editSessions.actions.continueEditSession")),l.commands.registerCommand("remoteHub.openOnDesktop",async()=>{if(!ct)return;const a=await i(l.l10n.t("Choose which repository to open on the desktop"),void 0);if(a===void 0)return;const s=await t.getBestRemoteUri(a.uri);if(s!==void 0)return n.publicLog2("command.openOnDesktop"),l.Uri.parse(`${l.env.uriScheme}://${e}/open?url=${encodeURIComponent(s.toString(!0))}`)}),l.commands.registerCommand("remoteHub.clone",async()=>{const a=await i(l.l10n.t("Choose which repository to clone"),void 0);if(a!==void 0){if(n.publicLog2("command.clone"),await t.changeStoreHasChanges(a.uri)&&l.workspace.getConfiguration("workbench.experimental.editSessions").get("autoResume")==="off"){const s={title:l.l10n.t("Continue")},c={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showWarningMessage(l.l10n.t(`You have uncommitted changes.

Unless you commit those changes, you won't be able see them in your local clone.`),{modal:!0},s,c)!==s){n.publicLog2("command.clone.abort",{reason:"abandoned uncommitted changes prompt"});return}}return t.clone(a)}}),l.commands.registerCommand("remoteHub.continueEditSession.openOnWeb",async()=>{if(ct)return;const a=await i(l.l10n.t("Choose which repository to open on the web"));if(a===void 0)return;const s=await t.getBestRemoteUri(a.uri);if(s!==void 0)return s.with({authority:`${Cr()}/${s.authority}`})}),l.commands.registerCommand("remoteHub.openOnWeb",async()=>{if(ct)return;const a=await i(l.l10n.t("Choose which repository to open on the web"),void 0);if(a===void 0)return;const s=await t.getBestRemoteUri(a.uri);if(s===void 0)return;const c=s.with({authority:`${Cr()}/${s.authority}`});n.publicLog2("command.openOnWeb"),l.env.openExternal(c)}),l.commands.registerCommand("remoteHub.copyVscodeDevLinkFile",async()=>{const a=await i(l.l10n.t("Choose which repository to copy a vscode.dev link for"),void 0);if(a===void 0)return;const s=await t.getBestRemoteUri(a.uri);if(s===void 0)return;const c=s.with({authority:`${Cr()}/${s.authority}`});await l.env.clipboard.writeText(c.toString(!0))}),l.commands.registerCommand("remoteHub.copyVscodeDevLink",async a=>{const s=await Wr(t,a,void 0,!0);s&&await l.env.clipboard.writeText(s.toString(!0))}),l.commands.registerCommand("remoteHub.copyVscodeDevLinkWithoutRange",async a=>{const s=await Wr(t,a,void 0,!1);s&&await l.env.clipboard.writeText(s.toString(!0))}),l.commands.registerCommand("remoteHub.goToRepository",async()=>{n.publicLog2("command.goToRepository");const a=await i(l.l10n.t("Choose which repository to open on the remote"));if(!a)return;const s={provider:a.provider,repo:a.id};return l.commands.executeCommand("remoteHub.openOnRemote",s)}),l.commands.registerCommand("remoteHub.openOnRemote",async a=>{n.publicLog2("command.openOnRemote");const{provider:s,...c}=a,u=t.getRemoteUri(s.id,c);if(u){await l.env.openExternal(u);return}l.window.showErrorMessage(l.l10n.t("Unable to open the resource on {0}",a.provider.name))}),l.commands.registerCommand("remoteHub.refresh",()=>void t.refresh()),l.commands.registerCommand("remoteHub.exportDebugInfo",async()=>{t.changeStoreExportDebugInfo()}),l.commands.registerCommand("remoteHub.setContext",async(a,s)=>{if(!a.startsWith("continueOn:"))throw new Error("Key must start with 'continueOn:'");await Gn(a,s)}),l.commands.registerCommand("remoteHub.notebook.continueOn",async()=>{const a={title:l.l10n.t("Continue Working On...")};await l.window.showInformationMessage(l.l10n.t("Running notebook cells is not available in the web editor. To run this cell, you will need to continue in an environment that can run code, like a codespace or local VS Code."),{modal:!0},a)===a&&await l.commands.executeCommand("remoteHub.continueOn")}),l.commands.registerCommand("remoteHub.remoteHelp.getStarted",()=>ct?"https://aka.ms/vscode-web-docs":"https://aka.ms/vscode-remote/remote-repositories/getting-started")]}o(hi,"registerCommands");function fr(t){return t}o(fr,"command");async function oi(t,e){return l.commands.executeCommand(t,e)}o(oi,"executeCommand");async function Wr(t,e,n,r=!1){var i;async function a(p,b){const Z=b?t.repositories.filter(E=>E.provider.id===b):t.repositories;if(Z.length!==0){if(Z.length>1){const E=await l.window.showQuickPick(Z.map(K=>({label:K.name,description:K.provider.name,repository:K})),{placeHolder:p});return E?E.repository:void 0}return Z[0]}}o(a,"getRepository");let s,c,u,d,f=n;if(n)s=await t.getMetadata(n);else{const p=await a(l.l10n.t("Choose which repository to copy a vscode.dev link for"),void 0);if(p===void 0)return;f=p.uri,s=await t.getMetadata(p.uri);const b=ei(e);if(!b)return;({uri:c,range:d}=b),u=t.getRelativeFilePath(c)}if(!f)return;let h;if(((i=s.HEAD.branch)==null?void 0:i.name)===s.defaultBranch.name||s.pullRequest?h=c?await t.getBestRemoteUri(f,zt.Branch,u,{selection:d,resourceUri:c}):await t.getBestRemoteUri(f,zt.Repository):h=c?await t.getBestRemoteUri(f,void 0,u,{selection:d,resourceUri:c}):await t.getBestRemoteUri(f),h!==void 0)return h.with({authority:`${Cr()}/${h.authority}`,fragment:r?h.fragment:void 0,query:r?h.query:void 0,path:Y(h.path)})}o(Wr,"getLink");function Si(t,e,n){return new $r(new vi(t),new vi(e)).ComputeDiff(n).changes}o(Si,"stringDiff");class Mr{constructor(e,n,r,i){this.originalStart=e,this.originalLength=n,this.modifiedStart=r,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}o(Mr,"DiffChange");var gi;(function(t){t[t.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",t[t.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",t[t.MAX_UINT_8=255]="MAX_UINT_8",t[t.MAX_UINT_16=65535]="MAX_UINT_16",t[t.MAX_UINT_32=4294967295]="MAX_UINT_32",t[t.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(gi||(gi={}));function ti(t,e){return(e<<5)-e+t|0}o(ti,"numberHash");function Ci(t,e){e=ti(149417,e);for(let n=0,r=t.length;n<r;n++)e=ti(t.charCodeAt(n),e);return e}o(Ci,"stringHash");class vi{constructor(e){this.source=e}getElements(){const e=this.source,n=new Int32Array(e.length);for(let r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return n}}o(vi,"StringDiffSequence");class zr{static Assert(e,n){if(!e)throw new Error(n)}}o(zr,"Debug");class Pr{static Copy(e,n,r,i,a){for(let s=0;s<a;s++)r[i+s]=e[n+s]}static Copy2(e,n,r,i,a){for(let s=0;s<a;s++)r[i+s]=e[n+s]}}o(Pr,"MyArray");var si;(function(t){t[t.MaxDifferencesHistory=1447]="MaxDifferencesHistory"})(si||(si={}));class hr{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Mr(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_originalCount++}AddModifiedElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}o(hr,"DiffChangeHelper");class $r{constructor(e,n,r=null){this.ContinueProcessingPredicate=r,this._originalSequence=e,this._modifiedSequence=n;const[i,a,s]=$r._getElements(e),[c,u,d]=$r._getElements(n);this._hasStrings=s&&d,this._originalStringElements=i,this._originalElementsOrHash=a,this._modifiedStringElements=c,this._modifiedElementsOrHash=u,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const n=e.getElements();if($r._isStringArray(n)){const r=new Int32Array(n.length);for(let i=0,a=n.length;i<a;i++)r[i]=Ci(n[i],0);return[n,r,!0]}return n instanceof Int32Array?[[],n,!1]:[[],new Int32Array(n),!1]}ElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[n]:!0}ElementsAreStrictEqual(e,n){if(!this.ElementsAreEqual(e,n))return!1;const r=$r._getStrictElement(this._originalSequence,e),i=$r._getStrictElement(this._modifiedSequence,n);return r===i}static _getStrictElement(e,n){return typeof e.getStrictElement=="function"?e.getStrictElement(n):null}OriginalElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[n]:!0}ModifiedElementsAreEqual(e,n){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[n]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,n,r,i,a){const s=[!1];let c=this.ComputeDiffRecursive(e,n,r,i,s);return a&&(c=this.PrettifyChanges(c)),{quitEarly:s[0],changes:c}}ComputeDiffRecursive(e,n,r,i,a){for(a[0]=!1;e<=n&&r<=i&&this.ElementsAreEqual(e,r);)e++,r++;for(;n>=e&&i>=r&&this.ElementsAreEqual(n,i);)n--,i--;if(e>n||r>i){let h;return r<=i?(zr.Assert(e===n+1,"originalStart should only be one more than originalEnd"),h=[new Mr(e,0,r,i-r+1)]):e<=n?(zr.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[new Mr(e,n-e+1,r,0)]):(zr.Assert(e===n+1,"originalStart should only be one more than originalEnd"),zr.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[]),h}const s=[0],c=[0],u=this.ComputeRecursionPoint(e,n,r,i,s,c,a),d=s[0],f=c[0];if(u!==null)return u;if(!a[0]){const h=this.ComputeDiffRecursive(e,d,r,f,a);let p=[];return a[0]?p=[new Mr(d+1,n-(d+1)+1,f+1,i-(f+1)+1)]:p=this.ComputeDiffRecursive(d+1,n,f+1,i,a),this.ConcatenateChanges(h,p)}return[new Mr(e,n-e+1,r,i-r+1)]}WALKTRACE(e,n,r,i,a,s,c,u,d,f,h,p,b,Z,E,K,me,re){let De=null,Le=null,Ge=new hr,qe=n,it=r,je=b[0]-K[0]-i,Lt=-1073741824,Xt=this.m_forwardHistory.length-1;do{const an=je+e;an===qe||an<it&&d[an-1]<d[an+1]?(h=d[an+1],Z=h-je-i,h<Lt&&Ge.MarkNextChange(),Lt=h,Ge.AddModifiedElement(h+1,Z),je=an+1-e):(h=d[an-1]+1,Z=h-je-i,h<Lt&&Ge.MarkNextChange(),Lt=h-1,Ge.AddOriginalElement(h,Z+1),je=an-1-e),Xt>=0&&(d=this.m_forwardHistory[Xt],e=d[0],qe=1,it=d.length-1)}while(--Xt>=-1);if(De=Ge.getReverseChanges(),re[0]){let an=b[0]+1,Vt=K[0]+1;if(De!==null&&De.length>0){const dn=De[De.length-1];an=Math.max(an,dn.getOriginalEnd()),Vt=Math.max(Vt,dn.getModifiedEnd())}Le=[new Mr(an,p-an+1,Vt,E-Vt+1)]}else{Ge=new hr,qe=s,it=c,je=b[0]-K[0]-u,Lt=1073741824,Xt=me?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const an=je+a;an===qe||an<it&&f[an-1]>=f[an+1]?(h=f[an+1]-1,Z=h-je-u,h>Lt&&Ge.MarkNextChange(),Lt=h+1,Ge.AddOriginalElement(h+1,Z+1),je=an+1-a):(h=f[an-1],Z=h-je-u,h>Lt&&Ge.MarkNextChange(),Lt=h,Ge.AddModifiedElement(h+1,Z+1),je=an-1-a),Xt>=0&&(f=this.m_reverseHistory[Xt],a=f[0],qe=1,it=f.length-1)}while(--Xt>=-1);Le=Ge.getChanges()}return this.ConcatenateChanges(De,Le)}ComputeRecursionPoint(e,n,r,i,a,s,c){let u=0,d=0,f=0,h=0,p=0,b=0;e--,r--,a[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const Z=n-e+(i-r),E=Z+1,K=new Int32Array(E),me=new Int32Array(E),re=i-r,De=n-e,Le=e-r,Ge=n-i,it=(De-re)%2==0;K[re]=e,me[De]=n,c[0]=!1;for(let je=1;je<=Z/2+1;je++){let Lt=0,Xt=0;f=this.ClipDiagonalBound(re-je,je,re,E),h=this.ClipDiagonalBound(re+je,je,re,E);for(let Vt=f;Vt<=h;Vt+=2){Vt===f||Vt<h&&K[Vt-1]<K[Vt+1]?u=K[Vt+1]:u=K[Vt-1]+1,d=u-(Vt-re)-Le;const dn=u;for(;u<n&&d<i&&this.ElementsAreEqual(u+1,d+1);)u++,d++;if(K[Vt]=u,u+d>Lt+Xt&&(Lt=u,Xt=d),!it&&Math.abs(Vt-De)<=je-1&&u>=me[Vt])return a[0]=u,s[0]=d,dn<=me[Vt]&&1447>0&&je<=1447+1?this.WALKTRACE(re,f,h,Le,De,p,b,Ge,K,me,u,n,a,d,i,s,it,c):null}const an=(Lt-e+(Xt-r)-je)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(Lt,an))return c[0]=!0,a[0]=Lt,s[0]=Xt,an>0&&1447>0&&je<=1447+1?this.WALKTRACE(re,f,h,Le,De,p,b,Ge,K,me,u,n,a,d,i,s,it,c):(e++,r++,[new Mr(e,n-e+1,r,i-r+1)]);p=this.ClipDiagonalBound(De-je,je,De,E),b=this.ClipDiagonalBound(De+je,je,De,E);for(let Vt=p;Vt<=b;Vt+=2){Vt===p||Vt<b&&me[Vt-1]>=me[Vt+1]?u=me[Vt+1]-1:u=me[Vt-1],d=u-(Vt-De)-Ge;const dn=u;for(;u>e&&d>r&&this.ElementsAreEqual(u,d);)u--,d--;if(me[Vt]=u,it&&Math.abs(Vt-re)<=je&&u<=K[Vt])return a[0]=u,s[0]=d,dn>=K[Vt]&&1447>0&&je<=1447+1?this.WALKTRACE(re,f,h,Le,De,p,b,Ge,K,me,u,n,a,d,i,s,it,c):null}if(je<=1447){let Vt=new Int32Array(h-f+2);Vt[0]=re-f+1,Pr.Copy2(K,f,Vt,1,h-f+1),this.m_forwardHistory.push(Vt),Vt=new Int32Array(b-p+2),Vt[0]=De-p+1,Pr.Copy2(me,p,Vt,1,b-p+1),this.m_reverseHistory.push(Vt)}}return this.WALKTRACE(re,f,h,Le,De,p,b,Ge,K,me,u,n,a,d,i,s,it,c)}PrettifyChanges(e){for(let n=0;n<e.length;n++){const r=e[n],i=n<e.length-1?e[n+1].originalStart:this._originalElementsOrHash.length,a=n<e.length-1?e[n+1].modifiedStart:this._modifiedElementsOrHash.length,s=r.originalLength>0,c=r.modifiedLength>0;for(;r.originalStart+r.originalLength<i&&r.modifiedStart+r.modifiedLength<a&&(!s||this.OriginalElementsAreEqual(r.originalStart,r.originalStart+r.originalLength))&&(!c||this.ModifiedElementsAreEqual(r.modifiedStart,r.modifiedStart+r.modifiedLength));){const d=this.ElementsAreStrictEqual(r.originalStart,r.modifiedStart);if(this.ElementsAreStrictEqual(r.originalStart+r.originalLength,r.modifiedStart+r.modifiedLength)&&!d)break;r.originalStart++,r.modifiedStart++}let u=[null];if(n<e.length-1&&this.ChangesOverlap(e[n],e[n+1],u)){e[n]=u[0],e.splice(n+1,1),n--;continue}}for(let n=e.length-1;n>=0;n--){const r=e[n];let i=0,a=0;if(n>0){const h=e[n-1];i=h.originalStart+h.originalLength,a=h.modifiedStart+h.modifiedLength}const s=r.originalLength>0,c=r.modifiedLength>0;let u=0,d=this._boundaryScore(r.originalStart,r.originalLength,r.modifiedStart,r.modifiedLength);for(let h=1;;h++){const p=r.originalStart-h,b=r.modifiedStart-h;if(p<i||b<a||s&&!this.OriginalElementsAreEqual(p,p+r.originalLength)||c&&!this.ModifiedElementsAreEqual(b,b+r.modifiedLength))break;const E=(p===i&&b===a?5:0)+this._boundaryScore(p,r.originalLength,b,r.modifiedLength);E>d&&(d=E,u=h)}r.originalStart-=u,r.modifiedStart-=u;const f=[null];if(n>0&&this.ChangesOverlap(e[n-1],e[n],f)){e[n-1]=f[0],e.splice(n,1),n++;continue}}if(this._hasStrings)for(let n=1,r=e.length;n<r;n++){const i=e[n-1],a=e[n],s=a.originalStart-i.originalStart-i.originalLength,c=i.originalStart,u=a.originalStart+a.originalLength,d=u-c,f=i.modifiedStart,h=a.modifiedStart+a.modifiedLength,p=h-f;if(s<5&&d<20&&p<20){const b=this._findBetterContiguousSequence(c,d,f,p,s);if(b){const[Z,E]=b;(Z!==i.originalStart+i.originalLength||E!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=Z-i.originalStart,i.modifiedLength=E-i.modifiedStart,a.originalStart=Z+s,a.modifiedStart=E+s,a.originalLength=u-a.originalStart,a.modifiedLength=h-a.modifiedStart)}}}return e}_findBetterContiguousSequence(e,n,r,i,a){if(n<a||i<a)return null;const s=e+n-a+1,c=r+i-a+1;let u=0,d=0,f=0;for(let h=e;h<s;h++)for(let p=r;p<c;p++){const b=this._contiguousSequenceScore(h,p,a);b>0&&b>u&&(u=b,d=h,f=p)}return u>0?[d,f]:null}_contiguousSequenceScore(e,n,r){let i=0;for(let a=0;a<r;a++){if(!this.ElementsAreEqual(e+a,n+a))return 0;i+=this._originalStringElements[e+a].length}return i}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,n){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(n>0){const r=e+n;if(this._OriginalIsBoundary(r-1)||this._OriginalIsBoundary(r))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,n){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(n>0){const r=e+n;if(this._ModifiedIsBoundary(r-1)||this._ModifiedIsBoundary(r))return!0}return!1}_boundaryScore(e,n,r,i){const a=this._OriginalRegionIsBoundary(e,n)?1:0,s=this._ModifiedRegionIsBoundary(r,i)?1:0;return a+s}ConcatenateChanges(e,n){let r=[];if(e.length===0||n.length===0)return n.length>0?n:e;if(this.ChangesOverlap(e[e.length-1],n[0],r)){const i=new Array(e.length+n.length-1);return Pr.Copy(e,0,i,0,e.length-1),i[e.length-1]=r[0],Pr.Copy(n,1,i,e.length,n.length-1),i}else{const i=new Array(e.length+n.length);return Pr.Copy(e,0,i,0,e.length),Pr.Copy(n,0,i,e.length,n.length),i}}ChangesOverlap(e,n,r){if(zr.Assert(e.originalStart<=n.originalStart,"Left change is not less than or equal to right change"),zr.Assert(e.modifiedStart<=n.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=n.originalStart||e.modifiedStart+e.modifiedLength>=n.modifiedStart){const i=e.originalStart;let a=e.originalLength;const s=e.modifiedStart;let c=e.modifiedLength;return e.originalStart+e.originalLength>=n.originalStart&&(a=n.originalStart+n.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=n.modifiedStart&&(c=n.modifiedStart+n.modifiedLength-e.modifiedStart),r[0]=new Mr(i,a,s,c),!0}else return r[0]=null,!1}ClipDiagonalBound(e,n,r,i){if(e>=0&&e<i)return e;const a=r,s=i-r-1,c=n%2==0;if(e<0){const u=a%2==0;return c===u?0:1}else{const u=s%2==0;return c===u?i-1:i-2}}}o($r,"LcsDiff");var ye;(function(t){function e(r,i){return r instanceof Pt?i:new l.Position(i.line,i.character)}o(e,"makePosition"),t.makePosition=e;function n(r,i){return r instanceof Pt?i:new l.Range(i.start.line,i.start.character,i.end.line,i.end.character)}o(n,"makeRange"),t.makeRange=n})(ye||(ye={}));var Ze;(function(t){t[t.index2code=1]="index2code",t[t.code2Index=2]="code2Index"})(Ze||(Ze={}));const st=o(class{constructor(t,e,n,r){this.diffCache=new _n(32),this.indexDocumentCache=new _n(32),this.codeDocumentCache=new _n(32),this.providerService=t,this.rootUri=e,this.index=n,this.code=r,this.changes=this.computeChanges()}async computeChanges(){if(this.index===this.code)return new Map;const t=await this.providerService.compareCommits(this.rootUri,{base:this.index,compare:this.code});return t===void 0?new Map:new Map(t.map(e=>[e.uri.toString(),e.type]))}async needsMapping(t){const e=t.uri;if(!e.toString().startsWith(this.rootUri.toString()))return!1;if((await this.changes).get(e.toString())!==void 0)return!0;const i=await this.getIndexDocument(e);return i===void 0?!0:this.getDiff(1,i,t).length!==0}async mapPositionFromCodeToIndex(t,e){const n=t.uri;if(!n.toString().startsWith(this.rootUri.toString()))return;const i=(await this.changes).get(n.toString());if(i===D.Created||i===D.Deleted)return;const a=await this.getIndexDocument(n);if(a===void 0)return;const s=this.getDiff(2,a,t);if(s.length===0)return e;const c=t.offsetAt(new l.Position(e.line,e.character));let u=c;for(const p of s){if(p.modifiedStart<=c&&c<p.modifiedStart+p.modifiedLength)return;if(u<p.modifiedStart)break;u=u-(p.modifiedLength-p.originalLength)}const d=a.positionAt(u),f=this.getWordAtOffset(a.lineAt(d.line).text,d.character),h=this.getWordAtOffset(t.lineAt(e.line).text,e.character);if(!(f===void 0||h===void 0||f!==h))return new l.Position(d.line,d.character)}async mapRangeFromIndexToCode(t,e){const n=t instanceof l.Uri?t:t.uri;if(!n.toString().startsWith(this.rootUri.toString()))return;const i=(await this.changes).get(n.toString());if(i===D.Created||i===D.Deleted)return;const[a,s]=await Promise.all([this.getIndexDocument(n),this.getCodeDocument(t)]);if(a===void 0||s===void 0)return;const c=this.getDiff(1,a,s);if(c.length===0)return e;const u=a.offsetAt(e.start);let d=u;const f=a.offsetAt(e.end);let h=f;for(const K of c){if(h<K.originalStart)break;const me=K.modifiedLength-K.originalLength;if(K.originalStart<=u){if(u<K.originalStart+K.originalLength)return;d+=me}else if(f<K.originalStart+K.originalLength)return;if(K.originalStart<=f){if(f<K.originalStart+K.originalLength)return;h+=me}}const p=s.positionAt(d),b=s.positionAt(h),Z=a.getText(e),E=s.getText(ye.makeRange(s,{start:p,end:b}));if(Z===E)return new l.Range(p.line,p.character,b.line,b.character)}async getIndexDocument(t){return this.getDocument(this.indexDocumentCache,t,this.index)}async getCodeDocument(t){return t instanceof l.Uri?this.getDocument(this.codeDocumentCache,t,this.code):t}async getDocument(t,e,n){let r=t.get(e.toString());if(r!==null)return r!==void 0||(r=this._getDocument(e,n),t.set(e.toString(),r),r.then(i=>{i===void 0&&t.set(e.toString(),null)},void 0)),r}async _getDocument(t,e){const n=t.toString().substr(this.rootUri.toString().length);return this.providerService.getFileContent(this.rootUri,e,n).then(r=>new Pt(t,Number.MAX_VALUE,st.textDecoder.decode(r)),()=>{})}getDiff(t,e,n){if(e.uri.toString()!==n.uri.toString())throw new Error(`Original (${e.uri.toString()}) and modified (${n.uri.toString()}) are pointing to a different document`);const r=`${t}${e.uri.toString()}`;let i=this.diffCache.get(r);return i!==void 0&&i.original===e.version&&i.modified===n.version||(i={original:e.version,modified:n.version,changes:Si(e.getText(),n.getText(),!0)},this.diffCache.set(r,i)),i.changes}getWordAtOffset(t,e){let n="findStart",r=0,i=t.length,a=0;for(;a<t.length&&n!=="endFound";){switch(a===e&&(n="findEnd"),t[a]){case" ":case"	":case"(":case")":case"[":case"]":case"{":case"}":case"'":case'"':case"`":switch(n){case"findStart":r=a+1;break;case"findEnd":i=a,n="endFound";break}break}a++}return n==="endFound"?t.substring(r,i):void 0}},"_DiffMapper");let yt=st;yt.textDecoder=new TextDecoder("utf8");var Rt;(function(t){t[t.LineFeed=10]="LineFeed",t[t.CarriageReturn=13]="CarriageReturn"})(Rt||(Rt={}));class Pt{static computeLineOffsets(e,n,r=0){const i=n?[r]:[];for(let a=0;a<e.length;a++){const s=e.charCodeAt(a);(s===13||s===10)&&(s===13&&a+1<e.length&&e.charCodeAt(a+1)===10&&a++,i.push(r+a+1))}return i}constructor(e,n,r){this._content=r,this.uri=e,this.version=n,this._lineOffsets=void 0}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=Pt.computeLineOffsets(this._content,!0)),this._lineOffsets}getText(e){if(e){const n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}lineAt(e){const n=this.getLineOffsets();if(e>=n.length)return{lineNumber:e,text:""};const r=n[e],i=n[e+1];if(i===void 0)return{lineNumber:e,text:this._content.substring(r)};const a=this._content.substring(r,i);let s=a.length-1;for(;s>=0&&(a[s]===`
`||a[s]==="\r");)s--;return{lineNumber:e,text:a.substr(0,s+1)}}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);const n=this.getLineOffsets();let r=0,i=n.length;if(i===0)return{line:0,character:e};for(;r<i;){const s=Math.floor((r+i)/2);n[s]>e?i=s:r=s+1}const a=r-1;return{line:a,character:e-n[a]}}offsetAt(e){const n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;const r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)}get lineCount(){return this.getLineOffsets().length}}o(Pt,"TextDocument");var ln;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647})(ln||(ln={}));var pe;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647})(pe||(pe={}));var $e;(function(t){function e(r,i){return r===Number.MAX_VALUE&&(r=pe.MAX_VALUE),i===Number.MAX_VALUE&&(i=pe.MAX_VALUE),{line:r,character:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Je.objectLiteral(i)&&Je.uinteger(i.line)&&Je.uinteger(i.character)}o(n,"is"),t.is=n})($e||($e={}));var ke;(function(t){function e(r,i,a,s){if(Je.uinteger(r)&&Je.uinteger(i)&&Je.uinteger(a)&&Je.uinteger(s))return{start:$e.create(r,i),end:$e.create(a,s)};if($e.is(r)&&$e.is(i))return{start:r,end:i};throw new Error("Range#create called with invalid arguments["+r+", "+i+", "+a+", "+s+"]")}o(e,"create"),t.create=e;function n(r){var i=r;return Je.objectLiteral(i)&&$e.is(i.start)&&$e.is(i.end)}o(n,"is"),t.is=n})(ke||(ke={}));var ft;(function(t){function e(r,i){return{uri:r,range:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Je.defined(i)&&ke.is(i.range)&&(Je.string(i.uri)||Je.undefined(i.uri))}o(n,"is"),t.is=n})(ft||(ft={}));var xt;(function(t){function e(r,i,a,s){return{targetUri:r,targetRange:i,targetSelectionRange:a,originSelectionRange:s}}o(e,"create"),t.create=e;function n(r){var i=r;return Je.defined(i)&&ke.is(i.targetRange)&&Je.string(i.targetUri)&&(ke.is(i.targetSelectionRange)||Je.undefined(i.targetSelectionRange))&&(ke.is(i.originSelectionRange)||Je.undefined(i.originSelectionRange))}o(n,"is"),t.is=n})(xt||(xt={}));var Yt;(function(t){function e(r,i,a,s){return{red:r,green:i,blue:a,alpha:s}}o(e,"create"),t.create=e;function n(r){var i=r;return Je.numberRange(i.red,0,1)&&Je.numberRange(i.green,0,1)&&Je.numberRange(i.blue,0,1)&&Je.numberRange(i.alpha,0,1)}o(n,"is"),t.is=n})(Yt||(Yt={}));var An;(function(t){function e(r,i){return{range:r,color:i}}o(e,"create"),t.create=e;function n(r){var i=r;return ke.is(i.range)&&Yt.is(i.color)}o(n,"is"),t.is=n})(An||(An={}));var Tn;(function(t){function e(r,i,a){return{label:r,textEdit:i,additionalTextEdits:a}}o(e,"create"),t.create=e;function n(r){var i=r;return Je.string(i.label)&&(Je.undefined(i.textEdit)||Bi.is(i))&&(Je.undefined(i.additionalTextEdits)||Je.typedArray(i.additionalTextEdits,Bi.is))}o(n,"is"),t.is=n})(Tn||(Tn={}));var Nn;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(Nn||(Nn={}));var pi;(function(t){function e(r,i,a,s,c){var u={startLine:r,endLine:i};return Je.defined(a)&&(u.startCharacter=a),Je.defined(s)&&(u.endCharacter=s),Je.defined(c)&&(u.kind=c),u}o(e,"create"),t.create=e;function n(r){var i=r;return Je.uinteger(i.startLine)&&Je.uinteger(i.startLine)&&(Je.undefined(i.startCharacter)||Je.uinteger(i.startCharacter))&&(Je.undefined(i.endCharacter)||Je.uinteger(i.endCharacter))&&(Je.undefined(i.kind)||Je.string(i.kind))}o(n,"is"),t.is=n})(pi||(pi={}));var Ii;(function(t){function e(r,i){return{location:r,message:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Je.defined(i)&&ft.is(i.location)&&Je.string(i.message)}o(n,"is"),t.is=n})(Ii||(Ii={}));var li;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(li||(li={}));var ir;(function(t){t.Unnecessary=1,t.Deprecated=2})(ir||(ir={}));var Li;(function(t){function e(n){var r=n;return r!=null&&Je.string(r.href)}o(e,"is"),t.is=e})(Li||(Li={}));var ki;(function(t){function e(r,i,a,s,c,u){var d={range:r,message:i};return Je.defined(a)&&(d.severity=a),Je.defined(s)&&(d.code=s),Je.defined(c)&&(d.source=c),Je.defined(u)&&(d.relatedInformation=u),d}o(e,"create"),t.create=e;function n(r){var i,a=r;return Je.defined(a)&&ke.is(a.range)&&Je.string(a.message)&&(Je.number(a.severity)||Je.undefined(a.severity))&&(Je.integer(a.code)||Je.string(a.code)||Je.undefined(a.code))&&(Je.undefined(a.codeDescription)||Je.string((i=a.codeDescription)===null||i===void 0?void 0:i.href))&&(Je.string(a.source)||Je.undefined(a.source))&&(Je.undefined(a.relatedInformation)||Je.typedArray(a.relatedInformation,Ii.is))}o(n,"is"),t.is=n})(ki||(ki={}));var Ui;(function(t){function e(r,i){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var c={title:r,command:i};return Je.defined(a)&&a.length>0&&(c.arguments=a),c}o(e,"create"),t.create=e;function n(r){var i=r;return Je.defined(i)&&Je.string(i.title)&&Je.string(i.command)}o(n,"is"),t.is=n})(Ui||(Ui={}));var Bi;(function(t){function e(a,s){return{range:a,newText:s}}o(e,"replace"),t.replace=e;function n(a,s){return{range:{start:a,end:a},newText:s}}o(n,"insert"),t.insert=n;function r(a){return{range:a,newText:""}}o(r,"del"),t.del=r;function i(a){var s=a;return Je.objectLiteral(s)&&Je.string(s.newText)&&ke.is(s.range)}o(i,"is"),t.is=i})(Bi||(Bi={}));var bi;(function(t){function e(r,i,a){var s={label:r};return i!==void 0&&(s.needsConfirmation=i),a!==void 0&&(s.description=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i!==void 0&&Je.objectLiteral(i)&&Je.string(i.label)&&(Je.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(Je.string(i.description)||i.description===void 0)}o(n,"is"),t.is=n})(bi||(bi={}));var Ir;(function(t){function e(n){var r=n;return typeof r=="string"}o(e,"is"),t.is=e})(Ir||(Ir={}));var xi;(function(t){function e(a,s,c){return{range:a,newText:s,annotationId:c}}o(e,"replace"),t.replace=e;function n(a,s,c){return{range:{start:a,end:a},newText:s,annotationId:c}}o(n,"insert"),t.insert=n;function r(a,s){return{range:a,newText:"",annotationId:s}}o(r,"del"),t.del=r;function i(a){var s=a;return Bi.is(s)&&(bi.is(s.annotationId)||Ir.is(s.annotationId))}o(i,"is"),t.is=i})(xi||(xi={}));var na;(function(t){function e(r,i){return{textDocument:r,edits:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Je.defined(i)&&mi.is(i.textDocument)&&Array.isArray(i.edits)}o(n,"is"),t.is=n})(na||(na={}));var ji;(function(t){function e(r,i,a){var s={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(s.options=i),a!==void 0&&(s.annotationId=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="create"&&Je.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||Je.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Je.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Ir.is(i.annotationId))}o(n,"is"),t.is=n})(ji||(ji={}));var Yi;(function(t){function e(r,i,a,s){var c={kind:"rename",oldUri:r,newUri:i};return a!==void 0&&(a.overwrite!==void 0||a.ignoreIfExists!==void 0)&&(c.options=a),s!==void 0&&(c.annotationId=s),c}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="rename"&&Je.string(i.oldUri)&&Je.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||Je.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Je.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Ir.is(i.annotationId))}o(n,"is"),t.is=n})(Yi||(Yi={}));var ra;(function(t){function e(r,i,a){var s={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(s.options=i),a!==void 0&&(s.annotationId=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="delete"&&Je.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||Je.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||Je.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||Ir.is(i.annotationId))}o(n,"is"),t.is=n})(ra||(ra={}));var sa;(function(t){function e(n){var r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(i){return Je.string(i.kind)?ji.is(i)||Yi.is(i)||ra.is(i):na.is(i)}))}o(e,"is"),t.is=e})(sa||(sa={}));var Yn=function(){function t(e,n){this.edits=e,this.changeAnnotations=n}return o(t,"TextEditChangeImpl"),t.prototype.insert=function(e,n,r){var i,a;if(r===void 0?i=Bi.insert(e,n):Ir.is(r)?(a=r,i=xi.insert(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(r),i=xi.insert(e,n,a)),this.edits.push(i),a!==void 0)return a},t.prototype.replace=function(e,n,r){var i,a;if(r===void 0?i=Bi.replace(e,n):Ir.is(r)?(a=r,i=xi.replace(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(r),i=xi.replace(e,n,a)),this.edits.push(i),a!==void 0)return a},t.prototype.delete=function(e,n){var r,i;if(n===void 0?r=Bi.del(e):Ir.is(n)?(i=n,r=xi.del(e,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=xi.del(e,i)),this.edits.push(r),i!==void 0)return i},t.prototype.add=function(e){this.edits.push(e)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),Ar=function(){function t(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return o(t,"ChangeAnnotations"),t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(e,n){var r;if(Ir.is(e)?r=e:(r=this.nextId(),n=e),this._annotations[r]!==void 0)throw new Error("Id "+r+" is already in use.");if(n===void 0)throw new Error("No annotation provided for id "+r);return this._annotations[r]=n,this._size++,r},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}(),Ao=function(){function t(e){var n=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Ar(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(r){if(na.is(r)){var i=new Yn(r.edits,n._changeAnnotations);n._textEditChanges[r.textDocument.uri]=i}})):e.changes&&Object.keys(e.changes).forEach(function(r){var i=new Yn(e.changes[r]);n._textEditChanges[r]=i})):this._workspaceEdit={}}return o(t,"WorkspaceChange"),Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(e){if(mi.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:e.uri,version:e.version},r=this._textEditChanges[n.uri];if(!r){var i=[],a={textDocument:n,edits:i};this._workspaceEdit.documentChanges.push(a),r=new Yn(i,this._changeAnnotations),this._textEditChanges[n.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[e];if(!r){var i=[];this._workspaceEdit.changes[e]=i,r=new Yn(i),this._textEditChanges[e]=r}return r}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Ar,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;bi.is(n)||Ir.is(n)?i=n:r=n;var a,s;if(i===void 0?a=ji.create(e,r):(s=Ir.is(i)?i:this._changeAnnotations.manage(i),a=ji.create(e,r,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},t.prototype.renameFile=function(e,n,r,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var a;bi.is(r)||Ir.is(r)?a=r:i=r;var s,c;if(a===void 0?s=Yi.create(e,n,i):(c=Ir.is(a)?a:this._changeAnnotations.manage(a),s=Yi.create(e,n,i,c)),this._workspaceEdit.documentChanges.push(s),c!==void 0)return c},t.prototype.deleteFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;bi.is(n)||Ir.is(n)?i=n:r=n;var a,s;if(i===void 0?a=ra.create(e,r):(s=Ir.is(i)?i:this._changeAnnotations.manage(i),a=ra.create(e,r,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},t}(),yr;(function(t){function e(r){return{uri:r}}o(e,"create"),t.create=e;function n(r){var i=r;return Je.defined(i)&&Je.string(i.uri)}o(n,"is"),t.is=n})(yr||(yr={}));var ja;(function(t){function e(r,i){return{uri:r,version:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Je.defined(i)&&Je.string(i.uri)&&Je.integer(i.version)}o(n,"is"),t.is=n})(ja||(ja={}));var mi;(function(t){function e(r,i){return{uri:r,version:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Je.defined(i)&&Je.string(i.uri)&&(i.version===null||Je.integer(i.version))}o(n,"is"),t.is=n})(mi||(mi={}));var Hi;(function(t){function e(r,i,a,s){return{uri:r,languageId:i,version:a,text:s}}o(e,"create"),t.create=e;function n(r){var i=r;return Je.defined(i)&&Je.string(i.uri)&&Je.string(i.languageId)&&Je.integer(i.version)&&Je.string(i.text)}o(n,"is"),t.is=n})(Hi||(Hi={}));var Vr;(function(t){t.PlainText="plaintext",t.Markdown="markdown"})(Vr||(Vr={})),function(t){function e(n){var r=n;return r===t.PlainText||r===t.Markdown}o(e,"is"),t.is=e}(Vr||(Vr={}));var Fi;(function(t){function e(n){var r=n;return Je.objectLiteral(n)&&Vr.is(r.kind)&&Je.string(r.value)}o(e,"is"),t.is=e})(Fi||(Fi={}));var Ya;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(Ya||(Ya={}));var qa;(function(t){t.PlainText=1,t.Snippet=2})(qa||(qa={}));var Aa;(function(t){t.Deprecated=1})(Aa||(Aa={}));var Qa;(function(t){function e(r,i,a){return{newText:r,insert:i,replace:a}}o(e,"create"),t.create=e;function n(r){var i=r;return i&&Je.string(i.newText)&&ke.is(i.insert)&&ke.is(i.replace)}o(n,"is"),t.is=n})(Qa||(Qa={}));var Xa;(function(t){t.asIs=1,t.adjustIndentation=2})(Xa||(Xa={}));var Za;(function(t){function e(n){return{label:n}}o(e,"create"),t.create=e})(Za||(Za={}));var eo;(function(t){function e(n,r){return{items:n||[],isIncomplete:!!r}}o(e,"create"),t.create=e})(eo||(eo={}));var pa;(function(t){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}o(e,"fromPlainText"),t.fromPlainText=e;function n(r){var i=r;return Je.string(i)||Je.objectLiteral(i)&&Je.string(i.language)&&Je.string(i.value)}o(n,"is"),t.is=n})(pa||(pa={}));var Da;(function(t){function e(n){var r=n;return!!r&&Je.objectLiteral(r)&&(Fi.is(r.contents)||pa.is(r.contents)||Je.typedArray(r.contents,pa.is))&&(n.range===void 0||ke.is(n.range))}o(e,"is"),t.is=e})(Da||(Da={}));var to;(function(t){function e(n,r){return r?{label:n,documentation:r}:{label:n}}o(e,"create"),t.create=e})(to||(to={}));var Ra;(function(t){function e(n,r){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s={label:n};return Je.defined(r)&&(s.documentation=r),Je.defined(i)?s.parameters=i:s.parameters=[],s}o(e,"create"),t.create=e})(Ra||(Ra={}));var la;(function(t){t.Text=1,t.Read=2,t.Write=3})(la||(la={}));var no;(function(t){function e(n,r){var i={range:n};return Je.number(r)&&(i.kind=r),i}o(e,"create"),t.create=e})(no||(no={}));var Ta;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(Ta||(Ta={}));var Ma;(function(t){t.Deprecated=1})(Ma||(Ma={}));var ro;(function(t){function e(n,r,i,a,s){var c={name:n,kind:r,location:{uri:a,range:i}};return s&&(c.containerName=s),c}o(e,"create"),t.create=e})(ro||(ro={}));var io;(function(t){function e(r,i,a,s,c,u){var d={name:r,detail:i,kind:a,range:s,selectionRange:c};return u!==void 0&&(d.children=u),d}o(e,"create"),t.create=e;function n(r){var i=r;return i&&Je.string(i.name)&&Je.number(i.kind)&&ke.is(i.range)&&ke.is(i.selectionRange)&&(i.detail===void 0||Je.string(i.detail))&&(i.deprecated===void 0||Je.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}o(n,"is"),t.is=n})(io||(io={}));var _i;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(_i||(_i={}));var Ei;(function(t){function e(r,i){var a={diagnostics:r};return i!=null&&(a.only=i),a}o(e,"create"),t.create=e;function n(r){var i=r;return Je.defined(i)&&Je.typedArray(i.diagnostics,ki.is)&&(i.only===void 0||Je.typedArray(i.only,Je.string))}o(n,"is"),t.is=n})(Ei||(Ei={}));var ao;(function(t){function e(r,i,a){var s={title:r},c=!0;return typeof i=="string"?(c=!1,s.kind=i):Ui.is(i)?s.command=i:s.edit=i,c&&a!==void 0&&(s.kind=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&Je.string(i.title)&&(i.diagnostics===void 0||Je.typedArray(i.diagnostics,ki.is))&&(i.kind===void 0||Je.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||Ui.is(i.command))&&(i.isPreferred===void 0||Je.boolean(i.isPreferred))&&(i.edit===void 0||sa.is(i.edit))}o(n,"is"),t.is=n})(ao||(ao={}));var ca;(function(t){function e(r,i){var a={range:r};return Je.defined(i)&&(a.data=i),a}o(e,"create"),t.create=e;function n(r){var i=r;return Je.defined(i)&&ke.is(i.range)&&(Je.undefined(i.command)||Ui.is(i.command))}o(n,"is"),t.is=n})(ca||(ca={}));var Pa;(function(t){function e(r,i){return{tabSize:r,insertSpaces:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Je.defined(i)&&Je.uinteger(i.tabSize)&&Je.boolean(i.insertSpaces)}o(n,"is"),t.is=n})(Pa||(Pa={}));var oo;(function(t){function e(r,i,a){return{range:r,target:i,data:a}}o(e,"create"),t.create=e;function n(r){var i=r;return Je.defined(i)&&ke.is(i.range)&&(Je.undefined(i.target)||Je.string(i.target))}o(n,"is"),t.is=n})(oo||(oo={}));var Ia;(function(t){function e(r,i){return{range:r,parent:i}}o(e,"create"),t.create=e;function n(r){var i=r;return i!==void 0&&ke.is(i.range)&&(i.parent===void 0||t.is(i.parent))}o(n,"is"),t.is=n})(Ia||(Ia={}));var es=null,so;(function(t){function e(a,s,c,u){return new lo(a,s,c,u)}o(e,"create"),t.create=e;function n(a){var s=a;return!!(Je.defined(s)&&Je.string(s.uri)&&(Je.undefined(s.languageId)||Je.string(s.languageId))&&Je.uinteger(s.lineCount)&&Je.func(s.getText)&&Je.func(s.positionAt)&&Je.func(s.offsetAt))}o(n,"is"),t.is=n;function r(a,s){for(var c=a.getText(),u=i(s,function(Z,E){var K=Z.range.start.line-E.range.start.line;return K===0?Z.range.start.character-E.range.start.character:K}),d=c.length,f=u.length-1;f>=0;f--){var h=u[f],p=a.offsetAt(h.range.start),b=a.offsetAt(h.range.end);if(b<=d)c=c.substring(0,p)+h.newText+c.substring(b,c.length);else throw new Error("Overlapping edit");d=p}return c}o(r,"applyEdits"),t.applyEdits=r;function i(a,s){if(a.length<=1)return a;var c=a.length/2|0,u=a.slice(0,c),d=a.slice(c);i(u,s),i(d,s);for(var f=0,h=0,p=0;f<u.length&&h<d.length;){var b=s(u[f],d[h]);b<=0?a[p++]=u[f++]:a[p++]=d[h++]}for(;f<u.length;)a[p++]=u[f++];for(;h<d.length;)a[p++]=d[h++];return a}o(i,"mergeSort")})(so||(so={}));var lo=function(){function t(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}return o(t,"FullTextDocument"),Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content},t.prototype.update=function(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],n=this._content,r=!0,i=0;i<n.length;i++){r&&(e.push(i),r=!1);var a=n.charAt(i);r=a==="\r"||a===`
`,a==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return $e.create(0,e);for(;r<i;){var a=Math.floor((r+i)/2);n[a]>e?i=a:r=a+1}var s=r-1;return $e.create(s,e-n[s])},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}(),Je;(function(t){var e=Object.prototype.toString;function n(b){return typeof b!="undefined"}o(n,"defined"),t.defined=n;function r(b){return typeof b=="undefined"}o(r,"undefined"),t.undefined=r;function i(b){return b===!0||b===!1}o(i,"boolean"),t.boolean=i;function a(b){return e.call(b)==="[object String]"}o(a,"string"),t.string=a;function s(b){return e.call(b)==="[object Number]"}o(s,"number"),t.number=s;function c(b,Z,E){return e.call(b)==="[object Number]"&&Z<=b&&b<=E}o(c,"numberRange"),t.numberRange=c;function u(b){return e.call(b)==="[object Number]"&&-2147483648<=b&&b<=2147483647}o(u,"integer"),t.integer=u;function d(b){return e.call(b)==="[object Number]"&&0<=b&&b<=2147483647}o(d,"uinteger"),t.uinteger=d;function f(b){return e.call(b)==="[object Function]"}o(f,"func"),t.func=f;function h(b){return b!==null&&typeof b=="object"}o(h,"objectLiteral"),t.objectLiteral=h;function p(b,Z){return Array.isArray(b)&&b.every(Z)}o(p,"typedArray"),t.typedArray=p})(Je||(Je={}));var ia;(function(t){function e(r){return typeof r=="string"||r instanceof String}o(e,"string"),t.string=e;function n(r){return typeof r=="number"||r instanceof Number}o(n,"number"),t.number=n})(ia||(ia={}));var ua;(function(t){function e(n){const r=n;return r!=null&&(ia.number(r.value)||ia.string(r.value))&&ia.string(r.target)}o(e,"is"),t.is=e})(ua||(ua={}));class ma extends l.Diagnostic{constructor(e,n,r,i){super(e,n,r);this.data=i,this.hasDiagnosticCode=!1}}o(ma,"ProtocolDiagnostic");var ni;(function(t){const e=Object.prototype.toString;function n(f){return typeof f!="undefined"}o(n,"defined"),t.defined=n;function r(f){return f===!0||f===!1}o(r,"boolean"),t.boolean=r;function i(f){return e.call(f)==="[object String]"}o(i,"string"),t.string=i;function a(f){return e.call(f)==="[object Number]"}o(a,"number"),t.number=a;function s(f){return f!==null&&typeof f=="object"}o(s,"objectLiteral"),t.objectLiteral=s;function c(f){return Array.isArray(f)}o(c,"array"),t.array=c;function u(f){return c(f)&&f.every(h=>i(h))}o(u,"stringArray"),t.stringArray=u;function d(f,h){return Array.isArray(f)&&f.every(h)}o(d,"typedArray"),t.typedArray=d})(ni||(ni={}));var ya;(function(t){function e(n){const r=n;return r&&ni.string(r.language)&&ni.string(r.value)}o(e,"is"),t.is=e})(ya||(ya={}));function Do(t){const e=o(V=>l.Uri.parse(V),"nullConverter"),n=t!=null?t:e;function r(V){return n(V)}o(r,"asUri");function i(V){return V.map(a)}o(i,"asDiagnostics");function a(V){const mt=new ma(h(V.range),V.message,b(V.severity),V.data);return V.code!==void 0&&(Li.is(V.codeDescription)?mt.code={value:V.code,target:r(V.codeDescription.href)}:ua.is(V.code)?(mt.hasDiagnosticCode=!0,mt.code={value:V.code.value,target:r(V.code.target)}):mt.code=V.code),V.source&&(mt.source=V.source),V.relatedInformation&&(mt.relatedInformation=s(V.relatedInformation)),Array.isArray(V.tags)&&(mt.tags=u(V.tags)),mt}o(a,"asDiagnostic");function s(V){return V.map(c)}o(s,"asRelatedInformation");function c(V){return new l.DiagnosticRelatedInformation(je(V.location),V.message)}o(c,"asDiagnosticRelatedInformation");function u(V){if(!V)return;const mt=[];for(const wn of V){const qr=d(wn);qr!==void 0&&mt.push(qr)}return mt.length>0?mt:void 0}o(u,"asDiagnosticTags");function d(V){switch(V){case ir.Unnecessary:return l.DiagnosticTag.Unnecessary;case ir.Deprecated:return l.DiagnosticTag.Deprecated;default:return}}o(d,"asDiagnosticTag");function f(V){if(!!V)return new l.Position(V.line,V.character)}o(f,"asPosition");function h(V){if(!!V)return new l.Range(f(V.start),f(V.end))}o(h,"asRange");function p(V){return V.map(mt=>h(mt))}o(p,"asRanges");function b(V){if(V==null)return l.DiagnosticSeverity.Error;switch(V){case li.Error:return l.DiagnosticSeverity.Error;case li.Warning:return l.DiagnosticSeverity.Warning;case li.Information:return l.DiagnosticSeverity.Information;case li.Hint:return l.DiagnosticSeverity.Hint}return l.DiagnosticSeverity.Error}o(b,"asDiagnosticSeverity");function Z(V){if(ni.string(V))return new l.MarkdownString(V);if(ya.is(V))return new l.MarkdownString().appendCodeblock(V.value,V.language);if(Array.isArray(V)){const wn=[];for(const qr of V){const Va=new l.MarkdownString;ya.is(qr)?Va.appendCodeblock(qr.value,qr.language):Va.appendMarkdown(qr),wn.push(Va)}return wn}let mt;switch(V.kind){case Vr.Markdown:return new l.MarkdownString(V.value);case Vr.PlainText:return mt=new l.MarkdownString,mt.appendText(V.value),mt;default:return mt=new l.MarkdownString,mt.appendText(`Unsupported Markup content received. Kind is: ${V.kind}`),mt}}o(Z,"asHoverContent");function E(V){if(ni.string(V))return V;switch(V.kind){case Vr.Markdown:return new l.MarkdownString(V.value);case Vr.PlainText:return V.value;default:return`Unsupported Markup content received. Kind is: ${V.kind}`}}o(E,"asDocumentation");function K(V){if(!!V)return new l.Hover(Z(V.contents),h(V.range))}o(K,"asHover");function me(V){if(!!V)return new l.TextEdit(h(V.range),V.newText)}o(me,"asTextEdit");function re(V){if(!!V)return V.map(me)}o(re,"asTextEdits");function De(V){if(!V)return;const mt=new l.SignatureHelp;return ni.number(V.activeSignature)?mt.activeSignature=V.activeSignature:mt.activeSignature=0,ni.number(V.activeParameter)?mt.activeParameter=V.activeParameter:mt.activeParameter=0,V.signatures&&(mt.signatures=Le(V.signatures)),mt}o(De,"asSignatureHelp");function Le(V){return V.map(Ge)}o(Le,"asSignatureInformations");function Ge(V){const mt=new l.SignatureInformation(V.label);return V.documentation!==void 0&&(mt.documentation=E(V.documentation)),V.parameters!==void 0&&(mt.parameters=qe(V.parameters)),V.activeParameter!==void 0&&(mt.activeParameter=V.activeParameter),mt}o(Ge,"asSignatureInformation");function qe(V){return V.map(it)}o(qe,"asParameterInformations");function it(V){const mt=new l.ParameterInformation(V.label);return V.documentation&&(mt.documentation=E(V.documentation)),mt}o(it,"asParameterInformation");function je(V){if(!!V)return new l.Location(n(V.uri),h(V.range))}o(je,"asLocation");function Lt(V){if(!!V)return Vt(V)}o(Lt,"asDeclarationResult");function Xt(V){if(!!V)return Vt(V)}o(Xt,"asDefinitionResult");function an(V){if(!V)return;const mt={targetUri:n(V.targetUri),targetRange:h(V.targetSelectionRange),originSelectionRange:h(V.originSelectionRange),targetSelectionRange:h(V.targetSelectionRange)};if(!mt.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return mt}o(an,"asLocationLink");function Vt(V){if(!!V)return ni.array(V)?V.length===0?[]:xt.is(V[0])?V.map(qr=>an(qr)):V.map(wn=>je(wn)):xt.is(V)?[an(V)]:je(V)}o(Vt,"asLocationResult");function dn(V){if(!!V)return V.map(mt=>je(mt))}o(dn,"asReferences");function Rr(V){if(!!V)return V.map(Ri)}o(Rr,"asDocumentHighlights");function Ri(V){const mt=new l.DocumentHighlight(h(V.range));return ni.number(V.kind)&&(mt.kind=Ti(V.kind)),mt}o(Ri,"asDocumentHighlight");function Ti(V){switch(V){case la.Text:return l.DocumentHighlightKind.Text;case la.Read:return l.DocumentHighlightKind.Read;case la.Write:return l.DocumentHighlightKind.Write}return l.DocumentHighlightKind.Text}o(Ti,"asDocumentHighlightKind");function aa(V,mt){if(!!V)return V.map(wn=>rl(wn,mt))}o(aa,"asSymbolInformations");function Ni(V){return V<=Ta.TypeParameter?V-1:l.SymbolKind.Property}o(Ni,"asSymbolKind");function Ea(V){switch(V){case Ma.Deprecated:return l.SymbolTag.Deprecated;default:return}}o(Ea,"asSymbolTag");function bo(V){if(V==null)return;const mt=[];for(const wn of V){const qr=Ea(wn);qr!==void 0&&mt.push(qr)}return mt.length===0?void 0:mt}o(bo,"asSymbolTags");function rl(V,mt){const wn=new l.SymbolInformation(V.name,Ni(V.kind),h(V.location.range),V.location.uri?n(V.location.uri):mt);return il(wn,V),V.containerName&&(wn.containerName=V.containerName),wn}o(rl,"asSymbolInformation");function Tc(V){if(V!=null)return V.map(qo)}o(Tc,"asDocumentSymbols");function qo(V){var mt;const wn=new l.DocumentSymbol(V.name,(mt=V.detail)!=null?mt:"",Ni(V.kind),h(V.range),h(V.selectionRange));if(il(wn,V),V.children!==void 0&&V.children.length>0){const qr=[];for(const Va of V.children)qr.push(qo(Va));wn.children=qr}return wn}o(qo,"asDocumentSymbol");function il(V,mt){V.tags=bo(mt.tags),mt.deprecated&&(V.tags?V.tags.includes(l.SymbolTag.Deprecated)||(V.tags=V.tags.concat(l.SymbolTag.Deprecated)):V.tags=[l.SymbolTag.Deprecated])}o(il,"fillTags");function Qo(V){const mt={title:V.title,command:V.command};return V.arguments&&(mt.arguments=V.arguments),mt}o(Qo,"asCommand");function Mc(V){if(!!V)return V.map(Qo)}o(Mc,"asCommands");const Xi=new Map;Xi.set(_i.Empty,l.CodeActionKind.Empty),Xi.set(_i.QuickFix,l.CodeActionKind.QuickFix),Xi.set(_i.Refactor,l.CodeActionKind.Refactor),Xi.set(_i.RefactorExtract,l.CodeActionKind.RefactorExtract),Xi.set(_i.RefactorInline,l.CodeActionKind.RefactorInline),Xi.set(_i.RefactorRewrite,l.CodeActionKind.RefactorRewrite),Xi.set(_i.Source,l.CodeActionKind.Source),Xi.set(_i.SourceOrganizeImports,l.CodeActionKind.SourceOrganizeImports);function Xo(V){if(V==null)return;let mt=Xi.get(V);if(mt)return mt;const wn=V.split(".");mt=l.CodeActionKind.Empty;for(const qr of wn)mt=mt.append(qr);return mt}o(Xo,"asCodeActionKind");function Pc(V){if(V!=null)return V.map(mt=>Xo(mt))}o(Pc,"asCodeActionKinds");function Ic(V){if(V==null)return;const mt=new l.CodeAction(V.title);return V.kind!==void 0&&(mt.kind=Xo(V.kind)),V.diagnostics&&(mt.diagnostics=i(V.diagnostics)),V.edit&&(mt.edit=al(V.edit)),V.command&&(mt.command=Qo(V.command)),V.isPreferred!==void 0&&(mt.isPreferred=V.isPreferred),mt}o(Ic,"asCodeAction");function al(V){if(!V)return;const mt=new l.WorkspaceEdit;return V.documentChanges?V.documentChanges.forEach(wn=>{if(ji.is(wn))mt.createFile(n(wn.uri),wn.options);else if(Yi.is(wn))mt.renameFile(n(wn.oldUri),n(wn.newUri),wn.options);else if(ra.is(wn))mt.deleteFile(n(wn.uri),wn.options);else if(na.is(wn))mt.set(n(wn.textDocument.uri),re(wn.edits));else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(wn,void 0,4)}`)}):V.changes&&Object.keys(V.changes).forEach(wn=>{mt.set(n(wn),re(V.changes[wn]))}),mt}o(al,"asWorkspaceEdit");function ol(V){return new l.Color(V.red,V.green,V.blue,V.alpha)}o(ol,"asColor");function sl(V){return new l.ColorInformation(h(V.range),ol(V.color))}o(sl,"asColorInformation");function Lc(V){if(Array.isArray(V))return V.map(sl)}o(Lc,"asColorInformations");function ll(V){const mt=new l.ColorPresentation(V.label);return mt.additionalTextEdits=re(V.additionalTextEdits),V.textEdit&&(mt.textEdit=me(V.textEdit)),mt}o(ll,"asColorPresentation");function kc(V){if(Array.isArray(V))return V.map(ll)}o(kc,"asColorPresentations");function cl(V){if(V)switch(V){case Nn.Comment:return l.FoldingRangeKind.Comment;case Nn.Imports:return l.FoldingRangeKind.Imports;case Nn.Region:return l.FoldingRangeKind.Region}}o(cl,"asFoldingRangeKind");function ul(V){return new l.FoldingRange(V.startLine,V.endLine,cl(V.kind))}o(ul,"asFoldingRange");function xc(V){if(Array.isArray(V))return V.map(ul)}o(xc,"asFoldingRanges");function Zo(V){return new l.SelectionRange(h(V.range),V.parent?Zo(V.parent):void 0)}o(Zo,"asSelectionRange");function Fc(V){if(!Array.isArray(V))return[];const mt=[];for(const wn of V)mt.push(Zo(wn));return mt}return o(Fc,"asSelectionRanges"),{asUri:r,asDiagnostics:i,asDiagnostic:a,asRange:h,asRanges:p,asPosition:f,asDiagnosticSeverity:b,asDiagnosticTag:d,asHover:K,asTextEdit:me,asTextEdits:re,asSignatureHelp:De,asSignatureInformations:Le,asSignatureInformation:Ge,asParameterInformations:qe,asParameterInformation:it,asDeclarationResult:Lt,asDefinitionResult:Xt,asLocation:je,asReferences:dn,asDocumentHighlights:Rr,asDocumentHighlight:Ri,asDocumentHighlightKind:Ti,asSymbolKind:Ni,asSymbolTag:Ea,asSymbolTags:bo,asSymbolInformations:aa,asSymbolInformation:rl,asDocumentSymbols:Tc,asDocumentSymbol:qo,asCommand:Qo,asCommands:Mc,asCodeAction:Ic,asCodeActionKind:Xo,asCodeActionKinds:Pc,asWorkspaceEdit:al,asFoldingRangeKind:cl,asFoldingRange:ul,asFoldingRanges:xc,asColor:ol,asColorInformation:sl,asColorInformations:Lc,asColorPresentation:ll,asColorPresentations:kc,asSelectionRange:Zo,asSelectionRanges:Fc}}o(Do,"createConverter");var Ai;(function(t){function e(r,i){const{provider:a,repo:s}=i instanceof l.Uri?r.getVirtualUriMetadata(i):i;return r.getRemoteUri(a.id,{repo:s})}o(e,"externalUri"),t.externalUri=e;function n(r,i){const{provider:a,repo:s}=i instanceof l.Uri?r.getVirtualUriMetadata(i):i;return r.getRemoteUri(a.id,{repo:s})}o(n,"externalIndexUri"),t.externalIndexUri=n})(Ai||(Ai={}));var S;(function(t){function e(i){if(i.HEAD.type===G.Branch||i.HEAD.type===G.RemoteBranch)return i.HEAD.name}o(e,"getBranchName"),t.getBranchName=e;function n(i){if(i.HEAD.type!==G.Branch)return;if(i.pullRequest!==void 0)return i.HEAD.name;const a=i.HEAD.name;return a===void 0||a.startsWith("refs/heads/")?a:`refs/heads/${a}`}o(n,"getIndexBranchName"),t.getIndexBranchName=n;async function r(i,a,s=ee.timeout){const c=await i.getMetadata(a),u=Ai.externalIndexUri(i,c),d=t.getIndexBranchName(c);if(!(u===void 0||d===void 0))return ee.getIndexedTip(u,d,{authentication:i.getAuthentication(a)},s)}o(r,"getIndexedTip"),t.getIndexedTip=r})(S||(S={}));var g;(function(t){const e=new _n(1024);function n(s,c,u){let d=e.get(u);return d!==void 0||(d=s.getCommit(c,u),e.set(u,d)),d}o(n,"get"),t.get=n;async function r(s,c,u){const d=[];for(const h of u)d.push(n(s,c,h));const f=[];for(const h of await Promise.all(d))h!==void 0&&f.push(h);return f}o(r,"all"),t.all=r;function i(s,c){const u=s.commitDate,d=c.commitDate;return u===void 0&&d===void 0?0:u===void 0?1:d===void 0?-1:u<d?1:u>d?-1:0}o(i,"sort"),t.sort=i;function a(s){const c=s.authorName!==void 0?`  \u2022  ${s.authorName}`:"",u=s.commitDate!==void 0?`  \u2022  ${er(s.commitDate,{ago:!0})}`:"",d=s.branchName!==void 0?` - ${s.branchName}`:"",f=s.tags!==void 0?typeof s.tags=="string"?`  \u2022  ${s.tags}`:`  \u2022  ${s.tags.join(" ")}`:"";return{author:c,date:u,branch:d,tag:f}}o(a,"getCommitInfo"),t.getCommitInfo=a})(g||(g={}));var A;(function(t){t[t.Unknown=0]="Unknown",t[t.New=1]="New",t[t.Failed=2]="Failed",t[t.Partial=3]="Partial",t[t.InProgress=4]="InProgress",t[t.Complete=5]="Complete",t[t.PartialIndex=6]="PartialIndex",t[t.CompleteIndex=7]="CompleteIndex"})(A||(A={}));var F;(function(t){function e(r){return{workspaceId:r.WorkspaceId,snapshotId:r.SnapshotId,state:r.State,commitId:r.commitId.toLowerCase(),branchName:n(r.BranchName),creationDate:new Date(r._ts*1e3)}}o(e,"asWorkspaceSnapshot"),t.asWorkspaceSnapshot=e;function n(r){if(r!==null)return r.startsWith("refs/heads/")?r.substr(11):r}o(n,"getBranchName")})(F||(F={}));var ee;(function(t){t.timeout=5*60*1e3;const e=new _n(32),n=new _n(32);async function r(h,p,b,Z=t.timeout){const E=await i(h,p,b,Z);if(!(E===void 0||E.length===0))return E[0]}o(r,"getIndexedTip"),t.getIndexedTip=r;async function i(h,p,b,Z=t.timeout){const E=c(h,p);let K=e.get(E);if(K===void 0||K!==void 0&&Date.now()-K.time>Z){const me=Pe.getAllWorkspaceSnapshots(h,b,p);K={time:Date.now(),promise:me,snapshots:void 0},e.set(E,K)}if(K.snapshots!==null){if(K.snapshots===void 0){let me=await K.promise;if(me===void 0){K.snapshots=null;return}me.sort((re,De)=>De.creationDate.getTime()-re.creationDate.getTime()),me=me.filter(re=>re.state===5||re.state===3),K.snapshots=me}return K.snapshots}}o(i,"all"),t.all=i;async function a(h,p,b,Z,E=t.timeout){const K=s(h,p);let me=n.get(K);if(me===null)return;if(me!==void 0)return me;const re=c(h,b),De=e.get(re);if(De!==void 0&&Date.now()-De.time<=E){if(De.snapshots===null)return;const Le=De.snapshots!==void 0?De.snapshots:await i(h,b,Z);if(Le!==void 0){for(const Ge of Le)if(Ge.commitId===p)return n.set(K,Ge),Ge}return}if(me=await Pe.getWorkspaceSnapshot(p,Z),me===void 0){n.set(K,null);return}return n.set(K,me),me}o(a,"single"),t.single=a;function s(h,p){return`${h.toString()}/${p}`}o(s,"getSingleCacheKey");function c(h,p){return p!==void 0?`${p}\\${h.toString()}`:h.toString()}o(c,"getAllCacheKey");async function u(h,p,b,Z=t.timeout){return await a(h,p,void 0,b,Z)!==void 0}o(u,"exists"),t.exists=u;async function d(h,p,b,Z=t.timeout){return await i(h,p,b,Z)!==void 0}o(d,"branch"),t.branch=d;async function f(h,p,b){const Z=new Map(b.map(me=>[me.commitId,me])),E=await g.all(h,p.uri,b.map(me=>me.commitId));if(E.length===0)return;const K=[];for(const me of E){const re=Z.get(me.hash);re!==void 0&&K.push({...re,commit:me})}if(K.length!==0)return K}o(f,"resolve"),t.resolve=f})(ee||(ee={}));var we;(function(t){function e(n=!1){return{hoverProvider:n,declarationProvider:n,definitionProvider:n,typeDefinitionProvider:n,referencesProvider:n,documentSymbolProvider:n,foldingRangeProvider:n,diagnosticProvider:n,workspaceSymbolProvider:n}}o(e,"create"),t.create=e})(we||(we={}));var Pe;(function(t){const e="v0.1",n="https://prod.richnav.vsengsaas.visualstudio.com/api",r=10*1e3;function i(Le,Ge){const qe=setTimeout(()=>{Le.cancel()},Ge);return{dispose:()=>clearTimeout(qe)}}o(i,"timeout");async function a(Le,Ge,qe,it){var je;const Lt=await St(Le,{method:"POST",body:JSON.stringify(Ge),headers:{"Content-Type":"application/json",...(await qe.authentication).getRichNavigationHeaders(),"x-correlation-id":(je=qe.correlationId)!=null?je:Ut()}},it);if(!!Lt.ok)return Lt.json()}o(a,"postRequest");async function s(Le,Ge,qe,it){const je=await St(Le,{method:"POST",body:Ge,headers:(await qe.authentication).getRichNavigationHeaders()},it);if(!!je.ok)return await je.json()}o(s,"postForm");function c(Le,Ge){return`${n}/${e}/HttpLanguageService/${Le}/${Ge}`}o(c,"makeRequestUrl");async function u(Le,Ge){const qe=new l.CancellationTokenSource,it=i(qe,r);try{const je=await St(`${n}/${e}/WorkspaceSnapshot?commitId=${Le}`,{headers:(await Ge.authentication).getRichNavigationHeaders()},qe.token);if(je.ok){const Lt=await je.json();return{workspaceId:Lt.workspaceId,snapshotId:Lt.snapshotId,state:Lt.state,commitId:Le.toLowerCase(),branchName:void 0,creationDate:new Date}}return}catch(je){if(je instanceof l.CancellationError){j.log(`RichNav request getWorkspaceSnapshot timed out after ${r/1e3} seconds`);return}throw je}finally{it.dispose()}}o(u,"getWorkspaceSnapshot"),t.getWorkspaceSnapshot=u;async function d(Le,Ge,qe){const it=new zn;it.append("uriString",Le.toString(!0)),qe!==void 0&&it.append("branchName",qe);const je=new l.CancellationTokenSource,Lt=i(je,r);try{const Xt=await s(`${n}/${e}/WorkspaceSnapshot/all`,it,Ge,je.token);return Xt===void 0?void 0:Xt.map(F.asWorkspaceSnapshot)}catch(Xt){Xt instanceof l.CancellationError?j.log(`RichNav request getAllWorkspaceSnapshots timed out after ${r/1e3}  seconds`):j.error(Xt);return}finally{Lt.dispose()}}o(d,"getAllWorkspaceSnapshots"),t.getAllWorkspaceSnapshots=d;async function f(Le,Ge,qe){const it=new zn;it.append("uriString",Le.toString(!0)),qe!==void 0&&it.append("branchName",qe);const je=new l.CancellationTokenSource,Lt=i(je,r);try{const Xt=await s(`${n}/${e}/WorkspaceSnapshot/latest`,it,Ge,je.token);return Xt===void 0?void 0:F.asWorkspaceSnapshot(Xt)}catch(Xt){Xt instanceof l.CancellationError?j.log(`RichNav request getLatestWorkspaceSnapshot timed out after ${r/1e3}  seconds`):j.error(Xt);return}finally{Lt.dispose()}}o(f,"getLatestWorkspaceSnapshot"),t.getLatestWorkspaceSnapshot=f;async function h(Le,Ge,qe,it){try{return a(c(Le,"textDocument/capabilities"),Ge,qe,it)}catch(je){j.error(je);return}}o(h,"capabilities"),t.capabilities=h;async function p(Le,Ge,qe,it){try{return a(c(Le,"textDocument/hover"),Ge,qe,it)}catch(je){j.error(je);return}}o(p,"provideHover"),t.provideHover=p;async function b(Le,Ge,qe,it){try{return a(c(Le,"textDocument/definition"),Ge,qe,it)}catch(je){j.error(je);return}}o(b,"provideDefinition"),t.provideDefinition=b;async function Z(Le,Ge,qe,it){try{return a(c(Le,"textDocument/declaration"),Ge,qe,it)}catch(je){j.error(je);return}}o(Z,"provideDeclaration"),t.provideDeclaration=Z;async function E(Le,Ge,qe,it){try{return a(c(Le,"textDocument/typeDefinition"),Ge,qe,it)}catch(je){j.error(je);return}}o(E,"provideTypeDefinition"),t.provideTypeDefinition=E;async function K(Le,Ge,qe,it){try{return a(c(Le,"textDocument/references"),Ge,qe,it)}catch(je){j.error(je);return}}o(K,"provideReferences"),t.provideReferences=K;async function me(Le,Ge,qe,it){try{return a(c(Le,"textDocument/foldingRange"),Ge,qe,it)}catch(je){j.error(je);return}}o(me,"providerFoldingRanges"),t.providerFoldingRanges=me;async function re(Le,Ge,qe,it){if(Ge=="")return;const je=await St(`${n}/${e}/Search/${Le}/${Ge}`,{headers:(await qe.authentication).getRichNavigationHeaders()},it);if(je.ok)return await je.json()}o(re,"provideWorkspaceSymbols"),t.provideWorkspaceSymbols=re;async function De(Le,Ge,qe){const it=l.Uri.from({scheme:"https",authority:"prod.richnav.vsengsaas.visualstudio.com",path:`/api/${e}/Workspace/${Le}/${Ge}/assets/designtime`,query:`id=${qe}`});try{const je=new l.CancellationTokenSource,Lt=await St(it.toString().replace("?id%3D","?id="),{method:"GET",headers:{accept:"text/plain"}},je.token);return Lt.ok?Lt.text():void 0}catch(je){j.error(je);return}}o(De,"getDesignTimeFileContent"),t.getDesignTimeFileContent=De})(Pe||(Pe={}));class Xe{constructor(e,n){this.providerService=e,this.telemetryService=n,this.metadata=new Map;const r=[];r.push(this.providerService.onDidChangeRepositories(i=>{var a;for(const s of i.added){const c=s.uri,u=be.getIndexMemento(c);if(u!==void 0){const d=Ai.externalIndexUri(this.providerService,c);d!==void 0&&(typeof((a=u.branch)==null?void 0:a.name)=="string"?ee.all(d,u.branch.name,{authentication:this.providerService.getAuthentication(c)}).catch(void 0):typeof u.ref=="string"&&N(u.ref)&&ee.single(d,u.ref,void 0,{authentication:this.providerService.getAuthentication(c)}).catch(void 0))}this.providerService.getMetadata(c).then(d=>{const f={},h=d.pullRequest===void 0?S.getIndexBranchName(d):void 0;h!==void 0?f.branch={name:h}:f.ref=d.HEAD.sha,be.setIndexMemento(c,f).then(void 0,void 0)},void 0)}})),r.push(this.providerService.onDidChangeRepository(i=>{const a=i.repository.uri,s=_(a);this.metadata.delete(s),this.getIndexMetadata(a).catch(void 0)})),this.disposable=l.Disposable.from(...r)}dispose(){this.disposable.dispose()}async resolveIndexRef(e,n){const r=await this.providerService.getModeRefType(e),i=te.decode(e);if(i!==void 0){if(i.type===M.Latest)return r===he.Branch?this.getIndexedTip(e,n?0:ee.timeout):void 0;if(i.type===M.SHA){const s=Ai.externalIndexUri(this.providerService,e);return s===void 0?void 0:await ee.exists(s,i.sha,{authentication:this.providerService.getAuthentication(e)},n?0:ee.timeout)?i.sha:void 0}}if(this.providerService.getModeConfig(e,r).index===I.Latest)return this.getIndexedTip(e,n?0:ee.timeout)}refresh(e){for(const n of e)this.metadata.delete(n.toString())}getIndexMetadata(e){const n=this.providerService.getVirtualRootUri(e),r=_(n);let i=this.metadata.get(r);return i!==void 0||(i=this.createIndexMetadata(e),this.metadata.set(r,i)),i}async getIndexedTip(e,n=ee.timeout){const r=await S.getIndexedTip(this.providerService,e,n);return r!==void 0?r.commitId:void 0}async createIndexMetadata(e){const n=new Be(`RichNavIndexProvider.createIndexMetadata(${e.toString()})`);try{const r=Ai.externalIndexUri(this.providerService,e);if(r===void 0)return;n.logStep("Getting metadata");const i=this.providerService.getMetadata(e),a=this.providerService.getModeRefType(e,i),s=await i;n.logStep("Getting snapshot",{suffix:" \u2022 Getting snapshot..."});const c=this.providerService.getAuthentication(e),u=s.pullRequest===void 0?S.getIndexBranchName(s):void 0,d=await ee.single(r,s.HEAD.sha,u,{authentication:this.providerService.getAuthentication(e)});if(s.HEAD.type===G.Branch||s.HEAD.type===G.RemoteBranch){const b=te.decode(e);if(b!==void 0)return n.logStep("Handle legacy encoding",{suffix:" \u2022 Handle legacy encoding..."}),d===void 0?b.type===M.Latest?(n.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),u!==void 0&&await ee.branch(r,u,{authentication:this.providerService.getAuthentication(e)})?{type:Nt.Indexed}:{type:Nt.NotIndexed}):{type:Nt.NotIndexed}:b.type===M.Latest||b.type===M.SHA?{type:Nt.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}}:{type:Nt.Match,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}}}n.logStep("Getting mode config",{suffix:" \u2022 Getting mode config..."});const h=this.providerService.getModeConfig(e,await a),p=this.providerService.getVirtualUriMetadata(e);if((h.index===I.Latest||h.index===I.Match)&&d!==void 0)return{type:Nt.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}};if(h.index===I.TipPlusLatest&&p.provider.id==="github"){if(d!==void 0&&d.commitId===s.HEAD.sha)return{type:Nt.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}};if(s.HEAD.type===G.Branch&&u!==void 0){n.logStep("Getting closest index",{suffix:" \u2022 Getting closest index..."});const b=await ee.all(r,u,{authentication:c});if(b!==void 0&&b.length>0)return{type:Nt.Active,sha:this.computeClosestIndex(e,s.HEAD.sha,b),branch:{name:u}}}}return d!==void 0?{type:Nt.Indexed}:s.HEAD.type===G.Branch&&(n.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),u!==void 0&&await ee.branch(r,u,{authentication:c}))?{type:Nt.Indexed}:{type:Nt.NotIndexed}}finally{n.stop()}}async computeClosestIndex(e,n,r){if(r.length===0)throw new Error("At least on snapshot should exist");const i=new Set(r.map(f=>f.commitId)),a=await this.providerService.getCommits(e,{ref:n,limit:100});if(a===void 0)return;let s;for(const f of a.commits)if(f.hash===n){s=f;break}if(s===void 0)return;const c=new Map(a.commits.map(f=>[f.hash,f])),u=[s];let d;for(;u.length>0;){for(d=u.shift();d!==void 0&&!i.has(d.hash);)if(d.parents.length>0){for(let f=1;f<d.parents.length;f++){const h=c.get(d.parents[f]);h!==void 0&&u.push(h)}d=c.get(d.parents[0])}if(d!==void 0)break}return d!==void 0?d.hash:void 0}async getSnapshots(e,n){const r=Ai.externalIndexUri(this.providerService,e);if(r===void 0)return[];const i=await ee.all(r,void 0,{authentication:this.providerService.getAuthentication(e)});if(i===void 0)return[];const a=[];for(const s of i)s.branchName!==void 0&&a.push({workspaceId:s.workspaceId,snapshotId:s.snapshotId,hash:s.commitId,branch:{name:s.branchName}});return a}async getStatusBarContributions(e){const n=await this.providerService.getMetadata(e),[r,i]=await Promise.all([this.getIndexMetadata(e),this.providerService.getModeRefType(e,n)]),a=this.providerService.getModeConfig(e,i);if(r===void 0)return[];const{HEAD:s}=n,c=[];if(r!==void 0){let u;const d=[`${U(s.sha)}`];if(r.type===Nt.Active){const f=await r.sha;a.index===I.Latest||a.index===I.Match?(u=a.display===H.Browse?"$(layers-active)\u2009\u2009$(lock)":"$(layers-active)",d.push(l.l10n.t(`The commit is indexed and rich code navigation features are enabled.
The files in the workspace are readonly.`))):a.index===I.TipPlusLatest&&(u="$(layers-dot)",f!==n.HEAD.sha?d.push(l.l10n.t("The commit is not indexed. Rich code navigation features are enabled using a former indexed commit which might lead to fuzzy results.")):d.push(l.l10n.t("The commit is indexed. Rich code navigation features are enabled. Files in the workspace can be modified which might lead to fuzzy results.")))}else r.type===Nt.Match?(u="$(layers)",d.push(l.l10n.t(`The commit you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`))):r.type===Nt.Indexed&&(u="$(layers)",d.push(l.l10n.t(`The branch you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`)));u&&c.push(fr({command:"remoteHub.indexMode.select",title:u,tooltip:d.join(`
`),arguments:[{uri:e}]}))}return c}}o(Xe,"RichNavIndexProvider");var wt;(function(t){let e;function n(){return e=l.window.createStatusBarItem(l.StatusBarAlignment.Right),e.text="$(compass)",e.command="remoteHub.indexMode.select",e.hide(),[e,l.window.onDidChangeActiveTextEditor(()=>{u()}),l.commands.registerCommand("remoteHub.indexMode.select",f=>{d(f).catch(h=>j.log("Selecting index mode failed.",h))})]}o(n,"create"),t.create=n;const r=new Map;function i(f){r.set(f.key(),f)}o(i,"addService"),t.addService=i;function a(f){r.delete(f.key())}o(a,"removeService"),t.removeService=a;function s(f){return r.get(_(f))}o(s,"getService");async function c(f){for(const h of r.values())if(await h.handles(f))return h}o(c,"getServiceForDocument");async function u(){try{let f=o(function(Z){const E=Z.lastIndexOf("/");return E<=0?Z:Z.substr(E+1)},"basename");const h=l.window.activeTextEditor;if(h===void 0){e.hide();return}const p=await c(h.document);if(p===void 0){e.hide();return}const b=await p.isDocumentIndexed(h.document);b===cn.Indexed?(e.text="$(compass)",e.tooltip=new l.MarkdownString(l.l10n.t("The source file '{0}' is indexed and provides rich code navigation features like Go to Declaration and Find all References.",f(h.document.uri.path))),e.show()):b===cn.IndexMapped?(e.text="$(compass-dot)",e.tooltip=new l.MarkdownString(l.l10n.t("The source file '{0}' provides rich code navigation features using an earlier indexed commit. Navigation results might be fuzzy.",f(h.document.uri.path))),e.show()):e.hide()}catch(f){e.hide()}}o(u,"updateStatusBarItem"),t.updateStatusBarItem=u;async function d(f){var h;const p=f.uri,b=s(p);if(b===void 0)return;const[Z,E,K,me]=await Promise.all([b.getBranchName(),b.getMetadata(),b.getIndexMetadata(),b.getModeRefType(p)]);if(K===void 0||!Nt.hasIndex(K.type))return;let re,De=!1;const Le=te.decode(p);(Le==null?void 0:Le.type)===M.Latest||(Le==null?void 0:Le.type)===M.SHA?(De=!0,re={display:H.Browse,index:Le.type===M.Latest?I.Latest:I.Match}):re=(h=b.getCurrentIndexMode())!=null?h:b.getModeConfig(p,me);const Ge=b.getUriMetadata(),qe=l.l10n.t("{0} current","$(check)"),it={indexKind:"disable",label:l.l10n.t("Disable"),description:re.index===I.None?`  \u2022  ${qe}`:void 0,detail:l.l10n.t("Disable rich navigation.")};let je,Lt;if(me===he.PullRequestBranch||me===he.PullRequestRemoteBranch||me===he.Commit||me===he.Tag){const Xt={indexKind:"match",label:l.l10n.t("Current indexed commit - readonly"),description:re.index===I.Match&&re.display===H.Browse?`  \u2022  ${qe}`:void 0,detail:l.l10n.t("Enable rich navigation only if the current commit is indexed. Files will be read-only.")},an={indexKind:"match+writeable",label:l.l10n.t("Current indexed commit - writable"),description:re.index===I.Match&&re.display===H.Edit?`  \u2022  ${qe}`:void 0,detail:l.l10n.t("Enable rich navigation only if the current commit is indexed. Files will be writable.")};let Vt=Ge.provider.id==="github";Vt&&(Vt=E.HEAD.type===G.RemoteBranch?E.HEAD.branch.remote.accessLevel>=le.Write:!0);const dn=Vt?[Xt,an,it]:[Xt,it];Lt=await l.window.showQuickPick(dn,{placeHolder:"Pick a rich navigation mode"})}else if(me===he.Branch||me===he.RemoteBranch){const Xt={indexKind:"latest",label:l.l10n.t("Latest indexed commit"),description:re.index===I.Latest?`  \u2022  ${qe}`:void 0,detail:l.l10n.t("Enable rich navigation on the latest indexed commit. Files will be read-only.")},an={indexKind:"tip+latest",label:l.l10n.t("Current commit & latest index"),description:re.index===I.TipPlusLatest?`  \u2022  ${qe}`:void 0,detail:l.l10n.t("Enable rich navigation on the current commit using the latest index. Files will be writeable.")},Vt=Ge.provider.id==="github"?[Xt,an,it]:[Xt,it];Lt=await l.window.showQuickPick(Vt,{placeHolder:l.l10n.t("Pick a rich navigation mode for branch {0}",Z)})}if(Lt!==void 0&&(Lt.indexKind==="disable"?je={display:H.Edit,index:I.None}:Lt.indexKind==="match"?je={display:H.Browse,index:I.Match}:Lt.indexKind==="match+writeable"?je={display:H.Edit,index:I.Match}:Lt.indexKind==="tip+latest"?je={display:H.Edit,index:I.TipPlusLatest}:Lt.indexKind==="latest"&&(je={display:H.Browse,index:I.Latest}),je!==void 0&&!ne.equals(re,je))){if(await b.hasChanges()&&je.display===H.Browse){await l.window.showInformationMessage("The repository has outgoing changes. Commit them first before switching to browse mode.",{modal:!0});return}if(await b.updateIndexMode(je),De){const Xt=await b.getNonIndexedWorkspaceDescriptor();Xt!==void 0&&ut(b.getProviderService(),Xt)}}}o(d,"toggleIndexMode")})(wt||(wt={}));class Ct{constructor(e){this.telemetryService=e}static createStatus(){return wt.create()}async createNavigationService(e,n){const r=await e.getIndexMetadata(n.uri);if(!(r===void 0||r.type===Nt.NotIndexed))return()=>new wr(e,n,this.telemetryService)}}o(Ct,"RichNavServiceProvider");var It;(function(t){const e=new RegExp("^vsck:\\/\\/([a-fA-F0-9]+)\\/(latest|[a-fA-F0-9]{15})\\/designtime\\/([a-fA-F0-9]+)(\\/?.*)$");function n(i){const a=e.exec(i);if(a===null||a.length!==5)return;const s={v:1,w:a[1],s:a[2],a:a[3]};return l.Uri.from({scheme:Mn.scheme,authority:P(JSON.stringify(s)),path:a[4]})}o(n,"toVSCode"),t.toVSCode=n;function r(i){if(i.scheme!==Mn.scheme)return;let a;try{return a=JSON.parse(w(i.authority)),a===void 0?void 0:{workspaceId:a.w,snapshotId:a.s,assetId:`${a.a}${i.path}`}}catch{return}}o(r,"toRichNavComponents"),t.toRichNavComponents=r})(It||(It={}));const un=o(class{constructor(){this._onDidChangeFile=new l.EventEmitter,this.cache=new _n(64),this.textEncoder=new TextEncoder}get onDidChangeFile(){return this._onDidChangeFile.event}watch(t,e){return un.emptyDisposable}async stat(t){const e=await this.getFile(t);if(e===void 0)throw l.FileSystemError.FileNotFound();return{type:l.FileType.File,mtime:e.time,ctime:e.time,size:e.content.length,permissions:l.FilePermission.Readonly}}readDirectory(t){return[]}createDirectory(t){throw l.FileSystemError.NoPermissions()}async readFile(t){const e=await this.getFile(t);if(e===void 0)throw l.FileSystemError.FileNotFound();return e.content}writeFile(t,e,n){throw l.FileSystemError.NoPermissions()}delete(t,e){throw l.FileSystemError.NoPermissions()}rename(t,e,n){throw l.FileSystemError.NoPermissions()}async getFile(t){let e=this.cache.get(t.toString());if(e!==void 0)return e;if(t.scheme!==un.scheme)return;const n=It.toRichNavComponents(t);if(n===void 0)return;const r=await Pe.getDesignTimeFileContent(n.workspaceId,n.snapshotId,n.assetId);if(r!==void 0)return e={content:this.textEncoder.encode(r),time:Date.now()},this.cache.set(t.toString(),e),e}},"_RichNavFileSystemProvider");let Mn=un;Mn.scheme="vsck-fs",Mn.emptyDisposable={dispose:()=>{}};var cn;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.IndexMapped=1]="IndexMapped",t[t.Indexed=2]="Indexed"})(cn||(cn={}));const hn=o(class{static registerCapability(t,e,n){var r;const i=this.disabledCapabilities.get(t);if(i==null?void 0:i[e])return!1;const a=this.localCapabilities.get(t);return(a==null?void 0:a[e])?!1:(r=n[e])!=null?r:!1}constructor(t,e,n){this.providerService=t,this.repository=e,this.telemetryService=n,this.repositoryRoot=`${e.uri.toString()}/`;const r=o((a=!1)=>{const s=this.repository.uri;a||(this.metadata=this.providerService.getMetadata(s),this.indexMetadata=this.providerService.getIndexMetadata(s)),Promise.all([this.metadata,this.indexMetadata,this.providerService.getModeRefType(s,this.metadata)]).then(async c=>{var u,d;const[f,h,p]=this.currentlyResolved,[b,Z,E]=c,K=this.providerService.getModeConfig(s,E);if(f!==void 0&&h!==void 0&&p!==void 0&&f.HEAD.sha===b.HEAD.sha&&Z!==void 0&&h.type===Z.type&&p.index===K.index&&p.display===K.display){const re=(h==null?void 0:h.type)===Nt.Active?await h.sha:void 0,De=(Z==null?void 0:Z.type)===Nt.Active?await Z.sha:void 0;if(re===De)return}const me={newDisplayMode:K.display,newIndexMode:K.index,newIndexType:(Z==null?void 0:Z.type)===void 0?"undefined":Nt[Z==null?void 0:Z.type],currentDisplayMode:(u=p==null?void 0:p.display)!=null?u:"undefined",currentIndexMode:(d=p==null?void 0:p.index)!=null?d:"undefined",currentIndexType:(h==null?void 0:h.type)===void 0?"undefined":Nt[h==null?void 0:h.type]};this.telemetryService.publicLog2("codex.handleRepositoryChanged",me),this.currentlyResolved=[b,Z,K];for(const re of this.registeredFeatures.values())re.dispose();if(this.registeredFeatures.clear(),this.pendingCapabilitiesRequests.clear(),this.documentListeners!==void 0&&this.documentListeners.dispose(),this.workspaceSnapshot=void 0,this.mapper=void 0,gn.isActive(Z)){const re=Ai.externalIndexUri(this.providerService,b),De=await Z.sha;if(re!==void 0&&De!==void 0){const Le=await ee.single(re,De,S.getIndexBranchName(b),{authentication:this.providerService.getAuthentication(s)});Le!==void 0&&(this.telemetryService.publicLog2("codex.foundSnapshot",{snapshotId:Le.snapshotId}),this.workspaceSnapshot=Le,this.documentListeners=this.installDocumentListeners(),((K==null?void 0:K.display)===H.Edit||b.HEAD.sha!==De)&&(this.mapper=new yt(this.providerService,s,De,b.HEAD.sha)))}}await wt.updateStatusBarItem()}).then(void 0,void 0)},"handleRepositoryChanged");this.metadata=this.providerService.getMetadata(this.repository.uri),this.indexMetadata=this.providerService.getIndexMetadata(this.repository.uri),this.currentlyResolved=[void 0,void 0,void 0],this.registeredFeatures=new Map,this.pendingCapabilitiesRequests=new Map,this.capabilitiesCache=new _n(2048),this.knownDesignTimeFiles=new Set;const i=[];i.push(this.providerService.onDidChangeRepository(a=>{_(a.repository.uri)===_(this.repository.uri)&&r()})),i.push(this.providerService.onDidRefresh(a=>{for(const s of a)if(_(s)===_(this.repository.uri)){r();break}})),this.environmentListeners=l.Disposable.from(...i),r(!0),wt.addService(this),this.indexMetadata.then(async a=>{var s;const c=this.repository.uri;let u=!1;const d=te.decode(this.repository.uri);if(d!==void 0&&a!==void 0&&(d.type===M.Latest&&a.type!==Nt.Active||d.type===M.SHA&&(a.type!==Nt.Active||await a.sha!==d.sha))&&(u=!0),!u){await this.metadata;const f=await this.providerService.getModeRefType(c,this.metadata),h=(s=this.currentlyResolved[2])!=null?s:this.providerService.getModeConfig(c,f,!0);h!==void 0&&h.display===H.Browse&&a!==void 0&&h.index!==I.None&&a.type!==Nt.Active?u=!0:(a==null?void 0:a.type)===Nt.Active&&await a.sha===void 0&&((h==null?void 0:h.display)===H.Browse,u=!0)}u&&l.window.showWarningMessage(l.l10n.t("The repository got opened in rich code navigation mode but no corresponding index is available. Rich code navigation features are disabled.")).then(void 0,void 0)},void 0),hn.fileSystemProvider===void 0&&(hn.fileSystemProvider=new Mn,l.workspace.registerFileSystemProvider(Mn.scheme,hn.fileSystemProvider))}getRepository(){return this.repository}async updateIndexMode(t){const e=this.currentlyResolved[2],n=t!==void 0;if(t===void 0){const r=this.repository.uri,i=await this.providerService.getModeRefType(r,this.metadata);t=this.providerService.getModeConfig(r,i),await new Promise(a=>setTimeout(a,1e3))}if(e===void 0||e.index!==t.index||e.display!==t.display){if(t.index===I.Latest){await Promise.all([this.metadata,this.indexMetadata]);const r=await this.getIndexedTip();if(r===void 0)return;await this.sync(r.hash)}else t.index===I.TipPlusLatest&&(await Promise.all([this.metadata,this.indexMetadata]),await this.sync());n&&await be.setMode(this.repository.uri,t),this.refresh()}}getCurrentIndexMode(){return this.currentlyResolved[2]}key(){return _(this.repository.uri)}dispose(){for(const t of this.registeredFeatures.values())t.dispose();this.registeredFeatures.clear(),wt.removeService(this),this.documentListeners!==void 0&&(this.documentListeners.dispose(),this.documentListeners=void 0),this.environmentListeners!==void 0&&(this.environmentListeners.dispose(),this.environmentListeners=void 0)}handles(t){return t.uri.scheme!==$n.scheme?Promise.resolve(!1):Promise.resolve(t.uri.toString().startsWith(this.repositoryRoot))}async getBranchName(){return S.getBranchName(await this.metadata)}async getMetadata(){return this.metadata}async getIndexMetadata(){return this.indexMetadata}getProviderService(){return this.providerService}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.repository.uri)}getModeConfig(t,e){return this.providerService.getModeConfig(t,e)}getModeRefType(t){return this.providerService.getModeRefType(t)}refresh(){return this.providerService.refresh()}async getNonIndexedWorkspaceDescriptor(){const{name:t,repo:e}=await this.metadata,{ref:n}=this.providerService.getVirtualUriMetadata(this.repository.uri);return{name:t,uri:this.providerService.createVirtualUri(this.repository.uri,{repo:e,ref:n}),location:He.CurrentWindow}}async isDocumentIndexed(t){await this.metadata;const e=await this.indexMetadata;if(e===void 0||e.type===Nt.NotIndexed||this.workspaceSnapshot===void 0)return 0;const n=this.pendingCapabilitiesRequests.get(t.uri.toString());return n!==void 0&&await n,this.registeredFeatures.has(t.uri.toString())?this.mapper===void 0?2:await this.mapper.needsMapping(t)?1:2:0}async getIndexedTip(){const t=await this.metadata,e=Ai.externalIndexUri(this.providerService,t),n=S.getIndexBranchName(t);if(e===void 0||n===void 0)return;const r=await ee.getIndexedTip(e,n,{authentication:this.providerService.getAuthentication(this.repository.uri)});if(r===void 0)return;const i=await g.get(this.providerService,this.repository.uri,r.commitId);if(i!==void 0)return{...i,branchName:n}}hasChanges(){return this.providerService.getChangeStore(this.repository.uri).hasChanges(this.repository.uri)}sync(t){return this.providerService.sync(this.repository.uri,{to:t,reason:"user"})}async getCommit(t){const e=await this.metadata,n=Ai.externalIndexUri(this.providerService,e);if(n===void 0)return;const[r,i]=await Promise.all([g.get(this.providerService,this.repository.uri,t),ee.single(n,t,void 0,{authentication:this.providerService.getAuthentication(this.repository.uri)})]);if(!(r===void 0||i===void 0))return{...r,branchName:i.branchName}}installDocumentListeners(){const t=[],e=o(async n=>{const r=n.uri.scheme;if($n.scheme!==r&&Mn.scheme!==r)return;const i=n.uri.toString();if(r===$n.scheme&&!i.startsWith(this.repositoryRoot)||r===Mn.scheme&&!this.knownDesignTimeFiles.has(i)||this.pendingCapabilitiesRequests.has(i))return;const a=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(a===void 0)return;let s=this.capabilitiesCache.get(i);if(s!==null){if(s===void 0){const c=this.capabilities(n.uri);this.pendingCapabilitiesRequests.set(i,c),s=await c,this.pendingCapabilitiesRequests.delete(i),this.capabilitiesCache.set(i,s===void 0?null:s)}s===void 0||!l.workspace.textDocuments.some(c=>c===n)||this.registerProviders(n,s,a)}},"openHandler");return t.push(l.workspace.onDidOpenTextDocument(e)),l.workspace.textDocuments.forEach(e),t.push(l.workspace.onDidCloseTextDocument(n=>{const r=n.uri.toString(),i=this.registeredFeatures.get(r);i!==void 0&&(this.registeredFeatures.delete(n.uri.toString()),i.dispose()),this.pendingCapabilitiesRequests.delete(r)})),l.Disposable.from(...t)}registerProviders(t,e,n){if(this.workspaceSnapshot===void 0)return;const r=this.workspaceSnapshot,i=t.languageId,s=[{scheme:this.repository.uri.scheme,pattern:t.uri.fsPath,language:t.languageId,exclusive:!0}],c=[],u=new Promise((E,K)=>{const me=`/${r.snapshotId}/source/`;this.metadata.then(re=>{E(Do(De=>{const Le=l.Uri.parse(De);if(re===void 0)return Le;try{if(Le.scheme==="vsck"&&Le.authority===r.workspaceId&&Le.path.startsWith(me))return this.repository.createRelativeUri(Le.path.substr(me.length));const Ge=It.toVSCode(De);return Ge!==void 0?(this.knownDesignTimeFiles.add(Ge.toString()),Ge):Le}catch(Ge){return Le}}))},K)}),d=new RegExp(`^vsck:\\/\\/${r.workspaceId}\\/(?:latest|[a-fA-F0-9]{15})\\/designtime\\/(?:[a-fA-F0-9]+)(\\/?.*)$`);function f(E){const K=d.exec(E);return K===null||K.length===2}o(f,"designTimeFilter");function h(E){if(E==null)return E;if(Array.isArray(E)){if(E.length===0)return[];const K=E[0];return typeof K.uri=="string"?E.filter(De=>f(De.uri)):typeof K.targetUri=="string"?E.filter(De=>f(De.targetUri)):[]}return d.exec(E.uri)===null?E:void 0}o(h,"filterDesignTimeFiles");async function p(E,K,me){var re,De,Le;if(me==null||E===void 0)return me;const Ge=new Map(l.workspace.textDocuments.map(it=>[it.uri.toString(!0),it]));if(Array.isArray(me)){const it=[],je=[];if(me.length===0)return[];for(const Lt of me){const Xt=Lt;if(Xt.uri instanceof l.Uri){const an=await E.mapRangeFromIndexToCode((re=Ge.get(Xt.uri.toString()))!=null?re:Xt.uri,Xt.range);an!==void 0&&it.push(new l.Location(Xt.uri,an))}else{const an=Lt,Vt=(De=Ge.get(an.targetUri.toString()))!=null?De:an.targetUri,dn=an.originSelectionRange?await E.mapRangeFromIndexToCode(K,an.originSelectionRange):void 0;if(dn!==void 0||an.originSelectionRange===void 0){const Rr=await E.mapRangeFromIndexToCode(Vt,an.targetRange);if(Rr!==void 0){const Ri=an.targetSelectionRange?await E.mapRangeFromIndexToCode(Vt,an.targetSelectionRange):void 0;(Ri!==void 0||an.targetSelectionRange===void 0)&&je.push({targetUri:an.targetUri,targetRange:Rr,targetSelectionRange:Ri,originSelectionRange:dn})}}}}return it.length>0?it:je}const qe=await E.mapRangeFromIndexToCode((Le=Ge.get(me.uri.toString()))!=null?Le:me.uri,me.range);if(qe!==void 0)return new l.Location(me.uri,qe)}o(p,"mapLocations");const b=o(E=>({authentication:this.providerService.getAuthentication(E.uri),correlationId:Ut()}),"getRestApiOptions"),Z=o((E,K)=>{const me={method:E,correlationId:K.correlationId};this.telemetryService.publicLog2("codex.restAPICall",me)},"sendTelemetry");hn.registerCapability(i,"hoverProvider",e)&&c.push(l.languages.registerHoverProvider(s,{provideHover:async(E,K,me)=>{const re=await this.createTextDocumentPositionParams(E,K);if(re===void 0)return;const De=b(E);return Z("codex.provideHover",De),(await u).asHover(await Pe.provideHover(n,re,De,me))}})),hn.registerCapability(i,"definitionProvider",e)&&c.push(l.languages.registerDefinitionProvider(s,{provideDefinition:async(E,K,me)=>{const re=await this.createTextDocumentPositionParams(E,K);if(re===void 0)return;const De=b(E);return Z("codex.provideDefinition",De),p(this.mapper,E,(await u).asDefinitionResult(h(await Pe.provideDefinition(n,re,De,me))))}})),hn.registerCapability(i,"declarationProvider",e)&&c.push(l.languages.registerDeclarationProvider(s,{provideDeclaration:async(E,K,me)=>{const re=await this.createTextDocumentPositionParams(E,K);if(re===void 0)return;const De=b(E);return Z("codex.provideDeclaration",De),p(this.mapper,E,(await u).asDeclarationResult(h(await Pe.provideDeclaration(n,re,De,me))))}})),hn.registerCapability(i,"typeDefinitionProvider",e)&&c.push(l.languages.registerTypeDefinitionProvider(s,{provideTypeDefinition:async(E,K,me)=>{const re=await this.createTextDocumentPositionParams(E,K);if(re===void 0)return;const De=b(E);return Z("codex.provideTypeDefinition",De),p(this.mapper,E,(await u).asDefinitionResult(h(await Pe.provideTypeDefinition(n,re,De,me))))}})),hn.registerCapability(i,"referencesProvider",e)&&c.push(l.languages.registerReferenceProvider(s,{provideReferences:async(E,K,me,re)=>{const De=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(E,K):K;if(De===void 0)return;const Le={position:{line:De.line,character:De.character},textDocument:{uri:this.createRichNavDocumentUri(E.uri).toString(!0)},context:{includeDeclaration:me.includeDeclaration}},Ge=b(E);return Z("codex.provideReferences",Ge),p(this.mapper,E,(await u).asReferences(h(await Pe.provideReferences(n,Le,Ge,re))))}})),hn.registerCapability(i,"foldingRangeProvider",e)&&c.push(l.languages.registerFoldingRangeProvider(s,{provideFoldingRanges:async(E,K,me)=>{if(this.mapper!==void 0&&await this.mapper.needsMapping(E))return;const re=b(E);return Z("codex.provideFoldingRanges",re),(await u).asFoldingRanges(await Pe.providerFoldingRanges(n,this.createTextDocumentParams(E.uri),re,me))}})),hn.registerCapability(i,"workspaceSymbolProvider",e)&&c.push(l.languages.registerWorkspaceSymbolProvider({provideWorkspaceSymbols:async(E,K)=>{const me=b(t),re=await Pe.provideWorkspaceSymbols(n,E,me,K);if(re!==void 0)return(await u).asSymbolInformations(re)}})),this.registeredFeatures.set(t.uri.toString(),l.Disposable.from(...c)),wt.updateStatusBarItem()}async capabilities(t){var e;const n=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(n===void 0)return;const r=new l.CancellationTokenSource;return(e=await Pe.capabilities(n,this.createTextDocumentParams(t),{authentication:this.providerService.getAuthentication(t)},r.token))!=null?e:void 0}createTextDocumentParams(t){return{textDocument:{uri:this.createRichNavDocumentUri(t).toString(!0)}}}async createTextDocumentPositionParams(t,e){const n=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(t,e):e;if(n!==void 0)return{position:{line:n.line,character:n.character},textDocument:{uri:this.createRichNavDocumentUri(t.uri).toString(!0)}}}createRichNavDocumentUri(t){if(t.scheme===Mn.scheme){const r=It.toRichNavComponents(t);return r===void 0?t:l.Uri.file(r.assetId)}const e=this.repository.uri.toString(!0),n=t.toString(!0);return l.Uri.file(n.substr(e.length))}},"_RichNavService");let wr=hn;wr.localCapabilities=new Map([["javascript",Object.assign(we.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["javascriptreact",Object.assign(we.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescript",Object.assign(we.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescriptreact",Object.assign(we.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})]]),wr.disabledCapabilities=new Map([["javascript",Object.assign(we.create(),{declarationProvider:!0})],["javascriptreact",Object.assign(we.create(),{declarationProvider:!0})],["typescript",Object.assign(we.create(),{declarationProvider:!0})],["typescriptreact",Object.assign(we.create(),{declarationProvider:!0})]]);var We=o((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"__accessCheck"),qn=o((t,e,n)=>(We(t,e,"read from private field"),n?n.call(t):e.get(t)),"__privateGet"),Qn=o((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"__privateAdd"),Dr=o((t,e,n,r)=>(We(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),"__privateSet"),tr;class Wi{constructor(e){Qn(this,tr,void 0),Dr(this,tr,e)}async provideEditSessionIdentity(e,n){await Ur(qn(this,tr),e.uri);const r=qn(this,tr).getRepository(e.uri);if(!r||n.isCancellationRequested)return null;const{uri:i,ref:a}=await qn(this,tr).getRepositoryContext(r,"http"),s=await qn(this,tr).getMetadata(r.uri);return JSON.stringify({remote:i!=null?i:s.cloneUrl.http,ref:a,sha:s.HEAD.sha})}provideEditSessionIdentityMatch(e,n){try{const r=this.normalizeEditSessionIdentity(e),i=this.normalizeEditSessionIdentity(n);return r.remote===i.remote&&r.ref===i.ref&&r.sha===i.sha?l.EditSessionIdentityMatch.Complete:r.remote===i.remote&&r.ref===i.ref&&r.sha!==i.sha?l.EditSessionIdentityMatch.Partial:l.EditSessionIdentityMatch.None}catch(r){return l.EditSessionIdentityMatch.Partial}}normalizeEditSessionIdentity(e){var n,r,i;let{remote:a,ref:s,sha:c}=JSON.parse(e);return a=(i=(r=(n=qn(this,tr)).getHttpsCloneUri)==null?void 0:r.call(n,a))!=null?i:typeof a=="string"&&a.endsWith(".git")?a.slice(0,a.length-4):a,{remote:a,ref:s,sha:c}}}o(Wi,"EditSessionIdentityProvider"),tr=new WeakMap;var La=o((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"extensionApi_accessCheck"),Jr=o((t,e,n)=>(La(t,e,"read from private field"),n?n.call(t):e.get(t)),"extensionApi_privateGet"),wa=o((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"extensionApi_privateAdd"),Ro=o((t,e,n,r)=>(La(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),"extensionApi_privateSet"),jr;class ka{constructor(e){wa(this,jr,void 0),Ro(this,jr,e),this.registerApiCommands()}registerApiCommands(){l.commands.registerCommand("remoteHub.api.getRepositoryContext",async e=>{if(!e)throw new Error("Please specify a repository uri.");await Ur(Jr(this,jr),e);const n=Jr(this,jr).getRepository(e);if(!n)throw new Error(`Unable to acquire repository context for ${e.toString(!0)}.`);return Jr(this,jr).getRepositoryContext(n)})}async getMetadata(e){const n=Jr(this,jr).getVirtualUriMetadata(e);if(n===void 0)return;const{provider:r,repo:i}=n;return{provider:{id:r.id,name:r.name},repo:i,getRevision:async()=>{const{HEAD:a}=await Jr(this,jr).getMetadata(e);return{type:a.type,name:a.name,revision:a.sha}}}}getProvider(e){return Jr(this,jr).getRegisteredProvider(e)}getProviderUri(e){return k.getProviderUri(e)}getProviderRootUri(e){return Jr(this,jr).getProviderRootUri(e)}isProviderUri(e,n){return e.scheme!==$n.scheme&&Jr(this,jr).hasProvider(e,n)}getVirtualUri(e){return k.getVirtualUri(e)}getVirtualWorkspaceUri(e){return Jr(this,jr).getVirtualWorkspaceUri(e)}async loadWorkspaceContents(e){if(e.scheme!==k.scheme)return!1;await Ur(Jr(this,jr),e);const n=Jr(this,jr).getProviderRootUri(e);if(n.scheme!=="github")return!1;const r=new Be(`RemoteHub.loadWorkspaceContents(${n.toString()})`,{log:!1,logLevel:l.LogLevel.Debug}),i=await Jr(this,jr).loadWorkspaceContents(n);return r.stop(),i}}o(ka,"ExtensionApi"),jr=new WeakMap;var xa=Object.defineProperty,Fa=Object.getOwnPropertyDescriptor,Na=o((t,e,n,r)=>{for(var i=r>1?void 0:r?Fa(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&xa(e,n,i),i},"fs_decorateClass");const da=l.FileSystemError.FileNotFound().code;class qi{constructor(e){this.providerService=e,this._onDidChangeFile=new l.EventEmitter,this.implicitlyWatchedUris=new Map,this.watchedUris=new Map,this.syncedRootUris=new Set,this.disposable=l.Disposable.from(l.workspace.registerFileSystemProvider(this.scheme,this,{isCaseSensitive:!0}),l.workspace.registerFileSearchProvider(this.scheme,this),l.workspace.registerTextSearchProvider(this.scheme,this),e.onDidChangeRepository(n=>{n.reason==="HEAD"&&this.onRefreshOrRepositoryChanged([n.repository.uri])}),e.onDidRefresh(n=>this.onRefreshOrRepositoryChanged(n)),e.onDidChangeChangeStore(n=>{const r=n.map(i=>{switch(i.type){case D.Created:return{type:l.FileChangeType.Created,uri:i.uri};case D.Changed:return{type:l.FileChangeType.Changed,uri:i.uri};case D.Deleted:return{type:l.FileChangeType.Deleted,uri:i.uri}}});setTimeout(()=>this._onDidChangeFile.fire(r),0)}))}get onDidChangeFile(){return this._onDidChangeFile.event}get scheme(){return $n.scheme}dispose(){var e;(e=this.disposable)==null||e.dispose()}onRefreshOrRepositoryChanged(e){e=e.filter(n=>n.scheme===this.scheme),e.length!==0&&(j.log(`fs.onRefreshOrRepositoryChanged(${e.map(n=>n.toString()).join(", ")})`),this.updateOpenOrWatchedUris(e))}updateOpenOrWatchedUris(e){const n=k.getOpenUris(this.scheme,e);for(const[i,a]of[...this.watchedUris,...this.implicitlyWatchedUris])e.some(s=>X(a,s))&&(this.implicitlyWatchedUris.delete(i),n.set(i,a));j.debug(`fs.updateOpenOrWatchedUris(${e.map(i=>i.toString()).join(", ")}): uris=${n.size}`);for(const i of e)n.set(_(i),i);const r=[...n.values()].map(i=>({type:l.FileChangeType.Changed,uri:i}));setTimeout(()=>{j.debug(`fs.updateOpenOrWatchedUris: Firing events=${r.map(i=>i.uri.toString()).join(", ")}`),this._onDidChangeFile.fire(r)},0)}watch(e,n){const r=_(e);this.watchedUris.set(r,e);const i=Ur(this.providerService,e).then(()=>this.providerService.watch(k.getProviderUri(e),n));return{dispose:async()=>{this.watchedUris.delete(r),(await i).dispose()}}}async stat(e){const n=new Be(`fs.stat(${e.toString()})`);await Ur(this.providerService,e);const r=this.providerService.getVirtualRootUri(e),i=r.toString();this.syncedRootUris.has(i)||(this.syncedRootUris.add(i),await this.providerService.fetchOrSync(r));let a;try{if(this.providerService.changeStoreMaybeHasChanges(r,e)!==!1){if(n.logStep("ChangeStore query"),a=await this.providerService.changeStoreStat(e),a!==void 0)return a;n.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else n.logStep("Provider query"),this.implicitlyWatchedUris.set(_(e),e);return a=await this.providerService.stat(k.getProviderUri(e)),a}finally{a===void 0&&this.implicitlyWatchedUris.delete(_(e)),n.stop()}}async readDirectory(e){const n=new Be(`fs.readDirectory(${e.toString()})`);await Ur(this.providerService,e),this.implicitlyWatchedUris.set(_(e),e);try{n.logStep("Provider query");let r=await this.providerService.readDirectory(k.getProviderUri(e));return this.providerService.changeStoreMaybeHasChanges(this.providerService.getVirtualRootUri(e))!==!1&&(n.logStep("Applying changes",{suffix:" \u2022 Applying changes..."}),r=await this.providerService.changeStoreUpdateDirectoryEntries(e,r)),r}finally{n.stop()}}async createDirectory(e){const n=new Be(`fs.createDirectory(${e.toString()})`);await Ur(this.providerService,e);try{await this.providerService.changeStoreCreateDirectory(e)}catch(r){throw j.error(r,n.context),r}finally{n.stop()}}async readFile(e){const n=new Be(`fs.readFile(${e.toString()})`),r=_(e);let i;await Ur(this.providerService,e);try{if(this.providerService.changeStoreMaybeHasChanges(this.providerService.getVirtualRootUri(e),e)!==!1){n.logStep("ChangeStore query");const a=await this.providerService.changeStoreReadFile(e);if(a!==void 0)return a;n.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else n.logStep("Provider query"),this.implicitlyWatchedUris.set(r,e);return i=await this.providerService.readFile(k.getProviderUri(e)),i}catch(a){throw a instanceof fn&&Kt.showProviderNotFoundMessage(a),a}finally{i===void 0&&this.implicitlyWatchedUris.delete(r),n.stop()}}async writeFile(e,n,r){const i=new Be(`fs.writeFile(${e.toString()})`,{},n.length,r);await Ur(this.providerService,e);try{let a;try{if(a=await this.stat(e),!r.overwrite)throw l.FileSystemError.FileExists()}catch(s){if(s instanceof l.FileSystemError&&s.code===da){if(!r.create)throw l.FileSystemError.FileNotFound(e)}else throw s}try{if(a===void 0)await this.providerService.changeStoreCreateFile(e,n);else{i.logStep("Provider original query");let s;try{s=await this.providerService.readFile(k.getProviderUri(e))}catch(c){if(c instanceof l.FileSystemError&&c.code===da)s=new Uint8Array;else throw c}i.logStep("Writing file",{suffix:" \u2022 Writing file to Change Store..."}),await this.providerService.changeStoreWriteFile(e,n,s)}}catch(s){throw j.error(s,i.context),s}}catch(a){throw a instanceof fn&&Kt.showProviderNotFoundMessage(a),a}finally{i.stop()}}async delete(e,n){const r=new Be(`fs.delete(${e.toString()})`,{},n);await Ur(this.providerService,e);try{switch((await this.stat(e)).type){case l.FileType.File:await this.providerService.changeStoreDeleteFile(e);break;case l.FileType.Directory:{await this.deleteDirectory(e,n);break}default:throw l.FileSystemError.NoPermissions()}}catch(i){throw j.error(i,r.context),i}finally{r.stop()}}async deleteDirectory(e,n){const r=new Be(`fs.deleteDirectory(${e.toString()})`,{},n);try{const i=await this.readDirectory(e);if(i.length!==0){if(!n.recursive&&i.some(([,a])=>a===l.FileType.Directory))throw l.FileSystemError.NoPermissions();for(const[a,s]of i)s===l.FileType.Directory?await this.deleteDirectory(l.Uri.joinPath(e,a),n):await this.providerService.changeStoreDeleteFile(l.Uri.joinPath(e,a))}await this.providerService.changeStoreDeleteDirectory(e)}catch(i){throw j.error(i,r.context),i}finally{r.stop()}}async rename(e,n,r){const i=new Be(`fs.rename(${e.toString()} -> ${n.toString()})`,{},r);await Ur(this.providerService,e);try{switch((await this.stat(e)).type){case l.FileType.File:{const s=await this.readFile(e);await this.writeFile(n,s,{create:!0,overwrite:r.overwrite}),await this.delete(e,{recursive:!1});break}case l.FileType.Directory:{await this.renameDirectory(e,n,r);break}default:throw l.FileSystemError.NoPermissions()}}catch(a){throw j.error(a,i.context),a}finally{i.stop()}}async renameDirectory(e,n,r){const i=new Be(`fs.renameDirectory(${e.toString()} -> ${n.toString()})`,{},r);try{await this.copyDirectory(e,n,r),await this.delete(e,{recursive:!0})}catch(a){throw j.error(a,i.context),a}finally{i.stop()}}async copy(e,n,r){const i=new Be(`fs.copy(${e.toString()} -> ${n.toString()})`,{},r);try{switch((await this.stat(e)).type){case l.FileType.File:{const s=await this.readFile(e);await this.writeFile(n,s,{create:!0,overwrite:r.overwrite});break}case l.FileType.Directory:{await this.copyDirectory(e,n,r);break}default:throw l.FileSystemError.NoPermissions()}}catch(a){throw j.error(a,i.context),a}finally{i.stop()}}async copyDirectory(e,n,r){const i=new Be(`fs.copyDirectory(${e.toString()} -> ${n.toString()})`,{},r);try{if(await this.exists(n))throw l.FileSystemError.FileExists();try{await this.createDirectory(n);const a=await this.readDirectory(e);for(const[s,c]of a)c===l.FileType.Directory?await this.copyDirectory(l.Uri.joinPath(e,s),l.Uri.joinPath(n,s),r):await this.copy(l.Uri.joinPath(e,s),l.Uri.joinPath(n,s),r)}catch(a){throw j.error(a,i.context),a}}finally{i.stop()}}async exists(e){try{return await this.stat(e),!0}catch(n){if(n instanceof l.FileSystemError&&n.code===da)return!1;throw n}}async provideFileSearchResults(e,n,r){var i;const a=new Be(`fs.provideFileSearchResults(${e.pattern}, ${n.folder.toString()})`,{logLevel:l.LogLevel.Debug});await Ur(this.providerService,n.folder);let s;try{return s=await this.providerService.provideFileSearchResults(e,{...n,folder:k.getProviderUri(n.folder)},r),s==null?void 0:s.map(c=>k.getVirtualUri(c))}catch(c){throw j.error(c,a.context),c}finally{a.stop({suffix:` \u2022 ${(i=s==null?void 0:s.length)!=null?i:0} results found`})}}async provideTextSearchResults(e,n,r,i){return await Ur(this.providerService,n.folder),this.providerService.provideTextSearchResults(e,{...n,folder:k.getProviderUri(n.folder)},{report:a=>r.report({...a,uri:k.getVirtualUri(a.uri)})},i)}}o(qi,"ChangeTrackingFileSystem"),Na([vt()],qi.prototype,"stat",1),Na([vt()],qi.prototype,"readDirectory",1),Na([vt()],qi.prototype,"readFile",1);const Oa=o(class{constructor(t){this.providerService=t,this.lock=new pt("PendingRepositoryOpenActions"),this.disposable=l.Disposable.from(t.onDidChangeRepositories(e=>e.added.length&&this.onRepositoriesOpened(e.added)))}dispose(){this.disposable.dispose()}async onRepositoriesOpened(t){for(const e of t){const n=await this.getAndDelete(e);(n==null?void 0:n.applyChangeset)&&await this.applyPendingChangeset(e,n.applyChangeset),(n==null?void 0:n.filesToOpen)&&this.openPendingFiles(e.uri,n.filesToOpen),await this.fetchOrSync(e).then(async()=>{const r=be.getEffective("uncommittedChangesOnEntry");if(r==="none"||!await this.providerService.changeStoreHasChanges(e.uri)||(await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(e.uri))).length===0&&r==="promptIfBehind")return;const{state:s}=await this.providerService.getMetadata(e.uri);if(s===void 0||s.behind<1)return;const c=await this.providerService.changeStoreGetChanges(e.uri),u=c.length===1?l.l10n.t("You have {0} file with uncommitted changes from a previous edit session.",c.length.toString()):l.l10n.t("You have {0} files with uncommitted changes from a previous edit session.",c.length.toString());let d="";s.behind===1?d=l.l10n.t(`Your repository contents may be out of date until you sync.

You are {0} commit behind.`,s.behind.toString()):s.behind>1&&(d=l.l10n.t(`Your repository contents may be out of date until you sync.

You are {0} commits behind.`,s.behind.toString()));const f=[u,d].join(`

`),h={title:l.l10n.t("Sync")},p={title:l.l10n.t("Continue Without Syncing"),isCloseAffordance:!0},b={title:l.l10n.t("Don't Show Again")},Z=await l.window.showInformationMessage(f,{modal:!0},h,p,b);switch(Z==null?void 0:Z.title){case h.title:await l.commands.executeCommand("remoteHub.sync");break;case b.title:await be.updateEffective("uncommittedChangesOnEntry","none");break;default:break}})}}async fetchOrSync(t){await this.providerService.fetchOrSync(t.uri)}async get(t){return this.lock.synchronizeRead(()=>this.getCore(t.uri),"PendingRepositoryOpenActions.get")}async getAndDelete(t){j.debug(`RepositoryOpenActionsService.getAndDelete(${t.uri.toString()})`);try{return await this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t.uri);if(n!==void 0)return await this.storeCore(t.uri,void 0),n},"PendingRepositoryOpenActions.getAndDelete")}catch(e){j.error(e,`Failed to get pending actions for ${t.uri.toString()}`);return}}async openPendingFiles(t,e){if(e.length!==0){j.log(`RepositoryOpenActionsService.openPendingFiles(${t.toString()})`,e.join(","));for(let n of e){const r=/:(?<start>\d+)(?:-(?<end>\d+))?$/.exec(n);let i,a;(r==null?void 0:r.groups)!==void 0&&(i=Number(r.groups.start),isNaN(i)&&(i=void 0),a=Number(r.groups.end),isNaN(a)&&(a=void 0),n=n.substring(0,r.index));const s=l.Uri.joinPath(t,n);let c;try{c=await l.workspace.fs.stat(s)}catch{}if((c==null?void 0:c.type)===l.FileType.Directory)l.commands.executeCommand("revealInExplorer",s);else{let u;i!==void 0&&(u={selection:new l.Range(Number(i)-1,0,a!=null?a:i,0)}),l.commands.executeCommand("vscode.open",s,u)}}}}setChangesetToApply(t,e){return j.log(`RepositoryOpenActionsService.setChangesetToApply(${t.toString()})`),this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t);await this.storeCore(t,{...n,applyChangeset:e})},"PendingRepositoryOpenActions.setChangesetToApply")}setPendingFilesToOpen(t,e){return j.log(`RepositoryOpenActionsService.setPendingFilesToOpen(${t.toString()})`,e.length),this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t);await this.storeCore(t,{...n,filesToOpen:e})},"PendingRepositoryOpenActions.setPendingFilesToOpen")}async applyPendingChangeset(t,e){j.log(`RepositoryOpenActionsService.applyPendingChangeset(${t.uri.toString()})`);try{await this.providerService.changeStoreApplyChangeset(t.uri,e,{save:!0})}catch(n){j.error(n,`Failed to apply pending changeset for ${t.uri.toString()}`)}}async getCore(t){return this.fromStorage(await this.providerService.getFromStorage(t,this.getStorageKey(t)))}storeCore(t,e){return e===void 0||e.applyChangeset===void 0&&(e.filesToOpen===void 0||e.filesToOpen.length===0)?this.providerService.deleteFromStorage(t,this.getStorageKey(t)):this.providerService.storeInStorage(t,this.getStorageKey(t),this.toStorage(e))}getStorageKey(t){return`actions/${_(t)}`}fromStorage(t){if(!!t)try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&L(r)?l.Uri.from(r):r);return{filesToOpen:e.filesToOpen,applyChangeset:e.applyChangeset}}catch(e){return j.error(e,"Failed to deserialize pending repository actions"),{}}}toStorage(t){const e={schemaVersion:Oa.storageSchemaVersion,...t};return JSON.stringify(e)}},"_RepositoryOpenActionsService");let Sa=Oa;Sa.storageSchemaVersion=1;function Di(){}o(Di,"Diff"),Di.prototype={diff:o(function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.callback;typeof r=="function"&&(i=r,r={}),this.options=r;var a=this;function s(E){return i?(setTimeout(function(){i(void 0,E)},0),!0):E}o(s,"done"),e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e)),n=this.removeEmpty(this.tokenize(n));var c=n.length,u=e.length,d=1,f=c+u,h=[{newPos:-1,components:[]}],p=this.extractCommon(h[0],n,e,0);if(h[0].newPos+1>=c&&p+1>=u)return s([{value:this.join(n),count:n.length}]);function b(){for(var E=-1*d;E<=d;E+=2){var K=void 0,me=h[E-1],re=h[E+1],De=(re?re.newPos:0)-E;me&&(h[E-1]=void 0);var Le=me&&me.newPos+1<c,Ge=re&&0<=De&&De<u;if(!Le&&!Ge){h[E]=void 0;continue}if(!Le||Ge&&me.newPos<re.newPos?(K=To(re),a.pushComponent(K.components,void 0,!0)):(K=me,K.newPos++,a.pushComponent(K.components,!0,void 0)),De=a.extractCommon(K,n,e,E),K.newPos+1>=c&&De+1>=u)return s(co(a,K.components,n,e,a.useLongestToken));h[E]=K}d++}if(o(b,"execEditLength"),i)o(function E(){setTimeout(function(){if(d>f)return i();b()||E()},0)},"exec")();else for(;d<=f;){var Z=b();if(Z)return Z}},"diff"),pushComponent:o(function(e,n,r){var i=e[e.length-1];i&&i.added===n&&i.removed===r?e[e.length-1]={count:i.count+1,added:n,removed:r}:e.push({count:1,added:n,removed:r})},"pushComponent"),extractCommon:o(function(e,n,r,i){for(var a=n.length,s=r.length,c=e.newPos,u=c-i,d=0;c+1<a&&u+1<s&&this.equals(n[c+1],r[u+1]);)c++,u++,d++;return d&&e.components.push({count:d}),e.newPos=c,u},"extractCommon"),equals:o(function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},"equals"),removeEmpty:o(function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},"removeEmpty"),castInput:o(function(e){return e},"castInput"),tokenize:o(function(e){return e.split("")},"tokenize"),join:o(function(e){return e.join("")},"join")};function co(t,e,n,r,i){for(var a=0,s=e.length,c=0,u=0;a<s;a++){var d=e[a];if(d.removed){if(d.value=t.join(r.slice(u,u+d.count)),u+=d.count,a&&e[a-1].added){var h=e[a-1];e[a-1]=e[a],e[a]=h}}else{if(!d.added&&i){var f=n.slice(c,c+d.count);f=f.map(function(b,Z){var E=r[u+Z];return E.length>b.length?E:b}),d.value=t.join(f)}else d.value=t.join(n.slice(c,c+d.count));c+=d.count,d.added||(u+=d.count)}}var p=e[s-1];return s>1&&typeof p.value=="string"&&(p.added||p.removed)&&t.equals("",p.value)&&(e[s-2].value+=p.value,e.pop()),e}o(co,"buildValues");function To(t){return{newPos:t.newPos,components:t.components.slice(0)}}o(To,"clonePath");var Mo=new Di;function ts(t,e,n){return Mo.diff(t,e,n)}o(ts,"diffChars");function Ua(t,e){if(typeof t=="function")e.callback=t;else if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}o(Ua,"generateOptions");var Te=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,bt=/\S/,At=new Di;At.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!bt.test(t)&&!bt.test(e)},At.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&Te.test(e[n])&&Te.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};function rn(t,e,n){return n=Ua(n,{ignoreWhitespace:!0}),At.diff(t,e,n)}o(rn,"diffWords");function Pn(t,e,n){return At.diff(t,e,n)}o(Pn,"diffWordsWithSpace");var Ln=new Di;Ln.tokenize=function(t){var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),e.push(i))}return e};function Bn(t,e,n){return Ln.diff(t,e,n)}o(Bn,"diffLines");function Kr(t,e,n){var r=Ua(n,{ignoreWhitespace:!0});return Ln.diff(t,e,r)}o(Kr,"diffTrimmedLines");var ri=new Di;ri.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};function Yr(t,e,n){return ri.diff(t,e,n)}o(Yr,"diffSentences");var Or=new Di;Or.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function yi(t,e,n){return Or.diff(t,e,n)}o(yi,"diffCss");function br(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?br=o(function(e){return typeof e},"_typeof"):br=o(function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},"_typeof"),br(t)}o(br,"_typeof");function ii(t){return dl(t)||fl(t)||hl(t)||gl()}o(ii,"_toConsumableArray");function dl(t){if(Array.isArray(t))return Po(t)}o(dl,"_arrayWithoutHoles");function fl(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}o(fl,"_iterableToArray");function hl(t,e){if(!!t){if(typeof t=="string")return Po(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Po(t,e)}}o(hl,"_unsupportedIterableToArray");function Po(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}o(Po,"_arrayLikeToArray");function gl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}o(gl,"_nonIterableSpread");var vl=Object.prototype.toString,Ca=new Di;Ca.useLongestToken=!0,Ca.tokenize=Ln.tokenize,Ca.castInput=function(t){var e=this.options,n=e.undefinedReplacement,r=e.stringifyReplacer,i=r===void 0?function(a,s){return typeof s=="undefined"?n:s}:r;return typeof t=="string"?t:JSON.stringify(Io(t,null,null,i),i,"  ")},Ca.equals=function(t,e){return Di.prototype.equals.call(Ca,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function Oc(t,e,n){return Ca.diff(t,e,n)}o(Oc,"diffJson");function Io(t,e,n,r,i){e=e||[],n=n||[],r&&(t=r(i,t));var a;for(a=0;a<e.length;a+=1)if(e[a]===t)return n[a];var s;if(vl.call(t)==="[object Array]"){for(e.push(t),s=new Array(t.length),n.push(s),a=0;a<t.length;a+=1)s[a]=Io(t[a],e,n,r,i);return e.pop(),n.pop(),s}if(t&&t.toJSON&&(t=t.toJSON()),br(t)==="object"&&t!==null){e.push(t),s={},n.push(s);var c=[],u;for(u in t)t.hasOwnProperty(u)&&c.push(u);for(c.sort(),a=0;a<c.length;a+=1)u=c[a],s[u]=Io(t[u],e,n,r,u);e.pop(),n.pop()}else s=t;return s}o(Io,"canonicalize");var uo=new Di;uo.tokenize=function(t){return t.slice()},uo.join=uo.removeEmpty=function(t){return t};function Uc(t,e,n){return uo.diff(t,e,n)}o(Uc,"diffArrays");function Ba(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.split(/\r\n|[\n\v\f\r\x85]/),r=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],i=[],a=0;function s(){var d={};for(i.push(d);a<n.length;){var f=n[a];if(/^(\-\-\-|\+\+\+|@@)\s/.test(f))break;var h=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(f);h&&(d.index=h[1]),a++}for(c(d),c(d),d.hunks=[];a<n.length;){var p=n[a];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(p))break;if(/^@@/.test(p))d.hunks.push(u());else{if(p&&e.strict)throw new Error("Unknown line "+(a+1)+" "+JSON.stringify(p));a++}}}o(s,"parseIndex");function c(d){var f=/^(---|\+\+\+)\s+(.*)$/.exec(n[a]);if(f){var h=f[1]==="---"?"old":"new",p=f[2].split("	",2),b=p[0].replace(/\\\\/g,"\\");/^".*"$/.test(b)&&(b=b.substr(1,b.length-2)),d[h+"FileName"]=b,d[h+"Header"]=(p[1]||"").trim(),a++}}o(c,"parseFileHeader");function u(){var d=a,f=n[a++],h=f.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),p={oldStart:+h[1],oldLines:typeof h[2]=="undefined"?1:+h[2],newStart:+h[3],newLines:typeof h[4]=="undefined"?1:+h[4],lines:[],linedelimiters:[]};p.oldLines===0&&(p.oldStart+=1),p.newLines===0&&(p.newStart+=1);for(var b=0,Z=0;a<n.length&&!(n[a].indexOf("--- ")===0&&a+2<n.length&&n[a+1].indexOf("+++ ")===0&&n[a+2].indexOf("@@")===0);a++){var E=n[a].length==0&&a!=n.length-1?" ":n[a][0];if(E==="+"||E==="-"||E===" "||E==="\\")p.lines.push(n[a]),p.linedelimiters.push(r[a]||`
`),E==="+"?b++:E==="-"?Z++:E===" "&&(b++,Z++);else break}if(!b&&p.newLines===1&&(p.newLines=0),!Z&&p.oldLines===1&&(p.oldLines=0),e.strict){if(b!==p.newLines)throw new Error("Added line count did not match for hunk at line "+(d+1));if(Z!==p.oldLines)throw new Error("Removed line count did not match for hunk at line "+(d+1))}return p}for(o(u,"parseHunk");a<n.length;)s();return i}o(Ba,"parsePatch");function pl(t,e,n){var r=!0,i=!1,a=!1,s=1;return o(function c(){if(r&&!a){if(i?s++:r=!1,t+s<=n)return s;a=!0}if(!i)return a||(r=!0),e<=t-s?-s++:(i=!0,c())},"iterator")}o(pl,"distanceIterator");function ns(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string"&&(e=Ba(e)),Array.isArray(e)){if(e.length>1)throw new Error("applyPatch only works with a single input.");e=e[0]}var r=t.split(/\r\n|[\n\v\f\r\x85]/),i=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],a=e.hunks,s=n.compareLine||function(Ri,Ti,aa,Ni){return Ti===Ni},c=0,u=n.fuzzFactor||0,d=0,f=0,h,p;function b(Ri,Ti){for(var aa=0;aa<Ri.lines.length;aa++){var Ni=Ri.lines[aa],Ea=Ni.length>0?Ni[0]:" ",bo=Ni.length>0?Ni.substr(1):Ni;if(Ea===" "||Ea==="-"){if(!s(Ti+1,r[Ti],Ea,bo)&&(c++,c>u))return!1;Ti++}}return!0}o(b,"hunkFits");for(var Z=0;Z<a.length;Z++){for(var E=a[Z],K=r.length-E.oldLines,me=0,re=f+E.oldStart-1,De=pl(re,d,K);me!==void 0;me=De())if(b(E,re+me)){E.offset=f+=me;break}if(me===void 0)return!1;d=E.offset+E.oldStart+E.oldLines}for(var Le=0,Ge=0;Ge<a.length;Ge++){var qe=a[Ge],it=qe.oldStart+qe.offset+Le-1;Le+=qe.newLines-qe.oldLines;for(var je=0;je<qe.lines.length;je++){var Lt=qe.lines[je],Xt=Lt.length>0?Lt[0]:" ",an=Lt.length>0?Lt.substr(1):Lt,Vt=qe.linedelimiters[je];if(Xt===" ")it++;else if(Xt==="-")r.splice(it,1),i.splice(it,1);else if(Xt==="+")r.splice(it,0,an),i.splice(it,0,Vt),it++;else if(Xt==="\\"){var dn=qe.lines[je-1]?qe.lines[je-1][0]:null;dn==="+"?h=!0:dn==="-"&&(p=!0)}}}if(h)for(;!r[r.length-1];)r.pop(),i.pop();else p&&(r.push(""),i.push(`
`));for(var Rr=0;Rr<r.length-1;Rr++)r[Rr]=r[Rr]+i[Rr];return r.join("")}o(ns,"applyPatch");function Bc(t,e){typeof t=="string"&&(t=Ba(t));var n=0;function r(){var i=t[n++];if(!i)return e.complete();e.loadFile(i,function(a,s){if(a)return e.complete(a);var c=ns(s,i,e);e.patched(i,c,function(u){if(u)return e.complete(u);r()})})}o(r,"processIndex"),r()}o(Bc,"applyPatches");function rs(t,e,n,r,i,a,s){s||(s={}),typeof s.context=="undefined"&&(s.context=4);var c=Bn(n,r,s);c.push({value:"",lines:[]});function u(me){return me.map(function(re){return" "+re})}o(u,"contextLines");for(var d=[],f=0,h=0,p=[],b=1,Z=1,E=o(function(re){var De=c[re],Le=De.lines||De.value.replace(/\n$/,"").split(`
`);if(De.lines=Le,De.added||De.removed){var Ge;if(!f){var qe=c[re-1];f=b,h=Z,qe&&(p=s.context>0?u(qe.lines.slice(-s.context)):[],f-=p.length,h-=p.length)}(Ge=p).push.apply(Ge,ii(Le.map(function(Rr){return(De.added?"+":"-")+Rr}))),De.added?Z+=Le.length:b+=Le.length}else{if(f)if(Le.length<=s.context*2&&re<c.length-2){var it;(it=p).push.apply(it,ii(u(Le)))}else{var je,Lt=Math.min(Le.length,s.context);(je=p).push.apply(je,ii(u(Le.slice(0,Lt))));var Xt={oldStart:f,oldLines:b-f+Lt,newStart:h,newLines:Z-h+Lt,lines:p};if(re>=c.length-2&&Le.length<=s.context){var an=/\n$/.test(n),Vt=/\n$/.test(r),dn=Le.length==0&&p.length>Xt.oldLines;!an&&dn&&n.length>0&&p.splice(Xt.oldLines,0,"\\ No newline at end of file"),(!an&&!dn||!Vt)&&p.push("\\ No newline at end of file")}d.push(Xt),f=0,h=0,p=[]}b+=Le.length,Z+=Le.length}},"_loop"),K=0;K<c.length;K++)E(K);return{oldFileName:t,newFileName:e,oldHeader:i,newHeader:a,hunks:d}}o(rs,"structuredPatch");function ml(t){var e=[];t.oldFileName==t.newFileName&&e.push("Index: "+t.oldFileName),e.push("==================================================================="),e.push("--- "+t.oldFileName+(typeof t.oldHeader=="undefined"?"":"	"+t.oldHeader)),e.push("+++ "+t.newFileName+(typeof t.newHeader=="undefined"?"":"	"+t.newHeader));for(var n=0;n<t.hunks.length;n++){var r=t.hunks[n];r.oldLines===0&&(r.oldStart-=1),r.newLines===0&&(r.newStart-=1),e.push("@@ -"+r.oldStart+","+r.oldLines+" +"+r.newStart+","+r.newLines+" @@"),e.push.apply(e,r.lines)}return e.join(`
`)+`
`}o(ml,"formatPatch");function yl(t,e,n,r,i,a,s){return ml(rs(t,e,n,r,i,a,s))}o(yl,"createTwoFilesPatch");function wl(t,e,n,r,i,a){return yl(t,t,e,n,r,i,a)}o(wl,"createPatch");function Sl(t,e){return t.length!==e.length?!1:Lo(t,e)}o(Sl,"arrayEqual");function Lo(t,e){if(e.length>t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}o(Lo,"arrayStartsWith");function Cl(t){var e=xo(t.lines),n=e.oldLines,r=e.newLines;n!==void 0?t.oldLines=n:delete t.oldLines,r!==void 0?t.newLines=r:delete t.newLines}o(Cl,"calcLineCount");function Hc(t,e,n){t=is(t,n),e=is(e,n);var r={};(t.index||e.index)&&(r.index=t.index||e.index),(t.newFileName||e.newFileName)&&(as(t)?as(e)?(r.oldFileName=fo(r,t.oldFileName,e.oldFileName),r.newFileName=fo(r,t.newFileName,e.newFileName),r.oldHeader=fo(r,t.oldHeader,e.oldHeader),r.newHeader=fo(r,t.newHeader,e.newHeader)):(r.oldFileName=t.oldFileName,r.newFileName=t.newFileName,r.oldHeader=t.oldHeader,r.newHeader=t.newHeader):(r.oldFileName=e.oldFileName||t.oldFileName,r.newFileName=e.newFileName||t.newFileName,r.oldHeader=e.oldHeader||t.oldHeader,r.newHeader=e.newHeader||t.newHeader)),r.hunks=[];for(var i=0,a=0,s=0,c=0;i<t.hunks.length||a<e.hunks.length;){var u=t.hunks[i]||{oldStart:1/0},d=e.hunks[a]||{oldStart:1/0};if(os(u,d))r.hunks.push(ss(u,s)),i++,c+=u.newLines-u.oldLines;else if(os(d,u))r.hunks.push(ss(d,c)),a++,s+=d.newLines-d.oldLines;else{var f={oldStart:Math.min(u.oldStart,d.oldStart),oldLines:0,newStart:Math.min(u.newStart+s,d.oldStart+c),newLines:0,lines:[]};bl(f,u.oldStart,u.lines,d.oldStart,d.lines),a++,i++,r.hunks.push(f)}}return r}o(Hc,"merge");function is(t,e){if(typeof t=="string"){if(/^@@/m.test(t)||/^Index:/m.test(t))return Ba(t)[0];if(!e)throw new Error("Must provide a base reference or pass in a patch");return rs(void 0,void 0,e,t)}return t}o(is,"loadPatch");function as(t){return t.newFileName&&t.newFileName!==t.oldFileName}o(as,"fileNameChanged");function fo(t,e,n){return e===n?e:(t.conflict=!0,{mine:e,theirs:n})}o(fo,"selectField");function os(t,e){return t.oldStart<e.oldStart&&t.oldStart+t.oldLines<e.oldStart}o(os,"hunkBefore");function ss(t,e){return{oldStart:t.oldStart,oldLines:t.oldLines,newStart:t.newStart+e,newLines:t.newLines,lines:t.lines}}o(ss,"cloneHunk");function bl(t,e,n,r,i){var a={offset:e,lines:n,index:0},s={offset:r,lines:i,index:0};for(cs(t,a,s),cs(t,s,a);a.index<a.lines.length&&s.index<s.lines.length;){var c=a.lines[a.index],u=s.lines[s.index];if((c[0]==="-"||c[0]==="+")&&(u[0]==="-"||u[0]==="+"))_l(t,a,s);else if(c[0]==="+"&&u[0]===" "){var d;(d=t.lines).push.apply(d,ii(fa(a)))}else if(u[0]==="+"&&c[0]===" "){var f;(f=t.lines).push.apply(f,ii(fa(s)))}else c[0]==="-"&&u[0]===" "?ls(t,a,s):u[0]==="-"&&c[0]===" "?ls(t,s,a,!0):c===u?(t.lines.push(c),a.index++,s.index++):ko(t,fa(a),fa(s))}us(t,a),us(t,s),Cl(t)}o(bl,"mergeLines");function _l(t,e,n){var r=fa(e),i=fa(n);if(ds(r)&&ds(i)){if(Lo(r,i)&&fs(n,r,r.length-i.length)){var a;(a=t.lines).push.apply(a,ii(r));return}else if(Lo(i,r)&&fs(e,i,i.length-r.length)){var s;(s=t.lines).push.apply(s,ii(i));return}}else if(Sl(r,i)){var c;(c=t.lines).push.apply(c,ii(r));return}ko(t,r,i)}o(_l,"mutualChange");function ls(t,e,n,r){var i=fa(e),a=El(n,i);if(a.merged){var s;(s=t.lines).push.apply(s,ii(a.merged))}else ko(t,r?a:i,r?i:a)}o(ls,"removal");function ko(t,e,n){t.conflict=!0,t.lines.push({conflict:!0,mine:e,theirs:n})}o(ko,"conflict");function cs(t,e,n){for(;e.offset<n.offset&&e.index<e.lines.length;){var r=e.lines[e.index++];t.lines.push(r),e.offset++}}o(cs,"insertLeading");function us(t,e){for(;e.index<e.lines.length;){var n=e.lines[e.index++];t.lines.push(n)}}o(us,"insertTrailing");function fa(t){for(var e=[],n=t.lines[t.index][0];t.index<t.lines.length;){var r=t.lines[t.index];if(n==="-"&&r[0]==="+"&&(n="+"),n===r[0])e.push(r),t.index++;else break}return e}o(fa,"collectChange");function El(t,e){for(var n=[],r=[],i=0,a=!1,s=!1;i<e.length&&t.index<t.lines.length;){var c=t.lines[t.index],u=e[i];if(u[0]==="+")break;if(a=a||c[0]!==" ",r.push(u),i++,c[0]==="+")for(s=!0;c[0]==="+";)n.push(c),c=t.lines[++t.index];u.substr(1)===c.substr(1)?(n.push(c),t.index++):s=!0}if((e[i]||"")[0]==="+"&&a&&(s=!0),s)return n;for(;i<e.length;)r.push(e[i++]);return{merged:r,changes:n}}o(El,"collectContext");function ds(t){return t.reduce(function(e,n){return e&&n[0]==="-"},!0)}o(ds,"allRemoves");function fs(t,e,n){for(var r=0;r<n;r++){var i=e[e.length-n+r].substr(1);if(t.lines[t.index+r]!==" "+i)return!1}return t.index+=n,!0}o(fs,"skipRemoveSuperset");function xo(t){var e=0,n=0;return t.forEach(function(r){if(typeof r!="string"){var i=xo(r.mine),a=xo(r.theirs);e!==void 0&&(i.oldLines===a.oldLines?e+=i.oldLines:e=void 0),n!==void 0&&(i.newLines===a.newLines?n+=i.newLines:n=void 0)}else n!==void 0&&(r[0]==="+"||r[0]===" ")&&n++,e!==void 0&&(r[0]==="-"||r[0]===" ")&&e++}),{oldLines:e,newLines:n}}o(xo,"calcOldNewLineCount");function Wc(t){for(var e=[],n,r,i=0;i<t.length;i++)n=t[i],n.added?r=1:n.removed?r=-1:r=0,e.push([r,n.value]);return e}o(Wc,"convertChangesToDMP");function $c(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];r.added?e.push("<ins>"):r.removed&&e.push("<del>"),e.push(Al(r.value)),r.added?e.push("</ins>"):r.removed&&e.push("</del>")}return e.join("")}o($c,"convertChangesToXML");function Al(t){var e=t;return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/"/g,"&quot;"),e}o(Al,"escapeHTML");var hs=/[^a-zA-Z0-9]/,gs=/\s/,vs=/[\r\n]/,Dl=/\n\r?\n$/,Rl=/^\r?\n\r?\n/,gt;(function(t){t[t.DIFF_DELETE=-1]="DIFF_DELETE",t[t.DIFF_INSERT=1]="DIFF_INSERT",t[t.DIFF_EQUAL=0]="DIFF_EQUAL"})(gt||(gt={}));function Tl(t,e){return t<e?t:e}o(Tl,"min");function Ml(t,e){return t>e?t:e}o(Ml,"max");var ci=at,Ha=function(){function t(){this.diffs=[],this.start1=0,this.start2=0,this.length1=0,this.length2=0}return o(t,"PatchObject"),t.prototype.toString=function(){var e,n;this.length1===0?e=this.start1+",0":this.length1===1?e=this.start1+1:e=this.start1+1+","+this.length1,this.length2===0?n=this.start2+",0":this.length2===1?n=this.start2+1:n=this.start2+1+","+this.length2;for(var r=["@@ -"+e+" +"+n+` @@
`],i,a=0;a<this.diffs.length;a++){switch(this.diffs[a][0]){case gt.DIFF_INSERT:i="+";break;case gt.DIFF_DELETE:i="-";break;case gt.DIFF_EQUAL:i=" ";break}r[a+1]=i+encodeURI(this.diffs[a][1])+`
`}return r.join("").replace(/%20/g," ")},t}(),Pl=function(){function t(){this.diffTimeout=1,this.diffEditCost=4,this.matchThreshold=.5,this.matchDistance=1e3,this.patchDeleteThreshold=.5,this.patchMargin=4,this.matchMaxBits=32}return o(t,"DiffMatchPatch"),t.prototype.diff_main=function(e,n,r,i){typeof i=="undefined"&&(this.diffTimeout<=0?i=Number.MAX_VALUE:i=Date.now()+this.diffTimeout*1e3);var a=i;if(e==null||n==null)throw new Error("Null input. (diff_main)");if(e===n)return e?[[gt.DIFF_EQUAL,e]]:[];typeof r=="undefined"&&(r=!0);var s=r,c=this.diff_commonPrefix(e,n),u=e.substring(0,c);e=e.substring(c),n=n.substring(c),c=this.diff_commonSuffix(e,n);var d=e.substring(e.length-c);e=e.substring(0,e.length-c),n=n.substring(0,n.length-c);var f=this.diff_compute_(e,n,s,a);return u&&f.unshift([gt.DIFF_EQUAL,u]),d&&f.push([gt.DIFF_EQUAL,d]),this.diff_cleanupMerge(f),f},t.prototype.diff_commonPrefix=function(e,n){if(!e||!n||e.charAt(0)!==n.charAt(0))return 0;for(var r=0,i=ci.min(e.length,n.length),a=i,s=0;r<a;)e.substring(s,a)===n.substring(s,a)?(r=a,s=r):i=a,a=Math.floor((i-r)/2+r);return a},t.prototype.diff_commonSuffix=function(e,n){if(!e||!n||e.charAt(e.length-1)!==n.charAt(n.length-1))return 0;for(var r=0,i=ci.min(e.length,n.length),a=i,s=0;r<a;)e.substring(e.length-a,e.length-s)===n.substring(n.length-a,n.length-s)?(r=a,s=r):i=a,a=Math.floor((i-r)/2+r);return a},t.prototype.diff_cleanupSemantic=function(e){for(var n=!1,r=[],i=0,a=null,s=0,c=0,u=0,d=0,f=0;s<e.length;)e[s][0]===gt.DIFF_EQUAL?(r[i++]=s,c=d,u=f,d=0,f=0,a=e[s][1]):(e[s][0]===gt.DIFF_INSERT?d+=e[s][1].length:f+=e[s][1].length,a&&a.length<=ci.max(c,u)&&a.length<=ci.max(d,f)&&(e.splice(r[i-1],0,[gt.DIFF_DELETE,a]),e[r[i-1]+1][0]=gt.DIFF_INSERT,i--,i--,s=i>0?r[i-1]:-1,c=0,u=0,d=0,f=0,a=null,n=!0)),s++;for(n&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),s=1;s<e.length;){if(e[s-1][0]===gt.DIFF_DELETE&&e[s][0]===gt.DIFF_INSERT){var h=e[s-1][1],p=e[s][1],b=this.diff_commonOverlap_(h,p),Z=this.diff_commonOverlap_(p,h);b>=Z?(b>=h.length/2||b>=p.length/2)&&(e.splice(s,0,[gt.DIFF_EQUAL,p.substring(0,b)]),e[s-1][1]=h.substring(0,h.length-b),e[s+1][1]=p.substring(b),s++):(Z>=h.length/2||Z>=p.length/2)&&(e.splice(s,0,[gt.DIFF_EQUAL,h.substring(0,Z)]),e[s-1][0]=gt.DIFF_INSERT,e[s-1][1]=p.substring(0,p.length-Z),e[s+1][0]=gt.DIFF_DELETE,e[s+1][1]=h.substring(Z),s++),s++}s++}},t.prototype.diff_cleanupSemanticLossless=function(e){for(var n=1;n<e.length-1;){if(e[n-1][0]===gt.DIFF_EQUAL&&e[n+1][0]===gt.DIFF_EQUAL){var r=e[n-1][1],i=e[n][1],a=e[n+1][1],s=this.diff_commonSuffix(r,i);if(s){var c=i.substring(i.length-s);r=r.substring(0,r.length-s),i=c+i.substring(0,i.length-s),a=c+a}for(var u=r,d=i,f=a,h=this.diff_cleanupSemanticScore_(r,i)+this.diff_cleanupSemanticScore_(i,a);i.charAt(0)===a.charAt(0);){r+=i.charAt(0),i=i.substring(1)+a.charAt(0),a=a.substring(1);var p=this.diff_cleanupSemanticScore_(r,i)+this.diff_cleanupSemanticScore_(i,a);p>=h&&(h=p,u=r,d=i,f=a)}e[n-1][1]!==u&&(u?e[n-1][1]=u:(e.splice(n-1,1),n--),e[n][1]=d,f?e[n+1][1]=f:(e.splice(n+1,1),n--))}n++}},t.prototype.diff_cleanupEfficiency=function(e){for(var n=!1,r=[],i=0,a=null,s=0,c=!1,u=!1,d=!1,f=!1;s<e.length;)e[s][0]===gt.DIFF_EQUAL?(e[s][1].length<this.diffEditCost&&(d||f)?(r[i++]=s,c=d,u=f,a=e[s][1]):(i=0,a=null),d=f=!1):(e[s][0]===gt.DIFF_DELETE?f=!0:d=!0,a&&(c&&u&&d&&f||a.length<this.diffEditCost/2&&Number(c)+Number(u)+Number(d)+Number(f)===3)&&(e.splice(r[i-1],0,[gt.DIFF_DELETE,a]),e[r[i-1]+1][0]=gt.DIFF_INSERT,i--,a=null,c&&u?(d=f=!0,i=0):(i--,s=i>0?r[i-1]:-1,d=f=!1),n=!0)),s++;n&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push([gt.DIFF_EQUAL,""]);for(var n=0,r=0,i=0,a="",s="",c;n<e.length;)switch(e[n][0]){case gt.DIFF_INSERT:i++,s+=e[n][1],n++;break;case gt.DIFF_DELETE:r++,a+=e[n][1],n++;break;case gt.DIFF_EQUAL:r+i>1?(r!==0&&i!==0&&(c=this.diff_commonPrefix(s,a),c!==0&&(n-r-i>0&&e[n-r-i-1][0]===gt.DIFF_EQUAL?e[n-r-i-1][1]+=s.substring(0,c):(e.splice(0,0,[gt.DIFF_EQUAL,s.substring(0,c)]),n++),s=s.substring(c),a=a.substring(c)),c=this.diff_commonSuffix(s,a),c!==0&&(e[n][1]=s.substring(s.length-c)+e[n][1],s=s.substring(0,s.length-c),a=a.substring(0,a.length-c))),n-=r+i,e.splice(n,r+i),a.length&&(e.splice(n,0,[gt.DIFF_DELETE,a]),n++),s.length&&(e.splice(n,0,[gt.DIFF_INSERT,s]),n++),n++):n!==0&&e[n-1][0]===gt.DIFF_EQUAL?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,i=0,r=0,a="",s="";break}e[e.length-1][1]===""&&e.pop();var u=!1;for(n=1;n<e.length-1;)e[n-1][0]===gt.DIFF_EQUAL&&e[n+1][0]===gt.DIFF_EQUAL&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)===e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),u=!0):e[n][1].substring(0,e[n+1][1].length)===e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),u=!0)),n++;u&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,n){var r=0,i=0,a=0,s=0,c;for(c=0;c<e.length&&(e[c][0]!==gt.DIFF_INSERT&&(r+=e[c][1].length),e[c][0]!==gt.DIFF_DELETE&&(i+=e[c][1].length),!(r>n));c++)a=r,s=i;return e.length!==c&&e[c][0]===gt.DIFF_DELETE?s:s+(n-a)},t.prototype.diff_prettyHtml=function(e){for(var n=[],r=/&/g,i=/</g,a=/>/g,s=/\n/g,c=0;c<e.length;c++){var u=e[c][0],d=e[c][1],f=d.replace(r,"&amp;").replace(i,"&lt;").replace(a,"&gt;").replace(s,"&para;<br>");switch(u){case gt.DIFF_INSERT:n[c]='<ins style="background:#e6ffe6;">'+f+"</ins>";break;case gt.DIFF_DELETE:n[c]='<del style="background:#ffe6e6;">'+f+"</del>";break;case gt.DIFF_EQUAL:n[c]="<span>"+f+"</span>";break}}return n.join("")},t.prototype.diff_text1=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==gt.DIFF_INSERT&&(n[r]=e[r][1]);return n.join("")},t.prototype.diff_text2=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==gt.DIFF_DELETE&&(n[r]=e[r][1]);return n.join("")},t.prototype.diff_levenshtein=function(e){for(var n=0,r=0,i=0,a=0;a<e.length;a++){var s=e[a][0],c=e[a][1];switch(s){case gt.DIFF_INSERT:r+=c.length;break;case gt.DIFF_DELETE:i+=c.length;break;case gt.DIFF_EQUAL:n+=ci.max(r,i),r=0,i=0;break}}return n+=ci.max(r,i),n},t.prototype.diff_toDelta=function(e){for(var n=[],r=0;r<e.length;r++)switch(e[r][0]){case gt.DIFF_INSERT:n[r]="+"+encodeURI(e[r][1]);break;case gt.DIFF_DELETE:n[r]="-"+e[r][1].length;break;case gt.DIFF_EQUAL:n[r]="="+e[r][1].length;break}return n.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,n){for(var r=[],i=0,a=0,s=n.split(/\t/g),c=0;c<s.length;c++){var u=s[c].substring(1);switch(s[c].charAt(0)){case"+":try{r[i++]=[gt.DIFF_INSERT,decodeURI(u)]}catch(h){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var d=parseInt(u,10);if(isNaN(d)||d<0)throw new Error("Invalid number in diff_fromDelta: "+u);var f=e.substring(a,a+=d);s[c].charAt(0)==="="?r[i++]=[gt.DIFF_EQUAL,f]:r[i++]=[gt.DIFF_DELETE,f];break;default:if(s[c])throw new Error("Invalid diff operation in diff_fromDelta: "+s[c])}}if(a!==e.length)throw new Error("Delta length ("+a+") does not equal source text length ("+e.length+")");return r},t.prototype.diff_linesToChars=function(e,n){var r=[],i={};r[0]="";var a=this.diff_linesToCharsMunge_(e,r,i,4e4),s=this.diff_linesToCharsMunge_(n,r,i,65535);return{chars1:a,chars2:s,lineArray:r}},t.prototype.diff_charsToLines=function(e,n){for(var r=0;r<e.length;r++){for(var i=e[r][1],a=[],s=0;s<i.length;s++)a[s]=n[i.charCodeAt(s)];e[r][1]=a.join("")}},t.prototype.match_main=function(e,n,r){if(e==null||n==null||r==null)throw new Error("Null input. (match_main)");return r=ci.max(0,ci.min(r,e.length)),e===n?0:e.length?e.substring(r,r+n.length)===n?r:this.match_bitap_(e,n,r):-1},t.prototype.patch_make=function(e,n,r){var i,a;if(typeof e=="string"&&typeof n=="string"&&typeof r=="undefined")i=e,a=this.diff_main(i,n,!0),a.length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(e&&typeof e=="object"&&typeof n=="undefined"&&typeof r=="undefined")a=e,i=this.diff_text1(a);else if(typeof e=="string"&&n&&typeof n=="object"&&typeof r=="undefined")i=e,a=n;else if(typeof e=="string"&&typeof n=="string"&&r&&typeof r=="object")i=e,a=r;else throw new Error("Unknown call format to patch_make");if(a.length===0)return[];for(var s=[],c=new Ha,u=0,d=0,f=0,h=i,p=i,b=0;b<a.length;b++){var Z=a[b][0],E=a[b][1];switch(!u&&Z!==gt.DIFF_EQUAL&&(c.start1=d,c.start2=f),Z){case gt.DIFF_INSERT:c.diffs[u++]=a[b],c.length2+=E.length,p=p.substring(0,f)+E+p.substring(f);break;case gt.DIFF_DELETE:c.length1+=E.length,c.diffs[u++]=a[b],p=p.substring(0,f)+p.substring(f+E.length);break;case gt.DIFF_EQUAL:E.length<=2*this.patchMargin&&u&&a.length!==b+1?(c.diffs[u++]=a[b],c.length1+=E.length,c.length2+=E.length):E.length>=2*this.patchMargin&&u&&(this.patch_addContext_(c,h),s.push(c),c=new Ha,u=0,h=p,d=f);break}Z!==gt.DIFF_INSERT&&(d+=E.length),Z!==gt.DIFF_DELETE&&(f+=E.length)}return u&&(this.patch_addContext_(c,h),s.push(c)),s},t.prototype.patch_deepCopy=function(e){for(var n=[],r=0;r<e.length;r++){for(var i=e[r],a=new Ha,s=0;s<i.diffs.length;s++)a.diffs[s]=[i.diffs[s][0],i.diffs[s][1]];a.start1=i.start1,a.start2=i.start2,a.length1=i.length1,a.length2=i.length2,n[r]=a}return n},t.prototype.patch_apply=function(e,n){if(e.length===0)return[n,[]];e=this.patch_deepCopy(e);var r=this.patch_addPadding(e);n=r+n+r,this.patch_splitMax(e);for(var i=0,a=[],s=0;s<e.length;s++){var c=e[s].start2+i,u=this.diff_text1(e[s].diffs),d=void 0,f=-1;if(u.length>this.matchMaxBits?(d=this.match_main(n,u.substring(0,this.matchMaxBits),c),d!==-1&&(f=this.match_main(n,u.substring(u.length-this.matchMaxBits),c+u.length-this.matchMaxBits),(f===-1||d>=f)&&(d=-1))):d=this.match_main(n,u,c),d===-1)a[s]=!1,i-=e[s].length2-e[s].length1;else{a[s]=!0,i=d-c;var h=void 0;if(f===-1?h=n.substring(d,d+u.length):h=n.substring(d,f+this.matchMaxBits),u===h)n=n.substring(0,d)+this.diff_text2(e[s].diffs)+n.substring(d+u.length);else{var p=this.diff_main(u,h,!1);if(u.length>this.matchMaxBits&&this.diff_levenshtein(p)/u.length>this.patchDeleteThreshold)a[s]=!1;else{this.diff_cleanupSemanticLossless(p);for(var b=0,Z=0,E=0;E<e[s].diffs.length;E++){var K=e[s].diffs[E];K[0]!==gt.DIFF_EQUAL&&(Z=this.diff_xIndex(p,b)),K[0]===gt.DIFF_INSERT?n=n.substring(0,d+Z)+K[1]+n.substring(d+Z):K[0]===gt.DIFF_DELETE&&(n=n.substring(0,d+Z)+n.substring(d+this.diff_xIndex(p,b+K[1].length))),K[0]!==gt.DIFF_DELETE&&(b+=K[1].length)}}}}}return n=n.substring(r.length,n.length-r.length),[n,a]},t.prototype.patch_addPadding=function(e){for(var n=this.patchMargin,r="",i=1;i<=n;i++)r+=String.fromCharCode(i);for(var i=0;i<e.length;i++)e[i].start1+=n,e[i].start2+=n;var a=e[0],s=a.diffs;if(s.length===0||s[0][0]!==gt.DIFF_EQUAL)s.unshift([gt.DIFF_EQUAL,r]),a.start1-=n,a.start2-=n,a.length1+=n,a.length2+=n;else if(n>s[0][1].length){var c=n-s[0][1].length;s[0][1]=r.substring(s[0][1].length)+s[0][1],a.start1-=c,a.start2-=c,a.length1+=c,a.length2+=c}if(a=e[e.length-1],s=a.diffs,s.length===0||s[s.length-1][0]!==gt.DIFF_EQUAL)s.push([gt.DIFF_EQUAL,r]),a.length1+=n,a.length2+=n;else if(n>s[s.length-1][1].length){var c=n-s[s.length-1][1].length;s[s.length-1][1]+=r.substring(0,c),a.length1+=c,a.length2+=c}return r},t.prototype.patch_splitMax=function(e){for(var n=this.matchMaxBits,r=0;r<e.length;r++)if(!(e[r].length1<=n)){var i=e[r];e.splice(r--,1);for(var a=i.start1,s=i.start2,c="";i.diffs.length!==0;){var u=new Ha,d=!0;for(u.start1=a-c.length,u.start2=s-c.length,c!==""&&(u.length1=u.length2=c.length,u.diffs.push([gt.DIFF_EQUAL,c]));i.diffs.length!==0&&u.length1<n-this.patchMargin;){var f=i.diffs[0][0],h=i.diffs[0][1];f===gt.DIFF_INSERT?(u.length2+=h.length,s+=h.length,u.diffs.push(i.diffs.shift()),d=!1):f===gt.DIFF_DELETE&&u.diffs.length===1&&u.diffs[0][0]===gt.DIFF_EQUAL&&h.length>2*n?(u.length1+=h.length,a+=h.length,d=!1,u.diffs.push([f,h]),i.diffs.shift()):(h=h.substring(0,n-u.length1-this.patchMargin),u.length1+=h.length,a+=h.length,f===gt.DIFF_EQUAL?(u.length2+=h.length,s+=h.length):d=!1,u.diffs.push([f,h]),h===i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(h.length))}c=this.diff_text2(u.diffs),c=c.substring(c.length-this.patchMargin);var p=this.diff_text1(i.diffs).substring(0,this.patchMargin);p!==""&&(u.length1+=p.length,u.length2+=p.length,u.diffs.length!==0&&u.diffs[u.diffs.length-1][0]===gt.DIFF_EQUAL?u.diffs[u.diffs.length-1][1]+=p:u.diffs.push([gt.DIFF_EQUAL,p])),d||e.splice(++r,0,u)}}},t.prototype.patch_toText=function(e){for(var n=[],r=0;r<e.length;r++)n[r]=e[r];return n.join("")},t.prototype.patch_fromText=function(e){var n=[];if(!e)return n;for(var r=e.split(`
`),i=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<r.length;){var s=r[i].match(a);if(!s)throw new Error("Invalid patch string: "+r[i]);var c=new Ha;n.push(c),c.start1=parseInt(s[1],10),s[2]===""?(c.start1--,c.length1=1):s[2]==="0"?c.length1=0:(c.start1--,c.length1=parseInt(s[2],10)),c.start2=parseInt(s[3],10),s[4]===""?(c.start2--,c.length2=1):s[4]==="0"?c.length2=0:(c.start2--,c.length2=parseInt(s[4],10)),i++;for(var u=void 0,d=void 0,f=void 0;i<r.length;){u=r[i].charAt(0),f=r[i].substring(1);try{d=decodeURI(f)}catch(h){throw new Error("Illegal escape in patch_fromText: "+f)}if(u==="-")c.diffs.push([gt.DIFF_DELETE,d]);else if(u==="+")c.diffs.push([gt.DIFF_INSERT,d]);else if(u===" ")c.diffs.push([gt.DIFF_EQUAL,d]);else{if(u==="@")break;if(u!=="")throw new Error('Invalid patch mode "'+u+'" in: '+d)}i++}}return n},t.prototype.diff_compute_=function(e,n,r,i){var a;if(!e)return[[gt.DIFF_INSERT,n]];if(!n)return[[gt.DIFF_DELETE,e]];var s=e.length>n.length?e:n,c=e.length>n.length?n:e,u=s.indexOf(c);if(u!==-1)return a=[[gt.DIFF_INSERT,s.substring(0,u)],[gt.DIFF_EQUAL,c],[gt.DIFF_INSERT,s.substring(u+c.length)]],e.length>n.length&&(a[0][0]=gt.DIFF_DELETE,a[2][0]=gt.DIFF_DELETE),a;if(c.length===1)return[[gt.DIFF_DELETE,e],[gt.DIFF_INSERT,n]];var d=this.diff_halfMatch_(e,n);if(d){var f=d[0],h=d[1],p=d[2],b=d[3],Z=d[4],E=this.diff_main(f,p,r,i),K=this.diff_main(h,b,r,i);return E.concat([[gt.DIFF_EQUAL,Z]],K)}return r&&e.length>100&&n.length>100?this.diff_lineMode_(e,n,i):this.diff_bisect_(e,n,i)},t.prototype.diff_lineMode_=function(e,n,r){var i=this.diff_linesToChars(e,n);e=i.chars1,n=i.chars2;var a=i.lineArray,s=this.diff_main(e,n,!1,r);this.diff_charsToLines(s,a),this.diff_cleanupSemantic(s),s.push([gt.DIFF_EQUAL,""]);for(var c=0,u=0,d=0,f="",h="";c<s.length;){switch(s[c][0]){case gt.DIFF_INSERT:d++,h+=s[c][1];break;case gt.DIFF_DELETE:u++,f+=s[c][1];break;case gt.DIFF_EQUAL:if(u>=1&&d>=1){s.splice(c-u-d,u+d),c=c-u-d;for(var p=this.diff_main(f,h,!1,r),b=p.length-1;b>=0;b--)s.splice(c,0,p[b]);c=c+p.length}d=0,u=0,f="",h="";break}c++}return s.pop(),s},t.prototype.diff_bisect_=function(e,n,r){for(var i=e.length,a=n.length,s=Math.ceil((i+a)/2),c=s,u=2*s,d=new Array(u),f=new Array(u),h=0;h<u;h++)d[h]=-1,f[h]=-1;d[c+1]=0,f[c+1]=0;for(var p=i-a,b=p%2!=0,Z=0,E=0,K=0,me=0,re=0;re<s&&!(Date.now()>r);re++){for(var De=-re+Z;De<=re-E;De+=2){var Le=c+De,Ge=void 0;De===-re||De!==re&&d[Le-1]<d[Le+1]?Ge=d[Le+1]:Ge=d[Le-1]+1;for(var qe=Ge-De;Ge<i&&qe<a&&e.charAt(Ge)===n.charAt(qe);)Ge++,qe++;if(d[Le]=Ge,Ge>i)E+=2;else if(qe>a)Z+=2;else if(b){var it=c+p-De;if(it>=0&&it<u&&f[it]!==-1){var je=i-f[it];if(Ge>=je)return this.diff_bisectSplit_(e,n,Ge,qe,r)}}}for(var Lt=-re+K;Lt<=re-me;Lt+=2){var it=c+Lt,je=void 0;Lt===-re||Lt!==re&&f[it-1]<f[it+1]?je=f[it+1]:je=f[it-1]+1;for(var Xt=je-Lt;je<i&&Xt<a&&e.charAt(i-je-1)===n.charAt(a-Xt-1);)je++,Xt++;if(f[it]=je,je>i)me+=2;else if(Xt>a)K+=2;else if(!b){var Le=c+p-Lt;if(Le>=0&&Le<u&&d[Le]!==-1){var Ge=d[Le],qe=c+Ge-Le;if(je=i-je,Ge>=je)return this.diff_bisectSplit_(e,n,Ge,qe,r)}}}}return[[gt.DIFF_DELETE,e],[gt.DIFF_INSERT,n]]},t.prototype.diff_bisectSplit_=function(e,n,r,i,a){var s=e.substring(0,r),c=n.substring(0,i),u=e.substring(r),d=n.substring(i),f=this.diff_main(s,c,!1,a),h=this.diff_main(u,d,!1,a);return f.concat(h)},t.prototype.diff_linesToCharsMunge_=function(e,n,r,i){for(var a="",s=0,c=-1,u=n.length;c<e.length-1;){c=e.indexOf(`
`,s),c===-1&&(c=e.length-1);var d=e.substring(s,c+1);(r.hasOwnProperty?r.hasOwnProperty(d):r[d]!==void 0)?a+=String.fromCharCode(r[d]):(u===i&&(d=e.substring(s),c=e.length),a+=String.fromCharCode(u),r[d]=u,n[u++]=d),s=c+1}return a},t.prototype.diff_commonOverlap_=function(e,n){var r=e.length,i=n.length;if(r===0||i===0)return 0;r>i?e=e.substring(r-i):r<i&&(n=n.substring(0,r));var a=ci.min(r,i);if(e===n)return a;for(var s=0,c=1;;){var u=e.substring(a-c),d=n.indexOf(u);if(d===-1)return s;c+=d,(d===0||e.substring(a-c)===n.substring(0,c))&&(s=c,c++)}},t.prototype.diff_halfMatch_=function(e,n){if(this.diffTimeout<=0)return null;var r=e.length>n.length?e:n,i=e.length>n.length?n:e;if(r.length<4||i.length*2<r.length)return null;var a=this.diff_halfMatchI_(r,i,Math.ceil(r.length/4)),s=this.diff_halfMatchI_(r,i,Math.ceil(r.length/2)),c;if(!a&&!s)return null;s?a?c=a[4].length>s[4].length?a:s:c=s:c=a;var u,d,f,h,p=c[4];return e.length>n.length?(u=c[0],d=c[1],f=c[2],h=c[3]):(f=c[0],h=c[1],u=c[2],d=c[3]),[u,d,f,h,p]},t.prototype.diff_halfMatchI_=function(e,n,r){for(var i=e.substring(r,r+Math.floor(e.length/4)),a="",s,c,u,d,f=n.indexOf(i,0);f!==-1;){var h=this.diff_commonPrefix(e.substring(r),n.substring(f)),p=this.diff_commonSuffix(e.substring(0,r),n.substring(0,f));a.length<p+h&&(a=n.substring(f-p,f)+n.substring(f,f+h),s=e.substring(0,r-p),c=e.substring(r+h),u=n.substring(0,f-p),d=n.substring(f+h)),f=n.indexOf(i,f+1)}return a.length*2>=e.length?[s,c,u,d,a]:null},t.prototype.diff_cleanupSemanticScore_=function(e,n){if(!e||!n)return 6;var r=e.charAt(e.length-1),i=n.charAt(0),a=r.match(hs),s=i.match(hs),c=a&&r.match(gs),u=s&&i.match(gs),d=c&&r.match(vs),f=u&&i.match(vs),h=d&&e.match(Dl),p=f&&n.match(Rl);return h||p?5:d||f?4:a&&!c&&u?3:c||u?2:a||s?1:0},t.prototype.match_bitap_=function(e,n,r){if(n.length>this.matchMaxBits)throw new Error("Pattern too long for this browser");var i=this.match_alphabet_(n),a=this.matchThreshold,s=e.indexOf(n,r);s!==-1&&(a=ci.min(this.match_bitapScore_(0,s,n,r),a),s=e.lastIndexOf(n,r+n.length),s!==-1&&(a=ci.min(this.match_bitapScore_(0,s,n,r),a)));var c=1<<n.length-1;s=-1;for(var u,d,f=n.length+e.length,h,p=0;p<n.length;p++){for(u=0,d=f;u<d;)this.match_bitapScore_(p,r+d,n,r)<=a?u=d:f=d,d=Math.floor((f-u)/2+u);f=d;var b=ci.max(1,r-d+1),Z=ci.min(r+d,e.length)+n.length,E=Array(Z+2);E[Z+1]=(1<<p)-1;for(var K=Z;K>=b;K--){var me=i[e.charAt(K-1)];if(p===0?E[K]=(E[K+1]<<1|1)&me:E[K]=(E[K+1]<<1|1)&me|((h[K+1]|h[K])<<1|1)|h[K+1],E[K]&c){var re=this.match_bitapScore_(p,K-1,n,r);if(re<=a)if(a=re,s=K-1,s>r)b=ci.max(1,2*r-s);else break}}if(this.match_bitapScore_(p+1,r,n,r)>a)break;h=E}return s},t.prototype.match_bitapScore_=function(e,n,r,i){var a=e/r.length,s=Math.abs(i-n);return this.matchDistance?a+s/this.matchDistance:s?1:a},t.prototype.match_alphabet_=function(e){for(var n={},r=0;r<e.length;r++)n[e.charAt(r)]=0;for(var r=0;r<e.length;r++)n[e.charAt(r)]|=1<<e.length-r-1;return n},t.prototype.patch_addContext_=function(e,n){if(n.length!==0){if(e.start2==null)throw Error("patch not initialized");for(var r=n.substring(e.start2,e.start2+e.length1),i=0;n.indexOf(r)!==n.lastIndexOf(r)&&r.length<this.matchMaxBits-this.patchMargin-this.patchMargin;)i+=this.patchMargin,r=n.substring(e.start2-i,e.start2+e.length1+i);i+=this.patchMargin;var a=n.substring(e.start2-i,e.start2);a&&e.diffs.unshift([gt.DIFF_EQUAL,a]);var s=n.substring(e.start2+e.length1,e.start2+e.length1+i);s&&e.diffs.push([gt.DIFF_EQUAL,s]),e.start1-=a.length,e.start2-=a.length,e.length1+=a.length+s.length,e.length2+=a.length+s.length}},t}();function Fo(t,e){let n={};for(let a=0;a<e.length;a++){const s=e[a];n[s]?n[s].push(a):n[s]=[a]}let i=[{buffer1index:-1,buffer2index:-1,chain:null}];for(let a=0;a<t.length;a++){const s=t[a],c=n[s]||[];let u=0,d=i[0];for(let f=0;f<c.length;f++){const h=c[f];let p;for(p=u;p<i.length&&!(i[p].buffer2index<h&&(p===i.length-1||i[p+1].buffer2index>h));p++);if(p<i.length){const b={buffer1index:a,buffer2index:h,chain:i[p]};if(u===i.length?i.push(d):i[u]=d,u=p+1,d=b,u===i.length)break}}i[u]=d}return i[i.length-1]}o(Fo,"LCS");function Il(t,e){const n=Fo(t,e);let r=[],i=t.length,a=e.length,s={common:[]};function c(){s.common.length&&(s.common.reverse(),r.push(s),s={common:[]})}o(c,"processCommon");for(let u=n;u!==null;u=u.chain){let d={buffer1:[],buffer2:[]};for(;--i>u.buffer1index;)d.buffer1.push(t[i]);for(;--a>u.buffer2index;)d.buffer2.push(e[a]);(d.buffer1.length||d.buffer2.length)&&(c(),d.buffer1.reverse(),d.buffer2.reverse(),r.push(d)),i>=0&&s.common.push(t[i])}return c(),r.reverse(),r}o(Il,"diffComm");function ps(t,e){const n=Fo(t,e);let r=[],i=t.length,a=e.length;for(let s=n;s!==null;s=s.chain){const c=i-s.buffer1index-1,u=a-s.buffer2index-1;i=s.buffer1index,a=s.buffer2index,(c||u)&&r.push({buffer1:[i+1,c],buffer1Content:t.slice(i+1,i+1+c),buffer2:[a+1,u],buffer2Content:e.slice(a+1,a+1+u)})}return r.reverse(),r}o(ps,"diffIndices");function Kc(t,e){const n=Fo(t,e);let r=[],i=t.length,a=e.length;function s(c,u,d){let f=[];for(let h=0;h<d;h++)f.push(c[u+h]);return{offset:u,length:d,chunk:f}}o(s,"chunkDescription");for(let c=n;c!==null;c=c.chain){const u=i-c.buffer1index-1,d=a-c.buffer2index-1;i=c.buffer1index,a=c.buffer2index,(u||d)&&r.push({buffer1:s(t,c.buffer1index+1,u),buffer2:s(e,c.buffer2index+1,d)})}return r.reverse(),r}o(Kc,"diffPatch");function Ll(t,e,n){let r=[];function i(u,d){r.push({ab:d,oStart:u.buffer1[0],oLength:u.buffer1[1],abStart:u.buffer2[0],abLength:u.buffer2[1]})}o(i,"addHunk"),ps(e,t).forEach(u=>i(u,"a")),ps(e,n).forEach(u=>i(u,"b")),r.sort((u,d)=>u.oStart-d.oStart);let a=[],s=0;function c(u){u>s&&(a.push({stable:!0,buffer:"o",bufferStart:s,bufferLength:u-s,bufferContent:e.slice(s,u)}),s=u)}for(o(c,"advanceTo");r.length;){let u=r.shift(),d=u.oStart,f=u.oStart+u.oLength,h=[u];for(c(d);r.length;){const p=r[0],b=p.oStart;if(b>f)break;f=Math.max(f,b+p.oLength),h.push(r.shift())}if(h.length===1){if(u.abLength>0){const p=u.ab==="a"?t:n;a.push({stable:!0,buffer:u.ab,bufferStart:u.abStart,bufferLength:u.abLength,bufferContent:p.slice(u.abStart,u.abStart+u.abLength)})}}else{let p={a:[t.length,-1,e.length,-1],b:[n.length,-1,e.length,-1]};for(;h.length;){u=h.shift();const re=u.oStart,De=re+u.oLength,Le=u.abStart,Ge=Le+u.abLength;let qe=p[u.ab];qe[0]=Math.min(Le,qe[0]),qe[1]=Math.max(Ge,qe[1]),qe[2]=Math.min(re,qe[2]),qe[3]=Math.max(De,qe[3])}const b=p.a[0]+(d-p.a[2]),Z=p.a[1]+(f-p.a[3]),E=p.b[0]+(d-p.b[2]),K=p.b[1]+(f-p.b[3]);let me={stable:!1,aStart:b,aLength:Z-b,aContent:t.slice(b,Z),oStart:d,oLength:f-d,oContent:e.slice(d,f),bStart:E,bLength:K-E,bContent:n.slice(E,K)};a.push(me)}s=f}return c(e.length),a}o(Ll,"diff3MergeRegions");function No(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},r);const a=typeof t=="string",s=typeof e=="string",c=typeof n=="string";a&&(t=t.split(r.stringSeparator)),s&&(e=e.split(r.stringSeparator)),c&&(n=n.split(r.stringSeparator));let u=[];const d=Ll(t,e,n);let f=[];function h(){f.length&&u.push({ok:f}),f=[]}o(h,"flushOk");function p(b,Z){if(b.length!==Z.length)return!1;for(let E=0;E<b.length;E++)if(b[E]!==Z[E])return!1;return!0}return o(p,"isFalseConflict"),d.forEach(b=>{b.stable?f.push(...b.bufferContent):r.excludeFalseConflicts&&p(b.aContent,b.bContent)?f.push(...b.aContent):(h(),u.push({conflict:{a:b.aContent,aIndex:b.aStart,o:b.oContent,oIndex:b.oStart,b:b.bContent,bIndex:b.bStart}}))}),h(),u}o(No,"diff3Merge");function Gc(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/,label:{}},r);const a=No(t,e,n,r);let s=!1,c=[];return a.forEach(u=>{u.ok?c=c.concat(u.ok):u.conflict&&(s=!0,c.push(`<<<<<<<${r.label.a?` ${r.label.a}`:""}`),c=c.concat(u.conflict.a),c.push(`|||||||${r.label.o?` ${r.label.o}`:""}`),c=c.concat(u.conflict.o),c.push("======="),c=c.concat(u.conflict.b),c.push(`>>>>>>>${r.label.b?` ${r.label.b}`:""}`))}),{conflict:s,result:c}}o(Gc,"mergeDiff3");function kl(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},r);const a=No(t,e,n,r);let s=!1,c=[];for(let u=0;u<a.length;u++){const d=a[u];d.ok?c=c.concat(d.ok):(s=!0,c=c.concat([`
<<<<<<<<<
`],d.conflict.a,[`
=========
`],d.conflict.b,[`
>>>>>>>>>
`]))}return{conflict:s,result:c}}o(kl,"node_diff3_merge");function zc(t,e,n,r){r=Object.assign({excludeFalseConflicts:!1,stringSeparator:/\s+/},r);const a=No(t,e,n,r);let s=!1,c=[];for(let u=0;u<a.length;u++){const d=a[u];if(d.ok)c=c.concat(d.ok);else{const f=Il(d.conflict.a,d.conflict.b);for(let h=0;h<f.length;h++){let p=f[h];p.common?c=c.concat(p.common):(s=!0,c=c.concat([`
<<<<<<<<<
`],p.buffer1,[`
=========
`],p.buffer2,[`
>>>>>>>>>
`]))}}}return{conflict:s,result:c}}o(zc,"mergeDigIn");function Vc(t,e){let n=[],r=0;function i(a){for(;r<a;)n.push(t[r]),r++}o(i,"advanceTo");for(let a=0;a<e.length;a++){let s=e[a];i(s.buffer1.offset);for(let c=0;c<s.buffer2.chunk.length;c++)n.push(s.buffer2.chunk[c]);r+=s.buffer1.length}return i(t.length),n}o(Vc,"patch");function Jc(t){return t.map(e=>({buffer1:{offset:e.buffer1.offset,length:e.buffer1.length},buffer2:{chunk:e.buffer2.chunk}}))}o(Jc,"stripPatch");function jc(t){return t.map(e=>({buffer1:e.buffer2,buffer2:e.buffer1}))}o(jc,"invertPatch");const Oo=new Pl;Oo.diffTimeout=0;function ms(t,e,n){return be.get("experimental.useDiffMatchPatch")===!0?Oo.patch_toText(Oo.patch_make(e,n)):wl(t,e,n)}o(ms,"diffs_createPatch");function ys(t,e,n,r){const i=`diff --git a/${t} b/${t}`;switch(r){case"modify":return ms(t,e,n);case"add":{let a;!n.endsWith(`
`)&&!n.endsWith(`\r
`)?a=`
\\ No newline at end of file`:a="";const s=/\r?\n/g,c=n.split(s),u=n.match(s)||[],d=c.length,f=[];for(let h=0;h<d;h+=1)(h<c.length-1||h===c.length-1&&c[h]!=="")&&f.push("+"),f.push(c[h]),h<u.length&&f.push(u[h]);return n=f.join(""),`${i}
new file mode 100644
--- /dev/null
+++ b/${t}
@@ -0,0 +1,${d} @@
${n}${a}`}case"delete":{let a=0;return e=e.replace(/\r?\n/g,s=>(a++,`${s}-`)),`${i}
deleted file mode 100644
--- a/${t}
+++ /dev/null
@@ -1,${a} +0,0 @@
-${e}`}}}o(ys,"createPatch2");function ws(t,e,n){return ns(t,e,n)}o(ws,"diffs_applyPatch");function xl(t,e){const n=[];for(const r of Ba(t,e))n.push({...r,oldFileName:r.newFileName,oldHeader:r.newHeader,newFileName:r.oldFileName,newHeader:r.oldHeader,hunks:r.hunks.map(i=>({...i,oldLines:i.newLines,oldStart:i.newStart,newLines:i.oldLines,newStart:i.oldStart,lines:i.lines.map(a=>a[0]==="-"?`+${a.slice(1)}`:a[0]==="+"?`-${a.slice(1)}`:a)}))}),n.push(r);return n}o(xl,"reversePatch");function Ss(t,e,n,r){let i=`
`;const a=t.match(/(?:\r?\n)/g);if(a!==null&&a.length!==0){const d=a.filter(f=>f===`\r
`).length;i=d>a.length-d?`\r
`:`
`}const s=kl(t,e,n,{excludeFalseConflicts:!0,stringSeparator:/\r?\n/}),c=s.result;let u=s.conflict;for(let d=0;d<c.length;d+=1)c[d]===`
<<<<<<<<<
`?c[d]="<<<<<<< HEAD":c[d]===`
=========
`?c[d]="=======":c[d]===`
>>>>>>>>>
`&&(c[d]=`>>>>>>> ${r}`);return{conflicts:u,mergedContent:c.join(i)}}o(Ss,"diffs_merge");var Fl=Object.defineProperty,Nl=Object.getOwnPropertyDescriptor,Ol=o((t,e,n,r)=>{for(var i=r>1?void 0:r?Nl(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&Fl(e,n,i),i},"changeStore_decorateClass");const Ul=l.FileSystemError.FileNotFound().code,Cs=`===================================================================
`,$i=new TextDecoder,Bl=new TextEncoder;function Hl(t){return t&&"type"in t&&"uri"in t&&"uri"in t&&"fileType"in t&&"revision"in t&&"timestamp"in t}o(Hl,"isOperation");function ho(t,e,n){return{type:t.type,rootUri:e,uri:n!=null?n:t.uri}}o(ho,"toEvent");const Wa=o(class{constructor(t,e,n,r,i,a){this.providerService=t,this.storageService=e,this.fileStorageService=n,this.telemetryService=r,this.workspaceId=i,this._onDidChange=new l.EventEmitter,this.cache=new Map,this.lock=new tn,this.scopedStores=new Map,a===void 0&&(this.disposable=l.Disposable.from(this.providerService.onDidRefresh(()=>this.cache.clear())))}get onDidChange(){return this._onDidChange.event}dispose(){var t;(t=this.disposable)==null||t.dispose()}async exportDebugInfo(t){var e;async function n(r){const i=await l.workspace.openTextDocument({language:"json",content:`ChangeStore Operations for ${r.toString(!0)}

${this.toStorage(await this.getWorkingOperations(r))}`});return void l.window.showTextDocument(i)}if(o(n,"exportCore"),t===void 0)for(const r of(e=l.workspace.workspaceFolders)!=null?e:[])await n.call(this,r.uri);else return n.call(this,t)}async getWorkspacesWithChanges(){var t;const e=new Be("ChangeStore.getWorkspacesWithChanges()");try{const n=[];for(const r of(t=l.workspace.workspaceFolders)!=null?t:[])r.uri.scheme===k.scheme&&await this.hasChanges(r.uri)&&n.push(r.uri);return n.length>0?n:void 0}finally{e.stop()}}async acceptAll(t,e){const n=`ChangeStore.acceptAll(${t.toString()}, ${e==null?void 0:e.staged})`;j.log(n);const r=[];await this.lock.synchronizeWrite(_(t),async()=>{const i=await this.getWorkingOperations(t),a=[];let s=[];const c=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!i.some(u=>u.staged));for(const u of i){if(c&&!u.staged){s.push(u);continue}u.fileType===l.FileType.File&&await this.discardWorkingContent(t,u.uri);let d;if(u.type===D.Created&&u.fileType===l.FileType.Directory&&(i.some(f=>Q(f.uri,u.uri))||(d={type:D.Deleted,rootUri:t,uri:u.uri})),r.push(d!=null?d:ho(u,t)),u.type===D.Created){let f=u.uri;for(;;){const{parent:h}=this.findParent(f,i,p=>p.type===D.Created);if(h){a.push(h),f=h.uri;continue}break}}}s.length>0&&a.length>0&&(s=s.filter(u=>a.includes(u)?(r.push(ho(u,t)),!1):!0)),await this.saveWorkingOperations(t,s)},n),r.length!==0&&this._onDidChange.fire(r)}async discard(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.discard(${t.toString()})`;j.log(n);const r=[];await this.lock.synchronizeWrite(_(e),async()=>this.discardCore(e,t,r),n),r.length!==0&&this._onDidChange.fire(r)}async discardCore(t,e,n){j.debug(`ChangeStore.discardCore(${e.toString()})`);let r=await this.getWorkingOperations(t);if(r.length===0)return;const i=O(e),a=r.findIndex(u=>O(u.uri)===i);if(a===-1)return;const[s]=r.splice(a,1);let c;switch(s.type){case D.Created:c=D.Deleted;break;case D.Deleted:c=D.Created;break;default:c=s.type;break}if(n.push({type:c,rootUri:t,uri:e}),s.type===D.Created){let u=s.uri;for(;;){const{parent:d,parentIndex:f}=this.findNewParentWithOnlyChild(u,r);if(d){r.splice(f,1),n.push({type:D.Deleted,rootUri:t,uri:d.uri}),u=d.uri;continue}break}}else if(s.type===D.Deleted){let u=s.uri;const d=this.findDeletedParents(u,r);let f=[...r];d.forEach(({parent:h,parentIndex:p})=>{f[p]=void 0,n.push({type:D.Created,rootUri:t,uri:h.uri})}),r=f.filter(h=>h!==void 0)}await this.saveWorkingOperations(t,r),s.fileType===l.FileType.File&&await this.discardWorkingContent(t,e)}async discardAll(t,e){const n=this.getUriScope(t);if(n)return this.getScopedChangeStore(n).discardAll(t,e);const r=`ChangeStore.discardAll(${t.toString()}, ${e==null?void 0:e.staged})`;j.log(r);const i=[];await this.lock.synchronizeWrite(_(t),async()=>{const a=await this.getWorkingOperations(t),s=[];let c=[];const u=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!a.some(d=>d.staged));for(const d of a){if(u&&!d.staged){c.push(d);continue}d.fileType===l.FileType.File&&await this.discardWorkingContent(t,d.uri);let f;switch(d.type){case D.Created:f=D.Deleted;break;case D.Deleted:f=D.Created;break;default:f=d.type;break}if(i.push({type:f,rootUri:t,uri:d.uri}),d.type===D.Created){let h=d.uri;for(;;){const{parent:p}=this.findNewParentWithOnlyChild(h,a);if(p){s.push(p),h=p.uri;continue}break}}}c.length>0&&s.length>0&&(c=c.filter(d=>s.includes(d)?(i.push({type:D.Deleted,rootUri:t,uri:d.uri}),!1):!0)),await this.saveWorkingOperations(t,c)},r),i.length!==0&&this._onDidChange.fire(i)}async stage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.stage(${t.toString()})`;j.log(n);const r=[];await this.lock.synchronizeWrite(_(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);i!==void 0&&await this.stageCore(e,t,i,r,a)},n),r.length!==0&&this._onDidChange.fire(r)}async stageAll(t){const e=`ChangeStore.stageAll(${t.toString()})`;j.log(e);const n=[];await this.lock.synchronizeWrite(_(t),async()=>{const r=(await this.getWorkingOperations(t)).filter(i=>!i.staged);if(r.length!==0)for(const i of r){const{index:a}=await this.getWorkingOperation(i.uri,t);if(!await this.stageCore(t,i.uri,i,n,a))return}},e),n.length!==0&&this._onDidChange.fire(n)}async stageCore(t,e,n,r,i){if(n.conflicts){if(!n.conflicts.status.includes(D.Deleted)){const s=l.l10n.t("Yes");if(await l.window.showWarningMessage(l.l10n.t("Are you sure you want to stage {0} with merge conflicts?",J(e)),{modal:!0},s)!==s)return!1}const[,a]=n.conflicts.status;switch(a){case D.Changed:switch(n.type){case D.Created:return!1;case D.Changed:return await this.spliceOperation(e,i,{...n,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0;case D.Deleted:const s=l.l10n.t("Keep Their Version"),c=l.l10n.t("Delete File"),u=await l.window.showInformationMessage(l.l10n.t(`File '{0}' was deleted by us and modified by them.

What would you like to do?`,J(e)),{modal:!0},s,c);return u===s?(await this.discardCore(t,e,r),!0):u===c?(await this.spliceOperation(e,i,{...n,type:D.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0):!1}case D.Created:switch(n.type){case D.Changed:case D.Deleted:return!1;case D.Created:return await this.spliceOperation(e,i,{...n,type:D.Changed,conflicts:void 0,size:n.size,hash:n.hash,originalHash:n.originalHash,staged:!0,timestamp:Date.now()},r),!0}case D.Deleted:switch(n.type){case D.Created:case D.Changed:{const s=l.l10n.t("Keep Our Version"),c=l.l10n.t("Delete File"),u=await l.window.showInformationMessage(l.l10n.t(`File '{0}' was deleted by them and modified by us.

What would you like to do?`,J(e)),{modal:!0},s,c);return u===s?(await this.spliceOperation(e,i,{...n,type:D.Created,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0):u===c?(await this.discardCore(t,e,r),!0):!1}case D.Deleted:return await this.discardCore(t,e,r),!0}}}return await this.spliceOperation(e,i,{...n,staged:!0,conflicts:void 0,timestamp:Date.now()},r),!0}async unstage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.unstage(${t.toString()})`;j.log(n);const r=[];await this.lock.synchronizeWrite(_(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);i!==void 0&&await this.spliceOperation(t,a,{...i,staged:!1,timestamp:Date.now()},r)},n),r.length!==0&&this._onDidChange.fire(r)}async unstageAll(t){const e=`ChangeStore.unstageAll(${t.toString()})`;j.log(e);const n=[];await this.lock.synchronizeWrite(_(t),async()=>{const r=(await this.getWorkingOperations(t)).map(i=>({...i,staged:!1,timestamp:Date.now()}));r.length!==0&&(await this.saveWorkingOperations(t,r),n.push(...r.map(i=>ho(i,t))))},e),n.length!==0&&this._onDidChange.fire(n)}async hasChanges(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).hasChanges(t);const n=_(t),r=this.cache.get(n);return r!==void 0?r.length!==0:this.lock.synchronizeRead(n,async()=>(await this.getWorkingOperations(t)).length!==0,`ChangeStore.hasChanges(${t.toString()})`)}maybeHasChanges(t,e){const n=this.getUriScope(t);if(n)return this.getScopedChangeStore(n).maybeHasChanges(t,e);const r=_(t),i=this.cache.get(r);if(i===void 0)return;if(i.length===0)return!1;if(e===void 0)return!0;const a=O(e);return i.some(s=>O(s.uri)===a)}async hasMergeConflicts(t){return this.lock.synchronizeRead(_(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.conflicts!==void 0),`ChangeStore.hasMergeConflicts(${t.toString()})`)}async hasStagedChanges(t){return this.lock.synchronizeRead(_(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.staged&&e.conflicts===void 0),`ChangeStore.hasStagedChanges(${t.toString()})`)}async hasWorkingChanges(t){return this.lock.synchronizeRead(_(t),async()=>(await this.getWorkingOperations(t)).some(e=>!e.staged&&e.conflicts===void 0),`ChangeStore.hasWorkingChanges(${t.toString()})`)}async getChange(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).getChange(t);const n=this.providerService.getVirtualRootUri(t);if(n!==void 0)return this.lock.synchronizeRead(_(n),async()=>{const{operation:r}=await this.getWorkingOperation(t,n);return r},`ChangeStore.getChange(${t.toString()})`)}async getChanges(t,e){const n=this.getUriScope(t);return n?this.getScopedChangeStore(n).getChanges(t,e):this.lock.synchronizeRead(_(t),async()=>{let r=await this.getWorkingOperations(t);if((e==null?void 0:e.excludeConflicts)||(e==null?void 0:e.predicate)){const{excludeConflicts:i,predicate:a}=e;r=r.filter(s=>{var c;return(!i||s.conflicts===void 0)&&((c=a==null?void 0:a(s))!=null?c:!0)})}return r},`ChangeStore.getChanges(${t.toString()})`)}async getGroupedChanges(t,e){const n=this.getUriScope(t);return n?this.getScopedChangeStore(n).getGroupedChanges(t,e):this.lock.synchronizeRead(_(t),async()=>{var r,i;const a=await this.getWorkingOperations(t),s={conflicts:[],staged:[],working:[]};for(const c of a)!((i=(r=e==null?void 0:e.predicate)==null?void 0:r.call(e,c))!=null?i:!0)||(c.conflicts?s.conflicts.push(c):c.staged?s.staged.push(c):s.working.push(c));return s},`ChangeStore.getChangesByType(${t.toString()})`)}async getContent(t){const e=this.providerService.getVirtualRootUri(t);if(e===void 0)throw new Error(`Unable to find content for ${t.toString()}; Repository not found`);const n=_(e),r=this.cache.get(n);if((r==null?void 0:r.length)===0)throw new Error(`Unable to find content for ${t.toString()}`);return this.lock.synchronizeRead(n,async()=>{const i=$i.decode(await this.getWorkingContent(e,t));if(i!==void 0)return i;throw new Error(`Unable to find content for ${t.toString()}`)},`ChangeStore.getContent(${t.toString()}}`)}async getMergeConflicts(t,e){return this.lock.synchronizeRead(_(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,a;return r.conflicts!==void 0&&((a=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?a:!0)}),`ChangeStore.getMergeConflicts(${t.toString()})`)}async getStagedChanges(t,e){return this.lock.synchronizeRead(_(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,a;return r.staged&&r.conflicts===void 0&&((a=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?a:!0)}),`ChangeStore.getStagedChanges(${t.toString()})`)}async getWorkingChanges(t,e){return this.lock.synchronizeRead(_(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,a;return!r.staged&&r.conflicts===void 0&&((a=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?a:!0)}),`ChangeStore.getWorkingChanges(${t.toString()})`)}async applyChangeset(t,e,n,r){var i;let a;Hl(n)?a=n:r=r!=null?r:n,j.log(`ChangeStore.applyChangeset${t.toString()}`,e.workspaceId,e.uri,a==null?void 0:a.uri,r==null?void 0:r.save);const s=this.getScopedChangeStore(e.workspaceId),c=(i=e.patch)!=null?i:await s.createPatch(e.uri,a==null?void 0:a.uri);await this.applyPatchCore(t,c,{...r,getIncomingContent:async u=>{const d=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,u),e.workspaceId);return $i.decode(await l.workspace.fs.readFile(d))},merge:async(u,d,f)=>{try{const h=k.getProviderUri(u),p=$i.decode(await l.workspace.fs.readFile(h)),b=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,d),e.workspaceId),Z=$i.decode(await l.workspace.fs.readFile(b)),E=await this.providerService.getMetadata(b);return{...Ss(f,p,Z,E.HEAD.sha),baseUri:h,incomingUri:b}}catch(h){throw new Error(`Unable to apply patch to ${d}: ${String(h)}`)}}})}async applyPatch(t,e,n){if(j.log(`ChangeStore.applyPatch(${t.toString()})`,n==null?void 0:n.save),!e.startsWith("diff --"))throw new Error("Invalid patch");return this.applyPatchCore(t,e,n)}async applyPatchCore(t,e,n={}){const r=`ChangeStore.applyPatchCore(${t.toString()})`;j.debug(r,n==null?void 0:n.save);const i=new l.WorkspaceEdit,a=[],s=new Map;async function c(p){var b;const Z=_(p),E=l.workspace.textDocuments.find(K=>_(K.uri)===Z);return(b=E==null?void 0:E.getText())!=null?b:$i.decode(await l.workspace.fs.readFile(p))}o(c,"getContent");async function u(p){try{const b=await l.workspace.fs.stat(p);return Boolean(b)}catch{return!1}}o(u,"exists");async function d(p,b,Z){let E=ws("",Z,{fuzzFactor:0});if(E===!1){if(!n.getIncomingContent)throw new Error(`Unable to apply patch to ${b}`);E=await n.getIncomingContent(b)}i.createFile(p,{overwrite:!0}),i.replace(p,new l.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),E)}o(d,"applyCreate");async function f(p,b,Z,E){const K=await c(p);let me=ws(K,Z,{fuzzFactor:1});if(me===!1){if(n.merge===void 0)throw new Error(`Unable to apply patch to ${b}; Resulted in conflicts`);const re={title:l.l10n.t("Merge")},De={title:l.l10n.t("Skip File"),isCloseAffordance:!0};if(await l.window.showWarningMessage(l.l10n.t(`Unable to apply changes to '{0}'.

Do you want to retry by merging the files?`,b),{modal:!0},re,De)!==re)return;const Ge=await n.merge(p,b,K);me=Ge.mergedContent,Ge.conflicts&&s.set(_(p),{type:E,baseUri:Ge.baseUri,incomingUri:Ge.incomingUri})}i.replace(p,new l.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),me)}o(f,"applyModification");const h=(n==null?void 0:n.reverse)?xl(e,{}):Ba(e,{});for(const p of h)if(p.oldFileName==="/dev/null"){if(!p.newFileName)continue;const b=p.newFileName.startsWith("b/")?p.newFileName.substr(2):p.newFileName,Z=this.providerService.createRelativeVirtualUri(t,b);a.push(_(Z)),!await u(Z)?await d(Z,b,p):await f(Z,b,p,D.Created)}else if(p.newFileName==="/dev/null"){if(!p.oldFileName)continue;const b=p.oldFileName.startsWith("a/")?p.oldFileName.substr(2):p.oldFileName,Z=this.providerService.createRelativeVirtualUri(t,b);await u(Z)&&i.deleteFile(Z)}else if(p.oldFileName===p.newFileName){if(!p.newFileName)continue;const b=this.providerService.createRelativeVirtualUri(t,p.newFileName);a.push(_(b)),!await u(b)?await d(b,p.newFileName,p):await f(b,p.newFileName,p,D.Changed)}else throw new Error(`Unable to apply patch to ${p.oldFileName}; Renames aren't currently supported`);if(await l.workspace.applyEdit(i),n.save&&a.length)for(const p of a){const b=l.workspace.textDocuments.find(Z=>_(Z.uri)===p);await(b==null?void 0:b.save())}s.size&&setTimeout(async()=>{const p=[];await this.lock.synchronizeWrite(_(t),async()=>{const b=await this.getWorkingOperations(t);if(b.length===0)return;let Z=-1;for(const E of b){Z++;const K=s.get(_(E.uri));K!==void 0&&await this.spliceOperation(E.uri,Z,{...E,conflicts:{baseUri:K.baseUri,incomingUri:K.incomingUri,status:[E.type,K.type]},timestamp:Date.now()},p)}},r),p.length!==0&&this._onDidChange.fire(p)},0)}async createChangeset(t){j.log(`ChangeStore.createChangeset${t.toString()})`);const e=await this.createPatch(t);return e?{workspaceId:this.workspaceId,uri:t,patch:e}:void 0}async createPatch(t,e,n){if(j.log(`ChangeStore.createPatch${t.toString()})`,e),e===void 0){let a=await this.getWorkingOperations(t);if((n==null?void 0:n.staged)&&(a=a.filter(c=>c.staged)),a.length===0)return"";const s=[];for(const c of a){const u=await this.createPatchCore(t,c);s.push(u)}return s.join("")}const{operation:r}=await this.getWorkingOperation(e,t);if(r===void 0)throw new Error(`Unable to create patch for ${e.toString()}`);return(n==null?void 0:n.staged)&&r.staged?"":await this.createPatchCore(t,r)}async createPatchCore(t,e){if(e.fileType!==l.FileType.File)return"";const n=this.providerService.getRelativeFilePath(t,e.uri),r=`diff --git a/${n} b/${n}`;if(e.type===D.Created){let u=await this.getContent(e.uri);return ys(n,"",u,"add")}if(e.type===D.Deleted){let u=$i.decode(await l.workspace.fs.readFile(k.getProviderUri(e.uri)));return ys(n,u,"","delete")}const i=await this.getContent(e.uri),a=$i.decode(await l.workspace.fs.readFile(k.getProviderUri(e.uri))),s=ms(n,a,i),c=s.indexOf(Cs);return`${r}
${s.substr(c+Cs.length)}`}async keep(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return;const r=`ChangeStore.keep(${t.toString()})`;j.log(r,e);const i=[];await this.lock.synchronizeWrite(_(n),async()=>{const{operation:a,index:s}=await this.getWorkingOperation(t,n);if(a===void 0)return;if(e===void 0&&a.conflicts){const[,u]=a.conflicts.status;switch(u){case D.Changed:switch(a.type){case D.Changed:case D.Created:case D.Deleted:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},i);break}break;case D.Created:switch(a.type){case D.Changed:case D.Deleted:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},i);break;case D.Created:await this.spliceOperation(t,s,{...a,type:D.Changed,size:a.size,hash:a.hash,originalHash:a.originalHash,conflicts:void 0,timestamp:Date.now()},i);break}break;case D.Deleted:switch(a.type){case D.Deleted:await this.discardCore(n,t,i);break;case D.Changed:await this.spliceOperation(t,s,{...a,type:D.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);break;case D.Created:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},i);break}break}return}if(e===void 0)return;switch(e.type){case D.Changed:switch(a.type){case D.Deleted:await this.spliceOperation(t,s,{...a,type:D.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);return;case D.Created:break;case D.Changed:break}break;case D.Created:switch(a.type){case D.Changed:case D.Deleted:return;case D.Created:break}break;case D.Deleted:switch(a.type){case D.Deleted:return this.discardCore(n,t,i);case D.Changed:await this.spliceOperation(t,s,{...a,type:D.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);return;case D.Created:return}}const c=e!==void 0?await l.workspace.fs.readFile(e.providerUri):void 0;await this.spliceOperation(t,s,{...a,type:D.Changed,originalHash:c!==void 0?await Gt(c):a.originalHash,conflicts:void 0,timestamp:Date.now()},i)},r),i.length!==0&&this._onDidChange.fire(i)}async merge(t,e,n){const r=this.providerService.getVirtualWorkspaceUri(t);if(r===void 0)return;const i=`ChangeStore.merge(${t.toString()})`;j.log(i,e,n);const a=[];await this.lock.synchronizeWrite(_(r),async()=>{const{operation:s,index:c}=await this.getWorkingOperation(t,r);if(s===void 0)return;switch(e.type){case D.Changed:switch(s.type){case D.Deleted:await this.spliceOperation(t,c,{...s,type:D.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]},timestamp:Date.now()},a);return;case D.Created:break;case D.Changed:break}break;case D.Created:switch(s.type){case D.Deleted:case D.Changed:return;case D.Created:const b=await l.workspace.fs.readFile(e.providerUri);await this.spliceOperation(t,c,{...s,originalHash:b!==void 0?await Gt(b):s.originalHash,conflicts:{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]},type:D.Changed,timestamp:Date.now()},a);break}break;case D.Deleted:switch(s.type){case D.Deleted:return this.discardCore(r,t,a);case D.Changed:await this.spliceOperation(t,c,{...s,type:D.Created,originalHash:void 0,conflicts:{baseUri:void 0,incomingUri:e.providerUri,status:[s.type,e.type]},timestamp:Date.now()},a);return;case D.Created:return}}const u=await this.providerService.getMetadata(e.providerUri),d=await this.getWorkingContent(r,t),f=s.type===D.Created?new Uint8Array(0):await l.workspace.fs.readFile(n.providerUri),h=await l.workspace.fs.readFile(e.providerUri),p=Ss($i.decode(d),$i.decode(f),$i.decode(h),u.HEAD.sha);await this.writeFileCore(r,t,a,Bl.encode(p.mergedContent),h!=null?h:new Uint8Array(0),p.conflicts?{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]}:void 0)},i),a.length!==0&&this._onDidChange.fire(a)}async resolveDiffCommand(t,e,n,r){let i;const a=this.providerService.getVirtualRootUri(t);return a!==void 0&&({operation:i}=await this.getWorkingOperation(t,a)),(i==null?void 0:i.type)===D.Deleted?this.resolveOpenCommand(e):be.getAny("git.openDiffOnClick",void 0,!0)?((i==null?void 0:i.type)===D.Created&&(e=e.with({query:"~"})),{command:"vscode.diff",title:"Open Changes",arguments:[e,t,n,r]}):this.resolveOpenCommand(t)}resolveOpenCommand(t,e){return{command:"vscode.open",title:"Open File",arguments:[t,e]}}getScopedUri(t,e){const n=typeof e=="string"?e:e.workspaceId;return n===this.workspaceId?t:t.with({fragment:n})}getUriScope(t){return t.fragment||void 0}getScopedChangeStore(t){const e=typeof t=="string"?t:t.workspaceId;j.log(`ChangeStore.getScopedChangeStore(${e})`);let n=this.scopedStores.get(e);return n===void 0&&(n=e===this.workspaceId?new Wa.ScopedChangeStore(this,e,this.workspaceId):new Wa.ScopedChangeStore(new Wa(this.providerService,this.storageService.with(e),this.fileStorageService.with(e),this.telemetryService,this.workspaceId,e),e,this.workspaceId),this.scopedStores.set(e,n)),n}async stat(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).stat(t);const n=this.providerService.getVirtualRootUri(t);if(n===void 0)return;const r=_(n),i=this.cache.get(r);if((i==null?void 0:i.length)!==0)return this.lock.synchronizeRead(r,async()=>{var a;const{operation:s}=await this.getWorkingOperation(t,n);if(s!==void 0){if(s.type===D.Deleted)throw l.FileSystemError.FileNotFound(`The ${s.fileType===l.FileType.Directory?"folder":"file"} has been deleted.`);return{type:s.fileType,size:(a=s.size)!=null?a:0,ctime:0,mtime:s.timestamp}}},`ChangeStore.stat(${t.toString()}`)}async readFile(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).readFile(t);const n=new Be(`ChangeStore.readFile(${t.toString()})`);try{const r=this.providerService.getVirtualRootUri(t);if(r===void 0)return;const i=_(r),a=this.cache.get(i);return(a==null?void 0:a.length)===0?void 0:await this.lock.synchronizeRead(i,()=>{const s=this.cache.get(i);if((s==null?void 0:s.length)===0){n.log({message:": Not found; no operations"});return}return this.getWorkingContent(r,t)},n.context)}finally{n.stop()}}async createDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new Be(`ChangeStore.createDirectory(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(_(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e),s=await this.providerService.getMetadata(t);let c;i===void 0?c={type:D.Created,uri:t,fileType:l.FileType.Directory,revision:s.HEAD.sha,timestamp:Date.now(),size:0,hash:"",originalHash:void 0}:i.type===D.Deleted?c={...i,type:D.Changed,revision:s.HEAD.sha,timestamp:Date.now(),size:0,hash:""}:c={...i,timestamp:Date.now()},await this.spliceOperation(t,a,c,r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}async deleteDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new Be(`ChangeStore.deleteDirectory(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(_(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);if((i==null?void 0:i.type)===D.Created)return this.discardCore(e,t,r);const s=await this.providerService.getMetadata(t);await this.spliceOperation(t,a,{type:D.Deleted,uri:t,fileType:l.FileType.Directory,revision:s.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}async updateDirectoryEntries(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return e;const r=new Be(`ChangeStore.updateDirectoryEntries(${t.toString()})`,{},e.length);try{const i=_(n),a=this.cache.get(i);return(a==null?void 0:a.length)===0?e:await this.lock.synchronizeRead(i,async()=>{const{path:s}=$(n,t),c=await this.getWorkingOperations(n);for(const u of c)switch(u.type){case D.Changed:break;case D.Created:{if(Q(u.uri,s)){const d=this.providerService.getRelativeFilePath(t,u.uri);e.push([d,u.fileType])}break}case D.Deleted:{if(Q(u.uri,s)){const d=this.providerService.getRelativeFilePath(t,u.uri),f=e.findIndex(([h])=>h===d);f!==-1&&e.splice(f,1)}break}}return e},r.context)}finally{r.stop()}}async writeFile(t,e,n,r){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const a=new Be(`ChangeStore.writeFile(${t.toString()})`,{},e.length,r);try{const s=[];if(await this.lock.synchronizeWrite(_(i),async()=>this.writeFileCore(i,t,s,e,n,r),a.context),s.length===0)return;this._onDidChange.fire(s)}finally{a.stop()}}async writeFileCore(t,e,n,r,i,a){const s=new Be(`ChangeStore.writeFileCore(${e.toString()})`,{},r.length,a);try{const[{operation:c,index:u},d,f]=await Promise.all([this.getWorkingOperation(e,t),Gt(r),Gt(i)]);if(d===f&&(!c||(c==null?void 0:c.type)===D.Changed))return this.discardCore(t,e,n);if(d===(c==null?void 0:c.hash)&&f===(c==null?void 0:c.originalHash))return;const[{HEAD:h}]=await Promise.all([this.providerService.getMetadata(e),this.saveWorkingContent(t,e,r)]);await this.spliceOperation(e,u,c===void 0?{type:D.Changed,uri:e,fileType:l.FileType.File,revision:h.sha,timestamp:Date.now(),size:r.byteLength,hash:d,originalHash:f,conflicts:a,staged:!1}:{...c,revision:h.sha,timestamp:Date.now(),size:r.byteLength,hash:d,originalHash:f,conflicts:a,staged:!1},n)}finally{s.stop()}}async createFile(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return;const r=new Be(`ChangeStore.createFile(${t.toString()})`,{},e.length);try{const i=[];if(await this.lock.synchronizeWrite(_(n),async()=>{const[{operation:a,index:s},c,u]=await Promise.all([this.getWorkingOperation(t,n),Gt(e),this.providerService.getMetadata(t),this.saveWorkingContent(n,t,e)]);await this.spliceOperation(t,s,a===void 0?{type:D.Created,uri:t,fileType:l.FileType.File,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c,originalHash:c}:a.type===D.Deleted?{...a,type:D.Changed,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c}:{...a,type:D.Created,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c},i)},r.context),i.length===0)return;this._onDidChange.fire(i)}finally{r.stop()}}async deleteFile(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new Be(`ChangeStore.deleteFile(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(_(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);if((i==null?void 0:i.type)===D.Created)return this.discardCore(e,t,r);const[s]=await Promise.all([this.providerService.getMetadata(t),this.discardWorkingContent(e,t)]);await this.spliceOperation(t,a,{type:D.Deleted,uri:t,fileType:l.FileType.File,revision:s.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}findParent(t,e,n){const r=Ae(t),{operation:i,index:a}=this.findWorkingOperation(r,e);return i!==void 0&&n(i,e)?{parent:i,parentIndex:a}:{parent:void 0,parentIndex:-1}}findNewParentWithOnlyChild(t,e){const n=O(t);return this.findParent(t,e,(r,i)=>r.type===D.Created&&!i.some(a=>Q(a.uri,r.uri)&&O(a.uri)!==n))}findDeletedParents(t,e){const n=[];for(let r=0;r<e.length;r+=1){const i=e[r];i.type===D.Deleted&&X(t,i.uri)&&n.push({parent:i,parentIndex:r})}return n}async getWorkingOperation(t,e){return this.findWorkingOperation(t,await this.getWorkingOperations(e))}findWorkingOperation(t,e){if(e.length===0)return{operation:void 0,index:-1};const n=O(t);let r=-1;const i=e.find((a,s)=>O(a.uri)!==n?!1:(r=s,!0));return i===void 0?{operation:void 0,index:-1}:{operation:i,index:r}}async getWorkingOperations(t){const e=_(t);let n=this.cache.get(e);return n===void 0&&(n=this.fromStorage(await this.storageService.get(this.getOperationsStorageKey(e))),this.cache.set(e,n)),n}async saveWorkingOperations(t,e){j.debug(`ChangeStore.saveWorkingOperations(${t.toString()})`,e.length);const n=_(t);this.cache.set(n,e);try{await this.storageService.store(this.getOperationsStorageKey(n),this.toStorage(e))}catch(r){throw this.cache.delete(n),j.error(r,`Failed to save repository changes for ${n}`),r}}getOperationsStorageKey(t){return`operations/${t}`}async getWorkingContent(t,e){try{return await this.fileStorageService.get(this.getFileStorageKey(t,e))}catch(n){throw j.error(n),this.telemetryService.sendException(n),n}}async discardWorkingContent(t,e){j.debug(`ChangeStore.discardWorkingContent(${e.toString()})`);try{return await this.fileStorageService.delete(this.getFileStorageKey(t,e))}catch(n){if(n instanceof l.FileSystemError&&n.code===Ul)return;throw j.error(n),this.telemetryService.sendException(n),n}}async saveWorkingContent(t,e,n){j.debug(`ChangeStore.saveWorkingContent(${e.toString()})`,n.length);try{return await this.fileStorageService.store(this.getFileStorageKey(t,e),n)}catch(r){throw j.error(r),this.telemetryService.sendException(r),r}}getFileStorageKey(t,e){return`changestore/${x(e)}`}async spliceOperation(t,e,n,r){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const a=await this.getWorkingOperations(i);e!==-1?a.splice(e,1,n):a.push(n),await this.saveWorkingOperations(i,a),r.push(ho(n,i,t))}fromStorage(t){if(!t)return[];try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&L(r)?typeof r=="string"?l.Uri.parse(r):l.Uri.from(r):r);return Array.isArray(e)?e:e.operations}catch(e){throw j.error(e,"Failed to deserialize ChangeStore operations"),e}}toStorage(t){const e={schemaVersion:Wa.operationsStorageSchemaVersion,operations:t};return JSON.stringify(e)}},"_ChangeStore");let Uo=Wa;Uo.operationsStorageSchemaVersion=1,Uo.ScopedChangeStore=class{constructor(t,e,n){this.changeStore=t,this.scope=e,this.workspaceId=n}createPatch(t,e,n){return this.changeStore.createPatch(this.stripUriScope(t),this.stripUriScope(e),n)}discardAll(t,e){return this.changeStore.discardAll(this.stripUriScope(t),e)}getChange(t){return this.changeStore.getChange(this.stripUriScope(t))}getChanges(t,e){return this.changeStore.getChanges(this.stripUriScope(t),e)}async getGroupedChanges(t,e){return this.changeStore.getGroupedChanges(this.stripUriScope(t),e)}hasChanges(t){return this.changeStore.hasChanges(this.stripUriScope(t))}maybeHasChanges(t,e){return this.changeStore.maybeHasChanges(this.stripUriScope(t),this.stripUriScope(e))}async stat(t){const n=this.changeStore.getUriScope(t)!==this.workspaceId,r=await this.changeStore.stat(this.stripUriScope(t));return r!==void 0&&n&&(r.permissions=l.FilePermission.Readonly),r}readFile(t){return this.changeStore.readFile(this.stripUriScope(t))}resolveDiffCommand(t,e,n,r){return this.changeStore.resolveDiffCommand(this.changeStore.getScopedUri(t,this.scope),this.changeStore.getScopedUri(e,this.scope),n,r)}stripUriScope(t){return t===void 0||!t.fragment?t:t.with({fragment:""})}},Ol([Et()],Uo.prototype,"getWorkingOperations",1);function Wl(t){switch(t){case D.Changed:return l.l10n.t("Modified");case D.Created:return l.l10n.t("Added");case D.Deleted:return l.l10n.t("Deleted")}}o(Wl,"getStatusText");function $l(t){const[e,n]=t;switch(e){case D.Changed:switch(n){case D.Changed:case D.Created:return l.l10n.t("Modified by Both");case D.Deleted:return l.l10n.t("Deleted by Incoming")}case D.Created:switch(n){case D.Changed:case D.Created:return l.l10n.t("Added by Both");case D.Deleted:return l.l10n.t("Deleted by Incoming")}case D.Deleted:switch(n){case D.Changed:case D.Created:return l.l10n.t("Deleted by Current");case D.Deleted:return l.l10n.t("Deleted by Both")}}}o($l,"getConflictStatusText");class bs{constructor(e,n){this.providerService=e,this.gitIgnoreFiles=n,this._onDidChangeFileDecorations=new l.EventEmitter,this._decorations=new Map,this._submodules=new Set,this.disposable=l.Disposable.from(l.window.registerFileDecorationProvider(this),e.onDidChangeRepository(this.onRefresh,this),e.onDidRefresh(this.onRefresh,this),e.onDidChangeChangeStore(this.onUrisChanged,this),e.onDidChangeRepositories(this.onDidChangeRepositories,this))}get onDidChangeFileDecorations(){return this._onDidChangeFileDecorations.event}dispose(){this.disposable.dispose(),this._decorations.clear()}onRefresh(){this._decorations.clear(),setTimeout(()=>this._onDidChangeFileDecorations.fire(void 0),0)}onUrisChanged(e){let n;const r=e.map(({uri:i})=>(this._decorations.delete(_(i)),this.gitIgnoreFiles.isIgnoreFile(i)&&(n=i),i));n?(this.gitIgnoreFiles.getIgnoreFile(n,!0),setTimeout(()=>this._onDidChangeFileDecorations.fire(void 0),0)):setTimeout(()=>this._onDidChangeFileDecorations.fire(r),0)}async onDidChangeRepositories(e){for(const n of e.added){this.gitIgnoreFiles.getIgnoreFile(n.uri,!1);const r=await this.providerService.getSubmodules(n.uri);if(!!r)for(const[i,a]of r)this._submodules.add(i)}for(const n of e.removed)this._submodules.delete(_(n.uri))}async provideFileDecoration(e,n){if(e.scheme!==$n.scheme)return;await Ur(this.providerService,e);const r=_(e);let i=this._decorations.get(r);if(i!==void 0)return i!=null?i:void 0;const a=await this.gitIgnoreFiles.getIgnoreFile(e,!1);let s=!1;try{s=(await l.workspace.fs.stat(e)).type===l.FileType.Directory}catch(f){f instanceof Error&&f.message==="The folder has been deleted."&&(s=!0)}if(a==null?void 0:a.isArbitraryPathIgnored(e.path,s))return i={color:new l.ThemeColor("remoteHub.decorations.ignoredResourceForeground")},this._decorations.set(r,i),i;const c=await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(e));let u;c.length>0&&(u=c.find(f=>_(f.uri)===r));const d=await this.providerService.changeStoreGetChange(e);if(d===void 0){if(u!==void 0)switch(u.type){case D.Created:i={badge:"\u2193A",color:new l.ThemeColor("remoteHub.decorations.incomingAddedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Added)")};break;case D.Deleted:i={badge:"\u2193D",color:new l.ThemeColor("remoteHub.decorations.incomingDeletedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Deleted)")};break;case D.Changed:i={badge:"\u2193M",color:new l.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Modified)")};break;default:i={badge:"\u2193~",color:new l.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes")};break}else this._submodules.has(this.providerService.getRelativeFilePath(e))&&(i={badge:"S",color:new l.ThemeColor("remoteHub.decorations.submoduleForegroundColor"),tooltip:"Submodule"});return this._decorations.set(r,i!=null?i:null),i}if(d.conflicts)i={badge:"!",color:new l.ThemeColor("remoteHub.decorations.conflictForegroundColor"),tooltip:l.l10n.t("Merge Conflicts ({0})",$l(d.conflicts.status))};else if(u!==void 0)switch(u.type){case D.Created:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts (Added)")};break;case D.Deleted:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts (Deleted)")};break;case D.Changed:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts")};break;default:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts")}}else switch(d.type){case D.Created:i={badge:"A",color:new l.ThemeColor("remoteHub.decorations.addedForegroundColor"),tooltip:l.l10n.t("Added")};break;case D.Changed:i={badge:"M",color:new l.ThemeColor("remoteHub.decorations.modifiedForegroundColor"),tooltip:l.l10n.t("Modified")};break;case D.Deleted:i={badge:"D",color:new l.ThemeColor("remoteHub.decorations.deletedForegroundColor"),tooltip:l.l10n.t("Deleted")};break}return this._decorations.set(r,i!=null?i:null),i}}o(bs,"ScmDecorationProvider");var Yc=sr(919);function qc(t,e,n){if(!(e==null?void 0:e.length)&&!(n==null?void 0:n.length))return new Set(t);let r;if(e==null?void 0:e.length){const i=new Set([...e,...e.map(s=>`${s}/**`)]),a=micromatch(t,[...i],{dot:!0,nocase:!0});r=new Set(a)}if(n==null?void 0:n.length){const i=new Set([...n,...n.map(a=>`${a}/**`)]);if(r===void 0){const a=micromatch.not(t,[...i],{dot:!0,nocase:!0});r=new Set(a)}else micromatch(t,[...i],{dot:!0,nocase:!0}).forEach(r.delete,r)}return r}o(qc,"globFilter");function _s(t,e={}){if(!t)return Ms;if(typeof t=="string"||tc(t)){const n=Ho(t,e);if(n===Ki)return Ms;const r=o(function(i,a){return!!n(i,a)},"resultPattern");return n.allBasenames&&(r.allBasenames=n.allBasenames),n.allPaths&&(r.allPaths=n.allPaths),r}return rc(t,e)}o(_s,"parse");function Kl(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let r=0,i=t.length;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}o(Kl,"equals");function Bo(t){return!!t&&typeof t.then=="function"}o(Bo,"isThenable");function Qc(){return Object.create(null)}o(Qc,"getEmptyExpression");const go="**",Es="/",vo="[/\\\\]",po="[^/\\\\]",Xc=/\//g;function As(t,e){switch(t){case 0:return"";case 1:return`${po}*?`;default:return`(?:${vo}|${po}+${vo}${e?`|${vo}${po}+`:""})*?`}}o(As,"starsToRegExp");function Ds(t,e){if(!t)return[];const n=[];let r=!1,i=!1,a="";for(const s of t){switch(s){case e:if(!r&&!i){n.push(a),a="";continue}break;case"{":r=!0;break;case"}":r=!1;break;case"[":i=!0;break;case"]":i=!1;break}a+=s}return a&&n.push(a),n}o(Ds,"splitGlobAware");function Rs(t){if(!t)return"";let e="";const n=Ds(t,Es);if(n.every(r=>r===go))e=".*";else{let r=!1;n.forEach((i,a)=>{if(i===go){if(r)return;e+=As(2,a===n.length-1)}else{let s=!1,c="",u=!1,d="";for(const f of i){if(f!=="}"&&s){c+=f;continue}if(u&&(f!=="]"||!d)){let h;f==="-"?h=f:(f==="^"||f==="!")&&!d?h="^":f===Es?h="":h=kr(f),d+=h;continue}switch(f){case"{":s=!0;continue;case"[":u=!0;continue;case"}":{e+=`(?:${Ds(c,",").map(b=>Rs(b)).join("|")})`,s=!1,c="";break}case"]":{e+="["+d+"]",u=!1,d="";break}case"?":e+=po;continue;case"*":e+=As(1);continue;default:e+=kr(f)}}a<n.length-1&&(n[a+1]!==go||a+2<n.length)&&(e+=vo)}r=i===go})}return e}o(Rs,"parseRegExp");const Gl=/^\*\*\/\*\.[\w\.-]+$/,zl=/^\*\*\/([\w\.-]+)\/?$/,Vl=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,Jl=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,jl=/^\*\*((\/[\w\.-]+)+)\/?$/,Yl=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,Ts=new _n(1e4),Ms=o(function(){return!1},"FALSE"),Ki=o(function(){return null},"NULL");function Ho(t,e){if(!t)return Ki;let n;typeof t!="string"?n=t.pattern:n=t,n=n.trim();const r=`${n}_${!!e.trimForExclusions}`;let i=Ts.get(r);if(i)return Ps(i,t);let a;return Gl.test(n)?i=Ql(n.substr(4),n):(a=zl.exec(Wo(n,e)))?i=Xl(a[1],n):(e.trimForExclusions?Jl:Vl).test(n)?i=Zl(n,e):(a=jl.exec(Wo(n,e)))?i=Is(a[1].substr(1),n,!0):(a=Yl.exec(Wo(n,e)))?i=Is(a[1],n,!1):i=ec(n),Ts.set(r,i),Ps(i,t)}o(Ho,"parsePattern");function ql(t,e){if(!t||!e)return t;const n=e.length;if(n===0||t.length===0)return t;let r=0;for(;t.indexOf(e,r)===r;)r=r+n;return t.substring(r)}o(ql,"ltrim");function Ps(t,e){if(typeof e=="string")return t;const n=o(function(r,i){return X(r,e.base)?t(ql(r.substr(e.base.length),"/"),i):null},"wrappedPattern");return n.allBasenames=t.allBasenames,n.allPaths=t.allPaths,n.basenames=t.basenames,n.patterns=t.patterns,n}o(Ps,"wrapRelativePattern");function Wo(t,e){return e.trimForExclusions&&t.endsWith("/**")?t.substr(0,t.length-2):t}o(Wo,"trimForExclusions");function Ql(t,e){return function(n,r){return typeof n=="string"&&n.endsWith(t)?e:null}}o(Ql,"trivia1");function Xl(t,e){const n=`/${t}`,r=`\\${t}`,i=o(function(s,c){return typeof s!="string"?null:c?c===t?e:null:s===t||s.endsWith(n)||s.endsWith(r)?e:null},"parsedPattern"),a=[t];return i.basenames=a,i.patterns=[e],i.allBasenames=a,i}o(Xl,"trivia2");function Zl(t,e){const n=Ls(t.slice(1,-1).split(",").map(c=>Ho(c,e)).filter(c=>c!==Ki),t),r=n.length;if(!r)return Ki;if(r===1)return n[0];const i=o(function(c,u){for(let d=0,f=n.length;d<f;d++)if(n[d](c,u))return t;return null},"parsedPattern"),a=n.find(c=>!!c.allBasenames);a&&(i.allBasenames=a.allBasenames);const s=n.reduce((c,u)=>u.allPaths?c.concat(u.allPaths):c,[]);return s.length&&(i.allPaths=s),i}o(Zl,"trivia3");function Is(t,e,n){const r="/"+t;let i;return n?i=o(function(a,s){return typeof a=="string"&&a.endsWith(r)?e:null},"parsedPattern"):i=o(function(a,s){return null},"parsedPattern"),i.allPaths=[(n?"*/":"./")+t],i}o(Is,"trivia4and5");function ec(t){try{const e=new RegExp(`^${Rs(t)}$`);return function(n){return e.lastIndex=0,typeof n=="string"&&e.test(n)?t:null}}catch(e){return Ki}}o(ec,"toRegExp");function Zc(t,e,n){return!t||typeof e!="string"?!1:_s(t)(e,void 0,n)}o(Zc,"match");function tc(t){const e=t;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}o(tc,"isRelativePattern");function eu(t){return t.allBasenames||[]}o(eu,"getBasenameTerms");function tu(t){return t.allPaths||[]}o(tu,"getPathTerms");function nc(t){let e=-1,n=0,r=-1,i=!0,a=0;for(let s=t.length-1;s>=0;--s){const c=t.charCodeAt(s);if(c===47){if(!i){n=s+1;break}continue}r===-1&&(i=!1,r=s+1),c===46?e===-1?e=s:a!==1&&(a=1):e!==-1&&(a=-1)}return e===-1||r===-1||a===0||a===1&&e===r-1&&e===n+1?"":t.slice(e,r)}o(nc,"extname");function rc(t,e){const n=Ls(Object.getOwnPropertyNames(t).map(c=>ic(c,t[c],e)).filter(c=>c!==Ki)),r=n.length;if(!r)return Ki;if(!n.some(c=>!!c.requiresSiblings)){if(r===1)return n[0];const c=o(function(f,h){let p;for(let b=0,Z=n.length;b<Z;b++){const E=n[b](f,h);if(typeof E=="string")return E;Bo(E)&&(p||(p=[]),p.push(E))}return p?(async()=>{for(const b of p){const Z=await b;if(typeof Z=="string")return Z}return null})():null},"resultExpression2"),u=n.find(f=>!!f.allBasenames);u&&(c.allBasenames=u.allBasenames);const d=n.reduce((f,h)=>h.allPaths?f.concat(h.allPaths):f,[]);return d.length&&(c.allPaths=d),c}const i=o(function(c,u,d){let f,h;for(let p=0,b=n.length;p<b;p++){const Z=n[p];Z.requiresSiblings&&d&&(u||(u=J(c)),f||(f=u.substr(0,u.length-nc(c).length)));const E=Z(c,u,f,d);if(typeof E=="string")return E;Bo(E)&&(h||(h=[]),h.push(E))}return h?(async()=>{for(const p of h){const b=await p;if(typeof b=="string")return b}return null})():null},"resultExpression"),a=n.find(c=>!!c.allBasenames);a&&(i.allBasenames=a.allBasenames);const s=n.reduce((c,u)=>u.allPaths?c.concat(u.allPaths):c,[]);return s.length&&(i.allPaths=s),i}o(rc,"parsedExpression");function ic(t,e,n){if(e===!1)return Ki;const r=Ho(t,n);if(r===Ki)return Ki;if(typeof e=="boolean")return r;if(e){const i=e.when;if(typeof i=="string"){const a=o((s,c,u,d)=>{if(!d||!r(s,c))return null;const f=i.replace("$(basename)",()=>u),h=d(f);return Bo(h)?h.then(p=>p?t:null):h?t:null},"result");return a.requiresSiblings=!0,a}}return r}o(ic,"parseExpressionPattern");function Ls(t,e){const n=t.filter(c=>!!c.basenames);if(n.length<2)return t;const r=n.reduce((c,u)=>{const d=u.basenames;return d?c.concat(d):c},[]);let i;if(e){i=[];for(let c=0,u=r.length;c<u;c++)i.push(e)}else i=n.reduce((c,u)=>{const d=u.patterns;return d?c.concat(d):c},[]);const a=o(function(c,u){if(typeof c!="string")return null;if(!u){let f;for(f=c.length;f>0;f--){const h=c.charCodeAt(f-1);if(h===47||h===92)break}u=c.substr(f)}const d=r.indexOf(u);return d!==-1?i[d]:null},"aggregate");a.basenames=r,a.patterns=i,a.allBasenames=r;const s=t.filter(c=>!c.basenames);return s.push(a),s}o(Ls,"aggregateBasenameMatches");function nu(t,e){return Kl(t,e,(n,r)=>typeof n=="string"&&typeof r=="string"?n===r:typeof n!="string"&&typeof r!="string"?n.base===r.base&&n.pattern===r.pattern:!1)}o(nu,"patternsEquals");class ks{constructor(e,n,r){if(this.location=n,this.parent=r,n[n.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");n[n.length-1]!=="/"&&(n+="/"),this.isPathIgnored=this.parseIgnoreFile(e,this.location,this.parent)}updateContents(e){this.isPathIgnored=this.parseIgnoreFile(e,this.location,this.parent)}isPathIncludedInTraversal(e,n){if(e[0]!=="/"||e[e.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+e);return!this.isPathIgnored(e,n)}isArbitraryPathIgnored(e,n){if(e[0]!=="/"||e[e.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+e);const r=e.split("/").filter(s=>s);let i=!1,a="";for(let s=0;s<r.length;s++){const c=s===r.length-1,u=r[s];if(a=a+"/"+u,!this.isPathIncludedInTraversal(a,c?n:!0)){i=!0;break}}return i}gitignoreLinesToExpression(e,n,r){const i=e.map(s=>this.gitignoreLineToGlob(s,n)),a=Object.create(null);for(const s of i)a[s]=!0;return _s(a,{trimForExclusions:r})}parseIgnoreFile(e,n,r){const i=e.split(`
`).map(E=>E.trim()).filter(E=>E&&E[0]!=="#"),a=i.filter(E=>!E.endsWith("/")),s=a.filter(E=>!E.includes("!")),c=this.gitignoreLinesToExpression(s,n,!0),u=a.filter(E=>E.includes("!")).map(E=>E.replace(/!/g,"")),d=this.gitignoreLinesToExpression(u,n,!1),f=i.filter(E=>!E.includes("!")),h=this.gitignoreLinesToExpression(f,n,!0),p=i.filter(E=>E.includes("!")).map(E=>E.replace(/!/g,"")),b=this.gitignoreLinesToExpression(p,n,!1);return o((E,K)=>{if(!E.startsWith(n))return!1;if(K&&h(E)&&!b(E))return!0;const me=c(E),re=d(E);return me&&!re?!0:r?r.isPathIgnored(E,K):!1},"isPathIgnored")}gitignoreLineToGlob(e,n){const r=e.indexOf("/");return r===-1||r===e.length-1?e="**/"+e:(r===0?n.slice(-1)==="/"&&(e=e.slice(1)):n.slice(-1)!=="/"&&(e="/"+e),e=n+e),e}}o(ks,"IgnoreFile");const xs=new TextDecoder;class Fs{constructor(e){this.providerService=e,this._gitIgnoreFiles=new Map}isIgnoreFile(e){return this.getIgnoreFileUri(e).toString()===e.toString()}async getIgnoreFile(e,n){const r=this.providerService.getVirtualRootUri(e),i=r.toString(),a=this._gitIgnoreFiles.get(i);if(a&&!n)return a;const s=this.doProcessIgnoreFile(r,a);return this._gitIgnoreFiles.set(i,s),s}getIgnoreFileUri(e){const n=this.providerService.getVirtualRootUri(e);return this.providerService.createRelativeUri(n,".gitignore")}async doProcessIgnoreFile(e,n){const r=this.providerService.createRelativeUri(e,".gitignore");try{if((await l.workspace.fs.stat(r)).type!==l.FileType.File)return;const a=await l.workspace.fs.readFile(r);if(n!==void 0){const s=await n;if(s)return s.updateContents(xs.decode(a)),s}return new ks(xs.decode(a),`${e.path}/`)}catch(i){}}}o(Fs,"IgnoreFileService");const Ns=o(t=>{t=1831565813+(t|=0)|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296},"e");class Os{constructor(e){this.dictionaries=void 0,this.length=void 0,this.separator=void 0,this.style=void 0,this.seed=void 0;const{length:n,separator:r,dictionaries:i,style:a,seed:s}=e;this.dictionaries=i,this.separator=r,this.length=n,this.style=a,this.seed=s}generate(){if(!this.dictionaries)throw new Error('Cannot find any dictionary. Please provide at least one, or leave the "dictionary" field empty in the config object');if(this.length<=0)throw new Error("Invalid length provided");if(this.length>this.dictionaries.length)throw new Error(`The length cannot be bigger than the number of dictionaries.
Length provided: ${this.length}. Number of dictionaries provided: ${this.dictionaries.length}`);let e=this.seed;return this.dictionaries.slice(0,this.length).reduce((n,r)=>{let i;e?(i=(s=>{if(typeof s=="string"){const c=s.split("").map(d=>d.charCodeAt(0)).reduce((d,f)=>d+f,1),u=Math.floor(Number(c));return Ns(u)}return Ns(s)})(e),e=4294967296*i):i=Math.random();let a=r[Math.floor(i*r.length)]||"";if(this.style==="lowerCase")a=a.toLowerCase();else if(this.style==="capital"){const[s,...c]=a.split("");a=s.toUpperCase()+c.join("")}else this.style==="upperCase"&&(a=a.toUpperCase());return n?`${n}${this.separator}${a}`:`${a}`},"")}}o(Os,"a");const Us={separator:"_",dictionaries:[]},ac=o(t=>{const e=[...t&&t.dictionaries||Us.dictionaries],n={...Us,...t,length:t&&t.length||e.length,dictionaries:e};if(!t||!t.dictionaries||!t.dictionaries.length)throw new Error('A "dictionaries" array must be provided. This is a breaking change introduced starting from Unique Name Generator v4. Read more about the breaking change here: https://github.com/andreasonny83/unique-names-generator#migration-guide');return new Os(n).generate()},"n");var oc=["able","above","absent","absolute","abstract","abundant","academic","acceptable","accepted","accessible","accurate","accused","active","actual","acute","added","additional","adequate","adjacent","administrative","adorable","advanced","adverse","advisory","aesthetic","afraid","aggregate","aggressive","agreeable","agreed","agricultural","alert","alive","alleged","allied","alone","alright","alternative","amateur","amazing","ambitious","amused","ancient","angry","annoyed","annual","anonymous","anxious","appalling","apparent","applicable","appropriate","arbitrary","architectural","armed","arrogant","artificial","artistic","ashamed","asleep","assistant","associated","atomic","attractive","automatic","autonomous","available","average","awake","aware","awful","awkward","back","bad","balanced","bare","basic","beautiful","beneficial","better","bewildered","big","binding","biological","bitter","bizarre","blank","blonde","blushing","boiling","bold","bored","boring","bottom","brainy","brave","breakable","breezy","brief","bright","brilliant","broad","broken","bumpy","burning","busy","calm","capable","careful","casual","causal","cautious","central","certain","changing","characteristic","charming","cheap","cheerful","chemical","chief","chilly","chosen","chronic","chubby","circular","civic","civil","classic","classical","clean","clear","clever","clinical","close","closed","cloudy","clumsy","coastal","cognitive","coherent","cold","collective","colorful","colossal","coloured","colourful","combined","comfortable","commercial","common","compact","comparable","comparative","compatible","competent","competitive","complete","complex","complicated","comprehensive","compulsory","conceptual","concerned","concrete","condemned","confident","confidential","confused","conscious","conservation","considerable","consistent","constant","constitutional","contemporary","content","continental","continued","continuing","continuous","controlled","controversial","convenient","conventional","convinced","convincing","cooing","cool","cooperative","corporate","correct","corresponding","costly","courageous","creative","creepy","criminal","critical","crooked","crowded","crucial","crude","cruel","cuddly","cultural","curious","curly","current","curved","cute","daily","damaged","damp","dangerous","dark","dead","deafening","dear","decent","decisive","deep","defeated","defensive","defiant","definite","deliberate","delicate","delicious","delighted","delightful","democratic","dependent","depressed","desirable","desperate","detailed","determined","developed","developing","devoted","different","difficult","digital","diplomatic","direct","dirty","disappointed","disastrous","disciplinary","disgusted","distant","distinct","distinctive","distinguished","disturbed","disturbing","diverse","divine","dizzy","domestic","dominant","double","doubtful","drab","dramatic","dreadful","driving","dry","dual","due","dull","dusty","dutch","dying","dynamic","eager","early","eastern","easy","economic","educational","eerie","effective","efficient","elaborate","elated","elderly","eldest","electoral","electric","electrical","electronic","elegant","eligible","embarrassed","embarrassing","emotional","empirical","empty","enchanting","encouraging","endless","energetic","enormous","enthusiastic","entire","entitled","envious","environmental","equal","equivalent","essential","established","estimated","ethical","eventual","everyday","evident","evil","evolutionary","exact","excellent","exceptional","excess","excessive","excited","exciting","exclusive","existing","exotic","expected","expensive","experienced","experimental","explicit","extended","extensive","external","extra","extraordinary","extreme","exuberant","faint","fair","faithful","familiar","famous","fancy","fantastic","far","fascinating","fashionable","fast","fatal","favourable","favourite","federal","fellow","few","fierce","final","financial","fine","firm","fiscal","fit","fixed","flaky","flat","flexible","fluffy","fluttering","flying","following","fond","foolish","foreign","formal","formidable","forthcoming","fortunate","forward","fragile","frail","frantic","free","frequent","fresh","friendly","frightened","front","frozen","full","fun","functional","fundamental","funny","furious","future","fuzzy","gastric","general","generous","genetic","gentle","genuine","geographical","giant","gigantic","given","glad","glamorous","gleaming","global","glorious","golden","good","gorgeous","gothic","governing","graceful","gradual","grand","grateful","greasy","great","grieving","grim","gross","grotesque","growing","grubby","grumpy","guilty","handsome","happy","hard","harsh","head","healthy","heavy","helpful","helpless","hidden","high","hilarious","hissing","historic","historical","hollow","holy","homely","hon","honest","horizontal","horrible","hostile","hot","huge","human","hungry","hurt","hushed","husky","icy","ideal","identical","ideological","ill","illegal","imaginative","immediate","immense","implicit","important","impossible","impressed","impressive","improved","inadequate","inc","inclined","increased","increasing","incredible","independent","indirect","individual","industrial","inevitable","influential","informal","inherent","initial","injured","inland","inner","innocent","innovative","inquisitive","instant","institutional","insufficient","intact","integral","integrated","intellectual","intelligent","intense","intensive","interested","interesting","interim","interior","intermediate","internal","international","invisible","involved","irrelevant","isolated","itchy","jealous","jittery","joint","jolly","joyous","judicial","juicy","junior","just","keen","key","kind","known","labour","large","late","latin","lazy","leading","left","legal","legislative","legitimate","lengthy","lesser","level","lexical","liable","light","like","likely","limited","linear","linguistic","liquid","literary","little","live","lively","living","local","logical","lonely","long","loose","lost","loud","lovely","low","loyal","ltd","lucky","mad","magic","magnetic","magnificent","main","major","mammoth","managerial","managing","manual","many","marginal","marine","marked","married","marvellous","mass","massive","mathematical","mature","maximum","mean","meaningful","mechanical","medical","medieval","melodic","melted","mental","mere","metropolitan","mid","middle","mighty","mild","military","miniature","minimal","minimum","ministerial","minor","miserable","misleading","missing","misty","mixed","moaning","mobile","moderate","modern","modest","molecular","monetary","monthly","moral","motionless","muddy","multiple","mushy","musical","mutual","mysterious","naked","narrow","nasty","national","natural","naughty","naval","near","nearby","neat","necessary","negative","neighbouring","nervous","net","neutral","new","nice","noble","noisy","normal","northern","nosy","notable","novel","nuclear","numerous","nursing","nutritious","nutty","obedient","objective","obliged","obnoxious","obvious","occasional","occupational","odd","official","ok","okay","old","only","open","operational","opposite","optimistic","ordinary","organic","organisational","original","orthodox","other","outdoor","outer","outrageous","outside","outstanding","overall","overseas","overwhelming","painful","pale","panicky","parallel","parental","parliamentary","partial","particular","passing","passive","past","patient","payable","peaceful","peculiar","perfect","permanent","persistent","personal","petite","philosophical","physical","plain","planned","plastic","pleasant","pleased","poised","polite","poor","popular","positive","possible","potential","powerful","practical","precious","precise","preferred","pregnant","preliminary","premier","prepared","present","presidential","pretty","previous","prickly","primary","prime","principal","printed","prior","private","probable","productive","professional","profitable","profound","progressive","prominent","promising","proper","proposed","prospective","protective","protestant","proud","provincial","psychiatric","psychological","public","puny","pure","purring","puzzled","quaint","qualified","quarrelsome","querulous","quick","quickest","quiet","quintessential","quixotic","racial","radical","rainy","random","rapid","rare","raspy","rational","ratty","raw","ready","real","realistic","rear","reasonable","recent","reduced","redundant","regional","registered","regular","regulatory","related","relative","relaxed","relevant","reliable","relieved","religious","reluctant","remaining","remarkable","remote","renewed","representative","repulsive","required","resident","residential","resonant","respectable","respective","responsible","resulting","retail","retired","revolutionary","rich","ridiculous","right","rigid","ripe","rising","rival","roasted","robust","rolling","romantic","rotten","rough","round","royal","rubber","rude","ruling","running","rural","sacred","sad","safe","salty","satisfactory","satisfied","scared","scary","scattered","scientific","scornful","scrawny","screeching","secondary","secret","secure","select","selected","selective","selfish","semantic","senior","sensible","sensitive","separate","serious","severe","shaggy","shaky","shallow","shared","sharp","sheer","shiny","shivering","shocked","short","shrill","shy","sick","significant","silent","silky","silly","similar","simple","single","skilled","skinny","sleepy","slight","slim","slimy","slippery","slow","small","smart","smiling","smoggy","smooth","social","soft","solar","sole","solid","sophisticated","sore","sorry","sound","sour","southern","spare","sparkling","spatial","special","specific","specified","spectacular","spicy","spiritual","splendid","spontaneous","sporting","spotless","spotty","square","squealing","stable","stale","standard","static","statistical","statutory","steady","steep","sticky","stiff","still","stingy","stormy","straight","straightforward","strange","strategic","strict","striking","striped","strong","structural","stuck","subjective","subsequent","substantial","subtle","successful","successive","sudden","sufficient","suitable","sunny","super","superb","superior","supporting","supposed","supreme","sure","surprised","surprising","surrounding","surviving","suspicious","sweet","swift","symbolic","sympathetic","systematic","tall","tame","tart","tasteless","tasty","technical","technological","teenage","temporary","tender","tense","terrible","territorial","testy","then","theoretical","thick","thin","thorough","thoughtful","thoughtless","thundering","tight","tiny","tired","top","total","tough","toxic","traditional","tragic","tremendous","tricky","tropical","troubled","typical","ugliest","ugly","ultimate","unable","unacceptable","unaware","uncertain","unchanged","uncomfortable","unconscious","underground","underlying","unemployed","uneven","unexpected","unfair","unfortunate","unhappy","uniform","uninterested","unique","united","universal","unknown","unlikely","unnecessary","unpleasant","unsightly","unusual","unwilling","upper","upset","uptight","urban","urgent","used","useful","useless","usual","vague","valid","valuable","variable","varied","various","varying","vast","verbal","vertical","very","vicarious","vicious","victorious","violent","visible","visiting","visual","vital","vitreous","vivacious","vivid","vocal","vocational","voiceless","voluminous","voluntary","vulnerable","wandering","warm","wasteful","watery","weak","wealthy","weary","wee","weekly","weird","welcome","well","western","wet","whispering","whole","wicked","wide","widespread","wild","wilful","willing","willowy","wily","wise","wispy","wittering","witty","wonderful","wooden","working","worldwide","worried","worrying","worthwhile","worthy","written","wrong","xenacious","xenial","xenogeneic","xeric","xerothermic","yabbering","yammering","yappiest","yappy","yawning","yearling","yearning","yeasty","yelling","yelping","yielding","yodelling","young","youngest","youthful","ytterbic","yucky","yummy","zany","zealous","zeroth","zestful","zesty","zippy","zonal","zoophagous","zygomorphic","zygotic"],sc=["aardvark","aardwolf","albatross","alligator","alpaca","amphibian","anaconda","angelfish","anglerfish","ant","anteater","antelope","antlion","ape","aphid","armadillo","asp","baboon","badger","bandicoot","barnacle","barracuda","basilisk","bass","bat","bear","beaver","bedbug","bee","beetle","bird","bison","blackbird","boa","boar","bobcat","bobolink","bonobo","bovid","bug","butterfly","buzzard","camel","canid","canidae","capybara","cardinal","caribou","carp","cat","caterpillar","catfish","catshark","cattle","centipede","cephalopod","chameleon","cheetah","chickadee","chicken","chimpanzee","chinchilla","chipmunk","cicada","clam","clownfish","cobra","cockroach","cod","condor","constrictor","coral","cougar","cow","coyote","crab","crane","crawdad","crayfish","cricket","crocodile","crow","cuckoo","damselfly","deer","dingo","dinosaur","dog","dolphin","donkey","dormouse","dove","dragon","dragonfly","duck","eagle","earthworm","earwig","echidna","eel","egret","elephant","elk","emu","ermine","falcon","felidae","ferret","finch","firefly","fish","flamingo","flea","fly","flyingfish","fowl","fox","frog","galliform","gamefowl","gayal","gazelle","gecko","gerbil","gibbon","giraffe","goat","goldfish","goose","gopher","gorilla","grasshopper","grouse","guan","guanaco","guineafowl","gull","guppy","haddock","halibut","hamster","hare","harrier","hawk","hedgehog","heron","herring","hippopotamus","hookworm","hornet","horse","hoverfly","hummingbird","hyena","iguana","impala","jackal","jaguar","jay","jellyfish","junglefowl","kangaroo","kingfisher","kite","kiwi","koala","koi","krill","ladybug","lamprey","landfowl","lark","leech","lemming","lemur","leopard","leopon","limpet","lion","lizard","llama","lobster","locust","loon","louse","lungfish","lynx","macaw","mackerel","magpie","mammal","manatee","mandrill","marlin","marmoset","marmot","marsupial","marten","mastodon","meadowlark","meerkat","mink","minnow","mite","mockingbird","mole","mollusk","mongoose","monkey","moose","mosquito","moth","mouse","mule","muskox","narwhal","newt","nightingale","ocelot","octopus","opossum","orangutan","orca","ostrich","otter","owl","ox","panda","panther","parakeet","parrot","parrotfish","partridge","peacock","peafowl","pelican","penguin","perch","pheasant","pig","pigeon","pike","pinniped","piranha","planarian","platypus","pony","porcupine","porpoise","possum","prawn","primate","ptarmigan","puffin","puma","python","quail","quelea","quokka","rabbit","raccoon","rat","rattlesnake","raven","reindeer","reptile","rhinoceros","roadrunner","rodent","rook","rooster","roundworm","sailfish","salamander","salmon","sawfish","scallop","scorpion","seahorse","shark","sheep","shrew","shrimp","silkworm","silverfish","skink","skunk","sloth","slug","smelt","snail","snake","snipe","sole","sparrow","spider","spoonbill","squid","squirrel","starfish","stingray","stoat","stork","sturgeon","swallow","swan","swift","swordfish","swordtail","tahr","takin","tapir","tarantula","tarsier","termite","tern","thrush","tick","tiger","tiglon","toad","tortoise","toucan","trout","tuna","turkey","turtle","tyrannosaurus","unicorn","urial","vicuna","viper","vole","vulture","wallaby","walrus","warbler","wasp","weasel","whale","whippet","whitefish","wildcat","wildebeest","wildfowl","wolf","wolverine","wombat","woodpecker","worm","wren","xerinae","yak","zebra"],lc=["amaranth","amber","amethyst","apricot","aqua","aquamarine","azure","beige","black","blue","blush","bronze","brown","chocolate","coffee","copper","coral","crimson","cyan","emerald","fuchsia","gold","gray","green","harlequin","indigo","ivory","jade","lavender","lime","magenta","maroon","moccasin","olive","orange","peach","pink","plum","purple","red","rose","salmon","sapphire","scarlet","silver","tan","teal","tomato","turquoise","violet","white","yellow"],ru=null,iu=null,au=null;class Bs{static generate(e={}){let n=e.min||1,r=e.max||999;if(e.length){const i=Math.pow(10,e.length);return n=i/10,r=i-1,[`${Math.floor(Math.random()*(r-n))+n}`]}return[`${Math.floor(Math.random()*(r-n))+n}`]}}o(Bs,"y");class Qi{constructor(e,n){this.command=e,this.show=n}get label(){return this.command.title}get identifier(){return this.command.command}async execute(){var e;return void await l.commands.executeCommand(this.command.command,...(e=this.command.arguments)!=null?e:[])}get alwaysShow(){var e;return(e=this.show)!=null?e:!1}get commandArguments(){return this.command.arguments}set commandArguments(e){this.command.arguments=e}}o(Qi,"CommandQuickPickItem");var mo;(function(t){async function e(n,r,i,a,s,c){let u;Array.isArray(s)?u=s:c===void 0&&(u=[],c=s);const d=l.window.createQuickPick(),f=new Rn(500),h=[f],{defaultBranch:p,HEAD:b}=await n.getMetadata(r);async function Z(De){const[Le,Ge,qe,it]=await Promise.all([n.getBranch(r,p.name),n.getBranches(r,{query:De,limit:100}),n.getTags(r,{query:De,limit:100}),n.getSnapshots(r)]),je=new Set,Lt=new Set;for(const dn of it)je.add(dn.hash),Lt.add(dn.branch.name);const Xt=((c==null?void 0:c.filterBranches)?Ge.branches.filter(c==null?void 0:c.filterBranches):Ge.branches).filter(dn=>dn.name!==p.name).sort((dn,Rr)=>dn.committedDate&&Rr.committedDate?Rr.committedDate.getTime()-dn.committedDate.getTime():0),an=l.l10n.t("Open indexed commit"),Vt=[{iconPath:new l.ThemeIcon("layers-active"),tooltip:an}];if(De!==void 0&&u){for(const dn of u)if(dn.identifier==="remoteHub.createBranch"||dn.identifier==="remoteHub.createBranchFrom"){const Rr=dn.commandArguments;if(!Rr)continue;const Ri=Rr.findIndex(aa=>"uri"in aa);let Ti;Ri!==-1&&([Ti]=Rr.splice(Ri,1),Ti.branch=De,Rr.push(Ti),dn.commandArguments=Rr)}}return[...u,{label:"",kind:l.QuickPickItemKind.Separator},...(c==null?void 0:c.showHead)?[{label:"HEAD",description:`\u2022$(git-commit) ${U(b.sha)}${je.has(b.sha)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,alwaysShow:!0,type:fe.Commit,name:void 0,sha:b.sha,buttons:je.has(b.sha)?Vt:void 0}]:[],{label:`$(${(Le==null?void 0:Le.locked)?"lock":"git-branch"}) ${p.name} (default)`,description:`\u2022$(git-commit) ${U(p.sha)}${Lt.has(p.name)||je.has(p.sha)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,alwaysShow:!0,type:fe.Branch,name:void 0,sha:p.sha,buttons:Lt.has(p.name)||je.has(p.sha)?Vt:void 0},...Xt.map(dn=>({label:`$(${dn.locked?"lock":"git-branch"}) ${dn.name}`,description:`\u2022$(git-commit) ${U(dn.commit)}${Lt.has(dn.name)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:fe.Branch,name:dn.name,sha:dn.commit,buttons:Lt.has(dn.name)?Vt:void 0})),...qe.tags.map(dn=>({label:`$(tag) ${dn.name}`,description:`\u2022$(git-commit) ${U(dn.commit)}${je.has(dn.commit)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:fe.Tag,name:dn.name,sha:dn.commit,buttons:je.has(dn.commit)?Vt:void 0}))]}o(Z,"getItems");const E=Z(void 0);let K,me=!1;async function re(De){K=void 0;const Le=d.activeItems;d.items=De!=null?De:await E,me&&Le.length!==0&&(d.activeItems=d.items.filter(Ge=>Le.some(qe=>qe.label===Ge.label))),d.busy=!1}o(re,"setItems");try{return await new Promise(Le=>{var Ge;h.push(d.onDidHide(()=>Le(void 0)),d.onDidChangeValue(qe=>{if(me=!1,qe=qe.trim(),(c==null?void 0:c.allowResetToSha)&&b.branch&&N(qe)){re([{label:`Reset $(git-branch) ${b.branch.name} to $(git-commit) ${qe}`,name:b.branch.name,sha:qe,type:fe.Branch}]);return}d.busy=!0;const it=f.debounce(qe?()=>Z(qe):()=>E);K===void 0&&(K=it.then(async je=>re(je)))}),d.onDidAccept(()=>{if(d.activeItems.length!==0){const[qe]=d.activeItems;Le(qe)}}),d.onDidTriggerItemButton(qe=>{const it=qe.item;!(it instanceof Qi)&&it.kind!==l.QuickPickItemKind.Separator&&(it.useIndex=!0),Le(it)})),d.title=a,d.placeholder=i,d.matchOnDescription=!0,d.ignoreFocusOut=(Ge=c==null?void 0:c.ignoreFocusOut)!=null?Ge:!0,d.busy=!0,d.show(),K=f.debounce(async()=>E,0).then(qe=>re(qe))})}finally{d.dispose(),h.forEach(De=>void De.dispose())}}o(e,"show"),t.show=e})(mo||(mo={}));const cc=new TextDecoder;class Hs{constructor(e,n,r,i){this.providerService=e,this.openActionsService=n,this.telemetryService=r,this.ignoreFileService=i,this._onDidCloseRepository=new l.EventEmitter,this._onDidOpenRepository=new l.EventEmitter,this._onDidChangeState=new l.EventEmitter,this._scmProviders=[],this._state="uninitialized",this.setContext(void 0),this.disposable=l.Disposable.from(be.onDidChange(this.onConfigurationChanged,this),be.onDidChangeAny(this.setContext,this),this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(async({repository:s})=>{const c=this.getScmProvider(k.getVirtualUri(s.uri));c!==void 0&&await this.updateStatusBarCommands(c,void 0)}),this.providerService.onDidSyncRepository(async({repository:s,syncing:c})=>{const u=this.getScmProvider(k.getVirtualUri(s.uri));u!==void 0&&(await this.updateStatusBarCommands(u,{syncing:c}),c===!1&&await this.update(s.uri))}),this.providerService.onDidRefresh(s=>{for(const c of s)this.update(c)}),this.providerService.onDidChangeChangeStore(s=>this.update(s[0].rootUri)),...this.registerCommands());const a=this.providerService.repositories;this.onRepositoriesChanged({added:a,removed:[]})}get onDidCloseRepository(){return this._onDidCloseRepository.event}get onDidOpenRepository(){return this._onDidOpenRepository.event}get onDidChangeState(){return this._onDidChangeState.event}get repositories(){return this._scmProviders.map(e=>e.repository).filter(e=>Boolean(e))}dispose(){var e;(e=this.disposable)==null||e.dispose()}get staging(){return this._staging===void 0&&(this._staging=be.get("staging")),this._staging}get state(){return this._state}refresh(){for(const e of this._scmProviders)this.update(e.sourceControl.rootUri)}setContext(e){if((e==null?void 0:e.affectsConfiguration("git.openDiffOnClick"))||e===void 0){const n=be.getAny("git.openDiffOnClick",void 0,!0);Gn(nn.OpenDiffOnClick,n),this.refresh()}}onConfigurationChanged(e){be.changed(e,"staging")&&(this._staging=void 0,be.changed(e,"staging.enabled")&&this.refresh()),be.changed(e,"commitDirectlyWarning")&&this.refresh()}async onRepositoriesChanged(e){if(e.added.length)for(const n of e.added){const r=await this.update(n.uri);(r==null?void 0:r.repository)&&this._onDidOpenRepository.fire(r.repository)}if(e.removed.length)for(const n of e.removed){const r=this._scmProviders.findIndex(i=>_(i.sourceControl.rootUri)===_(n.uri));if(r!==-1){const i=this._scmProviders[r];i.repository&&this._onDidCloseRepository.fire(i.repository),i.sourceControl.dispose(),this._scmProviders.splice(r,1)}}this._state!=="initialized"&&(this._state="initialized",this._onDidChangeState.fire(this._state))}registerCommands(){return[l.commands.registerCommand("remoteHub.createPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.createPullRequest"),void this.createPullRequest(e)}),l.commands.registerCommand("remoteHub.createDraftPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.createDraftPullRequest"),void this.createPullRequest(e,{draft:!0})}),l.commands.registerCommand("remoteHub.commit",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.commit"),void this.commitChanges(e,{empty:!1})}),l.commands.registerCommand("remoteHub.commitEmpty",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.commitEmpty"),void this.commitChanges(e,{empty:!0})}),l.commands.registerCommand("remoteHub.discardAllChanges",async e=>{if(Ws(e)){const a=this.getSourceControlFrom(e);if((a==null?void 0:a.rootUri)===void 0)return;const c=e.resourceStates.filter($a);if(c.length!==0){if(await Ko(c))for(const u of c)await this.providerService.getChangeStore(u.resourceUri).discard(u.resourceUri),await this.closeDiffEditors(a.rootUri,[u.resourceUri]);else this.telemetryService.publicLog2("command.discardAllChanges.abort",{reason:"aborted"});return}}let n=!1;e!==void 0&&"confirmDiscard"in e&&(n=!0,e=void 0);const r=this.getSourceControlFrom(e);if((r==null?void 0:r.rootUri)===void 0)return;this.telemetryService.publicLog2("command.discardAllChanges");const i=await this.providerService.getChangeStore(r.rootUri).getChanges(r.rootUri);n||await Ko(i)?await this.providerService.getChangeStore(r.rootUri).discardAll(r.rootUri):this.telemetryService.publicLog2("command.discardAllChanges.abort",{reason:"aborted"})}),l.commands.registerCommand("remoteHub.discardChanges",async(...e)=>{const n=this.getSourceControlFrom(e[0]);if((n==null?void 0:n.rootUri)!==void 0)for(const r of e)!$a(r)||(this.telemetryService.publicLog2("command.discardChanges"),await Ko([r])?(await this.providerService.getChangeStore(r.resourceUri).discard(r.resourceUri),await this.closeDiffEditors(n.rootUri,[r.resourceUri])):this.telemetryService.publicLog2("command.discardChanges.abort",{reason:"aborted"}))}),l.commands.registerCommand("remoteHub.stageAllChanges",async e=>{const n=this.getSourceControlFrom(e);(n==null?void 0:n.rootUri)!==void 0&&(this.telemetryService.publicLog2("command.stageAllChanges"),await this.providerService.getChangeStore(n.rootUri).stageAll(n.rootUri),await this.closeDiffEditors(n.rootUri,void 0))}),l.commands.registerCommand("remoteHub.stageChanges",async(...e)=>{var n;const r=(n=this.getSourceControlFrom(e[0]))==null?void 0:n.rootUri;if(!!r)for(const i of e)!$a(i)||(this.telemetryService.publicLog2("command.stageChanges"),await this.providerService.getChangeStore(i.resourceUri).stage(i.resourceUri),await this.closeDiffEditors(r,[i.resourceUri]))}),l.commands.registerCommand("remoteHub.unstageAllChanges",async e=>{const n=this.getSourceControlFrom(e);(n==null?void 0:n.rootUri)!==void 0&&(this.telemetryService.publicLog2("command.unstageAllChanges"),await this.providerService.getChangeStore(n.rootUri).unstageAll(n.rootUri),await this.closeDiffEditors(n.rootUri,void 0))}),l.commands.registerCommand("remoteHub.unstageChanges",async(...e)=>{var n;const r=(n=this.getSourceControlFrom(e[0]))==null?void 0:n.rootUri;if(!!r)for(const i of e)!$a(i)||(this.telemetryService.publicLog2("command.unstageChanges"),await this.providerService.getChangeStore(i.resourceUri).unstage(i.resourceUri),await this.closeDiffEditors(r,[i.resourceUri]))}),l.commands.registerCommand("remoteHub.keepChanges",async(...e)=>{for(const n of e)!$a(n)||(this.telemetryService.publicLog2("command.keepChanges"),await this.providerService.getChangeStore(n.resourceUri).keep(n.resourceUri))}),l.commands.registerCommand("remoteHub.openChanges",async e=>{if(e instanceof l.Uri){const i=await this.providerService.getMetadata(e),a=this.getOriginalVirtualUri(e,i);return void l.commands.executeCommand("vscode.diff",a,e,l.l10n.t("{0} (Working Tree)",J(e)))}const n=await this.providerService.getMetadata(e.resourceUri),r=this.getOriginalVirtualUri(e.resourceUri,n);return this.telemetryService.publicLog2("command.openChanges"),void l.commands.executeCommand("vscode.diff",r,e.resourceUri,l.l10n.t("{0} (Working Tree)",J(e.resourceUri)))}),l.commands.registerCommand("remoteHub.openFile",async(...e)=>{var n;for(const r of e)if($o(r)){const i=r,a=this.providerService.getChangeStore(i.resourceUri).resolveOpenCommand(i.resourceUri,{preserveFocus:!1,preview:!1,viewColumn:l.ViewColumn.Active});this.telemetryService.publicLog2("command.openFile"),await l.commands.executeCommand(a.command,...(n=a.arguments)!=null?n:[])}else if(r instanceof l.Uri){this.telemetryService.publicLog2("command.openFile");const i=r;await l.window.showTextDocument(i)}}),l.commands.registerCommand("remoteHub.createBranch",async e=>{await oi("remoteHub.createBranchFrom",{...e,fromSha:"HEAD"})}),l.commands.registerCommand("remoteHub.createBranchFrom",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await Ka(this._scmProviders,l.l10n.t("Choose which repository to create a new branch on"));if(r===void 0)return;this.telemetryService.publicLog2("command.createBranchFrom");const i=await this.providerService.getMetadata(r);let a;if(i.accessLevel<le.Write&&(a=await this.providerService.getFork(r),a===void 0)){const E={title:l.l10n.t("Fork Repository")},K={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showErrorMessage(l.l10n.t(`You don't have access to create branches on this repository.

Do you want to create a branch on a fork?`),{modal:!0},E,K)!==E){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"no permissions and declined to fork"});return}if(a=await l.window.withProgress({location:l.ProgressLocation.Notification,title:l.l10n.t("Forking {0}...",i.name)},()=>this.providerService.fork(r)),a===void 0){l.window.showErrorMessage(l.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"aborted fork failed"});return}}let s,c=e==null?void 0:e.branch,u=!1;try{(!c||!y(c))&&(c=await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>Ga(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),void 0,void 0)));let E;if(e==null?void 0:e.fromSha)E=e.fromSha,E==="HEAD"&&(E=i.HEAD.sha);else{const K=await mo.show(this.providerService,r,l.l10n.t("Select a ref to create the new branch from"),void 0,{showHead:!0});if(!K){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"abandoned branch picker"});return}E=K.sha,u=Boolean(K.useIndex)}c&&E&&(s=await this.providerService.createBranch(r,c,E,a))}catch(E){j.error(E),l.window.showErrorMessage(l.l10n.t("Unable to create the new branch."));return}if(!s){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"abandoned branch name prompt"});return}const d=await this.providerService.switchTo(a?this.providerService.createVirtualUri(r,a):r,{type:fe.Branch,id:s});if(!d)return;const f=await this.providerService.getChangeStore(r).createChangeset(r);f&&await this.openActionsService.setChangesetToApply(d.uri,f);const h=l.l10n.t("Switch to Branch"),p=l.l10n.t("Open in New Window"),Z=be.get("switchToCreatedBranch")==="always"?h:await l.window.showInformationMessage(l.l10n.t(`Created new branch '{0}'.

Any uncommitted changes will be applied to the new branch.

Do you want to switch to the new branch?`,s),{modal:!0},h,p);!Z||(await this.providerService.getChangeStore(r).discardAll(r),d.location=Z===p?He.NewWindow:He.CurrentWindow,u&&await be.setMode(d.uri,ge.getIndexDefault(he.Branch)),await ut(this.providerService,d,{skipChangesPrompt:!0}))}),l.commands.registerCommand("remoteHub.applyPatch",async e=>{if(e=this.getSourceControlFrom(e),(e==null?void 0:e.rootUri)===void 0)return;this.telemetryService.publicLog2("command.applyPatch");let n;const r=l.window.activeTextEditor;if((r==null?void 0:r.document.languageId)!=="diff"){const i=await l.window.showOpenDialog({openLabel:l.l10n.t("Open Patch"),title:l.l10n.t("Open Patch"),canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{Diff:["diff"],Patch:["*","patch"]}});if(i===void 0||i.length===0)return;n=cc.decode(await l.workspace.fs.readFile(i[0]))}else n=r.document.getText();try{await this.providerService.getChangeStore(e.rootUri).applyPatch(e.rootUri,n)}catch{l.window.showErrorMessage(l.l10n.t("Invalid patch file"))}}),l.commands.registerCommand("remoteHub.exportPatch",async(...e)=>{const n=Array.isArray(e)?e:[e];for(const r of n){const i=this.getSourceControlFrom(r);if((i==null?void 0:i.rootUri)===void 0)return;let a;$o(r)&&(a=r.resourceUri),this.telemetryService.publicLog2("command.exportPatch");const s=await this.providerService.getChangeStore(i.rootUri).createPatch(i.rootUri,a),c=await l.workspace.openTextDocument({language:"diff",content:s});await l.window.showTextDocument(c)}}),l.commands.registerCommand("remoteHub.switchToBranch",async e=>{var n,r;const i=(n=e==null?void 0:e.uri)!=null?n:await Ka(this._scmProviders,l.l10n.t("Choose which repository to switch branches on"));if(i===void 0)return;this.telemetryService.publicLog2("command.switchToBranch");const a=[],s=await this.providerService.getMetadata(i);if(e==null?void 0:e.commands)switch(a.push(new Qi(fr({command:"remoteHub.createBranch",title:l.l10n.t("{0} Create new branch...","$(add)"),arguments:[{uri:i}]}),!0),new Qi(fr({command:"remoteHub.createBranchFrom",title:l.l10n.t("{0} Create new branch from...","$(add)"),arguments:[{uri:i}]}),!0)),s.HEAD.type){case G.Branch:a.push(new Qi(fr({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Branch on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,branch:s.HEAD.branch.name}]})));break;case G.RemoteBranch:a.push(new Qi(fr({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Remote Branch on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.HEAD.branch.remote.repo,branch:s.HEAD.branch.name}]})));break;case G.Tag:a.push(new Qi(fr({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Tag on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,tag:s.HEAD.detached.name}]})));break;case G.Commit:a.push(new Qi(fr({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Commit on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,sha:s.HEAD.sha}]})));break}const c=(r=s.HEAD.branch)==null?void 0:r.name,u=Boolean(c&&!await this.providerService.getChangeStore(i).hasChanges(i)),d=await mo.show(this.providerService,i,l.l10n.t("Select a branch or tag to checkout"),void 0,a,{allowResetToSha:u,filterBranches:c?f=>f.name!==c:void 0,ignoreFocusOut:!1});if(!d){this.telemetryService.publicLog2("command.switchToBranch.abort",{reason:"abandoned branch picker"});return}return d instanceof Qi?void d.execute():u&&d.type===fe.Branch&&d.name===c&&d.sha?l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{try{await this.providerService.sync(i,{to:d.sha})}catch(f){j.error(f),l.window.showErrorMessage(l.l10n.t("Unable to reset the repository to commit '{0}'.",U(d.sha)))}}):void l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{const f=await this.providerService.switchTo(i,d.name?{type:d.type,id:d.name}:void 0);if(f!==void 0){if(d.useIndex){const h=await this.providerService.getModeRefType(f.uri);await be.setMode(f.uri,ge.getIndexDefault(h))}return ut(this.providerService,f)}})}),l.commands.registerCommand("remoteHub.fetch",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await Ka(this._scmProviders,l.l10n.t("Choose which repository to fetch"));if(r!==void 0){this.telemetryService.publicLog2("command.fetch");try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.fetch(r,{force:!0}))}catch(i){l.window.showErrorMessage(l.l10n.t("Unable to fetch repository"))}}}),l.commands.registerCommand("remoteHub.fetchAll",async e=>{const n=this.providerService.repositories;if(n.length===0)return;(e==null?void 0:e.automated)||this.telemetryService.publicLog2("command.fetchAll"),(await l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{const i=[];for(const a of n)try{await this.providerService.fetch(a.uri)}catch(s){i.push(s)}return i})).length&&!(e==null?void 0:e.automated)&&l.window.showErrorMessage(n.length?l.l10n.t("Unable to fetch repositories"):l.l10n.t("Unable to fetch repository"))}),l.commands.registerCommand("remoteHub.pull",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await Ka(this._scmProviders,l.l10n.t("Choose which repository to pull"));if(r!==void 0){this.telemetryService.publicLog2("command.pull");try{await this.sync(r,{pull:!0})}catch{}}}),l.commands.registerCommand("remoteHub.sync",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await Ka(this._scmProviders,l.l10n.t("Choose which repository to sync"));if(r!==void 0){this.telemetryService.publicLog2("command.sync");try{await this.sync(r)}catch{}}}),l.commands.registerCommand("remoteHub.disableCommitDirectlyWarning",()=>{this.telemetryService.publicLog2("command.disableCommitDirectlyWarning"),be.updateEffective("commitDirectlyWarning",ht.Off)})]}async sync(e,{pull:n,...r}={pull:!1}){this.telemetryService.publicLog2("sync");try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.sync(e,r))}catch(i){if(nt.asVirtualProviderErrorCode(i)===oe.SyncConflictsError){const a={title:l.l10n.t("Continue")},s={title:l.l10n.t("Cancel"),isCloseAffordance:!0};await l.window.showWarningMessage(n?l.l10n.t(`Pulling in changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue pulling in changes.`):l.l10n.t(`Syncing changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue syncing changes?`),{modal:!0},a,s)===a?await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.sync(e,{conflictResolution:ue.Merge})):this.telemetryService.publicLog2("sync.abort",{reason:"abandoned"})}else if(nt.asVirtualProviderErrorCode(i)===oe.UnresolvedConflictsError)await l.window.showErrorMessage(n?l.l10n.t("You must resolve any pending conflicts before pulling."):l.l10n.t("You must resolve any pending conflicts before syncing."),{modal:!0});else throw j.error(i),this.telemetryService.sendException(i),l.window.showErrorMessage(l.l10n.t("Unable to sync the repository.")),i}}async commitChanges(e,n){try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.commitChangesCore(e,n))}catch(r){if(nt.asVirtualProviderErrorCode(r)===oe.NothingToCommitError){l.window.showInformationMessage(l.l10n.t("There are no changes to commit."));return}j.error(r),l.window.showErrorMessage(l.l10n.t("Unable to commit.")),this.telemetryService.sendException(r)}}async commitChangesCore(e,n){const r=e.rootUri;this.telemetryService.publicLog2("commit",{staging:String(this.staging.enabled)});const i=new Be(`VirtualSourceControl.commitChanges(${r.toString()})`);let a;try{const s=await this.providerService.getMetadata(r);let c,u;const d=this.staging.enabled?this.staging.smart?"auto":!0:!1;for(;;){const h=e.inputBox.value;if(await this.providerService.getChangeStore(r).hasMergeConflicts(r)){e.inputBox.showValidationMessage(l.l10n.t("You must resolve any pending conflicts before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("commit.abort",{reason:"aborted conflicts"}),a=": Aborted; Unresolved conflicts";return}const p=await this.providerService.getCommitOperations(r,{staged:d});if(p.length===0&&!n.empty){e.inputBox.showValidationMessage(this.staging.enabled?l.l10n.t("There are no staged changes to commit."):l.l10n.t("There are no changes to commit."),l.SourceControlInputBoxValidationType.Information),this.telemetryService.publicLog2("commit.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),a=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}if(!h){e.inputBox.showValidationMessage(l.l10n.t("You must specify a commit message before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("commit.abort",{reason:"aborted no message"}),a=": Aborted; No message";return}let b,Z;if(s.HEAD.type===G.RemoteBranch?(Z=s.HEAD.branch.remote.accessLevel<le.Write,b=Z&&s.accessLevel<le.Write):(b=s.accessLevel<le.Write,Z=b),u===void 0&&b&&(u=await this.providerService.getFork(r),u===void 0)){const E={title:l.l10n.t("Fork Repository")},K={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showInformationMessage(l.l10n.t("You're trying to make changes in a project you don't have write access to. Do you want to create a fork of this project to commit your proposed changes to?"),{modal:!0},E,K)!==E){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned fork prompt"}),a=": Aborted; Abandoned fork prompt";return}if(u=await l.window.withProgress({location:l.ProgressLocation.Notification,title:l.l10n.t("Forking {0}...",s.name)},()=>this.providerService.fork(r)),u===void 0){l.window.showErrorMessage(l.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("commit.abort",{reason:"aborted fork failed"}),a=": Aborted; Fork failed";return}}if(u||Z){if(u===void 0){const me={title:l.l10n.t("Commit to a New Branch")},re={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showErrorMessage(l.l10n.t(`You're trying to make changes to a branch you don't have write access to.

Do you want to commit your changes to a new branch?`),{modal:!0},me,re)!==me){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned remote branch prompt"}),a=": Aborted; Abandoned commit to new branch prompt";return}}let E=0;try{const me=await this.providerService.getBranches(u?this.providerService.createVirtualUri(r,u):r,{query:"patch-"});for(const re of me.branches){const De=/^patch-(?<num>\d+)$/.exec(re.name);if(De==null?void 0:De.groups){const Le=Number(De.groups.num);Le>E&&(E=Le)}}}catch{}const K=await Ga(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name),`patch-${E+1}`);if(K&&(c=await this.providerService.createBranch(r,K,s.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned create branch prompt"}),a=": Aborted; Abandoned create branch prompt";return}}try{await this.providerService.createAndPushCommit(r,h,p,c,n,u),await this.closeDiffEditors(r,void 0)}catch(E){const K=nt.asVirtualProviderErrorCode(E);if(K===oe.DetachedHEADError){const me={title:l.l10n.t("Commit to a New Branch")},re={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showErrorMessage(l.l10n.t(`Unable to commit your changes because you are not currently on a branch.

Do you want to commit your changes to a new branch?`),{modal:!0},me,re)!==me){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head prompt"}),a=": Aborted; Abandoned commit to new branch prompt (detached head)";return}const Le=await Ga(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name));if(Le&&(c=await this.providerService.createBranch(r,Le,s.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head create branch prompt"}),a=": Aborted; Abandoned create branch prompt (detached head)";return}continue}else if(K===oe.MergeConflictError){const me={title:l.l10n.t("Pull")},re={title:l.l10n.t("Sync (Pull & Push)")},De={title:l.l10n.t("Cancel"),isCloseAffordance:!0},Le=await l.window.showErrorMessage(l.l10n.t(`Changes have been committed since you started editing, so you must merge those changes before you can commit.

Do you want to pull or sync (pull and automatically push) your changes?`),{modal:!0},me,re,De);if(Le!==me&&Le!==re){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned conflicts prompt"}),a=": Aborted; Abandoned merge changes prompt";return}if(await this.sync(r,{pull:Le===me,conflictResolution:ue.Merge}),Le===me){a=': Aborted; Chose "pull" from merge changes prompt';return}continue}else if(K===oe.CommitToProtectedBranchError){const me={title:l.l10n.t("Commit to a New Branch")},re={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if((l.workspace.getConfiguration("git").get("branchProtectionPrompt")==="alwaysCommitToNewBranch"?me:await l.window.showErrorMessage(l.l10n.t(`You are trying to commit to a protected branch and you do not have permission to push your commits to the remote.

How would you like to proceed?`),{modal:!0},me,re))!==me){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head prompt"}),a=": Aborted; Abandoned commit to new branch prompt (detached head)";return}const Ge=await Ga(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name));if(Ge&&(c=await this.providerService.createBranch(r,Ge,s.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head create branch prompt"}),a=": Aborted; Abandoned create branch prompt (detached head)";return}continue}else if(K===oe.CommitToArchivedRepositoryError){l.window.showErrorMessage(l.l10n.t("The current repository has been archived and is now read-only. Please contact the repository owner."),{modal:!0}),this.telemetryService.publicLog2("commit.abort",{reason:"archived repository"}),a=`: Aborted; ${String(E)}`;return}else throw j.error(E),a=`: Aborted; ${String(E)}`,E}break}if(e.inputBox.value="",u?await this.providerService.getChangeStore(r).discardAll(r,{staged:d}):await this.providerService.getChangeStore(r).acceptAll(r,{staged:d}),Vo(ga.HasCommitted,!0),!u&&!c)return;async function f(){if(u){const E={title:l.l10n.t("Switch to Fork")},K={title:l.l10n.t("Cancel"),isCloseAffordance:!0},me=await l.window.showInformationMessage(l.l10n.t("Committed changes to your fork of {0}. Do you want to switch to your fork to continue making changes?",s.name),{modal:!0},E,K);if(this.telemetryService.publicLog2("commit.switchToFork",{confirm:String(me===E)}),me===E){let re;c!==void 0?re={type:fe.Branch,id:c}:s.HEAD.branch!==void 0&&(re={type:fe.Branch,id:s.HEAD.branch.name}),ut(this.providerService,{name:u.name,uri:this.providerService.createVirtualUri(r,{repo:u.repo,ref:re}),location:He.CurrentWindow})}return}const h={title:l.l10n.t("Switch to Branch")},p={title:l.l10n.t("Cancel"),isCloseAffordance:!0},b=be.get("switchToCreatedBranch")==="always",Z=b?h:await l.window.showInformationMessage(l.l10n.t("Committed changes to new branch '{0}'. Do you want to switch to the new branch to continue making changes?",c),{modal:!0},h,p);this.telemetryService.publicLog2("commit.switchToBranch",{confirm:String(Z===h),autoConfirm:String(b)}),Z===h&&ut(this.providerService,{name:s.name,uri:this.providerService.createVirtualUri(r,{repo:s.repo,ref:c?{type:fe.Branch,id:c}:void 0}),location:He.CurrentWindow})}o(f,"showSwitchToPrompt"),f.call(this)}finally{i.stop(a?{message:a}:void 0)}}async createPullRequest(e,n){try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.createPullRequestCore(e,n))}catch(r){const i=nt.asVirtualProviderErrorCode(r);if(i===oe.NothingToCommitError){l.window.showInformationMessage(l.l10n.t("There are no changes to commit."));return}if(i===oe.CommitFailedError){l.window.showErrorMessage(l.l10n.t("Unable to commit."));return}j.error(r),l.window.showErrorMessage(l.l10n.t("Unable to open a pull request.")),this.telemetryService.sendException(r)}}async createPullRequestCore(e,n){var r;const i=e.rootUri,a=(r=n==null?void 0:n.draft)!=null?r:!1;this.telemetryService.publicLog2("createPullRequest",{draft:String(a),staging:String(this.staging.enabled)});const s=new Be(`VirtualSourceControl.createPullRequest(${i.toString()})`);let c;try{let u=o(function(){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned branch prompt"}),c=": Aborted; Abandoned commit to new branch prompt"},"handleBranchNotCreated"),d;const f=this.staging.enabled?this.staging.smart?"auto":!0:!1;if(!(n==null?void 0:n.sha)){if(await this.providerService.getChangeStore(i).hasMergeConflicts(i)){e.inputBox.showValidationMessage(l.l10n.t("You must resolve any pending conflicts before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted conflicts"}),c=": Aborted; Unresolved conflicts";return}if(d=await this.providerService.getCommitOperations(i,{staged:this.staging.enabled?this.staging.smart?"auto":!0:!1}),d.length===0){e.inputBox.showValidationMessage(this.staging.enabled?l.l10n.t("There are no staged changes to commit."):l.l10n.t("There are no changes to commit."),l.SourceControlInputBoxValidationType.Information),this.telemetryService.publicLog2("createPullRequest.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),c=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}}const h=e.inputBox.value;if(!h){e.inputBox.showValidationMessage(l.l10n.t("You must specify a commit message before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted no message"}),c=": Aborted; No message";return}const p=await this.providerService.getMetadata(i);let b,Z;p.HEAD.type===G.RemoteBranch?(Z=p.HEAD.branch.remote.accessLevel<le.Write,b=Z&&p.accessLevel<le.Write):(b=p.accessLevel<le.Write,Z=b);let E=n==null?void 0:n.fork;if(E===void 0&&b&&(E=await this.providerService.getFork(i),E===void 0)){const qe={title:l.l10n.t("Fork Repository")},it={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showInformationMessage(l.l10n.t(`You're trying to make changes in a project you don't have write access to.

Do you want to create a fork of this project to commit your proposed changes to?`),{modal:!0},qe,it)!==qe){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned fork prompt"}),c=": Aborted; Abandoned fork prompt";return}if(E=await l.window.withProgress({location:l.ProgressLocation.Notification,title:l.l10n.t("Forking {0}...",p.name)},()=>this.providerService.fork(i)),E===void 0){l.window.showErrorMessage(l.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted fork failed"}),c=": Aborted; Fork failed";return}}const K=h.trimStart().split(`
`),me=await l.window.showInputBox({ignoreFocusOut:!0,placeHolder:l.l10n.t("New pull request title"),prompt:l.l10n.t("Please provide a title for the new pull request"),value:K[0]});if(!me){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned title prompt"}),c=": Aborted; Abandoned title prompt";return}async function re(qe){let it=0;try{const Xt=await this.providerService.getBranches(E?this.providerService.createVirtualUri(i,E):i,{query:"patch-"});for(const an of Xt.branches){const Vt=/^patch-(?<num>\d+)$/.exec(an.name);if(Vt==null?void 0:Vt.groups){const dn=Number(Vt.groups.num);dn>it&&(it=dn)}}}catch{}const je=await Ga(this.providerService,i,l.l10n.t("Create a new branch for this pull request"),l.l10n.t("New branch name"),l.l10n.t("New Pull Request \u2022 Create Branch \u2022 {0}",E?E.name:p.name),`patch-${it+1}`);let Lt;return je&&(Lt=await this.providerService.createBranch(i,je,qe,E)),Lt}o(re,"createBranch");const De=await re.call(this,p.HEAD.sha);if(!De){u.call(this);return}(d==null?void 0:d.length)&&await this.providerService.createAndPushCommit(i,h,d,De,void 0,E);const Le=await this.providerService.createPullRequest(i,De,me,K.slice(1).join(`
`),{draft:a},E);e.inputBox.value="",(d==null?void 0:d.length)&&(E?await this.providerService.getChangeStore(i).discardAll(i,{staged:f}):await this.providerService.getChangeStore(i).acceptAll(i,{staged:f}));async function Ge(){const qe={title:l.l10n.t("Switch to Pull Request")},it={title:l.l10n.t("Cancel"),isCloseAffordance:!0},je=await l.window.showInformationMessage(l.l10n.t("Created pull request #{0} in {1}. Do you want to switch to the new pull request?",Le.id,p.name),{modal:!0},qe,it);this.telemetryService.publicLog2("commit.switchToPullRequest",{confirm:String(je===qe)}),je===qe&&ut(this.providerService,{name:p.name,uri:this.providerService.createVirtualUri(i,{repo:p.repo,ref:{type:fe.PullRequest,id:Le.id}}),location:He.CurrentWindow})}o(Ge,"showSwitchToPrompt"),Ge.call(this)}finally{s.stop(c?{message:c}:void 0)}}async update(e){const n=l.workspace.getWorkspaceFolder(e);if(n===void 0)return;const r=await this.providerService.getMetadata(e),i=await this.createOrUpdateScmProvider(e,n.name),a=await this.ignoreFileService.getIgnoreFile(e,!1),s=await this.providerService.getChangeStore(e).getGroupedChanges(e,{predicate:f=>f.fileType===l.FileType.File}),c=await Promise.all(s.conflicts.filter(f=>a?!a.isArbitraryPathIgnored(f.uri.path,!1):!0).map(async f=>({type:f.type,resourceUri:f.uri,command:await this.providerService.getChangeStore(f.uri).resolveDiffCommand(f.uri,f.conflicts.incomingUri,l.l10n.t("{0} (Incoming Changes \u2194 Current Changes)",J(f.uri)))}))),u=await Promise.all(s.staged.filter(f=>a?!a.isArbitraryPathIgnored(f.uri.path,!1):!0).map(async f=>({type:f.type,resourceUri:f.uri,command:await this.providerService.getChangeStore(f.uri).resolveDiffCommand(f.uri,this.getOriginalVirtualUri(f.uri,r),l.l10n.t("{0} (Index)",J(f.uri)))}))),d=await Promise.all(s.working.filter(f=>a?!a.isArbitraryPathIgnored(f.uri.path,!1):!0).map(async f=>({type:f.type,resourceUri:f.uri,decorations:{strikeThrough:f.type===D.Deleted},command:await this.providerService.getChangeStore(f.uri).resolveDiffCommand(f.uri,this.getOriginalVirtualUri(f.uri,r),l.l10n.t("{0} (Working Tree)",J(f.uri)))})));return i.sourceControl.actionButton=this.ensureActionButton(e),this.ensureMergeConflictsGroup(i).resourceStates=c,this.ensureStagedChangesGroup(i).resourceStates=this.staging.enabled?u:[],this.ensureWorkingChangesGroup(i).resourceStates=this.staging.enabled?d:[...u,...d],i}getOriginalVirtualUri(e,n){return this.providerService.createVirtualUri(k.getProviderId(e),{repo:n.repo,ref:{type:fe.Commit,id:n.HEAD.sha}},this.providerService.getRelativeFilePath(e))}ensureActionButton(e){var n,r;const i=(n=this.providerService.getRegisteredProvider(e))==null?void 0:n.name;return{command:{title:l.l10n.t("Commit & Push"),tooltip:i!==void 0?l.l10n.t("Your changes will be committed and pushed directly to {0}.",i):l.l10n.t("Your changes will be committed and pushed directly to the remote."),command:"remoteHub.commit"},secondaryCommands:[[{title:l.l10n.t("Continue Working On..."),tooltip:l.l10n.t("Bring your working changes with you to a new development environment."),command:"remoteHub.continueOn"}]],enabled:(r=this.providerService.changeStoreMaybeHasChanges(e))!=null?r:!0}}async createOrUpdateScmProvider(e,n){var r,i;const a=await this.providerService.getMetadata(e);let s;const c=a.HEAD.branch?a.HEAD.name:void 0;let u=this.getScmProvider(e);if(u===void 0){n=a.name,s=l.scm.createSourceControl(`remoteHub:${a.provider.id}`,n,e),s.quickDiffProvider={provideOriginalResource:f=>k.getProviderUri(f)};const d=this.providerService.createIGitRepository(e,s,a);u={id:a.provider.id,name:a.provider.name,sourceControl:s,groups:[],repository:d},this.ensureMergeConflictsGroup(u),this.ensureStagedChangesGroup(u),this.ensureWorkingChangesGroup(u),this._scmProviders.push(u)}else s=u.sourceControl;return a.accessLevel>=le.Write||((i=(r=a.HEAD.branch)==null?void 0:r.remote)==null?void 0:i.accessLevel)!==void 0&&a.HEAD.branch.remote.accessLevel>=le.Write?(s.acceptInputCommand={command:"remoteHub.commit",title:l.l10n.t("Commit"),arguments:[s]},c?s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to commit and push to '{0}' on {1})",c,a.provider.name):s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to commit and push to {0})",a.provider.name),be.get("commitDirectlyWarning")===ht.Off?s.inputBox.validateInput=void 0:s.inputBox.validateInput=d=>{if(be.get("commitDirectlyWarning")===ht.Auto&&el(ga.HasCommitted))return;const f=new l.MarkdownString(c?l.l10n.t("Your changes will be committed and immediately pushed to the '{0}' branch on {1}.",c,a.provider.name):l.l10n.t("Your changes will be committed and immediately pushed to {0}.",a.provider.name)),h="remoteHub.disableCommitDirectlyWarning";return f.isTrusted={enabledCommands:[h]},f.appendMarkdown(`&nbsp; [${l.l10n.t("Don't show again")}](command:${h} '${l.l10n.t("Hide")}')`),{message:f,type:l.SourceControlInputBoxValidationType.Information}}):(s.acceptInputCommand={command:"remoteHub.createPullRequest",title:l.l10n.t("Create a Pull Request"),arguments:[s]},s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to create a pull request for '{0}')",n)),await this.updateStatusBarCommands(u,{syncing:!1},a),u}async updateStatusBarCommands(e,n,r){var i,a,s,c,u;const d=e.sourceControl.rootUri;r=r!=null?r:await this.providerService.getMetadata(d);const{HEAD:f}=r,h=await this.providerService.getIndexMetadata(d),p=(h==null?void 0:h.type)===Nt.Active,b=(h==null?void 0:h.type)===Nt.Active,Z=Nt.hasIndex(h==null?void 0:h.type),E=await this.providerService.getChangeStore(d).hasChanges(d),K=(a=f.type===G.Branch&&((i=await this.providerService.getBranch(d,f.branch.name))==null?void 0:i.locked)?"$(lock)":void 0)!=null?a:Pi(f.type),me=[];if(me.push(fr({command:"remoteHub.switchToBranch",title:`${K} ${f.name}${E?"*":""}`,tooltip:`${U(f.sha)}`,arguments:[{uri:d,commands:!0}]})),f.detached||((n==null?void 0:n.syncing)?me.push(fr({command:"",title:"$(sync~spin)",tooltip:l.l10n.t("Syncing Changes..."),arguments:[]})):me.push(fr({command:"remoteHub.sync",title:`$(sync)${((c=(s=r.state)==null?void 0:s.behind)!=null?c:0)>0?` ${(u=r.state)==null?void 0:u.behind}\u2193`:""}`,tooltip:p||b?l.l10n.t("Sync to latest indexed commit"):l.l10n.t("Sync (Pull & Push)"),arguments:[{uri:d}]}))),r.pullRequest&&me.push(fr({command:"remoteHub.openOnRemote",title:`$(git-pull-request) ${r.pullRequest.id}`,tooltip:l.l10n.t(`Open Pull Request #{0} on {1}

{2}`,r.pullRequest.id,r.provider.name,r.pullRequest.title),arguments:[{provider:r.provider,repo:r.repo,pullRequest:{id:r.pullRequest.id}}]})),Z){const re=this.providerService.getIndexProvider(d);re&&me.push(...await re.getStatusBarContributions(d))}e.sourceControl.statusBarCommands=me}ensureMergeConflictsGroup(e){const n="conflicts";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,l.l10n.t("Merge Conflicts")),r.hideWhenEmpty=!0,e.groups.push(r)),r}ensureStagedChangesGroup(e){const n="staged";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,l.l10n.t("Staged Changes")),r.hideWhenEmpty=!0,e.groups.push(r)),r}ensureWorkingChangesGroup(e){const n="changes";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,l.l10n.t("Changes")),e.groups.push(r)),r}getScmProvider(e){const n=_(e);return this._scmProviders.find(r=>_(r.sourceControl.rootUri)===n)}getSourceControlFrom(e){if(e===void 0){if(this._scmProviders.length!==1)return;e=this._scmProviders[0].sourceControl}let n;if(uc(e))n=e;else if(Ws(e)){const r=e,i=this._scmProviders.find(a=>a.groups.find(s=>s.id===r.id));n=i==null?void 0:i.sourceControl}else if($o(e)){const r=e,i=this._scmProviders.find(a=>a.groups.some(s=>s.resourceStates.find(c=>c.resourceUri.toString()===r.resourceUri.toString())));n=i==null?void 0:i.sourceControl}else{if(this._scmProviders.length!==1)return;n=this._scmProviders[0].sourceControl}return n}async closeDiffEditors(e,n){if(!l.workspace.getConfiguration("git",e).get("closeDiffOnOperation",!1))return;const i=[];for(const a of l.window.tabGroups.all.map(s=>s.tabs).flat()){const{input:s}=a;(s instanceof l.TabInputTextDiff||s instanceof l.TabInputNotebookDiff)&&s.modified.scheme===k.scheme&&(!n||n.some(c=>c.path===s.modified.path))&&i.push(a)}await l.window.tabGroups.close(i,!0)}}o(Hs,"VirtualSourceControl");function uc(t){return"rootUri"in t&&"inputBox"in t}o(uc,"isSourceControl");function Ws(t){return t!==void 0&&"id"in t&&"label"in t&&"resourceStates"in t&&Array.isArray(t.resourceStates)}o(Ws,"isSourceControlResourceGroup");function $o(t){return t!==void 0&&"resourceUri"in t&&t.resourceUri instanceof l.Uri}o($o,"isSourceControlResourceState");function $a(t){return"type"in t}o($a,"isTrackedChange");async function Ko(t){var e,n,r;if(t.length===0)return!0;let i,a=l.l10n.t("Discard Changes");if(t.length===1){const c=t[0];c.type===D.Created?(i=l.l10n.t(`Are you sure you want to DELETE {0}?
This is IRREVERSIBLE!
This file will be FOREVER LOST.`,J((e=c.resourceUri)!=null?e:c.uri)),a=l.l10n.t("Delete file")):c.type===D.Deleted?(a=l.l10n.t("Restore file"),i=l.l10n.t("Are you sure you want to restore {0}?",J((n=c.resourceUri)!=null?n:c.uri))):i=l.l10n.t("Are you sure you want to discard changes in {0}?",J((r=c.resourceUri)!=null?r:c.uri))}else t.every(c=>c.type===D.Created)?i=l.l10n.t(`Are you sure you want to DELETE {0} files?
This is IRREVERSIBLE!
These files will be FOREVER LOST.`,t.length):t.every(c=>c.type===D.Deleted)?(a=l.l10n.t("Restore files"),i=l.l10n.t("Are you sure you want to restore {0} files?",t.length)):i=l.l10n.t("Are you sure you want to discard changes in {0} files?",t.length);return await l.window.showWarningMessage(i,{modal:!0},a)===a}o(Ko,"confirmDiscard");async function Ka(t,e,n){if(t.length===0)return;if(t.length===1)return t[0].sourceControl.rootUri;const r=await l.window.showQuickPick(t.map(({sourceControl:i})=>({label:i.label,uri:i.rootUri})),{placeHolder:e,title:n});if(!!r)return r.uri}o(Ka,"getOrPickRootUri");async function Ga(t,e,n,r,i,a){let s;const c=l.window.createInputBox();c.ignoreFocusOut=!0;try{return await new Promise(u=>{s=l.Disposable.from(c.onDidHide(()=>u(void 0)),c.onDidChangeValue(d=>{if(d=d.trim(),!d){c.validationMessage=l.l10n.t("Please enter a valid branch name");return}if(!y(d)){c.validationMessage=l.l10n.t("'{0}' isn't a valid branch name",d);return}c.validationMessage=void 0}),c.onDidAccept(async()=>{const d=c.value.trim();if((await t.getBranches(e,{query:d,limit:100})).branches.some(h=>h.name===d)){c.validationMessage=l.l10n.t("Branch '{0}' already exists",d);return}c.enabled=!1,c.busy=!0,u(d)})),c.prompt=n,c.placeholder=r,c.title=i,c.value=dc(a),c.show()})}finally{c.dispose(),s==null||s.dispose()}}o(Ga,"getBranchNameWithPrompt");function dc(t){const e=l.workspace.getConfiguration("git"),n=e.get("branchPrefix","");if(!t&&e.get("branchRandomName.enable",!1)===!0){const r=fc();return`${n}${r}`}return`${n}${t!=null?t:""}`}o(dc,"generateBranchName");function fc(){const t=l.workspace.getConfiguration("git"),e=t.get("branchRandomName.dictionary",["adjectives","animals"]),n=[];for(const r of e)r.toLowerCase()==="adjectives"&&n.push(oc),r.toLowerCase()==="animals"&&n.push(sc),r.toLowerCase()==="colors"&&n.push(lc),r.toLowerCase()==="numbers"&&n.push(Bs.generate({length:3}));return n.length===0?"":ac({dictionaries:n,length:n.length,separator:t.get("branchWhitespaceChar","-")})}o(fc,"generateRandomBranchName");class $s{constructor(e){this.providerService=e,this.id="remoteHubVsCodeDevLink",this.label="Copy vscode.dev Link",this.priority=10,l.env.appHost!=="codespaces"&&l.env.appHost!=="github.dev"&&l.window.registerShareProvider!==void 0&&(this._shareProviderRegistration=l.window.registerShareProvider({scheme:k.scheme},this))}dispose(){var e;(e=this._shareProviderRegistration)==null||e.dispose()}async provideShare(e){var n;const r=this.providerService.getRepository(e.resourceUri);if(!r)return;const i=this.providerService.getRelativeFilePath(r.uri,e.resourceUri),a=await this.providerService.getMetadata(r.uri),s=((n=a.HEAD.branch)==null?void 0:n.name)===a.defaultBranch.name||a.pullRequest?await this.providerService.getBestRemoteUri(r.uri,zt.Branch,i,e):await this.providerService.getBestRemoteUri(r.uri,void 0,i,e);if(s!==void 0)return l.Uri.parse(`https://${Cr()}/${s.authority}${Y(s.path)}${s.fragment?`#${s.fragment}`:""}${s.query?`?${s.query}`:""}`)}}o($s,"RemoteHubShareProvider");class Gi extends l.TimelineItem{static is(e){return e instanceof Gi}constructor(e,n,r,i,{dateType:a,showAuthor:s,dateFormatter:c}){var u;const d=r.message.indexOf(`
`),f=d!==-1?`${r.message.substring(0,d)} \u2026`:r.message,h=a==="authored"?r.authorDate:r.commitDate;super(f,(u=h==null?void 0:h.getTime())!=null?u:0);this.id=r.hash,this.contextValue=`${k.scheme}:${n}:file:commit`,this.command=i,s&&(this.description=r.authorName),this.tooltip=hc(r,c,h),this.iconPath=new l.ThemeIcon("git-commit"),this.rootUri=e,this.providerId=n,this.hash=r.hash,this.parents=r.parents,this.message=r.message}}o(Gi,"CommitTimelineItem");function hc(t,e,n){return t.authorName&&t.authorEmail?l.l10n.t(`{0} ({1}) \u2014 {2}
{3}

{4}`,t.authorName,t.authorEmail,U(t.hash),e.format(n),t.message):t.authorName&&!t.authorEmail?l.l10n.t(`{0} \u2014 {1}
{2}

{3}`,t.authorName,U(t.hash),e.format(n),t.message):l.l10n.t(`{0}
{1}

{2}`,U(t.hash),e.format(n),t.message)}o(hc,"getCommitTooltip");class ha extends l.TimelineItem{static is(e){return e instanceof ha}constructor(e,n,r,i,a,{dateFormatter:s}){const c=l.l10n.t("Staged Changes");super(c,r.timestamp);this.id="index",this.contextValue=`${k.scheme}:${n}:file:${this.id}`,this.command=a,this.iconPath=new l.ThemeIcon("git-commit"),this.tooltip=l.l10n.t(`{0}  \u2014 {1}
{2}

{3}`,l.l10n.t("You"),l.l10n.t("Index"),s.format(new Date(r.timestamp)),Wl(r.type)),this.rootUri=e,this.providerId=n,this.hash="~",this.parents=i,this.message=c}}o(ha,"ChangeOperationTimelineItem");class Ks{constructor(e){this.providerService=e,this._onDidChange=new l.EventEmitter,this.id="github-file-history",this.label=l.l10n.t("GitHub File History"),this.debouncer=new Rn(500),this.disposable=l.Disposable.from(this.debouncer,e.onDidChangeProviders(this.onProvidersChanged,this),e.onDidChangeRepositories(this.onRepositoriesChanged,this),e.onDidChangeRepository(this.onRepositoryChanged,this),e.onDidRefresh(this.onRefresh,this),e.onDidChangeChangeStore(this.onUrisChanged,this),be.onDidChangeAny(this.onConfigurationChanged,this),...this.registerCommands()),e.hasProviders&&this.ensureProviderRegistration()}get onDidChange(){return this._onDidChange.event}dispose(){var e;(e=this.providerDisposable)==null||e.dispose(),this.disposable.dispose()}onConfigurationChanged(e){(e.affectsConfiguration("git.timeline.date")||e.affectsConfiguration("git.timeline.showAuthor"))&&this.fireChanged()}onProvidersChanged(e){this.ensureProviderRegistration(),this.fireChanged()}onRefresh(e){if(this.rootUri===void 0)return;const n=_(this.rootUri);!e.some(r=>_(r)===n)||this.fireChanged()}onRepositoriesChanged(e){if(this.rootUri===void 0)return;const n=_(this.rootUri);(e.added.some(r=>_(r.uri)===n)||e.removed.some(r=>_(r.uri)===n))&&this.fireChanged()}onRepositoryChanged(e){this.rootUri===void 0||_(this.rootUri)!==_(e.repository.uri)||this.fireChanged()}onUrisChanged(e){if(this.rootUri===void 0)return;const n=_(this.rootUri);e.some(r=>_(r.rootUri)===n)&&this.fireChanged()}async provideTimeline(e,n,r){var i,a;try{this.rootUri=this.providerService.getVirtualRootUri(e);for(const K of this.providerService.repositories)if(K.uri.path===this.rootUri.path){this.rootUri=K.uri;break}const s=this.providerService.getRelativeFilePath(this.rootUri,e),c=await this.providerService.getMetadata(this.rootUri);if(!c||r.isCancellationRequested)return{items:[]};const u=await this.providerService.getCommits(this.rootUri,{ref:c.HEAD.sha,path:s||void 0,cursor:n.cursor,limit:typeof n.limit=="number"?n.limit:void 0});if(u===void 0||u.commits.length===0||r.isCancellationRequested)return{items:[]};const d=u.commits,f=((i=u.paging)==null?void 0:i.more)?{cursor:u.paging.cursor}:void 0;if((a=u.paging)==null?void 0:a.more){const K=await this.providerService.getCommits(this.rootUri,{ref:c.HEAD.sha,path:s||void 0,cursor:u.paging.cursor,limit:1});K&&d.push(...K.commits)}const h=new Intl.DateTimeFormat(l.env.language,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),p=be.getAny("git.timeline.date",void 0,"committed"),b=be.getAny("git.timeline.showAuthor",void 0,!0),Z=[];for(let K=0;K<d.length;K++){const me=d[K],re=K<d.length-1?d[K+1]:void 0;if(Z.push(new Gi(this.rootUri,c.provider.id,me,this.resolveDiffCommand(me,re,c,e,s),{dateType:p,showAuthor:b,dateFormatter:h})),typeof n.limit=="number"&&Z.length===n.limit)break}const E=n.cursor===void 0?await this.providerService.changeStoreGetChange(e):void 0;if(E&&Boolean(E.staged&&be.get("staging.enabled"))){const me=new ha(this.rootUri,c.provider.id,E,[u.commits[0].hash],await this.providerService.changeStoreResolveDiffCommand(E.uri,k.getProviderUri(E.uri),l.l10n.t("{0} (Index)",J(E.uri))),{dateFormatter:h});Z.splice(0,0,me)}return{items:Z,paging:f}}catch(s){return j.error(s),{items:[]}}}ensureProviderRegistration(){this.providerDisposable===void 0&&(this.providerDisposable=l.workspace.registerTimelineProvider([$n.scheme,...this.providerService.registeredProviders.map(e=>e.id)],this))}fireChanged(){this.debouncer.debounce(()=>this._onDidChange.fire(void 0))}registerCommands(){let e;return[l.commands.registerCommand("remoteHub.timeline.copyCommitId",(n,r,i)=>{!Gi.is(n)||l.env.clipboard.writeText(n.hash)}),l.commands.registerCommand("remoteHub.timeline.copyCommitMessage",(n,r,i)=>{!Gi.is(n)||l.env.clipboard.writeText(n.message)}),l.commands.registerCommand("remoteHub.timeline.openDiff",async(n,r,i)=>{var a;!Gi.is(n)&&!ha.is(n)||n.command!==void 0&&await l.commands.executeCommand(n.command.command,...(a=n.command.arguments)!=null?a:[])}),l.commands.registerCommand("remoteHub.timeline.openOnGitHub",async n=>{await this.openOnRemote(n)}),l.commands.registerCommand("remoteHub.timeline.openOnAzureRepos",async n=>{await this.openOnRemote(n)}),l.commands.registerCommand("remoteHub.timeline.selectForCompare",async(n,r,i)=>{!r||!Gi.is(n)&&!ha.is(n)||(e={uri:r,left:n},await l.commands.executeCommand("setContext","remoteHub.timeline.selectedForCompare",!0))}),l.commands.registerCommand("remoteHub.timeline.compareWithSelected",async(n,r,i)=>{if(!r||!e||!Gi.is(n)&&!ha.is(n)||_(r)!==_(e.uri))return;const{left:a}=e,s=this.providerService.getRelativeFilePath(n.rootUri,r),c=await this.providerService.getMetadata(n.rootUri),u=J(r),d=a.parents[0];let f;d===void 0?f=l.l10n.t("{0} ({1})",u,U(n.hash)):a.hash===""?f=l.l10n.t("{0} (Working Tree)",u):a.hash==="~"?f=l.l10n.t("{0} (Index)",u):f=l.l10n.t("{0} ({1})",u,U(a.hash));let h=a.hash===""||a.hash==="~"?r:this.providerService.createProviderUri(r,{repo:c.repo,ref:{type:fe.Commit,id:d!=null?d:"0000000000000000000000000000000000000000"}},s);d===void 0&&(h=h.with({query:"~"}));const p=n.parents[0];let b;p===void 0?b=l.l10n.t("{0} ({1})",u,U(n.hash)):p==="~"&&n.hash===""?b=l.l10n.t("{0} (Working Tree)",u):n.hash==="~"?b=l.l10n.t("{0} (Index)",u):b=l.l10n.t("{0} ({1})",u,U(n.hash));const Z=l.l10n.t("{0} \u27F7 {1}",f,b),E=n.hash===""||n.hash==="~"?r:this.providerService.createProviderUri(r,{repo:c.repo,ref:{type:fe.Commit,id:n.hash}},s);await l.commands.executeCommand("vscode.diff",h,E,Z)})]}resolveDiffCommand(e,n,r,i,a,s){var c;const u=J(i);let d=this.providerService.createProviderUri(i,{repo:r.repo,ref:{type:fe.Commit,id:(c=n==null?void 0:n.hash)!=null?c:"0000000000000000000000000000000000000000"}},a),f;n===void 0?f=l.l10n.t("{0} ({1})",u,U(e.hash)):e.hash===""?f=l.l10n.t("{0} (Working Tree)",u):e.hash==="~"?f=l.l10n.t("{0} (Index)",u):f=l.l10n.t("{0} ({1}) \u27F7  {0} ({2})",u,U(n.hash),U(e.hash)),n===void 0&&(d=d.with({query:"~"}));const h=e.hash===""||e.hash==="~"?i:this.providerService.createProviderUri(i,{repo:r.repo,ref:{type:fe.Commit,id:e.hash}},a);return{command:"vscode.diff",title:"Open Comparison",arguments:[d,h,f,s]}}async openOnRemote(e){if(!Gi.is(e))return;const n=await this.providerService.getMetadata(e.rootUri);await oi("remoteHub.openOnRemote",{provider:n.provider,repo:n.repo,sha:e.hash})}}o(Ks,"VirtualTimelineProvider");class Gs{constructor(e,n){this.providerService=e,this.telemetryService=n,this.disposable=l.window.registerUriHandler(this)}dispose(){this.disposable.dispose()}async handleUri(e){var n;const r=new Be(`RemoteUriHandler.handleUri(${e.path}, ${e.toString()})`);await Ur(this.providerService,void 0);try{switch(e.path){case"/open":{this.telemetryService.publicLog2("handleUri.open");let i,a;for(const c of e.query.split("&")){const[u,d]=c.split("=");switch(u){case"url":i=decodeURIComponent(d);break;case"location":a=d===He.CurrentWindow?He.CurrentWindow:He.NewWindow;break}}if(!i){r.log({message:": Unable to find url parameter"}),this.telemetryService.publicLog2("handleUri.open.abort",{reason:"aborted url not found"});return}i=i.trim(),a=a!=null?a:He.NewWindow;const s=await this.providerService.createWorkspaceForRemoteUrl(i,void 0,a);if(!s){r.log({message:`: Unable to open workspace for ${i}`}),this.telemetryService.publicLog2("handleUri.open.abort",{reason:"aborted invalid url"});const c=l.l10n.t("Show Extensions");l.window.showErrorMessage(l.l10n.t(`Unable to open {0}.
You may need to install or enable additional extensions.`,i),c).then(u=>{u===c&&l.commands.executeCommand("workbench.view.extensions",`${Jo.join(" ")}`)});return}r.log({message:`: Opening ${i} in ${a}`}),ut(this.providerService,s);break}case"/open-files":{let i;for(const s of e.query.split("&")){const[c,u]=s.split("=");if(c==="url"){i=decodeURIComponent(u);break}}if(!i){r.log({message:": Unable to find url parameter"});return}i=i.trim();const a=await this.providerService.createWorkspaceForRemoteUrl(i);if(!a){r.log({message:`: Unable to open files/folders for ${i}`});return}a.filesToOpen?(r.log({message:`: Opening files/folders for ${i}`}),await((n=So())==null?void 0:n.openPendingFiles(a.uri,a.filesToOpen))):r.log({message:`: No files/folders found to open for ${i}`});break}default:{r.log({message:`: Unknown Uri ${e.toString()}`});break}}}finally{r.stop()}}}o(Gs,"RemoteUriHandler");var gc=Object.defineProperty,vc=Object.getOwnPropertyDescriptor,pc=o((t,e,n,r)=>{for(var i=r>1?void 0:r?vc(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&gc(e,n,i),i},"view_decorateClass"),ba;(function(t){t.Change="remoteHub:viewItem:change",t.WorkspaceRepository="remoteHub:viewItem:workspaceRepository",t.WorkspaceRepositories="remoteHub:viewItem:workspaceRepositories",t.Message="remoteHub:viewItem:message"})(ba||(ba={}));const zs=o(class{constructor(t,e){this.view=t,this.parent=e,this.splatted=!1}static is(t){return t instanceof zs}get id(){}toString(){return`${j.toLoggableName(this)}${this.id!==void 0?`(${this.id})`:""}`}getParent(){var t,e;return((t=this.parent)==null?void 0:t.splatted)?(e=this.parent)==null?void 0:e.getParent():this.parent}triggerChange(t=!1,e=!1,n){return this.splatted&&this.parent!==void 0&&this.parent!==n?this.parent.triggerChange(t,e):this.view.refreshNode(this,t,e)}},"_ViewNode");let _a=zs;pc([Et((t=!1,e=!1,n)=>JSON.stringify([t,e,n==null?void 0:n.toString()]))],_a.prototype,"triggerChange",1);class Vs{constructor(e,n,r,i){this.id=e,this.name=n,this.providerService=r,this.telemetryService=i,this._onDidChangeTreeData=new l.EventEmitter,this.disposables=[];const a=!1;if(j.isDebugging&&a){const s=this.getTreeItem;this.getTreeItem=async function(c){var u;const d=await s.apply(this,[c]),f=c.getParent();return d.tooltip===void 0&&(d.tooltip=new l.MarkdownString(d.label!==void 0&&typeof d.label!="string"?d.label.label:(u=d.label)!=null?u:"")),typeof d.tooltip=="string"?d.tooltip=`${d.tooltip}

---
context: ${d.contextValue}
node: ${c.toString()}${f!==void 0?`
parent: ${f.toString()}`:""}`:d.tooltip.appendMarkdown(`

---

context: \`${d.contextValue}\`\\
node: \`${c.toString()}\`${f!==void 0?`\\
parent: \`${f.toString()}\``:""}`),d}}this.disposables.push(...this.registerCommands()),this.initialize({showCollapseAll:this.showCollapseAll}),setTimeout(()=>this.onConfigurationChanged(),0)}get onDidChangeTreeData(){return this._onDidChangeTreeData.event}get showCollapseAll(){return!0}filterConfigurationChanged(e){return!!be.changed(e,`views.${this.configKey}`)}dispose(){l.Disposable.from(...this.disposables).dispose()}get title(){return this._title}set title(e){this._title=e,this.tree!==void 0&&(this.tree.title=e)}get description(){return this._description}set description(e){this._description=e,this.tree!==void 0&&(this.tree.description=e)}get message(){return this._message}set message(e){this._message=e,this.tree!==void 0&&(this.tree.message=e)}getQualifiedCommand(e){return`${this.id}.${e}`}onConfigurationChanged(e){e!==void 0&&this.root!==void 0&&this.refresh(!0)}initialize(e={}){this.tree=l.window.createTreeView(this.id,{...e,treeDataProvider:this}),this.disposables.push(be.onDidChange(n=>{!this.filterConfigurationChanged(n)||(this._config=void 0,this.onConfigurationChanged(n))},this),this.tree),this._title=this.tree.title}ensureRoot(e=!1){return(this.root===void 0||e)&&(this.telemetryService.publicLog2("view.open",{view:this.id}),this.root=this.getRoot()),this.root}async getChildren(e){return e!==void 0?e.getChildren():(await Ur(this.providerService,void 0),this.ensureRoot().getChildren())}getParent(e){return e.getParent()}getTreeItem(e){return e.getTreeItem()}get selection(){return this.tree===void 0||this.root===void 0?[]:[...this.tree.selection]}get visible(){return this.tree!==void 0?this.tree.visible:!1}async refresh(e=!1){var n,r;await((r=(n=this.root)==null?void 0:n.refresh)==null?void 0:r.call(n,e)),this.triggerNodeChange()}async refreshNode(e,n=!1,r=!1){var i;const a=await((i=e.refresh)==null?void 0:i.call(e,n));!r&&a===!0||this.triggerNodeChange(e)}async reveal(e,n){if(this.tree!==void 0)try{await this.tree.reveal(e,n)}catch(r){j.error(r)}}async show(){try{await l.commands.executeCommand(`${this.id}.focus`)}catch(e){j.error(e)}}triggerNodeChange(e){this._onDidChangeTreeData.fire(e!==void 0&&e!==this.root?e:void 0)}get config(){return this._config===void 0&&(this._config=be.get("views")[this.configKey]),this._config}}o(Vs,"View");class Js extends _a{constructor(e,n,r,i,a,s,c){super(e,n);this._message=r,this._description=i,this._tooltip=a,this._iconPath=s,this._contextValue=c}getChildren(){return[]}getTreeItem(){var e;const n=new l.TreeItem(this._message,l.TreeItemCollapsibleState.None);return n.contextValue=(e=this._contextValue)!=null?e:ba.Message,n.description=this._description,n.tooltip=this._tooltip,n.iconPath=this._iconPath,n}}o(Js,"MessageNode");var mc=Object.defineProperty,yc=Object.getOwnPropertyDescriptor,Go=o((t,e,n,r)=>{for(var i=r>1?void 0:r?yc(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&mc(e,n,i),i},"workspaceRepositoriesView_decorateClass");const js=o(class extends _a{constructor(t,e,n,r,i,a,s){super(t,e);this.changeStore=n,this.canonical=r,this.workspaceRepository=i,this.operation=a,this.canApplyChanges=s}static getId(t,e,n){return`${za.getId(t,e)}:${this.key}(${n.uri.toString()})`}get id(){return js.getId(this.canonical.uri,this.workspaceRepository,this.operation)}getChildren(){return[]}async getTreeItem(){const t=this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri),e=new l.TreeItem(t,l.TreeItemCollapsibleState.None);return e.id=this.id,e.contextValue=`${ba.Change}${this.canApplyChanges?"+apply":""}`,e.resourceUri=this.view.providerService.getChangeStore(this.operation.uri).getScopedUri(this.operation.uri,this.workspaceRepository),e.command=await this.getDiffCommand(t,!0),e}async getDiffCommand(t,e=!1){if(e||this._command===void 0){const n=Boolean(this.operation.staged&&be.get("staging.enabled"));if(this.workspaceRepository.workspaceId===this.view.workspaceId){const r=k.getProviderUri(this.operation.uri);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,r,n?l.l10n.t("{0} (Index)",J(this.operation.uri),this.workspaceRepository.ref.name):l.l10n.t("{0} (Working Tree)",J(this.operation.uri),this.workspaceRepository.ref.name))}else{const{repo:r}=this.view.providerService.getVirtualUriMetadata(this.workspaceRepository.uri),i=this.view.providerService.createProviderUri(this.operation.uri,{repo:r,ref:{type:fe.Commit,id:this.operation.revision}},t);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,i,n?l.l10n.t("{0} (Index of {1})",J(this.operation.uri),this.workspaceRepository.ref.name):l.l10n.t("{0} (Working Tree of {1})",J(this.operation.uri),this.workspaceRepository.ref.name))}}return this._command}async openChanges(){var t;const e=await this.getDiffCommand(this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri));await l.commands.executeCommand(e.command,...(t=e.arguments)!=null?t:[])}async openFile(){const t=this.view.providerService.getChangeStore(this.operation.uri).getScopedUri(this.operation.uri,this.workspaceRepository.workspaceId);await l.window.showTextDocument(t)}async applyChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.providerService.getChangeStore(t.uri).applyChangeset(t.uri,this.workspaceRepository,this.operation)}catch(e){l.window.showErrorMessage(String(e))}}},"_FileChangeNode");let Ys=js;Ys.key=":changes";const qs=o(class extends _a{constructor(t,e,n,r,i){super(t,e);this.canonical=n,this.workspaceRepository=r,this.root=i}static getId(t,e){return`${yo.getId(t)}:${this.key}(${e.workspaceId}/${e.uri.toString()})`}get id(){return qs.getId(this.canonical.uri,this.workspaceRepository)}get name(){return this.workspaceRepository.name}get uri(){return this.workspaceRepository.uri}canApplyChanges(){if(!this.canonical.hasActive||l.workspace.getWorkspaceFolder(this.workspaceRepository.uri)!==void 0)return!1;const{changes:e}=this.workspaceRepository;return e!==void 0&&(e.added!==0||e.changed!==0||e.deleted!==0)}async getChildren(){if(this._children===void 0){const t=this.view.providerService.getChangeStore(this.workspaceRepository.uri).getScopedChangeStore(this.workspaceRepository),e=await t.getChanges(this.workspaceRepository.uri);this._children=e.map(n=>new Ys(this.view,this,t,this.canonical,this.workspaceRepository,n,this.canApplyChanges()))}return this._children}getTreeItem(){const t=this.workspaceRepository.workspaceId===this.view.workspaceId,e=nr(this.workspaceRepository),n=$n.isCanonicalUri(this.workspaceRepository.uri)?l.l10n.t("{0} (default)",this.workspaceRepository.ref.name):this.workspaceRepository.ref.name,r=new l.TreeItem(this.root?this.canonical.name:n,e?l.TreeItemCollapsibleState.Collapsed:l.TreeItemCollapsibleState.None);return r.id=this.id,r.contextValue=`${ba.WorkspaceRepository}${t?"+active":""}${this.canApplyChanges()?"+apply":""}`,r.description=`${this.root?`${this.workspaceRepository.ref.name}\xA0\xA0\u2022\xA0\xA0`:""}${er(this.workspaceRepository.timestamp,{ago:!0})}`,r.iconPath=t?new l.ThemeIcon("check"):this.root?Zs(this.canonical.provider.id):ea(this.workspaceRepository.ref.type,this.workspaceRepository.pullRequest),r.tooltip=new l.MarkdownString(void 0,!0).appendMarkdown(l.l10n.t(`{0}{1}\\
{2} {3} {4}{5}\\
Last accessed {6}

{7}
`,this.canonical.name,this.workspaceRepository.pullRequest?l.l10n.t(`\\
Pull request {0} #{1}`,"$(git-pull-request)",this.workspaceRepository.pullRequest.id):"",wc(this.workspaceRepository.ref.type),Pi(this.workspaceRepository.ref.type),n,t?` \u2014 _${l.l10n.t("Active")}_ `:"",er(this.workspaceRepository.timestamp,{ago:!0}),dr(this.workspaceRepository.ref.type,this.workspaceRepository.changes,{preamble:`${l.l10n.t("Has Uncommitted Changes")}\\
`}))),e&&(r.resourceUri=l.Uri.parse("remotehub-view://wsrepo/changes")),r}refresh(t=!1){t&&(this._children=void 0)}async applyAllChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.providerService.getChangeStore(t.uri).applyChangeset(t.uri,this.workspaceRepository)}catch(e){l.window.showErrorMessage(String(e))}}remove(){return this.view.providerService.workspaceRepositoriesRemoveRepository(this.workspaceRepository)}},"_WorkspaceRepositoryNode");let za=qs;za.key=":wsrepo",Go([Et()],za.prototype,"refresh",1);const Qs=o(class extends _a{constructor(t,e,n,r){super(t,e);this.canonical=n,this.workspaceRepositories=r}static getId(t){return`remoteHub${this.key}(${t.toString()})`}get id(){return Qs.getId(this.canonical.uri)}get name(){return this.canonical.name}get uri(){return this.canonical.uri}getChildren(){if(this.children===void 0){const t=this.workspaceRepositories;if(t.length===0)return this.view.message=void 0,[new Js(this.view,this,l.l10n.t("No remote repositories could be found."))];this.view.message=void 0,this.children=t.map(e=>new za(this.view,this,this.canonical,e,!1))}return this.children}getTreeItem(){const t=this.workspaceRepositories.some(n=>n.workspaceId===this.view.workspaceId),e=new l.TreeItem(this.canonical.name,t?l.TreeItemCollapsibleState.Expanded:l.TreeItemCollapsibleState.Collapsed);return e.contextValue=ba.WorkspaceRepositories,e.iconPath=Zs(this.canonical.provider.id),e}refresh(t=!1){t&&(this.children=void 0)}},"_CanonicalWorkspaceRepositoryNode");let yo=Qs;yo.key=":wsrepos",Go([Et()],yo.prototype,"refresh",1);class zo extends _a{constructor(e){super(e);this.splatted=!0}async getChildren(){if(this.children===void 0){const e=await this.view.providerService.workspaceRepositoriesGetRepositoriesByCanonicalUri();if(e.size===0)return[];this.view.message=void 0;const n=[];for(const[r,i]of e){const a=l.Uri.parse(r);try{const{name:s,provider:c}=this.view.providerService.getVirtualUriMetadata(a),u={uri:a,name:s,provider:c,hasActive:i.some(d=>d.workspaceId===this.view.workspaceId)};i.length===1?n.push(new za(this.view,this,u,i[0],!0)):n.push(new yo(this.view,this,u,i))}catch(s){if(s instanceof fn)continue;j.error(s)}}this.children=n}return this.children}getTreeItem(){return new l.TreeItem("Repositories",l.TreeItemCollapsibleState.Expanded)}refresh(e=!1){e&&(this.children=void 0)}}o(zo,"WorkspaceRepositoriesViewNode"),Go([Et()],zo.prototype,"refresh",1);class Xs extends Vs{constructor(e,n,r){super("remoteHub.views.workspaceRepositories",l.l10n.t("Remote Repositories"),e,r);this.workspaceId=n,this.configKey="workspaceRepositories",this.disposables.push(this.providerService.onDidChangeWorkspaceRepositories(this.onRepositoriesChanged,this),l.window.registerFileDecorationProvider({provideFileDecoration:(i,a)=>{if(!(i.scheme!=="remotehub-view"||i.authority!=="wsrepo"||!i.path.includes("/changes")))return{badge:"\u25CF",color:new l.ThemeColor("remoteHub.decorations.workspaceRepositoriesView.hasUncommittedChangesForegroundColor"),tooltip:l.l10n.t("Has Uncommitted Changes")}}}))}getRoot(){return new zo(this)}onRepositoriesChanged(){this.refresh(!0)}registerCommands(){return[l.commands.registerCommand(this.getQualifiedCommand("refresh"),()=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.refresh"),this.providerService.workspaceRepositoriesRefresh(),void this.refresh(!0)),this),l.commands.registerCommand(this.getQualifiedCommand("open"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.open"),ut(this.providerService,{name:e.name,uri:e.uri,location:He.CurrentWindow})),this),l.commands.registerCommand(this.getQualifiedCommand("openInNewWindow"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openInNewWindow"),ut(this.providerService,{name:e.name,uri:e.uri,location:He.NewWindow})),this),l.commands.registerCommand(this.getQualifiedCommand("copyVscodeDevLink"),async e=>{const n=await Wr(this.providerService,void 0,e.uri);n&&l.env.clipboard.writeText(n.toString(!0))},this),l.commands.registerCommand(this.getQualifiedCommand("applyAllChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.applyAllChanges"),e.applyAllChanges()),this),l.commands.registerCommand(this.getQualifiedCommand("remove"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.remove"),e.remove()),this),l.commands.registerCommand(this.getQualifiedCommand("openChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openChanges"),e.openChanges()),this),l.commands.registerCommand(this.getQualifiedCommand("openFile"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openFile"),e.openFile()),this),l.commands.registerCommand(this.getQualifiedCommand("applyChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.applyChanges"),e.applyChanges()),this)]}async getRepositoryToApplyChangesetTo(e){const n=_(this.providerService.getVirtualCanonicalRootUri(e.uri)),r=this.providerService.repositories.filter(a=>_(a.canonicalUri)===n);return await Sc(r,l.l10n.t("Choose a repository to apply the changeset to"))}}o(Xs,"WorkspaceRepositoriesView");function wc(t,e){switch(t){case G.Branch:return e?l.l10n.t("Pull Request #{0}",e.id):l.l10n.t("Branch");case G.RemoteBranch:return e?l.l10n.t("Pull Request #{0}",e.id):l.l10n.t("Remote Branch");case G.Tag:return l.l10n.t("Tag");case G.Commit:return l.l10n.t("Commit")}}o(wc,"headTypeToString");function Zs(t){switch(t){case"github":return new l.ThemeIcon("github");case"azurerepos":return new l.ThemeIcon("azure-devops");default:return new l.ThemeIcon("vm")}}o(Zs,"providerToIconPath");async function Sc(t,e){if(t.length!==0){if(t.length>1){const n=await l.window.showQuickPick(t.map(r=>({label:r.name,description:r.provider.name,repository:r})),{placeHolder:e});return n?n.repository:void 0}return t[0]}}o(Sc,"getRepository");let wo;function So(){return wo}o(So,"getOpenActionsService");var ga;(function(t){t.HasCommitted="has:committed",t.Version="version"})(ga||(ga={}));let Co;function el(t){return Co.globalState.get(t)}o(el,"getState");async function Vo(t,e){return Co.globalState.update(t,e)}o(Vo,"updateState");let tl=!1;function Cc(){return tl}o(Cc,"isPreRelease");async function bc(t){Co=t,Qe.configure("remoteHub",t),j.configure(t,"Remote Repositories"),Be.start("Time to root directory",{log:!1});const e=$t.configure(t),n=new lr(t),r=t.extension.packageJSON.version;await Vo(ga.Version,r),await t.workspaceState.update(ga.Version,r);const[,i]=Co.extension.packageJSON.version.split(".");tl=Number.parseInt(i)%2==1;try{const a=new $n(n,t.workspaceState);wo=new Sa(a);const s=new Fs(a),c=new Hs(a,wo,n,s),u=new ka(a);if(typeof l.workspace.registerEditSessionIdentityProvider!==void 0&&t.subscriptions.push(l.workspace.registerEditSessionIdentityProvider(k.scheme,new Wi(a))),typeof l.workspace.registerCanonicalUriProvider!==void 0&&!l.extensions.getExtension("vscode.git")){const d=new _t(a);try{t.subscriptions.push(..._t.SupportedSchemes.map(f=>l.workspace.registerCanonicalUriProvider(f,d)))}catch{}}return t.subscriptions.push(a.onDidChangeRepositories(async d=>{for(const f of d.added)try{const h=await f.getMetadata(),{HEAD:p,defaultBranch:b,name:Z,provider:E,pullRequest:K}=h,me=p.name.replace(/\//g,"\u2009\u2215\u2009");let re=" ";if(K!==void 0)re=` (PR ${K.id}) `;else if(p.type===G.Tag)re=` (${me}) `;else if(p.type===G.Commit)re=` (${me}) `;else if(p.type===G.Branch||p.type===G.RemoteBranch){const Le=p.branch.name.replace(/\//g,"\u2009\u2215\u2009");p.branch.name!==b.name&&(re=` (${Le}) `)}const De={uri:f.uri,type:"folder",label:`${Z}${re}[${E.name}]`};l.commands.executeCommand("_workbench.addToRecentlyOpened",De)}catch(h){j.error(h,"Failed to add repository to recently opened")}}),new bs(a,s),new qi(a),new Gs(a,n),...hi(a,t.extension.id,n),...Rc(a,n),...await _c(a,c,t,n),new Ks(a),new $s(a),new Xs(a,e,n),c,wo,a,n),n.publicLog2("activate"),Promise.resolve(u)}catch(a){throw j.error(a),T(t,a),a}}o(bc,"activate");async function _c(t,e,n,r){const i=[];if(nl()){const a=new Xe(t,r);t.registerVirtualIndexProvider("github",a),t.registerVirtualIndexProvider("azurerepos",a),i.push(a)}return i.push(Ac(t,e),Ec(e),Dc(e)),i}o(_c,"registerProviders");function Ec(t){async function e(){let r=l.extensions.getExtension("ms-azuretools.vscode-azurestaticwebapps");r||await new Promise(a=>{const s=l.extensions.onDidChange(()=>{r=l.extensions.getExtension("ms-azuretools.vscode-azurestaticwebapps"),r&&(s.dispose(),a())})});const i=await r.activate();if(!(!i||typeof i.registerGitProvider!="function"))return i.registerGitProvider(t)}o(e,"registerWithStaticWebApps");const n=e();return l.Disposable.from({dispose:async()=>{var r;return void((r=await n)==null?void 0:r.dispose())}})}o(Ec,"registerStaticWebApps");function Ac(t,e){async function n(){var i;try{let a=(i=l.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?i:l.extensions.getExtension("GitHub.vscode-pull-request-github-insiders");a||(j.log("[ GHPR] Not currently installed or enabled; waiting..."),await new Promise(h=>{const p=l.extensions.onDidChange(()=>{var b;a=(b=l.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?b:l.extensions.getExtension("GitHub.vscode-pull-request-github-insiders"),a&&(p.dispose(),h())})})),j.log("[ GHPR] Registering..."),Gn(nn.HasPullRequestExtension,!0);const s=await a.activate();if(!s)throw new Error("Unable to get registration api");const c=s.registerGitProvider(e),u=t.onDidChangeRepositories(h=>d(h));async function d(h){const p=h.added.filter(b=>b.provider.id==="github");if(p.length!==0){j.log("[ GHPR] Checking for opened PRs...");for(const b of p){const Z=await t.getBestRemoteUri(b.uri,zt.PullRequest);if(!!Z){u.dispose(),j.log("[ GHPR] Opened PR found; preloading"),l.commands.executeCommand("github.api.preloadPullRequest",Z.toString());return}}j.log("[ GHPR] No opened PRs found")}}o(d,"onRepositoriesChanged"),j.log("[ GHPR] Registration complete");const f=t.repositories;return f.length&&d({added:f,removed:[]}),l.Disposable.from(c,u)}catch(a){return j.error(a,"[ GHPR] Registration failed;"),{dispose:()=>{}}}}o(n,"registerWithGHPR");const r=n();return l.Disposable.from({dispose:async()=>{var i;return void((i=await r)==null?void 0:i.dispose())}})}o(Ac,"registerGitHub");function Dc(t){async function e(){try{let r=l.extensions.getExtension("ms-edu.vscode-learning");r||(j.log("[ VSCodeEdu ] Not currently installed or enabled; waiting..."),await new Promise(s=>{const c=l.extensions.onDidChange(()=>{r=l.extensions.getExtension("ms-edu.vscode-learning"),r&&(c.dispose(),s())})})),j.log("[ VSCodeEdu ] Registering...");const i=await r.activate();if(!i||typeof i.registerGitProvider!="function"){j.error("[ VSCodeEdu ] Unable to get registration api");return}const a=i.registerGitProvider(t);return j.log("[ VSCodeEdu ] Registration complete"),a}catch(r){return j.error(r,"[ VSCodeEdu ] Registration failed;"),{dispose:()=>{}}}}o(e,"registerWithVSCodeEdu");const n=e();return l.Disposable.from({dispose:async()=>{var r;return void((r=await n)==null?void 0:r.dispose())}})}o(Dc,"registerVSCodeEdu");function Rc(t,e){if(!nl())return[];e.publicLog2("codex.enableRichNav",{});const n=new Tt(t);return[n,n.register(new Ct(e)),...Ct.createStatus()]}o(Rc,"registerNavigationServiceProviders");function nl(){return!1}o(nl,"isRichNavEnabled");const Jo=["github.remotehub","ms-vscode.azure-repos"],jo=new Map,Yo=new Map;async function Ur(t,e){var n,r,i;if(e!==void 0&&typeof e!="string"&&(e=$n.getProviderId(e)),e&&Yo.has(e)){const a=Yo.get(e);if(!a)return;await jo.get(a);return}for(const a of l.extensions.all){const s=a.id,{contributes:c}=a.packageJSON;if(!c||!Jo.includes(s.toLowerCase()))continue;const u=jo.get(s),d=(r=(n=c.virtualWorkspaces)==null?void 0:n.providers)!=null?r:[],f=d.find(p=>p===e)!==void 0,h=d.length&&e===void 0;if(!u&&(h||f)){const p=(i=l.extensions.getExtension(s))==null?void 0:i.activate().then(b=>b.registerVirtualProviderService(t));if(p===void 0)return;jo.set(s,p);for(const b of d)Yo.set(b,s);if(await p,e!==void 0&&f)return}else u&&await u}}o(Ur,"ensureProvidersRegistered")})(),module.exports=Eo})();
